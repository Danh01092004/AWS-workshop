[
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.01-workshop-overview/",
	"title": "Tá»•ng quan Workshop",
	"tags": [],
	"description": "",
	"content": "Kiáº¿n trÃºc EveryoneCook EveryoneCook lÃ  má»™t ná»n táº£ng máº¡ng xÃ£ há»™i náº¥u Äƒn hiá»‡n Ä‘áº¡i Ä‘Æ°á»£c xÃ¢y dá»±ng hoÃ n toÃ n trÃªn cÃ´ng nghá»‡ serverless cá»§a AWS. Kiáº¿n trÃºc tuÃ¢n theo cÃ¡c best practices vá» kháº£ nÄƒng má»Ÿ rá»™ng, báº£o máº­t vÃ  tá»‘i Æ°u chi phÃ­, vá»›i trá»ng tÃ¢m lÃ  há»— trá»£ nguyÃªn liá»‡u tiáº¿ng Viá»‡t vÃ  Ä‘á» xuáº¥t cÃ´ng thá»©c náº¥u Äƒn báº±ng AI.\nCÃ¡c thÃ nh pháº§n chÃ­nh Frontend: á»¨ng dá»¥ng Next.js 15 vá»›i Flowbite React components Ä‘Æ°á»£c host trÃªn AWS Amplify Backend: API serverless sá»­ dá»¥ng API Gateway vá»›i mÃ´ hÃ¬nh API Router vÃ  6 Lambda modules Database: DynamoDB Single Table Design vá»›i username-based PK vÃ  5 GSI indexes Storage: S3 buckets vá»›i Intelligent-Tiering vÃ  CloudFront CDN vá»›i OAC Authentication: Cognito User Pool vá»›i Lambda triggers cho custom flows AI Integration: Amazon Bedrock (Claude 3 Haiku - anthropic.claude-3-haiku-20240307-v1:0) cho dá»‹ch nguyÃªn liá»‡u, tra cá»©u dinh dÆ°á»¡ng vÃ  táº¡o cÃ´ng thá»©c Security: WAF cho API Gateway, Shield Standard cho CloudFront, KMS encryption Monitoring: CloudWatch dashboards, alarms, vÃ  X-Ray distributed tracing SÆ¡ Ä‘á»“ kiáº¿n trÃºc Quy trÃ¬nh Workshop Workshop nÃ y tuÃ¢n theo quy trÃ¬nh phÃ¡t triá»ƒn á»©ng dá»¥ng thá»±c táº¿:\nThiáº¿t láº­p MÃ´i trÆ°á»ng - CÃ i Ä‘áº·t cÃ´ng cá»¥ (Node.js, AWS CLI, CDK CLI) CDK Bootstrap - Chuáº©n bá»‹ AWS account cho CDK deployments Cáº¥u hÃ¬nh Stacks - Thiáº¿t láº­p cáº¥u hÃ¬nh háº¡ táº§ng (DNS, Certificate, Core, Auth, Backend, Observability) Triá»ƒn khai Infrastructure - Deploy táº¥t cáº£ CDK stacks lÃªn AWS Cáº¥u hÃ¬nh API \u0026amp; Lambda - Thiáº¿t láº­p API Gateway routes vÃ  Lambda functions Triá»ƒn khai Backend - Deploy API vÃ  Lambda code Kiá»ƒm tra Endpoints - XÃ¡c minh táº¥t cáº£ endpoints hoáº¡t Ä‘á»™ng end-to-end Push lÃªn GitLab - Version control vÃ  thiáº¿t láº­p CI/CD Triá»ƒn khai lÃªn Amplify - Deploy frontend lÃªn AWS Amplify GiÃ¡m sÃ¡t \u0026amp; Báº£o trÃ¬ - Sá»­ dá»¥ng CloudWatch vÃ  X-Ray Ä‘á»ƒ monitoring Nhá»¯ng gÃ¬ báº¡n sáº½ há»c Infrastructure as Code vá»›i AWS CDK (TypeScript) Kiáº¿n trÃºc serverless vá»›i mÃ´ hÃ¬nh API Router DynamoDB Single Table Design vá»›i PROVISIONED billing mode CloudFront CDN vá»›i Origin Access Control (OAC) - PriceClass 200 Cognito authentication vá»›i Lambda triggers Tá»• chá»©c Lambda function theo modules (6 modules: API Router, Auth/User, Social, Recipe/AI, Admin, Upload) Xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™ vá»›i SQS (4 queues vÃ  workers) TÃ­ch há»£p Bedrock AI (Claude 3 Haiku) vá»›i chiáº¿n lÆ°á»£c dictionary-first caching WAF security cho API Gateway (REGIONAL scope) CloudWatch monitoring vá»›i structured logging (X-Ray disabled Ä‘á»ƒ tá»‘i Æ°u chi phÃ­) Chiáº¿n lÆ°á»£c tá»‘i Æ°u chi phÃ­ cho low-traffic scenarios Æ¯á»›c tÃ­nh chi phÃ­ thá»±c táº¿ (Low Traffic Scenarios) Ká»‹ch báº£n 1: 100-500 Active Users/Day (2 giá» sá»­ dá»¥ng)\nMonthly Active Users: ~3,000-15,000 Daily Requests: ~5,000-25,000 API calls Æ¯á»›c tÃ­nh Chi phÃ­ ThÃ¡ng: $12-18/thÃ¡ng ($0.40-0.60/ngÃ y) Ká»‹ch báº£n 2: 1,000 Active Users/Day (2 giá» sá»­ dá»¥ng)\nMonthly Active Users: ~30,000 Daily Requests: ~50,000 API calls Æ¯á»›c tÃ­nh Chi phÃ­ ThÃ¡ng: $25-35/thÃ¡ng ($0.83-1.17/ngÃ y) CÃ¡c yáº¿u tá»‘ chi phÃ­ chÃ­nh:\nDynamoDB: PROVISIONED mode (2 RCU/WCU) vá»›i auto-scaling â†’ $1.25/thÃ¡ng base + $0.50-3/thÃ¡ng scaling Lambda: 6 functions (512MB-1GB memory) â†’ $2-8/thÃ¡ng (1M requests Ä‘áº§u miá»…n phÃ­) CloudFront: PriceClass 200 (Asia/US/Europe) â†’ $1-5/thÃ¡ng (1TB Ä‘áº§u miá»…n phÃ­, sau Ä‘Ã³ $0.085/GB) API Gateway: Regional endpoint â†’ $1-3/thÃ¡ng (1M Ä‘áº§u miá»…n phÃ­, sau Ä‘Ã³ $3.50/triá»‡u) Cognito: Standard security (khÃ´ng cÃ³ Advanced Security Mode) â†’ $0-1.50/thÃ¡ng (50K MAU Ä‘áº§u miá»…n phÃ­) S3: Intelligent-Tiering â†’ $0.50-2/thÃ¡ng (50GB Ä‘áº§u miá»…n phÃ­) Bedrock AI: Claude 3 Haiku ($0.25/1M input tokens) â†’ $2-8/thÃ¡ng vá»›i 99% dictionary cache hit rate SQS: 4 queues (AI, Image, Analytics, Notification) â†’ $0-0.40/thÃ¡ng (1M requests Ä‘áº§u miá»…n phÃ­) CloudWatch Logs: 3-day retention â†’ $0.50-2/thÃ¡ng WAF: Chá»‰ API Gateway (khÃ´ng cÃ³ CloudFront WAF) â†’ $5/thÃ¡ng base + $0.60/triá»‡u requests Tá»‘i Æ°u Chi phÃ­ ÄÃ£ Ã¡p dá»¥ng:\nX-Ray tracing disabled (tiáº¿t kiá»‡m $5-10/thÃ¡ng) CloudFront WAF Ä‘Ã£ xÃ³a, dÃ¹ng Shield Standard (tiáº¿t kiá»‡m $6/thÃ¡ng) DynamoDB PROVISIONED mode vá»›i baseline tháº¥p (2 RCU/WCU) thay vÃ¬ ON_DEMAND CloudWatch log retention giáº£m xuá»‘ng 3 ngÃ y cho dev (tiáº¿t kiá»‡m $2-5/thÃ¡ng) API Gateway caching disabled cho dev (tiáº¿t kiá»‡m $14.60/thÃ¡ng) Bedrock dictionary-first strategy (99% cache hit rate, giáº£m chi phÃ­ AI 70%) Lambda Shared Dependencies Layer (giáº£m deployment size 90%, cold starts nhanh hÆ¡n) TÃ­nh nÄƒng chÃ­nh Há»— trá»£ tiáº¿ng Viá»‡t: Vietnamese analyzer cho tÃ¬m kiáº¿m nguyÃªn liá»‡u Há»— trá»£ AI: Bedrock Claude 3 Haiku cho táº¡o cÃ´ng thá»©c Dá»‹ch Dictionary-First: Má»¥c tiÃªu coverage 80% vá»›i intelligent caching Ná»n táº£ng Máº¡ng xÃ£ há»™i: Posts, comments, reactions, friends, notifications Field-Level Privacy: Kiá»ƒm soÃ¡t chi tiáº¿t vá» kháº£ nÄƒng hiá»ƒn thá»‹ profile Content Moderation: Quy trÃ¬nh kiá»ƒm duyá»‡t tá»± Ä‘á»™ng vÃ  thá»§ cÃ´ng TÃ¬m kiáº¿m NÃ¢ng cao: Full-text search vá»›i Vietnamese normalization Tá»‘i Æ°u Chi phÃ­: Intelligent-Tiering, caching vÃ  tá»‘i Æ°u tÃ i nguyÃªn "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/",
	"title": "BÃ¡o cÃ¡o thá»±c táº­p",
	"tags": [],
	"description": "",
	"content": "BÃ¡o cÃ¡o thá»±c táº­p ThÃ´ng tin sinh viÃªn: Full Name: Huá»³nh Äá»©c Anh\nPhone Number: 0768010904\nEmail: anhhdse183114@fpt.edu.vn\nUniversity: FPTU\nMajor: Information Assurance\nClass: AWS082025\nInternship Company: Amazon Web Services Vietnam Co., Ltd.\nInternship Position: FCJ Cloud Intern\nInternship Duration: From 12/08/2025 to 12/11/2025\nNá»™i dung bÃ¡o cÃ¡o Worklog Proposal CÃ¡c bÃ i blogs Ä‘Ã£ dá»‹ch CÃ¡c events Ä‘Ã£ tham gia Workshop Tá»± Ä‘Ã¡nh giÃ¡ Chia sáº», Ä‘Ã³ng gÃ³p Ã½ kiáº¿n "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/3.1-blog1/",
	"title": "Blog 1",
	"tags": [],
	"description": "",
	"content": "AWS for Games: Jackbox Games Má»Ÿ Ra CÆ¡ Há»™i Má»›i Vá»›i Amazon GameLift Streams Bá»Ÿi David Holladay â€“ ngÃ y 6 thÃ¡ng 3 nÄƒm 2025\nTags: Amazon CloudFront, Amazon GameLift, Amazon SQS, Amazon S3, Giáº£i phÃ¡p KhÃ¡ch hÃ ng, PhÃ¡t triá»ƒn Game, Game, Messaging, Networking \u0026amp; Content Delivery, Storage, Industries\nGiá»›i Thiá»‡u Jackbox Games lÃ  studio trÃ² chÆ¡i cÃ³ trá»¥ sá»Ÿ táº¡i Chicago, ná»•i tiáº¿ng vá»›i cÃ¡c tá»±a game party nhÆ° Quiplash, Fibbage, Drawful, Trivia Murder Party, vÃ  nhiá»u trÃ² khÃ¡c. Vá»›i hÆ¡n 50 trÃ² chÆ¡i trong danh má»¥c, Jackbox theo Ä‘uá»•i má»¥c tiÃªu vá» \u0026ldquo;gaming dá»… tiáº¿p cáº­n\u0026rdquo; â€” tá»©c lÃ  ngÆ°á»i chÆ¡i cÃ³ thá»ƒ tham gia tá»« thiáº¿t bá»‹ báº¥t ká»³ mÃ  há» cÃ³. ToÃ n bá»™ háº¡ táº§ng server cá»§a cÃ´ng ty Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn Amazon Web Services.\nTrÆ°á»›c Ä‘Ã¢y, ngÆ°á»i chÆ¡i thÆ°á»ng sá»­ dá»¥ng TV Ä‘á»ƒ hiá»ƒn thá»‹ trÃ² chÆ¡i vÃ  Ä‘iá»‡n thoáº¡i lÃ m Ä‘iá»u khiá»ƒn â€” má»™t cÃ¡ch chÆ¡i Ä‘Æ¡n giáº£n nhÆ°ng váº«n ráº¥t phá»• biáº¿n. Gáº§n Ä‘Ã¢y, Jackbox quyáº¿t Ä‘á»‹nh há»£p tÃ¡c vá»›i Amazon GameLift Streams Ä‘á»ƒ mang tráº£i nghiá»‡m chÆ¡i khÃ´ng cáº§n cÃ i Ä‘áº·t, truy cáº­p trá»±c tiáº¿p cho ngÆ°á»i chÆ¡i.\nAmazon GameLift Streams lÃ  má»™t tÃ­nh nÄƒng trong GameLift, cho phÃ©p trÃ² chÆ¡i Ä‘Æ°á»£c stream vá»›i Ä‘á»™ trá»… tháº¥p, khung hÃ¬nh cao vÃ  quy mÃ´ toÃ n cáº§u â€” giÃºp studio nhÆ° Jackbox má»Ÿ rá»™ng pháº¡m vi tiáº¿p cáº­n mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o console hoáº·c thiáº¿t bá»‹ máº¡nh.\n1. Kiá»ƒm SoÃ¡t Chi PhÃ­ Khi Má»Ÿ Rá»™ng Viá»‡c Ä‘Æ°a má»™t trÃ² chÆ¡i lÃªn ná»n táº£ng streaming cÃ³ thá»ƒ ráº¥t tá»‘n kÃ©m náº¿u lÃ m riÃªng láº». Jackbox cÃ³ danh má»¥c ráº¥t lá»›n, nÃªn há» cáº§n má»™t cÃ¡ch tá»‘i Æ°u hÃ³a chi phÃ­.\n1.1 Táº¡o NhÃ³m Stream (Stream Group) Cho Táº¥t Cáº£ TrÃ² ChÆ¡i AWS Ä‘Ã£ há»£p tÃ¡c vá»›i Jackbox Ä‘á»ƒ gom 50 trÃ² chÆ¡i vÃ o má»™t Stream Group duy nháº¥t trong Amazon GameLift Streams. Nhá» váº­y, há» cÃ³ thá»ƒ má»Ÿ rá»™ng quy mÃ´ cho toÃ n bá»™ danh má»¥c cÃ¹ng nhau thay vÃ¬ tá»«ng trÃ² riÃªng biá»‡t.\n1.2 Multi-tenancy \u0026amp; Giáº£m Chi PhÃ­ TÃ i NguyÃªn VÃ¬ cÃ¡c trÃ² Jackbox khÃ´ng yÃªu cáº§u GPU máº¡nh, má»™t instance server cÃ³ thá»ƒ cháº¡y nhiá»u trÃ² chÆ¡i cÃ¹ng lÃºc â€“ tá»©c lÃ  Ã¡p dá»¥ng mÃ´ hÃ¬nh Ä‘a á»©ng dá»¥ng (multi-tenancy) Ä‘á»ƒ tiáº¿t kiá»‡m chi phÃ­.\n1.3 Sá»­ Dá»¥ng Data Channel Äá»ƒ ChÃ¨n Quáº£ng CÃ¡o Amazon GameLift Streams cung cáº¥p tÃ­nh nÄƒng Data Channel, cho phÃ©p chÃ¨n quáº£ng cÃ¡o vÃ o cÃ¡c khoáº£nh kháº¯c há»£p lÃ½ giá»¯a cÃ¡c vÃ²ng chÆ¡i â€” giÃºp Jackbox duy trÃ¬ mÃ´ hÃ¬nh miá»…n phÃ­ hoáº·c há»— trá»£ doanh thu báº±ng quáº£ng cÃ¡o.\n2. Cáº£i Thiá»‡n Quy TrÃ¬nh Cáº­p Nháº­t VÃ  PhÃ¡t HÃ nh 2.1 MÃ´ HÃ¬nh Party Pack Truyá»n Thá»‘ng \u0026amp; Háº¡n Cháº¿ TrÆ°á»›c Ä‘Ã¢y, Jackbox phÃ¡t hÃ nh trÃ² chÆ¡i theo Party Packs â€” má»—i gÃ³i gá»“m 5 trÃ². Khi muá»‘n cáº­p nháº­t má»™t trÃ², há» pháº£i cáº­p nháº­t toÃ n bá»™ gÃ³i trÃªn má»i ná»n táº£ng, gÃ¢y phá»©c táº¡p trong quáº£n lÃ½ vÃ  triá»ƒn khai.\n2.2 Streaming Cho PhÃ©p Cáº­p Nháº­t RiÃªng Láº», Linh Hoáº¡t Vá»›i GameLift Streams, Jackbox cÃ³ thá»ƒ cáº­p nháº­t má»™t trÃ² duy nháº¥t á»Ÿ server mÃ  khÃ´ng áº£nh hÆ°á»Ÿng cÃ¡c trÃ² khÃ¡c, vÃ  khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n cÃ¡c platform khÃ¡c nhau. Äiá»u nÃ y cÅ©ng cho phÃ©p ngÆ°á»i chÆ¡i chuyá»ƒn tá»« trÃ² nÃ y sang trÃ² kia mÆ°á»£t mÃ , mÃ  khÃ´ng cáº§n Ä‘Ã³ng má»Ÿ gÃ³i trÃ².\n2.3 TÄƒng TÃ­nh Kháº£ KhÃ¡m PhÃ¡ TrÃ² ChÆ¡i (Discoverability) Khi má»i trÃ² Ä‘á»u cÃ³ thá»ƒ truy cáº­p qua dá»‹ch vá»¥ streaming, ngÆ°á»i chÆ¡i cÃ³ nhiá»u cÆ¡ há»™i thá»­ trÃ² má»›i ngay â€” thay vÃ¬ bá»‹ giá»›i háº¡n trong cÃ¡c gÃ³i há» Ä‘Ã£ mua trÆ°á»›c.\n3. Há»— Trá»£ \u0026amp; TÃ­ch Há»£p SÃ¢u Vá»›i AWS 3.1 Há»— Trá»£ Ká»¹ Thuáº­t TÃ­ch Há»£p VÃ o Slack Trong quÃ¡ trÃ¬nh triá»ƒn khai, AWS há»— trá»£ Jackbox trá»±c tiáº¿p thÃ´ng qua Slack cá»§a há» â€” giÃºp Ä‘á»™i phÃ¡t triá»ƒn dá»… dÃ ng trao Ä‘á»•i, giáº£i quyáº¿t sá»± cá»‘ nhanh chÃ³ng. CTO Jackbox cho biáº¿t tráº£i nghiá»‡m nÃ y khiáº¿n AWS giá»‘ng nhÆ° má»™t pháº§n cá»§a Ä‘á»™i há».\n3.2 Sá»­ Dá»¥ng Nhiá»u Dá»‹ch Vá»¥ AWS KhÃ¡c BÃªn cáº¡nh GameLift Streams, Jackbox dÃ¹ng nhiá»u dá»‹ch vá»¥ AWS Ä‘á»ƒ váº­n hÃ nh há»‡ thá»‘ng:\nAmazon EC2 cho xá»­ lÃ½ backend, session management Amazon S3 cho lÆ°u trá»¯ tÃ i nguyÃªn trÃ² chÆ¡i vÃ  dá»¯ liá»‡u Amazon SQS cho quáº£n lÃ½ hÃ ng Ä‘á»£i Amazon CloudFront Ä‘á»ƒ phÃ¢n phá»‘i ná»™i dung nhanh vÃ  á»•n Ä‘á»‹nh Táº¥t cáº£ Ä‘á»u náº±m trong há»‡ sinh thÃ¡i AWS mÃ  Jackbox Ä‘Ã£ sá»­ dá»¥ng tá»« trÆ°á»›c.\n4. Äá»‹nh HÆ°á»›ng TÆ°Æ¡ng Lai \u0026amp; Táº§m NhÃ¬n Jackbox ráº¥t ká»³ vá»ng vÃ o viá»‡c tiáº¿p cáº­n ngÆ°á»i chÆ¡i má»›i qua thiáº¿t bá»‹ phá»• biáº¿n nhÆ° Smart TV, mÃ  khÃ´ng yÃªu cáº§u console. Há» muá»‘n tráº£i nghiá»‡m nhÆ° má»Ÿ á»©ng dá»¥ng streaming (nhÆ° Netflix) Ä‘á»ƒ chÆ¡i trÃ² chÆ¡i trá»±c tiáº¿p.\nStreaming cÅ©ng táº¡o Ä‘iá»u kiá»‡n Ä‘á»ƒ Jackbox xem xÃ©t há»£p tÃ¡c vá»›i cÃ¡c studio khÃ¡c, Ä‘Æ°a trÃ² chÆ¡i tá»« cÃ¡c engine khÃ¡c vÃ o dá»‹ch vá»¥ cá»§a há» â€” má»Ÿ rá»™ng danh má»¥c nhanh hÆ¡n. CTO cá»§a Jackbox nháº¥n máº¡nh ráº±ng streaming má»Ÿ ra \u0026ldquo;mÃ´ hÃ¬nh kinh doanh má»›i\u0026rdquo; mÃ  há» khÃ´ng lÃ m Ä‘Æ°á»£c vá»›i cáº¥u trÃºc Party Pack truyá»n thá»‘ng â€” mÃ´ hÃ¬nh Ä‘Äƒng kÃ½, quáº£ng cÃ¡o, truy cáº­p trá»±c tiáº¿p â€” vÃ  GameLift Streams mang láº¡i linh hoáº¡t Ä‘á»ƒ há» tiáº¿p tá»¥c phÃ¡t triá»ƒn.\nKáº¿t Luáº­n Nhá» á»©ng dá»¥ng Amazon GameLift Streams, Jackbox Games Ä‘áº¡t Ä‘Æ°á»£c nhiá»u lá»£i Ã­ch:\nMá»Ÿ rá»™ng kháº£ nÄƒng tiáº¿p cáº­n ngÆ°á»i chÆ¡i toÃ n cáº§u Giáº£m chi phÃ­ váº­n hÃ nh nhá» multi-tenancy vÃ  quáº£n lÃ½ táº­p trung ÄÆ¡n giáº£n hÃ³a quy trÃ¬nh cáº­p nháº­t trÃ² chÆ¡i Cho phÃ©p mÃ´ hÃ¬nh doanh thu linh hoáº¡t hÆ¡n (quáº£ng cÃ¡o, Ä‘Äƒng kÃ½) Cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i chÆ¡i vÃ  kháº£ nÄƒng khÃ¡m phÃ¡ ná»™i dung Sá»± há»£p tÃ¡c giá»¯a Jackbox vÃ  AWS cho tháº¥y streaming trÃ² chÆ¡i khÃ´ng chá»‰ lÃ  xu hÆ°á»›ng, mÃ  lÃ  ná»n táº£ng Ä‘á»ƒ Ä‘á»•i má»›i trong ngÃ nh game.\nVá» TÃ¡c Giáº£ David Holladay\nDavid Holladay lÃ  Principal Solutions Architect thuá»™c nhÃ³m AWS Game Tech, chuyÃªn tÆ° váº¥n vÃ  há»— trá»£ cÃ¡c studio trÃ² chÆ¡i trong viá»‡c xÃ¢y dá»±ng háº¡ táº§ng quy mÃ´ lá»›n trÃªn AWS. Ã”ng cÃ³ hÆ¡n 15 nÄƒm kinh nghiá»‡m trong phÃ¡t triá»ƒn pháº§n má»m vÃ  thiáº¿t káº¿ há»‡ thá»‘ng cho ngÃ nh game, tá»«ng lÃ m viá»‡c vá»›i nhiá»u studio hÃ ng Ä‘áº§u tháº¿ giá»›i. Khi khÃ´ng lÃ m viá»‡c, David yÃªu thÃ­ch viá»‡c stream cÃ¡c game indie má»›i ra máº¯t vÃ  tham gia cÃ¡c sá»± kiá»‡n game jam Ä‘á»ƒ chia sáº» kinh nghiá»‡m láº­p trÃ¬nh vá»›i cá»™ng Ä‘á»“ng phÃ¡t triá»ƒn trÃ² chÆ¡i.\nHTTP/2 cho phÃ©p nhiá»u luá»“ng logic trong má»™t phiÃªn, khÃ¡c vá»›i HTTP/1.x. Káº» táº¥n cÃ´ng gá»­i nhiá»u yÃªu cáº§u rá»“i nhanh chÃ³ng reset má»—i luá»“ng. MÃ¡y chá»§ váº«n pháº£i tá»‘n tÃ i nguyÃªn xá»­ lÃ½ (phÃ¢n tÃ­ch, ghi log, â€¦) dÃ¹ khÃ´ng tráº£ káº¿t quáº£. ÄÃ¢y lÃ  má»™t dáº¡ng cá»§a HTTP request flood; quan trá»ng lÃ  pháº£i phÃ¡t hiá»‡n vÃ  háº¥p thá»¥ lÆ°u lÆ°á»£ng Ä‘á»™c háº¡i trÆ°á»›c khi Ä‘áº¿n há»‡ thá»‘ng gá»‘c. Biá»‡n phÃ¡p phÃ²ng thá»§ \u0026amp; Thá»±c hÃ nh tá»‘t nháº¥t cá»§a AWS AWS cung cáº¥p báº£o vá»‡ DDoS tÃ­ch há»£p sáºµn trÃªn háº¡ táº§ng. CÃ¡c dá»‹ch vá»¥ khuyáº¿n nghá»‹ Ä‘á»ƒ tÄƒng kháº£ nÄƒng chá»‘ng chá»‹u: Amazon CloudFront AWS Shield (bao gá»“m Shield Advanced) AWS WAF Amazon Route 53 Route 53 Application Recovery Controller CÃ¡c dá»‹ch vá»¥ nÃ y giÃºp phÃ¢n phá»‘i traffic qua edge toÃ n cáº§u, ngÄƒn yÃªu cáº§u xáº¥u Ä‘áº¿n mÃ¡y chá»§ gá»‘c. NÃªn sá»­ dá»¥ng caching táº¡i edge (CloudFront), lá»c traffic (WAF), vÃ  Ä‘á»‹nh tuyáº¿n toÃ n cáº§u (Route 53) Ä‘á»ƒ háº¥p thá»¥ hoáº·c cháº·n táº¥n cÃ´ng. TÃ¬nh bÃ¡o má»‘i Ä‘e dá»a, GiÃ¡m sÃ¡t \u0026amp; Há»£p tÃ¡c AWS liÃªn tá»¥c giÃ¡m sÃ¡t lÆ°u lÆ°á»£ng Ä‘á»ƒ phÃ¡t hiá»‡n báº¥t thÆ°á»ng. Ká»¹ sÆ° AWS káº¿t há»£p tÃ¬nh bÃ¡o má»‘i Ä‘e dá»a toÃ n cáº§u, dá»¯ liá»‡u giÃ¡m sÃ¡t vÃ  tá»± Ä‘á»™ng hÃ³a Ä‘á»ƒ Ä‘á»‘i phÃ³ vá»›i ká»¹ thuáº­t DDoS má»›i. AWS há»£p tÃ¡c vá»›i cÃ¡c Ä‘Æ¡n vá»‹ bÃªn ngoÃ i (CERTs, ISP, nhÃ  Ä‘Äƒng kÃ½ tÃªn miá»n, cÃ¡c nhÃ  cung cáº¥p cloud khÃ¡c) Ä‘á»ƒ truy váº¿t, giáº£m thiá»ƒu, tháº­m chÃ­ gá»¡ bá» nguá»“n gá»‘c cá»§a cÃ¡c cuá»™c táº¥n cÃ´ng lá»›n. TÃ³m táº¯t AWS Ä‘Ã£ pháº£n á»©ng nhanh chÃ³ng trÆ°á»›c dáº¡ng táº¥n cÃ´ng DDoS má»›i (HTTP/2 rapid reset) vÃ o cuá»‘i thÃ¡ng 8 vÃ  Ä‘áº§u thÃ¡ng 9/2023. Nhá» cÃ¡c biá»‡n phÃ¡p báº£o vá»‡ tÃ­ch há»£p sáºµn cÃ¹ng kiáº¿n trÃºc tá»‘i Æ°u (CloudFront, Shield, WAF, Route 53), khÃ¡ch hÃ ng váº«n duy trÃ¬ Ä‘Æ°á»£c dá»‹ch vá»¥. Hoáº¡t Ä‘á»™ng giÃ¡m sÃ¡t, tÃ¬nh bÃ¡o má»‘i Ä‘e dá»a, vÃ  giáº£m thiá»ƒu á»Ÿ táº§ng háº¡ táº§ng lÃ  trá»ng tÃ¢m trong chiáº¿n lÆ°á»£c báº£o vá»‡ khÃ¡ch hÃ ng trÆ°á»›c nhá»¯ng má»‘i Ä‘e dá»a DDoS ngÃ y cÃ ng phÃ¡t triá»ƒn.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/4-eventparticipated/4.1-event1/",
	"title": "Event 1",
	"tags": [],
	"description": "",
	"content": "Summary Report: â€œAWS AI/ML \u0026amp; Generative AI Workshopâ€ Event Objectives Giá»›i thiá»‡u há»‡ sinh thÃ¡i AI/ML cá»§a AWS TrÃ¬nh bÃ y cÃ¡c dá»‹ch vá»¥ cá»‘t lÃµi nhÆ° Amazon SageMaker vÃ  Amazon Bedrock HÆ°á»›ng dáº«n quy trÃ¬nh xÃ¢y dá»±ng \u0026amp; triá»ƒn khai mÃ´ hÃ¬nh ML end-to-end Giá»›i thiá»‡u Generative AI, Prompt Engineering vÃ  kiáº¿n trÃºc RAG Há»— trá»£ há»c viÃªn thá»±c hÃ nh qua demo vÃ  trao Ä‘á»•i trá»±c tiáº¿p cÃ¹ng chuyÃªn gia Workshop Agenda \u0026amp; Key Highlights 8:30 â€“ 9:00 AM | Welcome \u0026amp; Introduction Hoáº¡t Ä‘á»™ng chÃ­nh ÄÄƒng kÃ½ \u0026amp; networking vá»›i cÃ¡c chuyÃªn gia vÃ  ngÆ°á»i tham dá»± Giá»›i thiá»‡u tá»•ng quan workshop, má»¥c tiÃªu há»c táº­p Hoáº¡t Ä‘á»™ng ice-breaker Ä‘á»ƒ káº¿t ná»‘i nhÃ³m Tá»•ng quan vá» landscape AI/ML táº¡i Viá»‡t Nam: nhu cáº§u doanh nghiá»‡p, xu hÆ°á»›ng GenAI, cÃ¡c thÃ¡ch thá»©c hiá»‡n táº¡i Äiá»ƒm ná»•i báº­t:\nNgÆ°á»i tham dá»± cÃ³ cÃ¡i nhÃ¬n tá»•ng thá»ƒ vá» sá»± phÃ¡t triá»ƒn cá»§a AI/ML trong nÆ°á»›c Nháº¥n máº¡nh vai trÃ² cá»§a AWS trong viá»‡c há»— trá»£ doanh nghiá»‡p á»©ng dá»¥ng AI/ML má»™t cÃ¡ch hiá»‡u quáº£ vÃ  an toÃ n 9:00 â€“ 10:30 AM | AWS AI/ML Services Overview 1. Amazon SageMaker â€“ End-to-End ML Platform CÃ¡c ná»™i dung Ä‘Æ°á»£c trÃ¬nh bÃ y:\nData preparation \u0026amp; labeling vá»›i SageMaker Ground Truth Model training, hyperparameter tuning Model deployment qua SageMaker Endpoints MLOps tÃ­ch há»£p: pipelines, model registry, CI/CD cho ML 2. Live Demo: SageMaker Studio Tráº£i nghiá»‡m giao diá»‡n SageMaker Studio Thá»±c hÃ nh quy trÃ¬nh tá»« dá»¯ liá»‡u â†’ training â†’ inference Minh há»a auto-scaling endpoint vÃ  quáº£n lÃ½ phiÃªn báº£n mÃ´ hÃ¬nh Key takeaways:\nSageMaker cung cáº¥p má»™t ná»n táº£ng duy nháº¥t cho toÃ n bá»™ vÃ²ng Ä‘á»i ML Tiáº¿t kiá»‡m thá»i gian váº­n hÃ nh \u0026amp; tÄƒng tá»‘c Ä‘á»™ Ä‘Æ°a mÃ´ hÃ¬nh vÃ o production Dá»… dÃ ng tÃ­ch há»£p vá»›i há»‡ sinh thÃ¡i AWS (S3, Lambda, API Gatewayâ€¦) 10:30 â€“ 10:45 AM | Coffee Break Thá»i gian Ä‘á»ƒ nghá»‰ ngÆ¡i, trao Ä‘á»•i thÃªm vá»›i chuyÃªn gia vÃ  tháº£o luáº­n vá» cÃ¡c case thá»±c táº¿.\n10:45 AM â€“ 12:00 PM | Generative AI with Amazon Bedrock 1. Foundation Models (FMs) So sÃ¡nh vÃ  hÆ°á»›ng dáº«n lá»±a chá»n:\nClaude â€“ reasoning máº¡nh, an toÃ n, phÃ¹ há»£p enterprise Llama â€“ mÃ£ nguá»“n má»Ÿ, tuá»³ chá»‰nh linh hoáº¡t Titan â€“ tá»‘i Æ°u cho doanh nghiá»‡p vá»›i tÃ­ch há»£p cháº·t cháº½ AWS 2. Prompt Engineering Ká»¹ thuáº­t prompting, Chain-of-Thought, few-shot Chiáº¿n lÆ°á»£c nÃ¢ng cao Ä‘á»™ chÃ­nh xÃ¡c vÃ  kiá»ƒm soÃ¡t Ä‘áº§u ra Demo prompt vá»›i nhiá»u mÃ´ hÃ¬nh trÃªn Bedrock 3. Retrieval-Augmented Generation (RAG) Giáº£i thÃ­ch kiáº¿n trÃºc RAG CÃ¡ch táº¡o Knowledge Base trong Amazon Bedrock CÃ¡ch mÃ´ hÃ¬nh truy xuáº¥t dá»¯ liá»‡u riÃªng cá»§a doanh nghiá»‡p Ä‘á»ƒ tráº£ lá»i chÃ­nh xÃ¡c Best practices: chunking, embedding model selection, vector store 4. Bedrock Agents XÃ¢y dá»±ng multi-step workflows, tÃ­ch há»£p cÃ´ng cá»¥ (tool integration) Use cases: customer support bots, enterprise assistant, data automation 5. Guardrails Thiáº¿t láº­p safety, cháº·n ná»™i dung khÃ´ng phÃ¹ há»£p Äiá»u chá»‰nh content filtering theo nhu cáº§u doanh nghiá»‡p Äáº£m báº£o mÃ´ hÃ¬nh tuÃ¢n thá»§ quy Ä‘á»‹nh báº£o máº­t \u0026amp; kiá»ƒm soÃ¡t dá»¯ liá»‡u Key Takeaways TÆ° duy thiáº¿t káº¿ há»‡ thá»‘ng AI Chá»n Ä‘Ãºng mÃ´ hÃ¬nh cho use case: reasoning, text generation, code, search XÃ¢y dá»±ng há»‡ thá»‘ng cÃ³ giÃ¡m sÃ¡t, cÃ³ guardrails, theo chuáº©n báº£o máº­t AWS MLOps vÃ  GenAIOps giÃºp quy trÃ¬nh ML/GenAI á»•n Ä‘á»‹nh vÃ  dá»… má»Ÿ rá»™ng Kiáº¿n thá»©c ká»¹ thuáº­t SageMaker há»— trá»£ end-to-end ML tá»« data â†’ model â†’ deployment Bedrock giÃºp build á»©ng dá»¥ng GenAI khÃ´ng cáº§n tá»± huáº¥n luyá»‡n mÃ´ hÃ¬nh lá»›n RAG giáº£i quyáº¿t bÃ i toÃ¡n kiáº¿n thá»©c riÃªng tÆ° cho doanh nghiá»‡p Prompt Engineering Ä‘Ã³ng vai trÃ² quan trá»ng trong cháº¥t lÆ°á»£ng Ä‘áº§u ra Chiáº¿n lÆ°á»£c á»©ng dá»¥ng vÃ o cÃ´ng viá»‡c Báº¯t Ä‘áº§u vá»›i pilot nhá», dÃ¹ng Bedrock Ä‘á»ƒ thá»­ nghiá»‡m nhanh XÃ¢y dá»±ng PoC RAG cho há»‡ thá»‘ng tra cá»©u tÃ i liá»‡u ná»™i bá»™ TÃ­ch há»£p SageMaker vÃ o pipeline hiá»‡n táº¡i Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a ML Thá»­ nghiá»‡m Bedrock Agents Ä‘á»ƒ tá»‘i Æ°u quy trÃ¬nh kinh doanh Event Experience Há»c há»i tá»« chuyÃªn gia CÃ¡c speaker cung cáº¥p insight sÃ¢u vá» AI/ML, tá»« ká»¹ thuáº­t Ä‘áº¿n á»©ng dá»¥ng thá»±c táº¿ Nhá»¯ng case study cá»§a doanh nghiá»‡p Viá»‡t Nam giÃºp hiá»ƒu rÃµ cÃ¡ch triá»ƒn khai thá»±c tiá»…n Tráº£i nghiá»‡m thá»±c hÃ nh Demo SageMaker Studio giÃºp hÃ¬nh dung rÃµ rÃ ng pipeline end-to-end TÃ¬m hiá»ƒu cÃ¡ch build á»©ng dá»¥ng GenAI trÃªn Bedrock nhanh vÃ  an toÃ n Káº¿t ná»‘i \u0026amp; tháº£o luáº­n Networking giÃºp má»Ÿ rá»™ng gÃ³c nhÃ¬n vÃ  cÃ¡ch cÃ¡c team khÃ¡c Ã¡p dá»¥ng AI Tháº£o luáº­n vá» váº¥n Ä‘á» dá»¯ liá»‡u, chi phÃ­ vÃ  báº£o máº­t khi triá»ƒn khai ML/GenAI BÃ i há»c rÃºt ra AI/ML cáº§n Ä‘Æ°á»£c Ã¡p dá»¥ng theo chiáº¿n lÆ°á»£c rÃµ rÃ ng, khÃ´ng cháº¡y theo trend RAG vÃ  Guardrails lÃ  yáº¿u tá»‘ báº¯t buá»™c khi Ä‘Æ°a GenAI vÃ o mÃ´i trÆ°á»ng enterprise SageMaker vÃ  Bedrock giÃºp doanh nghiá»‡p tiáº¿t kiá»‡m thá»i gian, giáº£m chi phÃ­ vÃ  tÄƒng tá»‘c Ä‘á»•i má»›i Má»™t sá»‘ hÃ¬nh áº£nh táº¡i sá»± kiá»‡n "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/",
	"title": "Nháº­t kÃ½ cÃ´ng viá»‡c",
	"tags": [],
	"description": "",
	"content": "Trong trang nÃ y báº¡n sáº½ cáº§n giá»›i thiá»‡u worklog cá»§a báº¡n nhÆ° tháº¿ nÃ o? Báº¡n hoÃ n thÃ nh chÆ°Æ¡ng trÃ¬nh trong vÃ²ng bao nhiÃªu tuáº§n? Báº¡n Ä‘Ã£ lÃ m gÃ¬ trong cÃ¡c tuáº§n Ä‘Ã³?\nThÃ´ng thÆ°á»ng vÃ  cÅ©ng lÃ  tiÃªu chuáº©n, má»™t worklog Ä‘Æ°á»£c thá»±c hiá»‡n trong khoáº£ng 3 thÃ¡ng (trong suá»‘t thá»i gian thá»±c táº­p) vá»›i ná»™i dung cÃ¡c tuáº§n nhÆ° sau:\nTuáº§n 1: LÃ m quen vá»›i AWS vÃ  cÃ¡c dá»‹ch vá»¥ cÆ¡ báº£n trong AWS\nTuáº§n 2: AWS VPC, EC2, Kiáº¿n thá»©c ná»n táº£ng Networking \u0026amp; Thiáº¿t láº­p Route 53 DNS\nTuáº§n 3: VPC, EC2, Quáº£n lÃ½ Storage \u0026amp; Thá»±c hÃ nh Networking tÆ°Æ¡ng tÃ¡c\nTuáº§n 4: Amazon S3 Static Website Hosting \u0026amp; Thiáº¿t láº­p Amazon RDS Database\nTuáº§n 5: Triá»ƒn khai WordPress, CDN CloudFront \u0026amp; TÃ­ch há»£p AWS Managed AD\nTuáº§n 6: Kiáº¿n trÃºc Serverless: Lambda, API Gateway, DynamoDB \u0026amp; CloudFormation\nTuáº§n 7: CÃ´ng nghá»‡ Container: Docker, ECR, ECS Fargate \u0026amp; CI/CD Pipeline\nTuáº§n 8: Networking NÃ¢ng cao: VPC Peering, Transit Gateway, Direct Connect \u0026amp; Hybrid Cloud\nTuáº§n 9: Tá»± Ä‘á»™ng hÃ³a CI/CD: CodePipeline, CodeBuild, CodeDeploy \u0026amp; Safe Deployments\nTuáº§n 10: Migrate VM vá»›i VMWare, Quáº£n lÃ½ S3, Storage Gateway \u0026amp; CloudFront\nTuáº§n 11: AWS Security: IAM, Cognito, Security Hub, KMS \u0026amp; Resource Tagging\nTuáº§n 12: Data Services: S3, Glue, Athena, DynamoDB, QuickSight \u0026amp; Data Analytics\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.1-week1/",
	"title": "Worklog Tuáº§n 1",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu tuáº§n 1: Káº¿t ná»‘i, lÃ m quen vá»›i cÃ¡c thÃ nh viÃªn trong First Cloud Journey. Hiá»ƒu dá»‹ch vá»¥ AWS cÆ¡ báº£n, cÃ¡ch dÃ¹ng console \u0026amp; CLI. CÃ¡c cÃ´ng viá»‡c cáº§n triá»ƒn khai trong tuáº§n nÃ y: Thá»© CÃ´ng viá»‡c NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh Nguá»“n tÃ i liá»‡u 2 - LÃ m quen vá»›i cÃ¡c thÃ nh viÃªn FCJ - Äá»c vÃ  lÆ°u Ã½ cÃ¡c ná»™i quy, quy Ä‘á»‹nh táº¡i Ä‘Æ¡n vá»‹ thá»±c táº­p 26/08/2025 26/08/2025 3 - TÃ¬m hiá»ƒu AWS vÃ  cÃ¡c loáº¡i dá»‹ch vá»¥ + Compute + Storage + Networking + Database + Tá»•ng quan vá» AWS 08/9/2025 08/09/2025 https://cloudjourney.awsstudygroup.com/ 4 - Táº¡o tÃ i khoáº£n AWS Free Tier - TÃ¬m hiá»ƒu vá» AWS Console \u0026amp; AWS CLI - Táº¡o ngÃ¢n sÃ¡ch báº±ng máº«u (template) - Thá»±c hÃ nh: + Thiáº¿t láº­p vá»›i thiáº¿t bá»‹ MFA áº£o (Virtual MFA device) + Táº¡o tÃ i khoáº£n AWS + Táº¡o nhÃ³m quáº£n trá»‹ (admin group) vÃ  ngÆ°á»i dÃ¹ng quáº£n trá»‹ (admin user) + Há»— trá»£ xÃ¡c thá»±c tÃ i khoáº£n + CÃ i Ä‘áº·t \u0026amp; cáº¥u hÃ¬nh AWS CLI + Táº¡o ngÃ¢n sÃ¡ch báº±ng máº«u, táº¡o ngÃ¢n sÃ¡ch chi phÃ­ (Cost Budget Tutorial), ngÃ¢n sÃ¡ch sá»­ dá»¥ng (Usage Budget) trong AWS, má»™t phiÃªn báº£n Ä‘áº·t chá»— (Reservation Instance), má»™t ngÃ¢n sÃ¡ch káº¿ hoáº¡ch tiáº¿t kiá»‡m (Savings Plans Budget) 10/09/2025 10/09/2025 https://cloudjourney.awsstudygroup.com/ https://000001.awsstudygroup.com/ https://000007.awsstudygroup.com/ https://000009.awsstudygroup.com/ 5 - Há»c vá» AWS Virtual Private Cloud (VPC) + TÃ­nh nÄƒng báº£o máº­t VPC vÃ  Multi-VPC + VPC - DirectConnect - LoadBalancer - TÃ i nguyÃªn bá»• sung - Thá»±c hÃ nh: + Báº¯t Ä‘áº§u vá»›i Amazon VPC vÃ  AWS VPN Site-to-Site + Subnet, Báº£ng Ä‘á»‹nh tuyáº¿n, Internet Gateway, NAT Gateway, Security Group, Network ACLs + Táº¡o VPC, Báº£n Ä‘á»“ tÃ i nguyÃªn VPC, Táº¡o Subnet, Táº¡o Internet Gateway, Táº¡o Route Table cho Ä‘á»‹nh tuyáº¿n Internet Outbound qua Internet Gateway, Táº¡o Security Group + Táº¡o EC2 Instances trong Subnets, Kiá»ƒm tra káº¿t ná»‘i, Táº¡o NAT Gateway, EC2 Instance Connect Endpoint 11/09/2025 16/09/2025 https://000009.awsstudygroup.com/ 6 - Thá»±c hÃ nh: + Táº¡o EC2 instance + Káº¿t ná»‘i SSH + Gáº¯n EBS volume 12/09/2025 12/09/2025 https://000009.awsstudygroup.com/ Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c tuáº§n 1: LÃ m quen vá»›i cÃ¡c thÃ nh viÃªn FCJ. Äá»c vÃ  ghi chÃº ná»™i quy, quy Ä‘á»‹nh cá»§a Ä‘Æ¡n vá»‹ thá»±c táº­p. TÃ¬m hiá»ƒu vá» AWS vÃ  cÃ¡c nhÃ³m dá»‹ch vá»¥ chÃ­nh: Compute (tÃ­nh toÃ¡n) Storage (lÆ°u trá»¯) Networking (máº¡ng) Database (cÆ¡ sá»Ÿ dá»¯ liá»‡u) Tá»•ng quan AWS Táº¡o tÃ i khoáº£n AWS Free Tier. KhÃ¡m phÃ¡ AWS Management Console vÃ  AWS CLI. Táº¡o máº«u Budget vÃ  tÃ¬m hiá»ƒu vá»: Cost Budget Usage Budget Reserved Instance Savings Plan Budget Thiáº¿t láº­p MFA (Virtual MFA device), táº¡o nhÃ³m Admin vÃ  ngÆ°á»i dÃ¹ng Admin, Ä‘á»“ng thá»i cáº¥u hÃ¬nh xÃ¡c thá»±c tÃ i khoáº£n. Há»c vá» AWS VPC: VPC Security Multi-VPC features DirectConnect Load Balancer Extra resources Thá»±c hÃ nh: Táº¡o VPC, Subnet, Internet Gateway, Route Table, Security Groups, NAT Gateway. Khá»Ÿi cháº¡y vÃ  káº¿t ná»‘i EC2 Instances trong cÃ¡c Subnet. Thá»±c hÃ nh khá»Ÿi cháº¡y EC2 instance, káº¿t ná»‘i qua SSH vÃ  gáº¯n EBS volume. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.1-dns-stack/",
	"title": "5.4.1 DNS Stack",
	"tags": [],
	"description": "",
	"content": " DNS Stack - Route 53 Hosted Zone Tá»•ng quan DNS Stack lÃ  lá»›p ná»n táº£ng (Phase 1) cá»§a háº¡ táº§ng EveryoneCook. NÃ³ quáº£n lÃ½ Route 53 Hosted Zone cho domain everyonecook.cloud, cung cáº¥p háº¡ táº§ng DNS mÃ  táº¥t cáº£ cÃ¡c stacks khÃ¡c phá»¥ thuá»™c vÃ o.\nThá»© tá»± Triá»ƒn khai: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c deploy Ä‘áº§u tiÃªn trÆ°á»›c báº¥t ká»³ stack nÃ o khÃ¡c.\nTrÃ¡ch nhiá»‡m ChÃ­nh Táº¡o vÃ  quáº£n lÃ½ Route 53 Public Hosted Zone Export Hosted Zone ID vÃ  name cho cross-stack references Cung cáº¥p nameservers cho domain delegation tá»« Hostinger Stack nÃ y KHÃ”NG bao gá»“m SES Email Identity (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Auth Stack - Phase 3) DKIM/SPF/DMARC records (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Auth Stack - Phase 3) ACM Certificates (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Certificate Stack - Phase 1.5) Application DNS records (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi cÃ¡c stacks tÆ°Æ¡ng á»©ng) Kiáº¿n trÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Hostinger Domain â”‚\râ”‚ everyonecook.cloud â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Domain Registrar Settings â”‚ â”‚\râ”‚ â”‚ â€¢ Cáº­p nháº­t Nameservers thÃ nh Route 53 NS â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚ DNS Delegation\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ AWS Route 53 Hosted Zone â”‚\râ”‚ everyonecook.cloud â”‚\râ”‚ â”‚\râ”‚ TÃ i nguyÃªn ÄÆ°á»£c táº¡o: â”‚\râ”‚ â€¢ Public Hosted Zone â”‚\râ”‚ â€¢ 4 Nameserver (NS) Records â”‚\râ”‚ â€¢ SOA Record (tá»± Ä‘á»™ng) â”‚\râ”‚ â”‚\râ”‚ Exports: â”‚\râ”‚ â€¢ Hosted Zone ID â†’ Sá»­ dá»¥ng bá»Ÿi Certificate Stack â”‚\râ”‚ â€¢ Hosted Zone Name â†’ Sá»­ dá»¥ng bá»Ÿi cÃ¡c stacks khÃ¡c â”‚\râ”‚ â€¢ Nameservers â†’ Cáº¥u hÃ¬nh táº¡i Hostinger â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Cáº¥u hÃ¬nh Stack Cáº¥u trÃºc File infrastructure/lib/stacks/\râ””â”€â”€ dns-stack.ts # DNS Stack implementation Code Implementation File: infrastructure/lib/stacks/dns-stack.ts\nimport * as cdk from \u0026#39;aws-cdk-lib\u0026#39;; import { Construct } from \u0026#39;constructs\u0026#39;; import { BaseStack, BaseStackProps } from \u0026#39;../base-stack\u0026#39;; export class DnsStack extends BaseStack { public readonly hostedZone: cdk.aws_route53.IHostedZone; constructor(scope: Construct, id: string, props: BaseStackProps) { super(scope, id, props); // ThÃªm stack-specific tags cdk.Tags.of(this).add(\u0026#39;StackType\u0026#39;, \u0026#39;DNS\u0026#39;); cdk.Tags.of(this).add(\u0026#39;Layer\u0026#39;, \u0026#39;Foundation\u0026#39;); cdk.Tags.of(this).add(\u0026#39;CostCenter\u0026#39;, `DNS-${this.config.environment}`); // Táº¡o Route 53 Hosted Zone this.hostedZone = this.createHostedZone(); // Export stack outputs this.exportOutputs(); } private createHostedZone(): cdk.aws_route53.IHostedZone { // TrÃ­ch xuáº¥t root domain tá»« environment config const rootDomain = this.config.domains.frontend .replace(/^(dev\\.|staging\\.)/, \u0026#39;\u0026#39;); // everyonecook.cloud const hostedZone = new cdk.aws_route53.PublicHostedZone( this, \u0026#39;HostedZone\u0026#39;, { zoneName: rootDomain, comment: `Hosted Zone cho Everyone Cook ${this.config.environment} environment`, } ); cdk.Tags.of(hostedZone).add(\u0026#39;Component\u0026#39;, \u0026#39;DNS\u0026#39;); cdk.Tags.of(hostedZone).add(\u0026#39;ManagedBy\u0026#39;, \u0026#39;CDK\u0026#39;); return hostedZone; } private exportOutputs(): void { // Export Hosted Zone ID new cdk.CfnOutput(this, \u0026#39;HostedZoneId\u0026#39;, { value: this.hostedZone.hostedZoneId, exportName: this.exportName(\u0026#39;HostedZoneId\u0026#39;), description: \u0026#39;Route 53 Hosted Zone ID\u0026#39;, }); // Export Hosted Zone Name new cdk.CfnOutput(this, \u0026#39;HostedZoneName\u0026#39;, { value: this.hostedZone.zoneName, exportName: this.exportName(\u0026#39;HostedZoneName\u0026#39;), description: \u0026#39;Domain name Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Route 53\u0026#39;, }); // Export Nameservers (cho cáº¥u hÃ¬nh Hostinger) new cdk.CfnOutput(this, \u0026#39;NameServers\u0026#39;, { value: cdk.Fn.join(\u0026#39;, \u0026#39;, this.hostedZone.hostedZoneNameServers || []), description: \u0026#39;âš ï¸ Cáº­p nháº­t cÃ¡c nameservers nÃ y táº¡i Hostinger\u0026#39;, }); } } Chi tiáº¿t Cáº¥u hÃ¬nh ChÃ­nh 1. Logic TrÃ­ch xuáº¥t Domain Stack tá»± Ä‘á»™ng trÃ­ch xuáº¥t root domain tá»« environment configuration:\n// Environment config: dev.everyonecook.cloud // Domain Ä‘Æ°á»£c trÃ­ch xuáº¥t: everyonecook.cloud const rootDomain = this.config.domains.frontend.replace(/^(dev\\.|staging\\.)/, \u0026#39;\u0026#39;); CÃ¡c Environments:\nDev: dev.everyonecook.cloud â†’ Hosted Zone: everyonecook.cloud Staging: staging.everyonecook.cloud â†’ Hosted Zone: everyonecook.cloud Prod: everyonecook.cloud â†’ Hosted Zone: everyonecook.cloud 2. Quy Æ°á»›c Äáº·t tÃªn Resource Táº¥t cáº£ resources tuÃ¢n theo má»™t máº«u Ä‘áº·t tÃªn nháº¥t quÃ¡n:\n// Äá»‹nh dáº¡ng tÃªn resource: everyonecook-{env}-{resource} protected resourceName(name: string): string { return `everyonecook-${this.config.environment}-${name}`; } // Äá»‹nh dáº¡ng tÃªn export: EveryoneCook-{Env}-{Export} protected exportName(name: string): string { return `EveryoneCook-${this.config.environment}-${name}`; } VÃ­ dá»¥:\nTÃªn stack: EveryoneCook-dev-DNS Export: EveryoneCook-dev-HostedZoneId 3. Resource Tags Má»—i resource Ä‘Æ°á»£c tag Ä‘á»ƒ theo dÃµi chi phÃ­ vÃ  quáº£n lÃ½:\n{ Stack: \u0026#39;EveryoneCook-dev-DNS\u0026#39;, Environment: \u0026#39;dev\u0026#39;, StackType: \u0026#39;DNS\u0026#39;, Layer: \u0026#39;Foundation\u0026#39;, CostCenter: \u0026#39;DNS-dev\u0026#39;, Component: \u0026#39;DNS\u0026#39;, ManagedBy: \u0026#39;CDK\u0026#39;, Project: \u0026#39;EveryoneCook\u0026#39; } Stack Outputs Sau khi deployment, stack export cÃ¡c giÃ¡ trá»‹ sau:\nTÃªn Output GiÃ¡ trá»‹ Sá»­ dá»¥ng HostedZoneId Z0123456789ABCDEFGHIJ Sá»­ dá»¥ng bá»Ÿi Certificate Stack cho DNS validation HostedZoneName everyonecook.cloud Sá»­ dá»¥ng bá»Ÿi cÃ¡c stacks khÃ¡c Ä‘á»ƒ táº¡o DNS records NameServers ns-1.awsdns-01.com, ns-2.awsdns-02.org, ... Cáº¥u hÃ¬nh táº¡i Hostinger cho DNS delegation CÃ¡c BÆ°á»›c Triá»ƒn khai BÆ°á»›c 1: Review Cáº¥u hÃ¬nh Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure:\ncd D:\\Project_AWS\\everyonecook\\infrastructure XÃ¡c minh environment configuration trong config/environment.ts:\ndev: { environment: \u0026#39;dev\u0026#39;, account: \u0026#39;YOUR_AWS_ACCOUNT_ID\u0026#39;, region: \u0026#39;ap-southeast-1\u0026#39;, domains: { frontend: \u0026#39;dev.everyonecook.cloud\u0026#39;, api: \u0026#39;api-dev.everyonecook.cloud\u0026#39;, cdn: \u0026#39;cdn-dev.everyonecook.cloud\u0026#39;, }, // ... cÃ¡c configs khÃ¡c } BÆ°á»›c 2: Deploy DNS Stack Deploy DNS stack lÃªn AWS:\n# Deploy chá»‰ DNS Stack npx cdk deploy EveryoneCook-dev-DNS --context environment=dev Káº¿t quáº£ mong Ä‘á»£i:\nâœ¨ Synthesis time: 5.23s\rEveryoneCook-dev-DNS: deploying...\rEveryoneCook-dev-DNS: creating CloudFormation changeset...\râœ… EveryoneCook-dev-DNS\râœ¨ Deployment time: 45.67s\rOutputs:\rEveryoneCook-dev-DNS.HostedZoneId = Z0123456789ABCDEFGHIJ\rEveryoneCook-dev-DNS.HostedZoneName = everyonecook.cloud\rEveryoneCook-dev-DNS.NameServers = ns-123.awsdns-45.com, ns-678.awsdns-90.net, ns-1234.awsdns-56.org, ns-5678.awsdns-01.co.uk\rStack ARN:\rarn:aws:cloudformation:ap-southeast-1:123456789012:stack/EveryoneCook-dev-DNS/... BÆ°á»›c 3: XÃ¡c minh trong AWS Console Di chuyá»ƒn Ä‘áº¿n Route 53 trong AWS Console VÃ o Hosted zones XÃ¡c minh hosted zone everyonecook.cloud Ä‘Ã£ Ä‘Æ°á»£c táº¡o Giao diá»‡n mong Ä‘á»£i:\nDomain name: everyonecook.cloud Type: Public hosted zone Records: 2 (NS vÃ  SOA records - tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o) Route 53 Hosted Zone hiá»ƒn thá»‹ chi tiáº¿t domain, NS records (4 nameservers), vÃ  SOA record\nBÆ°á»›c 4: Copy Nameservers Tá»« CloudFormation Outputs hoáº·c Route 53 console, copy táº¥t cáº£ 4 nameserver records:\nns-123.awsdns-45.com\rns-678.awsdns-90.net\rns-1234.awsdns-56.org\rns-5678.awsdns-01.co.uk Vá»‹ trÃ­ nameserver records trong Route 53 console\nCáº¥u hÃ¬nh Hostinger BÆ°á»›c Quan trá»ng Sau Deployment âš ï¸ QUAN TRá»ŒNG: Sau khi deploy DNS Stack, báº¡n Báº®T BUá»˜C pháº£i cáº­p nháº­t nameservers táº¡i Hostinger Ä‘á»ƒ á»§y quyá»n quáº£n lÃ½ DNS cho Route 53.\nCáº­p nháº­t Nameservers táº¡i Hostinger ÄÄƒng nháº­p vÃ o Hostinger hPanel\nTruy cáº­p https://hpanel.hostinger.com ÄÄƒng nháº­p vá»›i thÃ´ng tin Ä‘Äƒng nháº­p Hostinger cá»§a báº¡n Truy cáº­p Quáº£n lÃ½ Domain\nVÃ o má»¥c Domains Chá»n domain everyonecook.cloud Thay Ä‘á»•i Nameservers\nClick vÃ o DNS/Nameservers Chá»n Change nameservers Chá»n Custom nameservers Nháº­p Route 53 Nameservers\nNameserver 1: ns-123.awsdns-45.com Nameserver 2: ns-678.awsdns-90.net Nameserver 3: ns-1234.awsdns-56.org Nameserver 4: ns-5678.awsdns-01.co.uk LÆ°u Cáº¥u hÃ¬nh\nClick nÃºt Change nameservers Äá»£i xÃ¡c nháº­n Hostinger hPanel hiá»ƒn thá»‹ cáº¥u hÃ¬nh custom nameservers vá»›i Route 53 NS records\nThá»i gian Propagation Propagation ban Ä‘áº§u: 15-30 phÃºt Full global propagation: LÃªn Ä‘áº¿n 48 giá» (thÆ°á»ng trong vÃ²ng 2-4 giá») XÃ¡c minh DNS Delegation Sau khi cáº­p nháº­t nameservers, xÃ¡c minh delegation:\n# Kiá»ƒm tra nameservers cho domain nslookup -type=NS everyonecook.cloud # Hoáº·c sá»­ dá»¥ng dig (náº¿u cÃ³) dig NS everyonecook.cloud Káº¿t quáº£ mong Ä‘á»£i:\neveryonecook.cloud nameserver = ns-123.awsdns-45.com\reveryonecook.cloud nameserver = ns-678.awsdns-90.net\reveryonecook.cloud nameserver = ns-1234.awsdns-56.org\reveryonecook.cloud nameserver = ns-5678.awsdns-01.co.uk PhÃ¢n tÃ­ch Chi phÃ­ Chi phÃ­ HÃ ng thÃ¡ng Resource Chi phÃ­ Ghi chÃº Route 53 Hosted Zone $0.50/thÃ¡ng Chi phÃ­ cá»‘ Ä‘á»‹nh cho má»—i hosted zone DNS Queries $0.40 per triá»‡u queries 1 tá»· queries Ä‘áº§u tiÃªn/thÃ¡ng Tá»•ng (Æ¯á»›c tÃ­nh) ~$0.50-1.00/thÃ¡ng Traffic ráº¥t tháº¥p trong dev environment Ghi chÃº Tá»‘i Æ°u Chi phÃ­ âœ… Má»™t hosted zone duy nháº¥t cho táº¥t cáº£ environments (dev, staging, prod) âœ… Sá»­ dá»¥ng subdomain prefixes Ä‘á»ƒ phÃ¢n biá»‡t environments âœ… KhÃ´ng cÃ³ chi phÃ­ bá»• sung cho NS, SOA, hoáº·c cÃ¡c DNS records khÃ¡c âœ… GiÃ¡ pay-per-query ráº¥t hiá»‡u quáº£ vá» chi phÃ­ cho low-medium traffic Cross-Stack Dependencies Exports ÄÆ°á»£c sá»­ dá»¥ng bá»Ÿi CÃ¡c Stacks KhÃ¡c DNS Stack export cÃ¡c giÃ¡ trá»‹ Ä‘Æ°á»£c import bá»Ÿi:\nCertificate Stack (Phase 1.5)\nImports: HostedZoneId Má»¥c Ä‘Ã­ch: Táº¡o DNS validation records cho ACM certificates Core Stack (Phase 2)\nImports: HostedZoneId, HostedZoneName Má»¥c Ä‘Ã­ch: Táº¡o CloudFront A/AAAA alias records Backend Stack (Phase 4)\nImports: HostedZoneId Má»¥c Ä‘Ã­ch: Táº¡o API Gateway custom domain DNS records Luá»“ng Dependencies DNS Stack (Route 53)\râ”‚\râ”œâ”€â–º Certificate Stack (ACM certificates)\râ”‚\râ”œâ”€â–º Core Stack (CloudFront DNS records)\râ”‚\râ””â”€â–º Backend Stack (API Gateway DNS records) Checklist Validation TrÆ°á»›c khi tiáº¿p tá»¥c deploy Certificate Stack:\nDNS Stack Ä‘Ã£ deploy thÃ nh cÃ´ng lÃªn AWS Route 53 Hosted Zone hiá»ƒn thá»‹ trong AWS Console 4 nameserver records Ä‘Ã£ láº¥y tá»« stack outputs Nameservers Ä‘Ã£ cáº­p nháº­t táº¡i Hostinger hPanel DNS delegation Ä‘Ã£ xÃ¡c minh vá»›i nslookup hoáº·c dig Stack exports hiá»ƒn thá»‹ trong CloudFormation console Tags Ä‘Ã£ Ä‘Æ°á»£c Ã¡p dá»¥ng Ä‘Ãºng cho táº¥t cáº£ resources BÆ°á»›c tiáº¿p theo Sau khi deploy vÃ  cáº¥u hÃ¬nh DNS Stack thÃ nh cÃ´ng:\nâ¡ï¸ 5.4.2 Certificate Stack - Táº¡o ACM certificates vá»›i DNS validation\nCertificate Stack sáº½:\nTáº¡o ACM certificate cho CloudFront (cdn.everyonecook.cloud) Táº¡o wildcard ACM certificate cho API Gateway (*.everyonecook.cloud) Tá»± Ä‘á»™ng táº¡o DNS validation records trong Route 53 Pháº£i Ä‘Æ°á»£c deploy tá»›i region us-east-1 (yÃªu cáº§u CloudFront) TÃ i liá»‡u Tham kháº£o Source Code: infrastructure/lib/stacks/dns-stack.ts Base Stack: infrastructure/lib/base-stack.ts Environment Config: infrastructure/config/environment.ts AWS Documentation: Route 53 Hosted Zones Hostinger Guide: How to Change Nameservers "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.02-setup-environment/",
	"title": "Thiáº¿t láº­p MÃ´i trÆ°á»ng",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Trong bÆ°á»›c nÃ y, báº¡n sáº½ cÃ i Ä‘áº·t táº¥t cáº£ cÃ¡c cÃ´ng cá»¥ cáº§n thiáº¿t Ä‘á»ƒ phÃ¡t triá»ƒn vÃ  deploy á»©ng dá»¥ng EveryoneCook.\nCÃ¡c cÃ´ng cá»¥ cáº§n thiáº¿t 1. Node.js 20.x\n# Táº£i tá»« https://nodejs.org/ # Hoáº·c sá»­ dá»¥ng nvm (khuyáº¿n nghá»‹) nvm install 20 nvm use 20 # Kiá»ƒm tra cÃ i Ä‘áº·t node --version # Pháº£i lÃ  v20.x npm --version Screenshot: Terminal hiá»ƒn thá»‹ Node.js 20.x Ä‘Ã£ cÃ i Ä‘áº·t\n2. AWS CLI v2\n# Windows: Táº£i tá»« https://aws.amazon.com/cli/ # macOS: brew install awscli # Linux: curl \u0026#34;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\u0026#34; -o \u0026#34;awscliv2.zip\u0026#34; unzip awscliv2.zip sudo ./aws/install # Kiá»ƒm tra cÃ i Ä‘áº·t aws --version Screenshot: Terminal hiá»ƒn thá»‹ AWS CLI v2 Ä‘Ã£ cÃ i Ä‘áº·t\n3. AWS CDK CLI\n# CÃ i Ä‘áº·t CDK global npm install -g aws-cdk # Kiá»ƒm tra cÃ i Ä‘áº·t cdk --version Screenshot: Terminal hiá»ƒn thá»‹ CDK CLI Ä‘Ã£ cÃ i Ä‘áº·t\n4. Git\n# Táº£i tá»« https://git-scm.com/ # Hoáº·c sá»­ dá»¥ng package manager # Kiá»ƒm tra cÃ i Ä‘áº·t git --version 5. Code Editor\nKhuyáº¿n nghá»‹: Visual Studio Code vá»›i cÃ¡c extensions:\nAWS Toolkit GitLab Workflow ESLint Prettier Thiáº¿t láº­p AWS Account 1. Táº¡o AWS Account\nNáº¿u chÆ°a cÃ³ AWS account:\nTruy cáº­p https://aws.amazon.com/ Click \u0026ldquo;Create an AWS Account\u0026rdquo; LÃ m theo quy trÃ¬nh Ä‘Äƒng kÃ½ ThÃªm phÆ°Æ¡ng thá»©c thanh toÃ¡n 2. Táº¡o IAM User\nÄá»ƒ báº£o máº­t, khÃ´ng sá»­ dá»¥ng root account\nVÃ o IAM Console â†’ Users â†’ Create user Táº¡o user vÃ  lÆ°u credentials Screenshot: IAM console hiá»ƒn thá»‹ user Ä‘Ã£ táº¡o vá»›i AdministratorAccess\n3. Cáº¥u hÃ¬nh AWS CLI\n# Cáº¥u hÃ¬nh AWS credentials aws configure # Nháº­p: # AWS Access Key ID: [Your Access Key] # AWS Secret Access Key: [Your Secret Key] # Default region name: us-east-1 # Default output format: json Screenshot: Terminal hiá»ƒn thá»‹ aws configure hoÃ n táº¥t\n4. XÃ¡c minh AWS Access\n# Kiá»ƒm tra AWS credentials aws sts get-caller-identity # Sáº½ tráº£ vá» account ID vÃ  user ARN cá»§a báº¡n Thiáº¿t láº­p Domain (TÃ¹y chá»n) Náº¿u muá»‘n sá»­ dá»¥ng custom domain:\n1. ÄÄƒng kÃ½ Domain\nMua domain name trÃªn hpanel.hostinger Route 53 táº¡o dns record tá»›i hostinger Cho workshop nÃ y, chÃºng tÃ´i sá»­ dá»¥ng: everyonecook.cloud\n2. Ghi chÃº Domain Registrar\nBáº¡n sáº½ cáº§n truy cáº­p domain registrar Ä‘á»ƒ cáº­p nháº­t nameservers sau nÃ y.\nThiáº¿t láº­p GitLab Táº¡o GitLab Repo\nScreenshot: GitLab hiá»ƒn thá»‹ personal access token Ä‘Ã£ táº¡o\n3. Cáº¥u hÃ¬nh Git\n# Äáº·t tÃªn vÃ  email cá»§a báº¡n git config --global user.name \u0026#34;Your Name\u0026#34; git config --global user.email \u0026#34;your.email@example.com\u0026#34; # XÃ¡c minh cáº¥u hÃ¬nh git config --list Thiáº¿t láº­p Project 1. Clone hoáº·c Táº¡o Project\nTÃ¹y chá»n A: Clone project hiá»‡n cÃ³\ngit clone https://gitlab.com/your-username/everyonecook.git cd everyonecook TÃ¹y chá»n B: Táº¡o project má»›i\nmkdir everyonecook cd everyonecook git init 2. CÃ i Ä‘áº·t Dependencies\n# CÃ i Ä‘áº·t táº¥t cáº£ dependencies npm install # CÃ i Ä‘áº·t: # - Infrastructure dependencies (CDK) # - Backend dependencies (Lambda modules) # - Shared dependencies 3. Copy Environment Variables\n# Copy file env máº«u cp .env.example .env # Chá»‰nh sá»­a .env vá»›i cÃ¡c giÃ¡ trá»‹ cá»§a báº¡n # CÃ¡c biáº¿n chÃ­nh: # - AWS_REGION=us-east-1 # - AWS_ACCOUNT_ID=your-account-id # - DOMAIN_NAME=everyonecook.cloud # - GITLAB_TOKEN=your-gitlab-token XÃ¡c minh Kiá»ƒm tra má»i thá»© Ä‘Ã£ cÃ i Ä‘áº·t Ä‘Ãºng:\n# Kiá»ƒm tra Node.js node --version # v20.x # Kiá»ƒm tra npm npm --version # 10.x # Kiá»ƒm tra AWS CLI aws --version # aws-cli/2.x # Kiá»ƒm tra CDK cdk --version # 2.x # Kiá»ƒm tra Git git --version # 2.x # Kiá»ƒm tra AWS credentials aws sts get-caller-identity # Kiá»ƒm tra project dependencies npm list --depth=0 Kháº¯c phá»¥c sá»± cá»‘ Váº¥n Ä‘á»: Node.js version khÃ´ng khá»›p\n# Sá»­ dá»¥ng nvm Ä‘á»ƒ chuyá»ƒn phiÃªn báº£n nvm install 20 nvm use 20 Váº¥n Ä‘á»: KhÃ´ng tÃ¬m tháº¥y AWS CLI\nKhá»Ÿi Ä‘á»™ng láº¡i terminal sau khi cÃ i Ä‘áº·t Kiá»ƒm tra biáº¿n mÃ´i trÆ°á»ng PATH Váº¥n Ä‘á»: KhÃ´ng tÃ¬m tháº¥y lá»‡nh CDK\n# CÃ i Ä‘áº·t láº¡i CDK globally npm uninstall -g aws-cdk npm install -g aws-cdk Váº¥n Ä‘á»: AWS credentials khÃ´ng há»£p lá»‡\n# Cáº¥u hÃ¬nh láº¡i AWS CLI aws configure # Nháº­p credentials Ä‘Ãºng BÆ°á»›c tiáº¿p theo Sau khi thiáº¿t láº­p mÃ´i trÆ°á»ng xong, tiáº¿p tá»¥c vá»›i CDK Bootstrap Ä‘á»ƒ chuáº©n bá»‹ AWS account cho CDK deployments.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/2-proposal/",
	"title": "Äá» xuáº¥t dá»± Ã¡n",
	"tags": [],
	"description": "",
	"content": "AWS First Cloud AI Journey â€“ Káº¿ Hoáº¡ch Dá»± Ãn Hello World â€“ Äáº¡i há»c FPT â€“ EveryoneCook\nNgÃ y: 30/11/2025\nğŸ“¥ Táº£i Äá» Xuáº¥t Äáº§y Äá»§ (DOCX)\nMá»¤C Lá»¤C 1. Bá»I Cáº¢NH VÃ€ Äá»˜NG Lá»°C\n1.1 TÃ³m táº¯t Ä‘iá»u hÃ nh\n1.2 TIÃŠU CHÃ THÃ€NH CÃ”NG Dá»° ÃN\n1.3 Giáº£ Ä‘á»‹nh\n2. KIáº¾N TRÃšC GIáº¢I PHÃP / SÆ  Äá»’ KIáº¾N TRÃšC\n2.1 SÆ¡ Ä‘á»“ Kiáº¿n trÃºc Ká»¹ thuáº­t\n2.2 Káº¿ hoáº¡ch Ká»¹ thuáº­t\n2.3 Káº¿ hoáº¡ch Dá»± Ã¡n\n2.4 CÃ¢n nháº¯c Báº£o máº­t\n3. HOáº T Äá»˜NG VÃ€ Sáº¢N PHáº¨M BÃ€N GIAO\n3.1 Hoáº¡t Ä‘á»™ng vÃ  sáº£n pháº©m bÃ n giao\n3.2 NGOÃ€I PHáº M VI\n3.3 Lá»˜ TRÃŒNH ÄÆ¯A VÃ€O Sáº¢N XUáº¤T\n4. Dá»° TOÃN CHI PHÃ AWS THEO Dá»ŠCH Vá»¤\n5. NHÃ“M Dá»° ÃN\n6. NGUá»’N Lá»°C \u0026amp; Æ¯á»šC TÃNH CHI PHÃ\n7. CHáº¤P THUáº¬N\n1. Bá»I Cáº¢NH VÃ€ Äá»˜NG Lá»°C 1.1 TÃ³m táº¯t Ä‘iá»u hÃ nh ThÃ´ng tin khÃ¡ch hÃ ng\nKhÃ¡ch hÃ ng lÃ  má»™t startup táº­p trung xÃ¢y dá»±ng ná»n táº£ng máº¡ng xÃ£ há»™i hiá»‡n Ä‘áº¡i, nÆ¡i ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ chia sáº» cÃ´ng thá»©c náº¥u Äƒn, táº£i lÃªn hÃ¬nh áº£nh mÃ³n Äƒn, trao Ä‘á»•i kinh nghiá»‡m áº©m thá»±c vÃ  khÃ¡m phÃ¡ cÃ¡c mÃ³n Äƒn Ä‘Æ°á»£c AI gá»£i Ã½. Tá»• chá»©c hÆ°á»›ng Ä‘áº¿n viá»‡c cung cáº¥p má»™t ná»n táº£ng tÆ°Æ¡ng tÃ¡c cao, cÃ³ kháº£ nÄƒng phá»¥c vá»¥ lÆ°á»£ng ngÆ°á»i dÃ¹ng lá»›n vÃ  ngÃ y cÃ ng tÄƒng.\nMá»¥c tiÃªu kinh doanh vÃ  ká»¹ thuáº­t \u0026ndash; Ä‘á»™ng lá»±c chuyá»ƒn sang AWS cloud\nCho phÃ©p phÃ¡t triá»ƒn vÃ  triá»ƒn khai nhanh chÃ³ng sá»­ dá»¥ng cÃ¡c dá»‹ch vá»¥ quáº£n lÃ½ cá»§a AWS Äáº£m báº£o kháº£ nÄƒng má»Ÿ rá»™ng cao khi lÆ°á»£ng ngÆ°á»i dÃ¹ng vÃ  lÆ°u trá»¯ media tÄƒng Cung cáº¥p mÃ´i trÆ°á»ng Ä‘Ã¡ng tin cáº­y, Ä‘á»™ trá»… tháº¥p cho tÃ­nh toÃ¡n AI vÃ  phÃ¢n phá»‘i ná»™i dung Giáº£m chi phÃ­ háº¡ táº§ng ban Ä‘áº§u vÃ  chuyá»ƒn sang mÃ´ hÃ¬nh pay-as-you-go Cáº£i thiá»‡n báº£o máº­t dá»¯ liá»‡u, sao lÆ°u vÃ  tuÃ¢n thá»§ thÃ´ng qua cÃ¡c kháº£ nÄƒng native cá»§a AWS CÃ¡c trÆ°á»ng há»£p sá»­ dá»¥ng\nNgÆ°á»i dÃ¹ng táº£i lÃªn cÃ´ng thá»©c, hÃ¬nh áº£nh vÃ  video náº¥u Äƒn lÃªn ná»n táº£ng Há»‡ thá»‘ng gá»£i Ã½ mÃ³n Äƒn sá»­ dá»¥ng AI dá»±a trÃªn nguyÃªn liá»‡u cÃ³ sáºµn do ngÆ°á»i dÃ¹ng cung cáº¥p NgÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c xÃ£ há»™i thÃ´ng qua thÃ­ch, bÃ¬nh luáº­n, chia sáº» vÃ  theo dÃµi AI xá»­ lÃ½ vÄƒn báº£n vÃ  hÃ¬nh áº£nh Ä‘á»ƒ táº¡o gá»£i Ã½ cÃ´ng thá»©c Quáº£n trá»‹ viÃªn quáº£n lÃ½ ná»™i dung, giÃ¡m sÃ¡t hoáº¡t Ä‘á»™ng ná»n táº£ng vÃ  theo dÃµi phÃ¢n tÃ­ch hiá»‡u suáº¥t Äá»ƒ Ä‘Ã¡p á»©ng má»¥c tiÃªu cá»§a khÃ¡ch hÃ ng trong viá»‡c xÃ¢y dá»±ng ná»n táº£ng náº¥u Äƒn xÃ£ há»™i cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng vá»›i gá»£i Ã½ cÃ´ng thá»©c Ä‘Æ°á»£c há»— trá»£ bá»Ÿi AI, Ä‘á»‘i tÃ¡c sáº½ cung cáº¥p triá»ƒn khai cloud end-to-end Ä‘áº§y Ä‘á»§ trÃªn AWS. CÃ¡c dá»‹ch vá»¥ cung cáº¥p bao gá»“m:\nThiáº¿t káº¿ Kiáº¿n trÃºc Cloud: Äá»‹nh nghÄ©a kiáº¿n trÃºc serverless an toÃ n, cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng cao sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng phÃ¡p hay nháº¥t cá»§a AWS (Route 53, API Gateway, Lambda, DynamoDB, S3, CloudFront, Cognito) TÃ­ch há»£p AI: Triá»ƒn khai AWS Bedrock (Claude 3.5 Sonnet) cho gá»£i Ã½ cÃ´ng thá»©c thÃ´ng minh, phÃ¢n tÃ­ch hÃ¬nh áº£nh vÃ  cÃ¡c tÃ­nh nÄƒng xá»­ lÃ½ ngÃ´n ngá»¯ tá»± nhiÃªn Triá»ƒn khai Háº¡ táº§ng: XÃ¢y dá»±ng vÃ  triá»ƒn khai táº¥t cáº£ backend, frontend, xÃ¡c thá»±c vÃ  lá»›p dá»¯ liá»‡u sá»­ dá»¥ng Infrastructure as Code (IaC) vá»›i CI/CD pipelines tá»± Ä‘á»™ng hoÃ n toÃ n Báº£o máº­t \u0026amp; TuÃ¢n thá»§: Cáº¥u hÃ¬nh IAM roles, mÃ£ hÃ³a (KMS), WAF, logging, monitoring vÃ  cÃ¡c guardrails tuÃ¢n thá»§ Ä‘á»ƒ Ä‘áº£m báº£o báº£o máº­t ná»n táº£ng Thiáº¿t láº­p Observability: Báº­t CloudWatch dashboards, alarms, X-Ray tracing vÃ  táº­p trung log cho monitoring vÃ  insights hiá»‡u suáº¥t thá»i gian thá»±c DevOps \u0026amp; Tá»± Ä‘á»™ng hÃ³a: Triá»ƒn khai quy trÃ¬nh build/deploy tá»± Ä‘á»™ng qua GitLab + Amplify, operational pipelines vÃ  cáº¥u hÃ¬nh auto-scaling Tá»‘i Æ°u Hiá»‡u suáº¥t: Cáº¥u hÃ¬nh CDN caching, DynamoDB capacity scaling, search indexing vÃ  xá»­ lÃ½ background báº¥t Ä‘á»“ng bá»™ dá»±a trÃªn SQS Chuyá»ƒn giao Kiáº¿n thá»©c \u0026amp; TÃ i liá»‡u: Cung cáº¥p tÃ i liá»‡u ká»¹ thuáº­t, phÆ°Æ¡ng phÃ¡p hay nháº¥t, hÆ°á»›ng dáº«n kiáº¿n trÃºc vÃ  Ä‘Ã o táº¡o bÃ n giao cho Ä‘á»™i ngÅ© ká»¹ thuáº­t cá»§a khÃ¡ch hÃ ng 1.2 TIÃŠU CHÃ THÃ€NH CÃ”NG Dá»° ÃN Kháº£ dá»¥ng há»‡ thá»‘ng â‰¥ 99.9% uptime trÃªn táº¥t cáº£ dá»‹ch vá»¥ production (API Gateway, Lambda, DynamoDB, CloudFront) Thá»i gian táº£i trang \u0026lt; 2.5 giÃ¢y cho giao diá»‡n ngÆ°á»i dÃ¹ng chÃ­nh Ä‘Æ°á»£c phÃ¢n phá»‘i qua CloudFront vÃ  Amplify Thá»i gian pháº£n há»“i API \u0026lt; 300 ms cho 90% táº¥t cáº£ cÃ¡c yÃªu cáº§u API hÆ°á»›ng ngÆ°á»i dÃ¹ng trong Ä‘iá»u kiá»‡n traffic bÃ¬nh thÆ°á»ng Äá»™ trá»… xá»­ lÃ½ AI \u0026lt; 5 giÃ¢y cho gá»£i Ã½ cÃ´ng thá»©c Ä‘Æ°á»£c táº¡o bá»Ÿi AWS Bedrock Tá»· lá»‡ thÃ nh cÃ´ng xÃ¡c thá»±c ngÆ°á»i dÃ¹ng â‰¥ 98% vá»›i Cognito xá»­ lÃ½ Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p vÃ  xÃ¡c minh email KhÃ´ng cÃ³ lá»— há»•ng báº£o máº­t nghiÃªm trá»ng sau khi review báº£o máº­t vÃ  triá»ƒn khai WAF rules Äá»™ bá»n dá»¯ liá»‡u 99.999999999% (11 nines) Ä‘Æ°á»£c Ä‘áº£m báº£o thÃ´ng qua S3 object storage vÃ  DynamoDB Kháº£ nÄƒng má»Ÿ rá»™ng há»— trá»£ 10,000+ ngÆ°á»i dÃ¹ng Ä‘á»“ng thá»i mÃ  khÃ´ng giáº£m hiá»‡u suáº¥t nhá» háº¡ táº§ng serverless Kiá»ƒm soÃ¡t chi phÃ­ váº­n hÃ nh trong ngÃ¢n sÃ¡ch má»¥c tiÃªu: sá»­ dá»¥ng AWS hÃ ng thÃ¡ng khÃ´ng vÆ°á»£t quÃ¡ $200 cho production Tá»· lá»‡ thÃ nh cÃ´ng táº£i lÃªn \u0026amp; xá»­ lÃ½ hÃ¬nh áº£nh â‰¥ 99%, Ä‘Æ°á»£c há»— trá»£ bá»Ÿi S3, Lambda Workers vÃ  SQS Hiá»‡u suáº¥t tÃ¬m kiáº¿m dÆ°á»›i 1 giÃ¢y (náº¿u OpenSearch Ä‘Æ°á»£c báº­t) cho cÃ¡c truy váº¥n tÃ¬m kiáº¿m cÃ´ng thá»©c/ná»™i dung Pháº¡m vi monitoring 100% dá»‹ch vá»¥ quan trá»ng sá»­ dá»¥ng CloudWatch dashboards, alarms vÃ  X-Ray tracing Thá»i gian triá»ƒn khai CI/CD \u0026lt; 5 phÃºt qua GitHub â†’ Amplify vÃ  IaC automation KhÃ´ng cÃ³ sá»± kiá»‡n máº¥t dá»¯ liá»‡u, Ä‘Æ°á»£c Ä‘áº£m báº£o bá»Ÿi DynamoDB PITR vÃ  S3 versioning 1.3 Giáº£ Ä‘á»‹nh KhÃ¡ch hÃ ng sáº½ cung cáº¥p quyá»n truy cáº­p Ä‘áº§y Ä‘á»§ vÃ o domain registrar (Hostinger) Ä‘á»ƒ cáº¥u hÃ¬nh DNS delegation sang Route 53 KhÃ¡ch hÃ ng sáº½ cung cáº¥p quyá»n truy cáº­p AWS account há»£p lá»‡ vá»›i quyá»n Administrator cho triá»ƒn khai vÃ  cáº¥u hÃ¬nh Táº¥t cáº£ dá»‹ch vá»¥ AWS cáº§n thiáº¿t (Amplify, API Gateway, Lambda, DynamoDB, CloudFront, Cognito, Bedrock, SES) Ä‘á»u kháº£ dá»¥ng vÃ  Ä‘Æ°á»£c há»— trá»£ trong region Ä‘Ã£ chá»n SES sáº½ Ä‘Æ°á»£c chuyá»ƒn thÃ nh cÃ´ng ra khá»i sandbox vÃ  Ä‘Æ°á»£c phÃª duyá»‡t cho gá»­i email production CÃ¡c tÃ­ch há»£p bÃªn thá»© ba (GitHub cho CI/CD, email clients bÃªn ngoÃ i, nguá»“n táº£i lÃªn hÃ¬nh áº£nh) sáº½ váº«n kháº£ dá»¥ng vÃ  á»•n Ä‘á»‹nh Äá»™i ngÅ© phÃ¡t triá»ƒn sáº½ duy trÃ¬ cháº¥t lÆ°á»£ng source code vÃ  tuÃ¢n theo cÃ¡c hÆ°á»›ng dáº«n kiáº¿n trÃºc do Ä‘á»‘i tÃ¡c cung cáº¥p KhÃ¡ch hÃ ng sáº½ cung cáº¥p pháº£n há»“i vÃ  phÃª duyá»‡t ká»‹p thá»i trong cÃ¡c giai Ä‘oáº¡n thiáº¿t káº¿, testing vÃ  triá»ƒn khai Phá»¥ thuá»™c\nKáº¿t ná»‘i internet Ä‘Ã¡ng tin cáº­y Ä‘Æ°á»£c yÃªu cáº§u cho táº¥t cáº£ ngÆ°á»i dÃ¹ng truy cáº­p á»©ng dá»¥ng web vÃ  APIs Há»‡ thá»‘ng phá»¥ thuá»™c vÃ o AWS Bedrock (Claude 3.5 Sonnet) cho táº¡o cÃ´ng thá»©c AI vÃ  cÃ³ thá»ƒ gáº·p biáº¿n Ä‘á»™ng hiá»‡u suáº¥t náº¿u model bá»‹ rate-limited Quy trÃ¬nh táº£i lÃªn vÃ  xá»­ lÃ½ hÃ¬nh áº£nh phá»¥ thuá»™c vÃ o Ä‘á»™ tin cáº­y xá»­ lÃ½ cá»§a S3, Lambda vÃ  SQS Náº¿u OpenSearch Ä‘Æ°á»£c báº­t, cÃ¡c tÃ­nh nÄƒng tÃ¬m kiáº¿m phá»¥ thuá»™c vÃ o kháº£ dá»¥ng cá»§a OpenSearch domain GitHub Actions vÃ  Amplify phá»¥ thuá»™c vÃ o kháº£ dá»¥ng dá»‹ch vá»¥ GitHub RÃ ng buá»™c\nDá»± Ã¡n sáº½ Ä‘Æ°á»£c triá»ƒn khai hoÃ n toÃ n trong má»™t AWS region duy nháº¥t, cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n Ä‘á»™ trá»… cho ngÆ°á»i dÃ¹ng ngoÃ i region Giáº£i phÃ¡p Ä‘Æ°á»£c thiáº¿t káº¿ sá»­ dá»¥ng cÃ¡c pattern serverless; cÃ¡c workload dá»±a trÃªn EC2 tÃ¹y chá»‰nh náº±m ngoÃ i pháº¡m vi dá»± Ã¡n Uy tÃ­n domain SES cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n kháº£ nÄƒng gá»­i email trong nhá»¯ng tuáº§n Ä‘áº§u OpenSearch Ä‘Æ°á»£c triá»ƒn khai dÆ°á»›i dáº¡ng cluster single-node Ä‘á»ƒ tiáº¿t kiá»‡m chi phÃ­, nghÄ©a lÃ  khÃ´ng cÃ³ high availability cho search indexing Há»‡ thá»‘ng pháº£i náº±m trong má»¥c tiÃªu chi phÃ­ cá»§a khÃ¡ch hÃ ng (\u0026lt; $200/thÃ¡ng), háº¡n cháº¿ viá»‡c sá»­ dá»¥ng tÃ i nguyÃªn compute lá»›n Rá»§i ro\nPhÃª duyá»‡t SES production cÃ³ thá»ƒ bá»‹ trÃ¬ hoÃ£n, áº£nh hÆ°á»Ÿng Ä‘áº¿n email onboarding vÃ  thÃ´ng bÃ¡o ngÆ°á»i dÃ¹ng Náº¿u traffic tÄƒng báº¥t ngá», DynamoDB provisioned capacity cÃ³ thá»ƒ bá»‹ throttle mÃ  khÃ´ng cÃ³ Ä‘iá»u chá»‰nh scaling ká»‹p thá»i Thay Ä‘á»•i chi phÃ­ hoáº·c Ä‘á»™ trá»… AI model bá»Ÿi AWS cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n hiá»‡u suáº¥t á»©ng dá»¥ng hoáº·c kiá»ƒm soÃ¡t chi phÃ­ Cáº¥u hÃ¬nh CloudFront caching sai cÃ³ thá»ƒ dáº«n Ä‘áº¿n Ä‘á»™ trá»… cao hÆ¡n hoáº·c tÄƒng chi phÃ­ data transfer Báº¥t ká»³ cáº¥u hÃ¬nh IAM khÃ´ng chÃ­nh xÃ¡c nÃ o cÃ³ thá»ƒ dáº«n Ä‘áº¿n rá»§i ro báº£o máº­t hoáº·c giÃ¡n Ä‘oáº¡n dá»‹ch vá»¥ Thay Ä‘á»•i nhÃ¢n sá»± Ä‘á»™i ngÅ© khÃ¡ch hÃ ng hoáº·c thiáº¿u ká»¹ nÄƒng DevOps cÃ³ thá»ƒ lÃ m cháº­m báº£o trÃ¬ hoáº·c triá»ƒn khai trong tÆ°Æ¡ng lai 2. KIáº¾N TRÃšC GIáº¢I PHÃP / SÆ  Äá»’ KIáº¾N TRÃšC 2.1 SÆ¡ Ä‘á»“ Kiáº¿n trÃºc Ká»¹ thuáº­t Kiáº¿n trÃºc giáº£i phÃ¡p Ä‘á» xuáº¥t cho ná»n táº£ng máº¡ng xÃ£ há»™i náº¥u Äƒn Ä‘Æ°á»£c há»— trá»£ bá»Ÿi AI Ä‘Æ°á»£c thiáº¿t káº¿ sá»­ dá»¥ng stack cloud-native AWS hoÃ n toÃ n serverless vÃ  cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng. Kiáº¿n trÃºc Ä‘áº£m báº£o high availability, báº£o máº­t vÃ  tÃ­ch há»£p liá»n máº¡ch giá»¯a web frontend, backend APIs, xÃ¡c thá»±c, lÆ°u trá»¯ dá»¯ liá»‡u vÃ  dá»‹ch vá»¥ gá»£i Ã½ AI.\nDÆ°á»›i Ä‘Ã¢y lÃ  mÃ´ táº£ cÃ¡c thÃ nh pháº§n chÃ­nh vÃ  cÃ¡ch dá»¯ liá»‡u cháº£y qua há»‡ thá»‘ng:\n1. Lá»›p Network \u0026amp; Edge\nAmazon Route 53: Cung cáº¥p DNS routing cho custom domain Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi ná»n táº£ng. CÃ¡c yÃªu cáº§u HTTPS Ä‘áº¿n tá»« ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c resolve vÃ  chuyá»ƒn tiáº¿p Ä‘áº¿n CloudFront Amazon CloudFront: Hoáº¡t Ä‘á»™ng nhÆ° CDN toÃ n cáº§u phÃ¢n phá»‘i ná»™i dung frontend vá»›i Ä‘á»™ trá»… tháº¥p trong khi cache cÃ¡c file tÄ©nh AWS WAF: Báº£o vá»‡ á»©ng dá»¥ng khá»i cÃ¡c khai thÃ¡c web phá»• biáº¿n nhÆ° SQL injection, XSS vÃ  bot attacks 2. Frontend Hosting \u0026amp; Deployment\nAWS Amplify Hosting: Host vÃ  triá»ƒn khai á»©ng dá»¥ng frontend Next.js, tÃ­ch há»£p vá»›i GitLab CI/CD cho triá»ƒn khai tá»± Ä‘á»™ng tá»« quy trÃ¬nh phÃ¡t triá»ƒn 3. Lá»›p Application\nAmazon Cognito: Xá»­ lÃ½ xÃ¡c thá»±c vÃ  á»§y quyá»n ngÆ°á»i dÃ¹ng, há»— trá»£ email/password vÃ  social logins Amazon API Gateway: Phá»¥c vá»¥ nhÆ° Ä‘iá»ƒm vÃ o chÃ­nh cho backend APIs, expose cÃ¡c REST endpoints Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi frontend AWS Lambda: Chá»©a business logic backend, bao gá»“m quáº£n lÃ½ ngÆ°á»i dÃ¹ng, thao tÃ¡c bÃ i Ä‘Äƒng vÃ  cÃ´ng thá»©c, phÃ¢n tÃ­ch nguyÃªn liá»‡u, káº¿t ná»‘i Ä‘áº¿n Bedrock cho gá»£i Ã½ AI 4. Lá»›p AI Recommendation\nAmazon Bedrock: Cung cáº¥p kháº£ nÄƒng generative AI Ä‘á»ƒ gá»£i Ã½ cÃ´ng thá»©c dá»±a trÃªn nguyÃªn liá»‡u do ngÆ°á»i dÃ¹ng cung cáº¥p. Lambda gá»i cÃ¡c model Bedrock (Claude, Titan) Ä‘á»ƒ phÃ¢n tÃ­ch danh sÃ¡ch nguyÃªn liá»‡u, táº¡o gá»£i Ã½ cÃ´ng thá»©c, phÃ¢n loáº¡i danh má»¥c thá»±c pháº©m vÃ  tá»‘i Æ°u cÃ¡c bÆ°á»›c náº¥u Äƒn 5. Lá»›p Data Storage\nAmazon DynamoDB: LÆ°u trá»¯ dá»¯ liá»‡u á»©ng dá»¥ng cÃ³ cáº¥u trÃºc nhÆ° user profiles, posts/recipes, likes \u0026amp; comments, ingredient metadata Amazon S3: LÆ°u trá»¯ dá»¯ liá»‡u phi cáº¥u trÃºc nhÆ° recipe images, user-uploaded food photos, static content. S3 bucket Ä‘Æ°á»£c tÃ­ch há»£p vá»›i CloudFront qua OAI cho truy cáº­p an toÃ n 6. Lá»›p Observability \u0026amp; Security\nAmazon CloudWatch: GiÃ¡m sÃ¡t hiá»‡u suáº¥t Lambda, API Gateway access logs vÃ  system metrics AWS X-Ray: Thá»±c hiá»‡n distributed tracing cho API calls vÃ  debugging IAM: Äá»‹nh nghÄ©a permission boundaries giá»¯a API, Lambda functions, Bedrock, DynamoDB vÃ  S3 Amazon SES: Gá»­i verification emails, notifications vÃ  password recovery messages Amazon SNS: Xá»­ lÃ½ system-level alerts vÃ  asynchronous messaging 7. Deployment \u0026amp; Infrastructure Management\nAWS CDK: ÄÆ°á»£c developers sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a vÃ  provision toÃ n bá»™ háº¡ táº§ng qua CloudFormation templates, Ä‘áº£m báº£o triá»ƒn khai nháº¥t quÃ¡n, cÃ³ thá»ƒ tÃ¡i táº¡o vÃ  version-controlled 2.2 Káº¿ hoáº¡ch Ká»¹ thuáº­t Äá»‘i tÃ¡c sáº½ phÃ¡t triá»ƒn Infrastructure-as-Code (IaC) automation sá»­ dá»¥ng AWS CDK (Cloud Development Kit) vá»›i TypeScript/Python Ä‘á»ƒ provision toÃ n bá»™ mÃ´i trÆ°á»ng cloud. CÃ¡ch tiáº¿p cáº­n nÃ y Ä‘áº£m báº£o triá»ƒn khai nhanh, nháº¥t quÃ¡n vÃ  cÃ³ thá»ƒ láº·p láº¡i trÃªn nhiá»u AWS accounts vÃ  environments (dev, staging, production).\nTáº¥t cáº£ resources nhÆ° API Gateway, Lambda functions, DynamoDB tables, S3 buckets, Cognito user pools, Bedrock integration policies vÃ  CloudFront distributions sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng hÃ³a hoÃ n toÃ n qua IaC.\nQuy trÃ¬nh build vÃ  deployment á»©ng dá»¥ng cho frontend (Next.js) sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng hÃ³a sá»­ dá»¥ng AWS Amplify Hosting, tÃ­ch há»£p vá»›i GitLab pipelines. CÃ¡c thÃ nh pháº§n backend sáº½ Ä‘Æ°á»£c triá»ƒn khai thÃ´ng qua CDK pipelines Ä‘á»ƒ Ä‘áº£m báº£o releases Ä‘Æ°á»£c kiá»ƒm soÃ¡t, versioned vÃ  cÃ³ thá»ƒ láº·p láº¡i.\n2.3 Káº¿ hoáº¡ch Dá»± Ã¡n Äá»‘i tÃ¡c sáº½ Ã¡p dá»¥ng Agile Scrum framework qua tÃ¡m sprint 2 tuáº§n. CÃ¡c stakeholders tá»« team Ä‘Æ°á»£c yÃªu cáº§u tham gia Sprint Reviews vÃ  Sprint Retrospectives Ä‘á»ƒ Ä‘áº£m báº£o alignment vÃ  cáº£i tiáº¿n liÃªn tá»¥c.\nTrÃ¡ch nhiá»‡m team Ä‘á» xuáº¥t:\nProduct Owner: Äá»‹nh nghÄ©a user stories, Æ°u tiÃªn backlog vÃ  Ä‘áº£m báº£o sáº£n pháº©m Ä‘Ã¡p á»©ng nhu cáº§u ngÆ°á»i dÃ¹ng Scrum Master: Äiá»u phá»‘i Scrum ceremonies, loáº¡i bá» blockers vÃ  duy trÃ¬ nÄƒng suáº¥t team Development Team: Triá»ƒn khai features, thá»±c hiá»‡n unit testing vÃ  cá»™ng tÃ¡c integration AI/ML Specialist: PhÃ¡t triá»ƒn vÃ  tinh chá»‰nh AI recommendation engine gá»£i Ã½ cÃ´ng thá»©c dá»±a trÃªn nguyÃªn liá»‡u do ngÆ°á»i dÃ¹ng cung cáº¥p UI/UX Designer: Thiáº¿t káº¿ giao diá»‡n trá»±c quan vÃ  Ä‘áº£m báº£o tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng mÆ°á»£t mÃ  trÃªn cáº£ web vÃ  mobile platforms QA/Testers: XÃ¡c nháº­n chá»©c nÄƒng feature, thá»±c hiá»‡n regression testing vÃ  Ä‘áº£m báº£o Ä‘á»™ tin cáº­y há»‡ thá»‘ng Nhá»‹p Ä‘á»™ giao tiáº¿p:\nDaily Stand-ups: Há»p 15 phÃºt cho cáº­p nháº­t tiáº¿n Ä‘á»™ vÃ  blockers ngay láº­p tá»©c Sprint Planning: VÃ o Ä‘áº§u má»—i sprint Ä‘á»ƒ Æ°u tiÃªn tasks Sprint Review: VÃ o cuá»‘i má»—i sprint Ä‘á»ƒ showcase cÃ¡c features hoÃ n thÃ nh cho stakeholders Sprint Retrospective: Sau má»—i sprint review Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cáº£i tiáº¿n cho sprint tiáº¿p theo 2.4 CÃ¢n nháº¯c Báº£o máº­t Äá»‘i tÃ¡c sáº½ triá»ƒn khai cÃ¡c phÆ°Æ¡ng phÃ¡p báº£o máº­t tá»‘t nháº¥t trÃªn nÄƒm danh má»¥c sau Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t, toÃ n váº¹n vÃ  kháº£ dá»¥ng cá»§a ná»n táº£ng:\n1. Access\nBáº­t Multi-Factor Authentication (MFA) cho táº¥t cáº£ tÃ i khoáº£n ngÆ°á»i dÃ¹ng vÃ  quáº£n trá»‹ Triá»ƒn khai role-based access control (RBAC) Ä‘á»ƒ giá»›i háº¡n quyá»n dá»±a trÃªn vai trÃ² ngÆ°á»i dÃ¹ng Thá»±c thi chÃ­nh sÃ¡ch máº­t kháº©u máº¡nh vÃ  rotation Ä‘á»‹nh ká»³ 2. Infrastructure\nTriá»ƒn khai á»©ng dá»¥ng trÃªn cÃ¡c dá»‹ch vá»¥ cloud Ä‘Æ°á»£c quáº£n lÃ½, an toÃ n theo cÃ¡c phÆ°Æ¡ng phÃ¡p báº£o máº­t tá»‘t nháº¥t cá»§a AWS Sá»­ dá»¥ng Virtual Private Cloud (VPC), network segmentation vÃ  security groups Ä‘á»ƒ cÃ´ láº­p resources Patch thÆ°á»ng xuyÃªn operating systems vÃ  containerized services Ä‘á»ƒ giáº£m thiá»ƒu vulnerabilities 3. Data\nMÃ£ hÃ³a táº¥t cáº£ dá»¯ liá»‡u at rest sá»­ dá»¥ng AWS KMS-managed keys vÃ  dá»¯ liá»‡u in transit sá»­ dá»¥ng TLS/HTTPS Triá»ƒn khai data classification Ä‘á»ƒ báº£o vá»‡ thÃ´ng tin ngÆ°á»i dÃ¹ng nháº¡y cáº£m Ãp dá»¥ng quy trÃ¬nh lÆ°u trá»¯ vÃ  backup dá»¯ liá»‡u an toÃ n 4. Detection\nBáº­t AWS CloudTrail vÃ  AWS Config Ä‘á»ƒ giÃ¡m sÃ¡t API activity vÃ  resource configurations Triá»ƒn khai cÆ¡ cháº¿ logging vÃ  alerting Ä‘á»ƒ phÃ¡t hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng báº¥t thÆ°á»ng hoáº·c Ä‘Ã¡ng ngá» theo thá»i gian thá»±c Thá»±c hiá»‡n vulnerability scanning vÃ  penetration testing Ä‘á»‹nh ká»³ trÃªn ná»n táº£ng 5. Incident Management\nThiáº¿t láº­p káº¿ hoáº¡ch incident response chÃ­nh thá»©c bao gá»“m detection, containment, remediation vÃ  communication Duy trÃ¬ audit trails vÃ  logs Ä‘á»ƒ há»— trá»£ forensic investigation náº¿u xáº£y ra sá»± kiá»‡n báº£o máº­t 3. HOáº T Äá»˜NG VÃ€ Sáº¢N PHáº¨M BÃ€N GIAO Project Phase Timeline Activities Deliverables/Milestones Total man-day Infrastructure Setup Week 1-2 - Learn all aws service\n- Practice LabÂ - WorklogÂ 2 week Project Foundation \u0026amp; Infrastructure Setup Week 3 -Â Initialize monorepo structure\n- setup development environmentÂ - Initialize Git repository and CI/CD\n- Initialize CDK project structure\n-Create environment configuration system\n-Setup CDK deployment scripts\n-Â Setup Git repository with CI/CD pipelines and branch protection\n-Â Configure local testing scripts and Git hooks for code quality\n- Set up AWS CDK project structure with proper organization for infrastructure as code\n-Â Implement centralized configuration management for dev, staging, and prod environments\n1 week -DNS Infrastructure (Route 53 Hosted Zone) - DNS Stack\n- Side Quest: CloudFront yÃªu cáº§u ACM certificate á»Ÿ us-east-1, nhÆ°ng stack chÃ­nh deploy á»Ÿ ap-southeast-1\nWeek 4 ,5 - Create a Public Hosted Zone\n- Configure name server delegation\n- Architecture Design\n- Create DNS Stack in CDK project\n- Connect DNS , User Route 53 Alias targeting for AWS - managedÂ - Request ACM certificates, Configure DNS validation in Route 53\n- Configure MX records for email , add SPF,DKIM,DMARC for email authentication\n- Create DNS structure , Validate DNS\n-npm run cdk deploy EveryoneCook-dev-CertificateÂ -Â Domain \u0026amp; Hosted Zone Setup\n- Deploy DNS Stack\n- Route 53 Hosted Zone Status\n- Create Public Hosted Zone \u0026amp; NS Delegation Plan\n- ACM Certificates Automation\n- Test DNS\n- Link DNS to AWS Resources\n- Monitoring\n- Deploy Certificate StackÂ 2 weeks Structure Core StackÂ Week 6,7 -Â Initialize Core Stack for DynamoDB, S3, CloudFront, and OpenSearch infrastructure\n-Â Create DynamoDB table with Provisioned Mode and Auto-Scaling for cost optimization\n- Implement Global Secondary Indexes for diverse access patterns\n- Configure KMS encryption and security settings for DynamoDB\n- Create all 4 S3 buckets (content, logs, incoming emails, CDN logs) with Intelligent-Tiering for cost optimization\n-Â Configure CloudFront CDN with compression and caching optimization\n- Setup signed URLs for private content (avatars, backgrounds)\n- Create OpenSearch domain for advanced search with cost optimization\n- Create CoreStack class\n- Implement DynamoDB Single Table with cost optimization\n- Create 5 GSI indexes\n- Setup encryption and security for DynamoDBÂ - S3 Storage, CloudFront CDN,OpenSeach Domain\n- Deploy Core Stack\n2 week Authentication Stack Week 8 - Initialize Authentication Stack for Cognito User Pool\n-Â Create Cognito User Pool with production-grade security settings\n- Setup SES for production email sending with Route 53 DNS automation\n- Implement Lambda triggers for Cognito lifecycle events\n- Cognito User Pool Setup\n- Implement Cognito User Pool with production settings\n- Configure SES email integration (Production mode)\n- Setup Cognito Lambda triggers\n1 week Backend Stack (API Gateway + Lambda ) Week 9,10 -Â Create API Gateway REST API with production settings and Cognito authorizer\n- Configure Cognito User Pool authorizer for API Gateway\n- Enable API Gateway caching for production to improve performance and reduce Lambda invocations\n-Â Enable request validation at API Gateway level to reject invalid requests early\n- Enable compression for API responses to reduce data transfer costs\n-Â Configure API Gateway custom domain for Everyone Cook project\n- Setup API Router Lambda directory structure\n- Implement routing logic for API Gateway requests\n-Â Deploy API Router Lambda to AWS and implement JWT validation for Cognito tokens\n- Setup Auth \u0026amp; User module directory structure\n- Create BackendStack class\n- Create API Gateway REST API\n- Setup Cognito Authorizer\n- Configure API Gateway caching\n-Â Configure API Gateway request validation\n-Â Enable API Gateway compression\n-Â Configure API Gateway custom domain\n-Â Create API Router Lambda structure\n-Â Implement API Router handler\n-Â Deploy API Router Lambda + Implement JWT Validation\n- Create Auth \u0026amp; User module structure\n- Implement authentication handlers\n- Implement user profile handlers,â€¦\n- Social Module Lambda\n2 weeks Frontend Stack + Fix bug , Tester Week 11,12 - Foundation\n-Â Authentication\n- UserProfile Managenment\n- Privacy Setting Pagess\n- Avatar Upload Component\n- Recipe Management\n- AI Recipe Suggestion\n- Social Feature, Search Discovery\n- Testing and Fix Bug\n- Functional profile view page\n- Login, signup, logout, password reset, and security middleware\n- Profile editing with validation\n- Avatar upload with S3 integration\n- Privacy settings interface\n2 week 3.1 Hoáº¡t Ä‘á»™ng vÃ  sáº£n pháº©m bÃ n giao Giai Ä‘oáº¡n Dá»± Ã¡n Timeline Hoáº¡t Ä‘á»™ng Sáº£n pháº©m/Milestones Thá»i gian Infrastructure Setup Tuáº§n 1-2 Há»c táº¥t cáº£ dá»‹ch vá»¥ AWS, Thá»±c hÃ nh Lab Worklog 2 tuáº§n Project Foundation Tuáº§n 3 Initialize monorepo, setup mÃ´i trÆ°á»ng dev, Git/CI/CD, CDK project Git repository, CDK project, environment configs 1 tuáº§n DNS Infrastructure Tuáº§n 4-5 Route 53 setup, ACM certificates, DNS validation Hosted Zone, SSL certificates, DNS stack 2 tuáº§n Core Stack Tuáº§n 6-7 DynamoDB, S3, CloudFront, OpenSearch setup Core infrastructure, storage, CDN 2 tuáº§n Authentication Stack Tuáº§n 8 Cognito User Pool, SES integration, Lambda triggers User authentication system 1 tuáº§n Backend Stack Tuáº§n 9-10 API Gateway, Lambda functions, routing logic REST API, backend services 2 tuáº§n 3.2 NGOÃ€I PHáº M VI Há»‡ thá»‘ng Messaging / Chat thá»i gian thá»±c\nPrivate hoáº·c group chat Háº¡ táº§ng messaging thá»i gian thá»±c (WebSocket, SignalR, Firebase Realtime DB, etc.) LÆ°u trá»¯ \u0026amp; mÃ£ hÃ³a lá»‹ch sá»­ tin nháº¯n Quáº£n lÃ½ Friends / Social Graph\nFriend requests, following/followers User-to-user connection graph Activity feed, notifications liÃªn quan Ä‘áº¿n friend actions Voice \u0026amp; Video Calling thá»i gian thá»±c\n1-to-1 hoáº·c group voice call Video call, screen sharing WebRTC signaling servers \u0026amp; TURN/STUN infrastructure Advanced Social Interaction\nIn-app messaging reactions Typing indicators, online/offline status Read receipts, presence tracking 3.3 Lá»˜ TRÃŒNH ÄÆ¯A VÃ€O Sáº¢N XUáº¤T 1. Project Foundation \u0026amp; Infrastructure\nInitialize project structure Set up core infrastructure baseline Configure Route 53 Hosted Zone (DNS Stack) 2. Cross-Region Certificate\nHandle CloudFront requirement cho ACM certificate á»Ÿ us-east-1 Sync certificate usage vá»›i main stack á»Ÿ ap-southeast-1 3. Core Application Stacks\nCore Stack: Shared resources / environment setup Authentication Stack: User auth, Cognito, permissions Backend Stack: API Gateway + Lambda functions 4. Frontend Deployment\nDeploy frontend (S3 + CloudFront) Bug fixes \u0026amp; QA testing 4. Dá»° TOÃN CHI PHÃ AWS THEO Dá»ŠCH Vá»¤ Target workload: 100-500 Monthly Active Users (MAU)\nDá»‹ch vá»¥ Chi phÃ­ hÃ ng thÃ¡ng (USD) MÃ´ táº£ Amazon DynamoDB $13.06 Single-table design, 5 GSIs, provisioned capacity Amazon S3 $0.84 2 buckets, Intelligent-Tiering Amazon CloudFront $1.44 CDN, Price Class 200 Amazon Cognito $0.00 Free Tier (\u0026lt; 50K MAU) AWS Lambda $0.20 1M requests/month (Free Tier) Amazon SES $0.10 Email sending API Gateway $14.60 With caching (0.5GB) Amazon Bedrock $5.00 Claude 3 Haiku (on-demand) Tá»•ng ~$35.24/thÃ¡ng Náº±m trong ngÃ¢n sÃ¡ch $200 ğŸ“Š AWS Pricing Calculator\n5. NHÃ“M Dá»° ÃN Partner Executive Sponsor\nTÃªn Chá»©c danh MÃ´ táº£ LiÃªn há»‡ Nguyen Gia Hung Director of FCJ Vietnam Training Program Executive Sponsor chá»‹u trÃ¡ch nhiá»‡m giÃ¡m sÃ¡t tá»•ng thá»ƒ chÆ°Æ¡ng trÃ¬nh thá»±c táº­p FCJ hunggia@amazon.com Project Stakeholders\nTÃªn Chá»©c danh Vai trÃ² LiÃªn há»‡ Van Hoang Kha Support Teams Executive Assistant chá»‹u trÃ¡ch nhiá»‡m giÃ¡m sÃ¡t tá»•ng thá»ƒ chÆ°Æ¡ng trÃ¬nh thá»±c táº­p FCJ Khab9thd@gmail.com Partner Project Team\nTÃªn Vai trÃ² TrÃ¡ch nhiá»‡m LiÃªn há»‡ Pham Minh Hoang Viet Leader Project Manager vietpmhse181851@gmail.com Nguyen Van Truong Member DevOps truongnvse182034@fpt.edu.vn Huynh Duc Anh Member Cloud Engineer anhhdse183114@fpt.edu.vn Nguyen Thanh Hong Member Tester hongntse183239@fpt.edu.vn Nguyen Quy Duc Member Frontend ducnqse182087@fpt.edu.vn 6. NGUá»’N Lá»°C \u0026amp; Æ¯á»šC TÃNH CHI PHÃ Nguá»“n lá»±c TrÃ¡ch nhiá»‡m Rate (USD)/Giá» Solution Architects [1] Architecture design, AWS service selection, security review, cost optimization $150 Engineers [2] Frontend (Next.js), Backend (Lambda/Node.js), Infrastructure (CDK), Testing $100 DevOps [1] CI/CD setup, monitoring, deployment automation $80 Giai Ä‘oáº¡n Dá»± Ã¡n Architects Engineers DevOps Tá»•ng Giá» Discovery \u0026amp; Requirements 16 24 8 48 Architecture Design 40 16 8 64 Development 16 200 40 256 Testing \u0026amp; QA 8 40 16 64 Deployment \u0026amp; Go-Live 8 24 24 56 Documentation \u0026amp; Training 8 16 8 32 Tá»•ng Giá» 96 320 104 520 Tá»•ng Chi phÃ­ $14,400 $32,000 $8,320 $54,720 7. CHáº¤P THUáº¬N VÃ¬ dá»± Ã¡n nÃ y hiá»‡n Ä‘ang á»Ÿ giai Ä‘oáº¡n trÃ¬nh bÃ y vÃ  chÆ°a Ä‘Æ°á»£c khÃ¡ch hÃ ng Ä‘Ã¡nh giÃ¡ chÃ­nh thá»©c, nÃªn quy trÃ¬nh cháº¥p nháº­n sau Ä‘Ã¢y Ä‘Æ°á»£c Ä‘á» xuáº¥t cho cÃ¡c giai Ä‘oáº¡n phÃ¢n phá»‘i trong tÆ°Æ¡ng lai:\n7.1 TiÃªu chÃ­ Cháº¥p nháº­n (Äá» xuáº¥t) Má»™t sáº£n pháº©m sáº½ Ä‘Æ°á»£c coi lÃ  cháº¥p nháº­n Ä‘Æ°á»£c khi Ä‘Ã¡p á»©ng cÃ¡c tiÃªu chÃ­ sau:\nCÃ¡c tÃ­nh nÄƒng chá»©c nÄƒng hoáº¡t Ä‘á»™ng theo Ä‘Ãºng quy Ä‘á»‹nh (xÃ¡c thá»±c, quáº£n lÃ½ cÃ´ng thá»©c, tÃ­nh nÄƒng xÃ£ há»™i, chá»©c nÄƒng AI).\nTáº¥t cáº£ cÃ¡c API Ä‘á»u pháº£n há»“i chÃ­nh xÃ¡c vÃ  tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ AWS (Lambda, API Gateway, DynamoDB, S3).\nÄÃ¡p á»©ng cÃ¡c yÃªu cáº§u báº£o máº­t (xÃ¡c minh JWT, HTTPS, kiá»ƒm soÃ¡t truy cáº­p, mÃ£ hÃ³a dá»¯ liá»‡u).\nGiao diá»‡n ngÆ°á»i dÃ¹ng hoáº¡t Ä‘á»™ng nhÆ° mong Ä‘á»£i trÃªn cÃ¡c thiáº¿t bá»‹ Ä‘Æ°á»£c há»— trá»£.\nKhÃ´ng xuáº¥t hiá»‡n lá»—i nghiÃªm trá»ng nÃ o trong quÃ¡ trÃ¬nh thá»±c hiá»‡n kiá»ƒm thá»­.\n7.2 Quy trÃ¬nh Cháº¥p nháº­n Thá»i gian xem xÃ©t: 8 ngÃ y lÃ m viá»‡c Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ vÃ  kiá»ƒm thá»­.\nNáº¿u Ä‘Æ°á»£c cháº¥p nháº­n â†’ Sáº£n pháº©m Ä‘Æ°á»£c kÃ½ duyá»‡t.\nNáº¿u phÃ¡t hiá»‡n váº¥n Ä‘á» â†’ ChÃºng tÃ´i sáº½ gá»­i thÃ´ng bÃ¡o tá»« chá»‘i kÃ¨m theo pháº£n há»“i.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/3.2-blog2/",
	"title": "Blog 2",
	"tags": [],
	"description": "",
	"content": "Äá»•i má»›i báº£o máº­t Ä‘Ã¡m mÃ¢y báº¯t Ä‘áº§u táº¡i re:Inforce 2025 CÃ¢n báº±ng giá»¯a tá»‘c Ä‘á»™ vÃ  báº£o máº­t Má»—i ngÃ y, tÃ´i trÃ² chuyá»‡n vá»›i cÃ¡c lÃ£nh Ä‘áº¡o an ninh máº¡ng Ä‘ang pháº£i Ä‘á»‘i máº·t vá»›i má»™t bÃ i toÃ¡n cÃ¢n báº±ng quan trá»ng. Má»™t máº·t, tá»• chá»©c cá»§a há» di chuyá»ƒn nhanh hÆ¡n bao giá» háº¿t, Ã¡p dá»¥ng cÃ¡c cÃ´ng nghá»‡ Ä‘á»™t phÃ¡ nhÆ° AI táº¡o sinh vÃ  má»Ÿ rá»™ng dáº¥u chÃ¢n trÃªn Ä‘Ã¡m mÃ¢y. Máº·t khÃ¡c, há» cáº§n duy trÃ¬ kiá»ƒm soÃ¡t báº£o máº­t máº¡nh máº½ vÃ  kháº£ nÄƒng quan sÃ¡t trong má»™t mÃ´i trÆ°á»ng ngÃ y cÃ ng phá»©c táº¡p.\nChÃºng ta Ä‘á»u biáº¿t ráº±ng viá»‡c bá»• sung thÃªm nhiá»u cÃ´ng cá»¥ vÃ  lá»›p kiá»ƒm soÃ¡t báº£o máº­t khÃ´ng pháº£i lÃ  con Ä‘Æ°á»ng bá»n vá»¯ng. ChÃºng ta cáº§n má»™t cÃ¡ch tiáº¿p cáº­n khÃ¡c Ä‘á»ƒ báº£o máº­t cÃ³ thá»ƒ má»Ÿ rá»™ng.\nre:Inforce 2025: Lá»™ trÃ¬nh báº£o máº­t thÃºc Ä‘áº©y Ä‘á»•i má»›i ÄÃ¢y chÃ­nh lÃ  Ä‘á»™ng lá»±c hÃ¬nh thÃ nh táº§m nhÃ¬n cá»§a chÃºng tÃ´i cho AWS re:Inforce 2025. Khi Ä‘Æ°á»£c triá»ƒn khai Ä‘Ãºng, báº£o máº­t á»Ÿ quy mÃ´ lá»›n khÃ´ng chá»‰ lÃ  rÃ o cháº¯n, mÃ  trá»Ÿ thÃ nh bá»‡ phÃ³ng cho kinh doanh, giÃºp tá»• chá»©c di chuyá»ƒn nhanh hÆ¡n vÃ  tá»± tin hÆ¡n trÃªn Ä‘Ã¡m mÃ¢y.\nTáº¡i re:Inforce, chÃºng tÃ´i sáº½ chia sáº» táº§m nhÃ¬n vá» viá»‡c Ä‘Æ¡n giáº£n hÃ³a báº£o máº­t á»Ÿ quy mÃ´ lá»›n, dá»±a trÃªn kinh nghiá»‡m há»— trá»£ hÃ ng triá»‡u khÃ¡ch hÃ ng toÃ n cáº§u. ChÃºng tÃ´i sáº½ khÃ¡m phÃ¡ cÃ¡ch cÃ¡c tá»• chá»©c xÃ¢y dá»±ng á»©ng dá»¥ng cÃ³ kháº£ nÄƒng chá»‘ng chá»‹u báº©m sinh, vá»«a báº£o vá»‡ trÆ°á»›c cÃ¡c má»‘i Ä‘e dá»a hiá»‡n Ä‘áº¡i, vá»«a thÃºc Ä‘áº©y Ä‘á»•i má»›i. TÃ´i Ä‘áº·c biá»‡t hÃ o há»©ng giá»›i thiá»‡u cÃ¡c vÃ­ dá»¥ thá»±c táº¿ tá»« khÃ¡ch hÃ ng vÃ  máº«u kiáº¿n trÃºc cho tháº¥y báº£o máº­t cÃ³ thá»ƒ há»— trá»£ trá»±c tiáº¿p má»¥c tiÃªu kinh doanh.\nMÃ´i trÆ°á»ng há»c táº­p chuyÃªn sÃ¢u vá» báº£o máº­t Ä‘Ã¡m mÃ¢y ChÃºng tÃ´i táº¡o ra re:Inforce nhÆ° má»™t sá»± kiá»‡n chuyÃªn biá»‡t, trá»±c tiáº¿p dÃ nh cho cá»™ng Ä‘á»“ng báº£o máº­t. KhÃ¡c vá»›i cÃ¡c sá»± kiá»‡n AWS quy mÃ´ rá»™ng, re:Inforce mang láº¡i khÃ´ng gian Ä‘á»ƒ:\nÄÃ o sÃ¢u chi tiáº¿t triá»ƒn khai. Äáº·t ra nhá»¯ng cÃ¢u há»i khÃ³. Giáº£i quyáº¿t cÃ¡c tÃ¬nh huá»‘ng phá»©c táº¡p. Táº¡i Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ trao Ä‘á»•i trá»±c tiáº¿p cÃ¹ng cÃ¡c ká»¹ sÆ° Ä‘Ã£ xÃ¢y dá»±ng dá»‹ch vá»¥ báº£o máº­t cá»§a AWS, cá»™ng tÃ¡c vá»›i cÃ¡c Ä‘á»‘i tÃ¡c báº£o máº­t, hoáº·c lÃªn lá»‹ch trao Ä‘á»•i riÃªng vá»›i cÃ¡c lÃ£nh Ä‘áº¡o AWS Ä‘á»ƒ giáº£i quyáº¿t nhu cáº§u cá»¥ thá»ƒ. ÄÃ¢y lÃ  mÃ´i trÆ°á»ng nÆ¡i viá»‡c há»c thá»±c sá»± diá»…n ra.\nChÃºng tÃ´i Ä‘Ã£ thiáº¿t káº¿ nhiá»u lá»™ trÃ¬nh há»c táº­p Ä‘á»ƒ phÃ¹ há»£p vá»›i tá»«ng giai Ä‘oáº¡n trong hÃ nh trÃ¬nh báº£o máº­t cá»§a báº¡n. Vá»›i hÆ¡n 250 phiÃªn ká»¹ thuáº­t, báº¡n sáº½ tÃ¬m tháº¥y ná»™i dung phÃ¹ há»£p â€” tá»« tá»± Ä‘á»™ng hÃ³a kiá»ƒm soÃ¡t báº£o máº­t, Ä‘á»“ng bá»™ nhÃ³m phÃ¡t triá»ƒn vÃ  báº£o máº­t, Ä‘áº¿n chuyá»ƒn Ä‘á»•i váº­n hÃ nh an ninh.\nCÃ¡c hoáº¡t Ä‘á»™ng chÃ­nh bao gá»“m:\nWorkshop tÆ°Æ¡ng tÃ¡c, nÆ¡i báº¡n xÃ¢y dá»±ng giáº£i phÃ¡p ngay táº¡i chá»—. Buá»•i tháº£o luáº­n ká»¹ thuáº­t nhÃ³m nhá». PhÃ²ng lab thá»±c hÃ nh Ä‘á»ƒ thá»­ nghiá»‡m cÃ¡ch tiáº¿p cáº­n má»›i. PhiÃªn â€œsolution-buildingâ€ cÃ¹ng chuyÃªn gia AWS. Äáº·c biá»‡t, 70% ná»™i dung thuá»™c cáº¥p Ä‘á»™ nÃ¢ng cao hoáº·c chuyÃªn gia, Ä‘áº£m báº£o cung cáº¥p hÆ°á»›ng dáº«n triá»ƒn khai chi tiáº¿t mÃ  báº¡n cáº§n.\nTham gia cÃ¹ng chÃºng tÃ´i táº¡i re:Inforce 2025 TÃ´i má»i báº¡n tham gia ba ngÃ y tráº£i nghiá»‡m sáº½ thay Ä‘á»•i cÃ¡ch báº¡n nghÄ© vÃ  triá»ƒn khai báº£o máº­t trÃªn Ä‘Ã¡m mÃ¢y.\nÄÄƒng kÃ½ ngay hÃ´m nay vá»›i mÃ£ SECBLObhZzr9 Ä‘á»ƒ nháº­n Æ°u Ä‘Ã£i giáº£m giÃ¡ $300 USD trong thá»i gian cÃ³ háº¡n. HÃ£y nhanh tay vÃ¬ sá»‘ lÆ°á»£ng vÃ© sáº½ háº¿t ráº¥t nhanh, dá»±a trÃªn kinh nghiá»‡m cÃ¡c nÄƒm trÆ°á»›c.\nCÃ¹ng nhau, chÃºng ta sáº½ khÃ¡m phÃ¡ cÃ¡ch báº£o máº­t Ä‘Ã¡m mÃ¢y Ä‘Æ¡n giáº£n vÃ  cÃ³ thá»ƒ má»Ÿ rá»™ng trá»Ÿ thÃ nh Ä‘á»™ng lá»±c cho tÆ°Æ¡ng lai cá»§a tá»• chá»©c báº¡n.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/4-eventparticipated/4.2-event2/",
	"title": "Event 2",
	"tags": [],
	"description": "",
	"content": "BÃ¡o cÃ¡o tá»•ng káº¿t: â€œDevOps on AWS Workshopâ€ Má»¥c tiÃªu sá»± kiá»‡n Giá»›i thiá»‡u vÄƒn hoÃ¡, tÆ° duy vÃ  cÃ¡c nguyÃªn táº¯c DevOps TrÃ¬nh bÃ y há»‡ thá»‘ng dá»‹ch vá»¥ DevOps trÃªn AWS phá»¥c vá»¥ CI/CD Thá»±c hÃ nh Infrastructure as Code (IaC) vá»›i CloudFormation vÃ  CDK TÃ¬m hiá»ƒu containerization vÃ  orchestration trÃªn AWS Giá»›i thiá»‡u monitoring, observability vÃ  quy trÃ¬nh xá»­ lÃ½ sá»± cá»‘ Chia sáº» case study DevOps thá»±c táº¿ vÃ  Ä‘á»‹nh hÆ°á»›ng nghá» nghiá»‡p Lá»‹ch trÃ¬nh \u0026amp; Ná»™i dung chÃ­nh cá»§a Workshop Buá»•i sÃ¡ng (8:30 â€“ 12:00) 8:30 â€“ 9:00 AM | Welcome \u0026amp; DevOps Mindset Ná»™i dung Ã”n láº¡i ná»™i dung buá»•i AI/ML vÃ  má»‘i liÃªn há»‡ vá»›i DevOps Giá»›i thiá»‡u vÄƒn hoÃ¡ DevOps, tÄƒng tÃ­nh cá»™ng tÃ¡c vÃ  pháº£n há»“i liÃªn tá»¥c CÃ¡c chá»‰ sá»‘ DevOps quan trá»ng: DORA metrics (Lead Time, Deployment Frequency, Change Failure Rate, MTTR) Vai trÃ² cá»§a minh báº¡ch vÃ  cáº£i tiáº¿n liÃªn tá»¥c Äiá»ƒm ná»•i báº­t:\nNháº¥n máº¡nh DevOps lÃ  má»™t sá»± thay Ä‘á»•i vÄƒn hoÃ¡, khÃ´ng chá»‰ lÃ  cÃ´ng nghá»‡ LÃ m rÃµ cÃ¡ch AI/ML Ä‘Æ°á»£c tÃ­ch há»£p vÃ o quy trÃ¬nh DevOps DevOps giÃºp tÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn, cáº£i thiá»‡n Ä‘á»™ á»•n Ä‘á»‹nh vÃ  gáº¯n káº¿t tá»• chá»©c 9:00 â€“ 10:30 AM | AWS DevOps Services â€“ CI/CD Pipeline ThÃ nh pháº§n chÃ­nh Source Control vá»›i AWS CodeCommit Chiáº¿n lÆ°á»£c Git: GitFlow, Trunk-based development Build \u0026amp; Test vá»›i CodeBuild Buildspec, unit test, integration test Triá»ƒn khai vá»›i CodeDeploy CÃ¡c chiáº¿n lÆ°á»£c: Blue/Green, Canary, Rolling update Orchestration vá»›i CodePipeline Pipeline tá»± Ä‘á»™ng hoÃ¡ tá»« Source â†’ Build â†’ Test â†’ Deploy Demo CI/CD toÃ n diá»‡n tá»« commit â†’ build â†’ deploy Blue/Green deployment + rollback tá»± Ä‘á»™ng Káº¿t luáº­n chÃ­nh:\nCI/CD giÃºp giáº£m rá»§i ro triá»ƒn khai vÃ  tÄƒng á»•n Ä‘á»‹nh CÃ¡c chiáº¿n lÆ°á»£c triá»ƒn khai giáº£m downtime Ä‘Ã¡ng ká»ƒ CodePipeline tá»± Ä‘á»™ng hoÃ¡ quy trÃ¬nh vá»›i chi phÃ­ váº­n hÃ nh tháº¥p 10:30 â€“ 10:45 AM | Nghá»‰ giáº£i lao 10:45 AM â€“ 12:00 PM | Infrastructure as Code (IaC) Ná»™i dung chÃ­nh AWS CloudFormation Template, stack lifecycle, drift detection AWS CDK (Cloud Development Kit) Construct, pattern cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng, há»— trá»£ Ä‘a ngÃ´n ngá»¯ So sÃ¡nh IaC CloudFormation (declarative) vs CDK (programmatic) Demo Deploy háº¡ táº§ng báº±ng CloudFormation Deploy cÃ¹ng kiáº¿n trÃºc báº±ng AWS CDK Tháº£o luáº­n: Chá»n cÃ´ng cá»¥ IaC phÃ¹ há»£p\nCloudFormation: chÃ­nh xÃ¡c, rÃµ rÃ ng, á»•n Ä‘á»‹nh CDK: linh hoáº¡t, nhanh, dá»… tÃ¡i sá»­ dá»¥ng 12:00 â€“ 1:00 PM | Nghá»‰ trÆ°a (tá»± tÃºc) Buá»•i chiá»u (1:00 â€“ 5:00 PM) 1:00 â€“ 2:30 PM | Container Services on AWS Ná»™i dung Docker Fundamentals Microservices, Dockerfile, container lifecycle Amazon ECR LÆ°u trá»¯ image, quÃ©t lá»— há»•ng, lifecycle policy Amazon ECS \u0026amp; EKS Quáº£n lÃ½ cluster, scaling, orchestration So sÃ¡nh ECS/Fargate vÃ  EKS AWS App Runner Triá»ƒn khai container Ä‘Æ¡n giáº£n hoÃ¡ Demo \u0026amp; Case Study Deploy microservices trÃªn ECS, EKS vÃ  App Runner PhÃ¢n tÃ­ch Æ°u/nhÆ°á»£c Ä‘iá»ƒm: chi phÃ­, Ä‘á»™ phá»©c táº¡p, tráº£i nghiá»‡m dev Äiá»ƒm ná»•i báº­t:\nKhi nÃ o nÃªn chá»n ECS, EKS hay App Runner Vai trÃ² cá»§a scanning \u0026amp; lifecycle trong quáº£n lÃ½ image Case study vá» chuyá»ƒn Ä‘á»•i tá»« monolith sang microservices 2:30 â€“ 2:45 PM | Nghá»‰ giáº£i lao 2:45 â€“ 4:00 PM | Monitoring \u0026amp; Observability Ná»™i dung CloudWatch Metrics, Logs, Alarms, Dashboard, Anomaly Detection AWS X-Ray Distributed tracing, phÃ¢n tÃ­ch bottleneck ToÃ n bá»™ quy trÃ¬nh quan sÃ¡t Collect â†’ Analyze â†’ Visualize â†’ Alert Demo Táº¡o dashboard observability full-stack Tracing request giá»¯a cÃ¡c microservices báº±ng X-Ray Best Practices\nGiáº£m tÃ¬nh tráº¡ng â€œalert fatigueâ€ Dashboard dÃ nh cho DevOps/SRE Structured logging, correlation IDs 4:00 â€“ 4:45 PM | DevOps Best Practices \u0026amp; Case Studies Ná»™i dung Feature flags, A/B testing, progressive delivery Automated testing trong CI/CD Incident management \u0026amp; blameless postmortem Case study: Startup \u0026amp; Enterprise chuyá»ƒn Ä‘á»•i DevOps Äiá»ƒm ná»•i báº­t:\nCÃ¡ch cÃ¡c Ä‘á»™i hiá»‡u suáº¥t cao váº­n hÃ nh á»Ÿ quy mÃ´ lá»›n VÃ¬ sao postmortem giÃºp cáº£i tiáº¿n liÃªn tá»¥c Nhá»¯ng bÃ i há»c thá»±c táº¿ tá»« quÃ¡ trÃ¬nh DevOps transformation 4:45 â€“ 5:00 PM | Q\u0026amp;A \u0026amp; Káº¿t thÃºc Ná»™i dung káº¿t thÃºc Lá»™ trÃ¬nh nghá» nghiá»‡p DevOps Lá»™ trÃ¬nh chá»©ng chá»‰ AWS Ä‘á» xuáº¥t Tháº£o luáº­n vÃ  networking cuá»‘i buá»•i Key Takeaways VÄƒn hoÃ¡ DevOps Táº­p trung vÃ o cá»™ng tÃ¡c â€“ tá»± Ä‘á»™ng hoÃ¡ â€“ cáº£i tiáº¿n liÃªn tá»¥c DORA metrics giÃºp Ä‘o lÆ°á»ng hiá»‡u quáº£ rÃµ rÃ ng Ká»¹ thuáº­t CI/CD lÃ m giáº£m rá»§i ro triá»ƒn khai vÃ  tÄƒng tá»‘c Ä‘á»™ CloudFormation \u0026amp; CDK giÃºp chuáº©n hoÃ¡ háº¡ táº§ng ECS/EKS/App Runner cung cáº¥p lá»±a chá»n linh hoáº¡t cho container Monitoring \u0026amp; observability lÃ  yáº¿u tá»‘ sá»‘ng cÃ²n Ä‘á»ƒ váº­n hÃ nh há»‡ thá»‘ng phÃ¢n tÃ¡n á»¨ng dá»¥ng vÃ o cÃ´ng viá»‡c Ãp dá»¥ng trunk-based Ä‘á»ƒ tÄƒng tá»‘c release Tá»± Ä‘á»™ng hoÃ¡ testing vÃ  triá»ƒn khai Sá»­ dá»¥ng IaC Ä‘á»ƒ trÃ¡nh cáº¥u hÃ¬nh sai lá»‡ch (drift) Thiáº¿t láº­p dashboard quan sÃ¡t vÃ  tracing toÃ n diá»‡n Tráº£i nghiá»‡m sá»± kiá»‡n Há»c há»i tá»« chuyÃªn gia Chia sáº» thá»±c tiá»…n tá»‘t nháº¥t vá» DevOps vÃ  há»‡ thá»‘ng AWS Case study giÃºp hiá»ƒu rÃµ cÃ¡ch triá»ƒn khai trong thá»±c táº¿ Tráº£i nghiá»‡m thá»±c hÃ nh Demo CI/CD lÃ m rÃµ tá»«ng giai Ä‘oáº¡n cá»§a pipeline IaC demo cho tháº¥y sá»± khÃ¡c biá»‡t rÃµ rÃ ng giá»¯a CloudFormation vÃ  CDK So sÃ¡nh triá»ƒn khai container giÃºp ra quyáº¿t Ä‘á»‹nh Ä‘Ãºng Ä‘áº¯n hÆ¡n Káº¿t ná»‘i \u0026amp; tháº£o luáº­n Giao lÆ°u vá»›i cÃ¡c ká»¹ sÆ°, chuyÃªn gia DevOps Tháº£o luáº­n vá» tá»± Ä‘á»™ng hoÃ¡, scaling, quáº£n lÃ½ sá»± cá»‘ BÃ i há»c DevOps lÃ  sá»± káº¿t há»£p giá»¯a vÄƒn hoÃ¡ vÃ  cÃ´ng nghá»‡ Observability lÃ  ná»n táº£ng cá»§a váº­n hÃ nh á»•n Ä‘á»‹nh Chá»n mÃ´ hÃ¬nh orchestrator phÃ¹ há»£p phá»¥ thuá»™c vÃ o Ä‘á»™i ngÅ© vÃ  workload "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.2-week2/",
	"title": "Worklog Tuáº§n 2",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu tuáº§n 2: Káº¿t ná»‘i, lÃ m quen vá»›i cÃ¡c thÃ nh viÃªn trong First Cloud Journey. Hiá»ƒu dá»‹ch vá»¥ AWS cÆ¡ báº£n, cÃ¡ch dÃ¹ng console \u0026amp; CLI. CÃ¡c cÃ´ng viá»‡c cáº§n triá»ƒn khai trong tuáº§n nÃ y: Thá»© CÃ´ng viá»‡c NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh Nguá»“n tÃ i liá»‡u 2 - Há»c vá» AWS Virtual Private Cloud (VPC) + TÃ­nh nÄƒng báº£o máº­t VPC vÃ  Multi-VPC + VPC - DirectConnect - LoadBalancer - TÃ i nguyÃªn bá»• sung - Thá»±c hÃ nh: + Báº¯t Ä‘áº§u vá»›i Amazon VPC vÃ  AWS VPN Site-to-Site + Subnet, Báº£ng Ä‘á»‹nh tuyáº¿n, Internet Gateway, NAT Gateway, Security Group, Network ACLs + Táº¡o VPC, Báº£n Ä‘á»“ tÃ i nguyÃªn VPC, Táº¡o Subnet, Táº¡o Internet Gateway, Táº¡o Route Table cho Ä‘á»‹nh tuyáº¿n Internet Outbound qua Internet Gateway, Táº¡o Security Group + Táº¡o EC2 Instances trong Subnets, Kiá»ƒm tra káº¿t ná»‘i, Táº¡o NAT Gateway, EC2 Instance Connect Endpoint 11/09/2025 16/09/2025 https://000009.awsstudygroup.com/ 3 - Thiáº¿t láº­p Hybrid DNS vá»›i Route 53 Resolver + Táº¡o Key Pair + Khá»Ÿi táº¡o CloudFormation Template + Cáº¥u hÃ¬nh Security Group + Káº¿t ná»‘i tá»›i RDGW 18/09/2025 18/09/2025 https://000010.awsstudygroup.com/ 4 - Há»c vá» Hybrid DNS - Thá»±c hÃ nh: + Cáº¥u hÃ¬nh DNS + Táº¡o Route 53 Outbound Endpoint + Táº¡o Route 53 Resolver Rules + Táº¡o Route 53 Inbound Endpoint + Kiá»ƒm tra káº¿t quáº£ + Dá»n dáº¹p resources 19/09/2025 19/09/2025 https://000010.awsstudygroup.com/ 5 - Learn basic EC2: + Instance types and AMIs + EBS volumes + Elastic IP + Security Groups and Key Pairs - SSH connection methods to EC2 - Launch templates, auto-scaling basics 09/20/2025 09/21/2025 https://000004.awsstudygroup.com/vi/ 6 - Practice: + Launch EC2 instances with different instance types + Connect via SSH and test key pairs + Attach and mount EBS volumes + Associate Elastic IPs + Test security group rules and connectivity 09/21/2025 09/21/2025 https://000004.awsstudygroup.com/vi/ Week 2 Achievements: Gained a clear understanding of AWS core service groups: Compute (EC2, Lambda, Auto Scaling) Storage (S3, EBS, EFS) Networking (VPC, Route 53, VPN, Security Groups) Successfully created and fully configured an AWS Free Tier account. Became familiar with the AWS Management Console: locating services, navigating dashboards, accessing features. Installed and configured AWS CLI with: Access Key \u0026amp; Secret Key Default Region Output format Performed essential operations via CLI: Check account information and configuration List available regions Launch and manage EC2 instances Create and manage key pairs Inspect running services and resources Practiced connecting and managing AWS resources through both the console and CLI in parallel. Learned practical networking and hybrid DNS setup with Route 53 Resolver. Successfully tested EC2 connectivity, NAT Gateway, and Elastic IP configurations. Developed foundational skills for automated infrastructure deployment with CloudFormation templates. Built confidence in troubleshooting common AWS networking and access issues. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.2-certificate-stack/",
	"title": "5.4.2 Certificate Stack",
	"tags": [],
	"description": "",
	"content": " Certificate Stack - Chá»©ng Chá»‰ ACM cho SSL/TLS Tá»•ng Quan Certificate Stack lÃ  táº§ng háº¡ táº§ng Phase 1.5 cá»§a dá»± Ã¡n EveryoneCook. NÃ³ quáº£n lÃ½ cÃ¡c chá»©ng chá»‰ AWS Certificate Manager (ACM) cho CloudFront CDN vÃ  API Gateway, cung cáº¥p mÃ£ hÃ³a SSL/TLS cho má»i lÆ°u lÆ°á»£ng HTTPS.\nThá»© Tá»± Triá»ƒn Khai: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai sau DNS Stack vÃ  trÆ°á»›c Core Stack vÃ  Backend Stack.\nYÃªu Cáº§u Region Quan Trá»ng: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai á»Ÿ region us-east-1 vÃ¬ CloudFront lÃ  dá»‹ch vá»¥ toÃ n cáº§u chá»‰ cÃ³ thá»ƒ truy cáº­p chá»©ng chá»‰ ACM tá»« us-east-1.\nTrÃ¡ch Nhiá»‡m ChÃ­nh Táº¡o chá»©ng chá»‰ ACM cho CloudFront CDN (cdn.everyonecook.cloud hoáº·c cdn-dev.everyonecook.cloud) Táº¡o chá»©ng chá»‰ ACM wildcard cho API Gateway (*.everyonecook.cloud) XÃ¡c thá»±c DNS tá»± Ä‘á»™ng qua Route 53 Export cÃ¡c Certificate ARN cho Core Stack vÃ  Backend Stack Nhá»¯ng GÃ¬ Stack NÃ y KHÃ”NG Bao Gá»“m DNS records (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi DNS Stack - Phase 1) CloudFront distribution (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Core Stack - Phase 2) API Gateway custom domain (Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Backend Stack - Phase 4) CloudFront WAF Web ACL (Ä‘Ã£ loáº¡i bá» Ä‘á»ƒ tá»‘i Æ°u chi phÃ­) Kiáº¿n TrÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Route 53 Hosted Zone â”‚\râ”‚ everyonecook.cloud â”‚\râ”‚ (tá»« DNS Stack) â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚ DNS Validation\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ AWS Certificate Manager (us-east-1) â”‚\râ”‚ â”‚\râ”‚ Certificate 1: CloudFront Certificate â”‚\râ”‚ â”œâ”€ Domain: cdn.everyonecook.cloud (hoáº·c cdn-dev) â”‚\râ”‚ â”œâ”€ Validation: DNS (Route 53) â”‚\râ”‚ â”œâ”€ Status: Issued (5-10 phÃºt) â”‚\râ”‚ â””â”€ Export: CloudFrontCertificateArn â”‚\râ”‚ â”‚\râ”‚ Certificate 2: API Gateway Wildcard Certificate â”‚\râ”‚ â”œâ”€ Domain: *.everyonecook.cloud â”‚\râ”‚ â”œâ”€ SAN: everyonecook.cloud â”‚\râ”‚ â”œâ”€ Bao gá»“m: api.everyonecook.cloud, api-dev, api-staging â”‚\râ”‚ â”œâ”€ Validation: DNS (Route 53) â”‚\râ”‚ â”œâ”€ Status: Issued (5-10 phÃºt) â”‚\râ”‚ â””â”€ Export: ApiGatewayCertificateArn â”‚\râ”‚ â”‚\râ”‚ Tá»‘i Æ°u chi phÃ­: â”‚\râ”‚ CloudFront WAF Ä‘Ã£ loáº¡i bá» (-$9/thÃ¡ng) â”‚\râ”‚ Shield Standard (miá»…n phÃ­, tá»± Ä‘á»™ng báº­t) â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ”‚ Certificate ARN Exports\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬\râ–¼ â–¼ Core Stack Backend Stack (CloudFront) (API Gateway) Cáº¥u HÃ¬nh Stack Cáº¥u TrÃºc File infrastructure/lib/stacks/\râ””â”€â”€ certificate-stack.ts # Certificate Stack implementation Triá»ƒn Khai Code File: infrastructure/lib/stacks/certificate-stack.ts\nimport * as cdk from \u0026#39;aws-cdk-lib\u0026#39;; import * as acm from \u0026#39;aws-cdk-lib/aws-certificatemanager\u0026#39;; import * as route53 from \u0026#39;aws-cdk-lib/aws-route53\u0026#39;; import { Construct } from \u0026#39;constructs\u0026#39;; import { BaseStack, BaseStackProps } from \u0026#39;../base-stack\u0026#39;; /** * Certificate Stack cho CloudFront vÃ  API Gateway * * Stack nÃ y táº¡o cÃ¡c chá»©ng chá»‰ ACM cho CloudFront vÃ  API Gateway. * * YÃŠU Cáº¦U REGION QUAN TRá»ŒNG: * - CloudFront certificate: Báº®T BUá»˜C á»Ÿ us-east-1 (yÃªu cáº§u cá»§a CloudFront) * - API Gateway certificate: NÃªn á»Ÿ cÃ¹ng region vá»›i API Gateway (ap-southeast-1) * * Stack nÃ y Ä‘Æ°á»£c triá»ƒn khai á»Ÿ us-east-1 Ä‘á»ƒ xá»­ lÃ½ yÃªu cáº§u cross-region cá»§a CloudFront. * Vá»›i API Gateway, chÃºng ta sá»­ dá»¥ng wildcard certificate bao phá»§ api.everyonecook.cloud. * * TrÃ¡ch nhiá»‡m: * - Táº¡o chá»©ng chá»‰ ACM cho CloudFront á»Ÿ us-east-1 * - Táº¡o chá»©ng chá»‰ ACM wildcard cho API Gateway á»Ÿ us-east-1 (hoáº¡t Ä‘á»™ng toÃ n cáº§u) * - XÃ¡c thá»±c chá»©ng chá»‰ qua Route 53 DNS * - Export cÃ¡c certificate ARN Ä‘á»ƒ Core Stack vÃ  Backend Stack sá»­ dá»¥ng * * LÆ¯U Ã Tá»I Æ¯U CHI PHÃ: * - CloudFront WAF Ä‘Ã£ loáº¡i bá» Ä‘á»ƒ tiáº¿t kiá»‡m $9/thÃ¡ng ($108/nÄƒm) * - CloudFront váº«n Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi Shield Standard (miá»…n phÃ­, tá»± Ä‘á»™ng báº­t) * - API Gateway cÃ³ Ä‘áº§y Ä‘á»§ báº£o vá»‡ WAF (BackendStack) */ export class CertificateStack extends BaseStack { public readonly cloudFrontCertificate: acm.ICertificate; public readonly apiGatewayCertificate: acm.ICertificate; constructor(scope: Construct, id: string, props: BaseStackProps) { super(scope, id, props); // ThÃªm cÃ¡c tag Ä‘áº·c thÃ¹ cho stack cdk.Tags.of(this).add(\u0026#39;StackType\u0026#39;, \u0026#39;Certificate\u0026#39;); cdk.Tags.of(this).add(\u0026#39;Layer\u0026#39;, \u0026#39;Infrastructure\u0026#39;); cdk.Tags.of(this).add(\u0026#39;CostCenter\u0026#39;, `Certificate-${this.config.environment}`); // Import Route 53 Hosted Zone tá»« DNS Stack // LÆ°u Ã½: KhÃ´ng thá»ƒ sá»­ dá»¥ng Fn.importValue hoáº·c SSM Parameter cho cross-region references // Hosted Zone ID lÃ  á»•n Ä‘á»‹nh vÃ  khÃ´ng thay Ä‘á»•i, nÃªn chÃºng ta hardcode nÃ³ // GiÃ¡ trá»‹ nÃ y Ä‘áº¿n tá»« DNS Stack output: Z018823421GWCSYG5UMHV const hostedZoneId = \u0026#39;Z018823421GWCSYG5UMHV\u0026#39;; const hostedZone = route53.HostedZone.fromHostedZoneAttributes(this, \u0026#39;HostedZone\u0026#39;, { hostedZoneId: hostedZoneId, zoneName: \u0026#39;everyonecook.cloud\u0026#39;, }); // Táº¡o chá»©ng chá»‰ ACM cho CloudFront // Chá»©ng chá»‰ nÃ y Báº®T BUá»˜C á»Ÿ us-east-1 Ä‘á»ƒ CloudFront sá»­ dá»¥ng this.cloudFrontCertificate = this.createCloudFrontCertificate(hostedZone); // Táº¡o chá»©ng chá»‰ ACM wildcard cho API Gateway // Wildcard *.everyonecook.cloud bao phá»§ api.everyonecook.cloud // Chá»©ng chá»‰ nÃ y á»Ÿ us-east-1 cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi API Gateway á»Ÿ báº¥t ká»³ region nÃ o this.apiGatewayCertificate = this.createApiGatewayCertificate(hostedZone); // Tá»I Æ¯U CHI PHÃ: CloudFront WAF Ä‘Ã£ loáº¡i bá» // CloudFront Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi Shield Standard (miá»…n phÃ­, tá»± Ä‘á»™ng báº­t) // API Gateway cÃ³ Ä‘áº§y Ä‘á»§ báº£o vá»‡ WAF trong BackendStack // Tiáº¿t kiá»‡m: $9/thÃ¡ng ($108/nÄƒm) // Export cÃ¡c certificate ARN this.exportOutputs(); } /** * Táº¡o chá»©ng chá»‰ ACM cho CloudFront CDN * * QUAN TRá»ŒNG: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai á»Ÿ region us-east-1. * CloudFront lÃ  dá»‹ch vá»¥ toÃ n cáº§u nhÆ°ng control plane cá»§a nÃ³ á»Ÿ us-east-1, * nÃªn nÃ³ chá»‰ cÃ³ thá»ƒ truy cáº­p chá»©ng chá»‰ tá»« us-east-1. * * XÃ¡c thá»±c DNS lÃ  tá»± Ä‘á»™ng qua Route 53. * XÃ¡c thá»±c thÆ°á»ng máº¥t 5-10 phÃºt. * * @param hostedZone - Route 53 Hosted Zone cho DNS validation * @returns ACM Certificate cho CloudFront */ private createCloudFrontCertificate(hostedZone: route53.IHostedZone): acm.Certificate { const certificate = new acm.Certificate(this, \u0026#39;CloudFrontCertificate\u0026#39;, { domainName: this.config.domains.cdn, validation: acm.CertificateValidation.fromDns(hostedZone), certificateName: `EveryoneCook-CloudFront-${this.config.environment}`, }); // ThÃªm tags cdk.Tags.of(certificate).add(\u0026#39;Component\u0026#39;, \u0026#39;CloudFront\u0026#39;); cdk.Tags.of(certificate).add(\u0026#39;Purpose\u0026#39;, \u0026#39;CDN-SSL\u0026#39;); return certificate; } /** * Táº¡o chá»©ng chá»‰ ACM wildcard cho API Gateway * * Táº¡o wildcard certificate (*.everyonecook.cloud) bao phá»§: * - api.everyonecook.cloud (API Gateway) * - api-dev.everyonecook.cloud (API Gateway dev) * - api-staging.everyonecook.cloud (API Gateway staging) * * Chá»©ng chá»‰ nÃ y Ä‘Æ°á»£c táº¡o á»Ÿ us-east-1 nhÆ°ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi API Gateway * á»Ÿ báº¥t ká»³ region nÃ o qua cross-region certificate reference. * * XÃ¡c thá»±c DNS lÃ  tá»± Ä‘á»™ng qua Route 53. * XÃ¡c thá»±c thÆ°á»ng máº¥t 5-10 phÃºt. * * @param hostedZone - Route 53 Hosted Zone cho DNS validation * @returns ACM Certificate cho API Gateway */ private createApiGatewayCertificate(hostedZone: route53.IHostedZone): acm.Certificate { const certificate = new acm.Certificate(this, \u0026#39;ApiGatewayCertificate\u0026#39;, { domainName: \u0026#39;*.everyonecook.cloud\u0026#39;, // Wildcard bao phá»§ api.everyonecook.cloud subjectAlternativeNames: [\u0026#39;everyonecook.cloud\u0026#39;], // CÅ©ng bao phá»§ root domain validation: acm.CertificateValidation.fromDns(hostedZone), certificateName: `EveryoneCook-API-${this.config.environment}`, }); // ThÃªm tags cdk.Tags.of(certificate).add(\u0026#39;Component\u0026#39;, \u0026#39;APIGateway\u0026#39;); cdk.Tags.of(certificate).add(\u0026#39;Purpose\u0026#39;, \u0026#39;API-SSL\u0026#39;); return certificate; } /** * Export stack outputs cho cross-stack references * * Exports: * - CloudFrontCertificateArn: ACM Certificate ARN cho CloudFront (us-east-1) * - ApiGatewayCertificateArn: ACM Certificate ARN cho API Gateway (us-east-1) * * ÄÃƒ LOáº I Bá»: CloudFrontWebAclArn (tá»‘i Æ°u chi phÃ­) */ private exportOutputs(): void { // Export CloudFront certificate ARN cho Core Stack new cdk.CfnOutput(this, \u0026#39;CloudFrontCertificateArn\u0026#39;, { value: this.cloudFrontCertificate.certificateArn, exportName: this.exportName(\u0026#39;CloudFrontCertificateArn\u0026#39;), description: \u0026#39;ACM Certificate ARN cho CloudFront (us-east-1)\u0026#39;, }); // Export CloudFront certificate domain Ä‘á»ƒ xÃ¡c minh new cdk.CfnOutput(this, \u0026#39;CloudFrontCertificateDomain\u0026#39;, { value: this.config.domains.cdn, description: \u0026#39;Domain name cho CloudFront certificate\u0026#39;, }); // Export API Gateway certificate ARN cho Backend Stack new cdk.CfnOutput(this, \u0026#39;ApiGatewayCertificateArn\u0026#39;, { value: this.apiGatewayCertificate.certificateArn, exportName: this.exportName(\u0026#39;ApiGatewayCertificateArn\u0026#39;), description: \u0026#39;ACM Wildcard Certificate ARN cho API Gateway (us-east-1)\u0026#39;, }); // Export API Gateway certificate domain Ä‘á»ƒ xÃ¡c minh new cdk.CfnOutput(this, \u0026#39;ApiGatewayCertificateDomain\u0026#39;, { value: \u0026#39;*.everyonecook.cloud\u0026#39;, description: \u0026#39;Domain name cho API Gateway certificate (wildcard)\u0026#39;, }); } } Chi Tiáº¿t Cáº¥u HÃ¬nh ChÃ­nh 1. YÃªu Cáº§u Region Quan Trá»ng: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai á»Ÿ us-east-1:\n// Trong infrastructure/bin/app.ts const certificateStack = new CertificateStack(app, `${stackPrefix}-Certificate`, { env: { account: config.account, region: \u0026#39;us-east-1\u0026#39;, // Báº®T BUá»˜C lÃ  us-east-1 cho CloudFront }, config, description: `ACM Certificate cho CloudFront (${config.environment}) - us-east-1`, }); Táº¡i sao us-east-1?\nCloudFront lÃ  dá»‹ch vá»¥ toÃ n cáº§u vá»›i control plane á»Ÿ us-east-1 CloudFront chá»‰ cÃ³ thá»ƒ truy cáº­p chá»©ng chá»‰ ACM tá»« us-east-1 API Gateway wildcard certificate á»Ÿ us-east-1 hoáº¡t Ä‘á»™ng toÃ n cáº§u 2. Certificate Domains Stack táº¡o hai chá»©ng chá»‰ vá»›i domain theo environment:\nCloudFront Certificate:\n// Dev environment domainName: \u0026#39;cdn-dev.everyonecook.cloud\u0026#39; // Staging environment domainName: \u0026#39;cdn-staging.everyonecook.cloud\u0026#39; // Production environment domainName: \u0026#39;cdn.everyonecook.cloud\u0026#39; API Gateway Wildcard Certificate:\ndomainName: \u0026#39;*.everyonecook.cloud\u0026#39; // Bao phá»§ táº¥t cáº£ subdomain subjectAlternativeNames: [\u0026#39;everyonecook.cloud\u0026#39;] // CÅ©ng bao phá»§ root domain // Bao phá»§: // - api.everyonecook.cloud // - api-dev.everyonecook.cloud // - api-staging.everyonecook.cloud // - Báº¥t ká»³ *.everyonecook.cloud subdomain nÃ o trong tÆ°Æ¡ng lai 3. XÃ¡c Thá»±c DNS Tá»± Äá»™ng ACM tá»± Ä‘á»™ng táº¡o DNS validation records trong Route 53:\nvalidation: acm.CertificateValidation.fromDns(hostedZone) Äiá»u gÃ¬ xáº£y ra:\nACM táº¡o CNAME record trong Route 53 Ä‘á»ƒ xÃ¡c thá»±c Route 53 ngay láº­p tá»©c pháº£n há»“i vá»›i validation record ACM xÃ¡c minh record vÃ  cáº¥p chá»©ng chá»‰ XÃ¡c thá»±c hoÃ n thÃ nh trong 5-10 phÃºt (thÆ°á»ng nhanh hÆ¡n) 4. Cross-Region Certificate Reference Chá»©ng chá»‰ Ä‘Æ°á»£c táº¡o á»Ÿ us-east-1 Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi cÃ¡c stack khÃ¡c á»Ÿ ap-southeast-1:\n// Trong Core Stack (ap-southeast-1) - import CloudFront certificate tá»« us-east-1 const certificate = acm.Certificate.fromCertificateArn( this, \u0026#39;ImportedCloudFrontCertificate\u0026#39;, \u0026#39;arn:aws:acm:us-east-1:616580903213:certificate/8d53776e-0480-47d2-a6ff-4fe9b2eb6534\u0026#39; ); 5. Tá»‘i Æ¯u Chi PhÃ­ - Loáº¡i Bá» WAF Quyáº¿t Ä‘á»‹nh: CloudFront WAF Web ACL Ä‘Ã£ loáº¡i bá» Ä‘á»ƒ tiáº¿t kiá»‡m chi phÃ­:\n// ÄÃƒ LOáº I Bá»: CloudFront WAF Web ACL // Chi phÃ­ hÃ ng thÃ¡ng trÆ°á»›c Ä‘Ã¢y: $9/thÃ¡ng = $108/nÄƒm // TÃ¬nh tráº¡ng báº£o vá»‡: // Shield Standard: Báº£o vá»‡ DDoS (miá»…n phÃ­, tá»± Ä‘á»™ng báº­t) // CloudFront OAC: Cháº·n truy cáº­p S3 trá»±c tiáº¿p // Signed URLs: Báº£o vá»‡ ná»™i dung riÃªng tÆ° // âŒ WAF: ÄÃ£ loáº¡i bá» (tá»‘i Æ°u chi phÃ­) LÃ½ do:\nCloudFront chá»‰ phá»¥c vá»¥ ná»™i dung tÄ©nh (bá» máº·t táº¥n cÃ´ng tháº¥p) Shield Standard cung cáº¥p báº£o vá»‡ DDoS Layer 3/4 (miá»…n phÃ­) API Gateway cÃ³ Ä‘áº§y Ä‘á»§ báº£o vá»‡ WAF cho táº¥n cÃ´ng Layer 7 Tiáº¿t kiá»‡m: $9/thÃ¡ng = $108/nÄƒm Stack Outputs Sau khi triá»ƒn khai, stack export cÃ¡c giÃ¡ trá»‹ sau:\nOutput Name Value Sá»­ dá»¥ng CloudFrontCertificateArn arn:aws:acm:us-east-1:616580903213:certificate/8d53776e-... ÄÆ°á»£c Core Stack sá»­ dá»¥ng cho CloudFront distribution CloudFrontCertificateDomain cdn.everyonecook.cloud (hoáº·c cdn-dev) Chá»‰ Ä‘á»ƒ xÃ¡c minh ApiGatewayCertificateArn arn:aws:acm:us-east-1:616580903213:certificate/a1b2c3d4-... ÄÆ°á»£c Backend Stack sá»­ dá»¥ng cho API Gateway domain ApiGatewayCertificateDomain *.everyonecook.cloud Chá»‰ Ä‘á»ƒ xÃ¡c minh (wildcard) CÃ¡c BÆ°á»›c Triá»ƒn Khai BÆ°á»›c 1: XÃ¡c Minh Äiá»u Kiá»‡n TiÃªn Quyáº¿t TrÆ°á»›c khi triá»ƒn khai Certificate Stack, hÃ£y Ä‘áº£m báº£o:\nDNS Stack Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng Route 53 Hosted Zone tá»“n táº¡i vá»›i nameserver chÃ­nh xÃ¡c á»¦y quyá»n DNS tá»« Hostinger Ä‘Ã£ hoÃ n thÃ nh vÃ  lan truyá»n XÃ¡c minh DNS Ä‘ang hoáº¡t Ä‘á»™ng:\nnslookup -type=NS everyonecook.cloud BÆ°á»›c 2: Triá»ƒn Khai Certificate Stack Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure:\ncd D:\\Project_AWS\\everyonecook\\infrastructure Triá»ƒn khai Certificate Stack Ä‘áº¿n us-east-1:\n# Triá»ƒn khai Certificate Stack npx cdk deploy EveryoneCook-dev-Certificate --context environment=dev Quan trá»ng: LÆ°u Ã½ region lÃ  us-east-1, khÃ´ng pháº£i ap-southeast-1.\nKáº¿t quáº£ mong Ä‘á»£i:\nâœ¨ Synthesis time: 6.12s\rEveryoneCook-dev-Certificate: deploying...\r[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] (3/3)\rEveryoneCook-dev-Certificate: creating CloudFormation changeset...\rEveryoneCook-dev-Certificate\râœ¨ Deployment time: 125.34s\rOutputs:\rEveryoneCook-dev-Certificate.CloudFrontCertificateArn = arn:aws:acm:us-east-1:616580903213:certificate/8d53776e-0480-47d2-a6ff-4fe9b2eb6534\rEveryoneCook-dev-Certificate.CloudFrontCertificateDomain = cdn-dev.everyonecook.cloud\rEveryoneCook-dev-Certificate.ApiGatewayCertificateArn = arn:aws:acm:us-east-1:616580903213:certificate/a1b2c3d4-5678-90ef-ghij-klmnopqrstuv\rEveryoneCook-dev-Certificate.ApiGatewayCertificateDomain = *.everyonecook.cloud\rStack ARN:\rarn:aws:cloudformation:us-east-1:616580903213:stack/EveryoneCook-dev-Certificate/... BÆ°á»›c 3: Chá» XÃ¡c Thá»±c Certificate Chá»©ng chá»‰ ACM yÃªu cáº§u xÃ¡c thá»±c DNS. QuÃ¡ trÃ¬nh nÃ y máº¥t 5-10 phÃºt:\nACM táº¡o CNAME validation records trong Route 53 Route 53 pháº£n há»“i vá»›i dá»¯ liá»‡u xÃ¡c thá»±c ACM xÃ¡c minh vÃ  cáº¥p chá»©ng chá»‰ Tráº¡ng thÃ¡i thay Ä‘á»•i tá»« \u0026ldquo;Pending validation\u0026rdquo; thÃ nh \u0026ldquo;Issued\u0026rdquo; Báº¡n cÃ³ thá»ƒ theo dÃµi tiáº¿n trÃ¬nh xÃ¡c thá»±c trong AWS Console.\nBÆ°á»›c 4: XÃ¡c Minh trong AWS Console Äiá»u hÆ°á»›ng Ä‘áº¿n ACM (region us-east-1) Má»Ÿ AWS Console QUAN TRá»ŒNG: Chuyá»ƒn region sang N. Virginia (us-east-1) Äiá»u hÆ°á»›ng Ä‘áº¿n Certificate Manager Chuyá»ƒn AWS Console sang region us-east-1 trÆ°á»›c khi xem chá»©ng chá»‰\nXÃ¡c Minh CloudFront Certificate TÃ¬m certificate vá»›i domain cdn-dev.everyonecook.cloud Kiá»ƒm tra tráº¡ng thÃ¡i lÃ  Issued XÃ¡c minh DNS validation records Ä‘Ã£ cÃ³ máº·t Chá»©ng chá»‰ ACM cho CloudFront hiá»ƒn thá»‹ tráº¡ng thÃ¡i \u0026ldquo;Issued\u0026rdquo;, tÃªn domain, phÆ°Æ¡ng thá»©c xÃ¡c thá»±c (DNS), vÃ  CNAME validation record\nXÃ¡c Minh API Gateway Wildcard Certificate TÃ¬m certificate vá»›i domain *.everyonecook.cloud Kiá»ƒm tra tráº¡ng thÃ¡i lÃ  Issued XÃ¡c minh nÃ³ bao phá»§ wildcard vÃ  SAN (everyonecook.cloud) Chá»©ng chá»‰ ACM Wildcard cho API Gateway hiá»ƒn thá»‹ domain *.everyonecook.cloud, SAN everyonecook.cloud, vÃ  validation records\nXÃ¡c Minh DNS Validation Records trong Route 53 Äiá»u hÆ°á»›ng Ä‘áº¿n Route 53 \u0026gt; Hosted zones Chá»n everyonecook.cloud hosted zone XÃ¡c minh CNAME validation records Ä‘Ã£ Ä‘Æ°á»£c táº¡o Route 53 hiá»ƒn thá»‹ CNAME validation records tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o bá»Ÿi ACM Ä‘á»ƒ xÃ¡c thá»±c chá»©ng chá»‰\nRecords mong Ä‘á»£i:\n_abc123def456.cdn-dev.everyonecook.cloud CNAME _xyz789.acm-validations.aws.\r_ghi789jkl012.everyonecook.cloud CNAME _mno345.acm-validations.aws. Chi Tiáº¿t Chi PhÃ­ Chi PhÃ­ HÃ ng ThÃ¡ng TÃ i nguyÃªn Chi phÃ­ Ghi chÃº Chá»©ng chá»‰ ACM $0/thÃ¡ng Miá»…n phÃ­ cho chá»©ng chá»‰ sá»­ dá»¥ng vá»›i dá»‹ch vá»¥ AWS DNS Validation Records $0/thÃ¡ng Bao gá»“m trong chi phÃ­ Route 53 hosted zone Gia háº¡n chá»©ng chá»‰ $0/thÃ¡ng Gia háº¡n tá»± Ä‘á»™ng (miá»…n phÃ­) Tá»•ng $0/thÃ¡ng 100% miá»…n phÃ­ (khÃ´ng cÃ³ chi phÃ­ liÃªn tá»¥c) Tá»‘i Æ¯u Chi PhÃ­ Chá»©ng chá»‰ ACM miá»…n phÃ­ khi sá»­ dá»¥ng vá»›i CloudFront, API Gateway, ALB, v.v. Gia háº¡n tá»± Ä‘á»™ng (khÃ´ng cáº§n can thiá»‡p thá»§ cÃ´ng) CloudFront WAF Ä‘Ã£ loáº¡i bá» Ä‘á»ƒ tiáº¿t kiá»‡m $9/thÃ¡ng ($108/nÄƒm) Shield Standard cung cáº¥p báº£o vá»‡ DDoS miá»…n phÃ­ Tiáº¿t Kiá»‡m HÃ ng NÄƒm tá»« Loáº¡i Bá» WAF: $108/nÄƒm\nCross-Stack Dependencies Import tá»« DNS Stack Certificate Stack import tá»« DNS Stack:\n// Hardcoded Hosted Zone ID (á»•n Ä‘á»‹nh, khÃ´ng thay Ä‘á»•i) const hostedZoneId = \u0026#39;Z018823421GWCSYG5UMHV\u0026#39;; const hostedZone = route53.HostedZone.fromHostedZoneAttributes(this, \u0026#39;HostedZone\u0026#39;, { hostedZoneId: hostedZoneId, zoneName: \u0026#39;everyonecook.cloud\u0026#39;, }); Táº¡i sao Hardcoded?\nKhÃ´ng thá»ƒ sá»­ dá»¥ng Fn.importValue cho cross-region references (us-east-1 â† ap-southeast-1) Hosted Zone ID á»•n Ä‘á»‹nh vÃ  khÃ´ng bao giá» thay Ä‘á»•i Thay tháº¿: Sá»­ dá»¥ng SSM Parameter Store (phá»©c táº¡p hÆ¡n, káº¿t quáº£ giá»‘ng nhau) Export ÄÆ°á»£c Sá»­ Dá»¥ng Bá»Ÿi CÃ¡c Stack KhÃ¡c Certificate Stack export Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi:\nCore Stack (Phase 2)\nImport: CloudFrontCertificateArn Má»¥c Ä‘Ã­ch: Gáº¯n chá»©ng chá»‰ SSL vÃ o CloudFront distribution Region: ap-southeast-1 (cross-region import) Backend Stack (Phase 4)\nImport: ApiGatewayCertificateArn Má»¥c Ä‘Ã­ch: Táº¡o API Gateway custom domain vá»›i SSL Region: ap-southeast-1 (cross-region import) Luá»“ng Dependency DNS Stack (ap-southeast-1)\râ”‚\râ”œâ”€ Hosted Zone ID: Z018823421GWCSYG5UMHV\râ”‚\râ–¼\rCertificate Stack (us-east-1) â† Báº®T BUá»˜C lÃ  us-east-1\râ”‚\râ”œâ”€ CloudFront Certificate ARN\râ”‚ â””â”€â–º Core Stack (ap-southeast-1)\râ”‚\râ””â”€ API Gateway Certificate ARN\râ””â”€â–º Backend Stack (ap-southeast-1) Danh SÃ¡ch Kiá»ƒm Tra XÃ¡c Thá»±c TrÆ°á»›c khi tiáº¿n hÃ nh triá»ƒn khai Core Stack:\nCertificate Stack Ä‘Ã£ triá»ƒn khai Ä‘áº¿n region us-east-1 Tráº¡ng thÃ¡i CloudFront certificate lÃ  Issued Tráº¡ng thÃ¡i API Gateway wildcard certificate lÃ  Issued DNS validation CNAME records hiá»ƒn thá»‹ trong Route 53 Certificate ARN Ä‘Ã£ export trong CloudFormation outputs Region Ä‘Æ°á»£c xÃ¡c nháº­n lÃ  us-east-1 trong AWS Console Tags Ä‘Æ°á»£c Ã¡p dá»¥ng chÃ­nh xÃ¡c cho táº¥t cáº£ tÃ i nguyÃªn CÃ¡c BÆ°á»›c Tiáº¿p Theo Sau khi triá»ƒn khai thÃ nh cÃ´ng Certificate Stack:\nâ¡ï¸ 5.4.3 Core Stack - Táº¡o DynamoDB, S3, vÃ  CloudFront infrastructure\nCore Stack sáº½:\nTáº¡o DynamoDB Single Table vá»›i mÃ£ hÃ³a Táº¡o S3 buckets cho ná»™i dung vÃ  CDN logs Táº¡o CloudFront distribution vá»›i chá»©ng chá»‰ SSL Import CloudFrontCertificateArn tá»« stack nÃ y Cáº¥u hÃ¬nh custom domain cdn.everyonecook.cloud TÃ i Liá»‡u Tham Kháº£o MÃ£ nguá»“n: infrastructure/lib/stacks/certificate-stack.ts Base Stack: infrastructure/lib/base-stack.ts Cáº¥u hÃ¬nh App: infrastructure/bin/app.ts TÃ i liá»‡u AWS: ACM Certificates DNS Validation CloudFront with ACM Cross-Region References: CloudFormation Cross-Region References "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.03-cdk-bootstrap/",
	"title": "CDK Bootstrap",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan AWS CDK Bootstrap chuáº©n bá»‹ AWS account cá»§a báº¡n Ä‘á»ƒ triá»ƒn khai cÃ¡c á»©ng dá»¥ng CDK báº±ng cÃ¡ch táº¡o cÃ¡c tÃ i nguyÃªn háº¡ táº§ng cáº§n thiáº¿t. ÄÃ¢y lÃ  quy trÃ¬nh thiáº¿t láº­p má»™t láº§n cho má»—i tá»• há»£p AWS account/region Ä‘á»ƒ thiáº¿t láº­p ná»n táº£ng cho táº¥t cáº£ cÃ¡c triá»ƒn khai CDK.\nCDK Bootstrap táº¡o gÃ¬ QuÃ¡ trÃ¬nh bootstrap cung cáº¥p cÃ¡c tÃ i nguyÃªn AWS sau trong account cá»§a báº¡n:\n1. S3 Bucket (CDK Assets Bucket)\nLÆ°u trá»¯ Lambda function deployment packages LÆ°u trá»¯ CloudFormation templates LÆ°u trá»¯ file assets Ä‘Æ°á»£c tham chiáº¿u bá»Ÿi CDK stacks Máº«u Ä‘áº·t tÃªn: cdk-hnb659fds-assets-{ACCOUNT-ID}-{REGION} Versioning Ä‘Æ°á»£c báº­t Ä‘á»ƒ há»— trá»£ rollback 2. CloudFormation Stack (CDKToolkit)\nStack háº¡ táº§ng chÃ­nh chá»©a táº¥t cáº£ bootstrap resources TÃªn stack: CDKToolkit Quáº£n lÃ½ vÃ²ng Ä‘á»i cá»§a bootstrap resources 3. IAM Roles\ncdk-hnb659fds-cfn-exec-role: CloudFormation execution role Ä‘á»ƒ deploy stacks cdk-hnb659fds-deploy-role: Role Ä‘Æ°á»£c CDK CLI sá»­ dá»¥ng trong quÃ¡ trÃ¬nh deployment cdk-hnb659fds-file-publishing-role: Role Ä‘á»ƒ upload assets lÃªn S3 cdk-hnb659fds-lookup-role: Role Ä‘á»ƒ Ä‘á»c environment context 4. SSM Parameters\n/cdk-bootstrap/hnb659fds/version: LÆ°u trá»¯ sá»‘ phiÃªn báº£n bootstrap Sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra tÃ­nh tÆ°Æ¡ng thÃ­ch Tá»•ng quan Infrastructure Stacks Sau khi bootstrap, dá»± Ã¡n cá»§a chÃºng ta sáº½ triá»ƒn khai nhiá»u CDK stacks Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong D:\\Project_AWS\\everyonecook\\infrastructure\\lib\\stacks:\nauth-stack.ts: Háº¡ táº§ng Authentication vÃ  authorization (Cognito) backend-stack.ts: Core backend services vÃ  Lambda functions certificate-stack.ts: Quáº£n lÃ½ SSL/TLS certificates core-stack.ts: Core infrastructure resources dns-stack.ts: Cáº¥u hÃ¬nh Route 53 DNS observability-stack.ts: Monitoring, logging, vÃ  observability CÃ¡c stacks nÃ y phá»¥ thuá»™c vÃ o háº¡ táº§ng bootstrap Ä‘á»ƒ triá»ƒn khai thÃ nh cÃ´ng.\nHÆ°á»›ng dáº«n Thá»±c hÃ nh: Bootstrap AWS Account cá»§a báº¡n YÃªu cáº§u trÆ°á»›c TrÆ°á»›c khi báº¯t Ä‘áº§u thá»±c hÃ nh nÃ y, Ä‘áº£m báº£o báº¡n cÃ³:\nAWS CLI Ä‘Ã£ cÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh (xem pháº§n 5.1) AWS CDK CLI Ä‘Ã£ cÃ i Ä‘áº·t (xem pháº§n 5.2) AWS credentials há»£p lá»‡ Ä‘Ã£ cáº¥u hÃ¬nh IAM user vá»›i quyá»n AdministratorAccess hoáº·c tÆ°Æ¡ng Ä‘Æ°Æ¡ng Quyá»n truy cáº­p Terminal/PowerShell vÃ o thÆ° má»¥c dá»± Ã¡n BÆ°á»›c 3: XÃ¡c minh trÃªn AWS Console XÃ¡c nháº­n tÃ i nguyÃªn trong AWS Management Console.\n3.1. XÃ¡c minh CloudFormation Stack\nMá»Ÿ CloudFormation Console TÃ¬m stack tÃªn CDKToolkit Status pháº£i lÃ  CREATE_COMPLETE Click vÃ o tab Resources Ä‘á»ƒ xem cÃ¡c tÃ i nguyÃªn Ä‘Ã£ táº¡o ** YÃªu cáº§u Screenshot:** 3.2. XÃ¡c minh S3 Bucket\nMá»Ÿ S3 Console TÃ¬m bucket: cdk-hnb659fds-assets-{ACCOUNT-ID}-us-east-1 XÃ¡c minh thuá»™c tÃ­nh bucket: Versioning: Enabled ** YÃªu cáº§u Screenshot:** 3.3. XÃ¡c minh IAM Roles\nMá»Ÿ IAM Roles Console TÃ¬m kiáº¿m: cdk-hnb659fds XÃ¡c minh cÃ¡c roles sau tá»“n táº¡i: cdk-hnb659fds-cfn-exec-role-{ACCOUNT-ID}-us-east-1 cdk-hnb659fds-deploy-role-{ACCOUNT-ID}-us-east-1 cdk-hnb659fds-file-publishing-role-{ACCOUNT-ID}-us-east-1 cdk-hnb659fds-lookup-role-{ACCOUNT-ID}-us-east-1 Hiá»ƒu vá» Bootstrap Resources Chi tiáº¿t S3 Bucket CDK assets bucket Ä‘Ã³ng vai trÃ² lÃ  kho lÆ°u trá»¯ trung tÃ¢m cho táº¥t cáº£ deployment artifacts:\nMá»¥c Ä‘Ã­ch: LÆ°u trá»¯ CloudFormation templates, Lambda deployment packages, vÃ  static assets VÃ²ng Ä‘á»i: Tá»“n táº¡i qua cÃ¡c deployments, cho phÃ©p kháº£ nÄƒng rollback Báº£o máº­t: MÃ£ hÃ³a at rest, bucket policies háº¡n cháº¿ truy cáº­p cho cÃ¡c roles Ä‘Æ°á»£c á»§y quyá»n Äáº·t tÃªn: Äáº·t tÃªn xÃ¡c Ä‘á»‹nh dá»±a trÃªn account ID vÃ  region Chi tiáº¿t IAM Roles 1. CloudFormation Execution Role (cfn-exec-role)\nÄÆ°á»£c CloudFormation sá»­ dá»¥ng Ä‘á»ƒ create/update/delete stack resources CÃ³ quyá»n rá»™ng Ä‘á»ƒ quáº£n lÃ½ AWS resources Trust relationship vá»›i CloudFormation service 2. Deploy Role (deploy-role)\nÄÆ°á»£c CDK CLI sá»­ dá»¥ng trong cÃ¡c thao tÃ¡c cdk deploy CÃ³ thá»ƒ assume CloudFormation execution role CÃ³ quyá»n upload assets vÃ  khá»Ÿi táº¡o deployments 3. File Publishing Role (file-publishing-role)\nUpload file assets lÃªn S3 bucket 4. Image Publishing Role (image-publishing-role)\nPublish Docker images lÃªn ECR 5. Lookup Role (lookup-role)\nÄá»c environment context (VPCs, subnets, etc.) Quyá»n read-only cho resource lookups Sá»­ dá»¥ng trong quÃ¡ trÃ¬nh synthesis cho context queries PhÃ¢n tÃ­ch Chi phÃ­ Chi phÃ­ Bootstrap Resources Thiáº¿t láº­p Má»™t láº§n:\nTáº¡o CloudFormation stack: Miá»…n phÃ­ Táº¡o IAM roles: Miá»…n phÃ­ SSM parameters: Miá»…n phÃ­ Chi phÃ­ HÃ ng thÃ¡ng LiÃªn tá»¥c:\nResource Sá»­ dá»¥ng Chi phÃ­ (Æ¯á»›c tÃ­nh) S3 Storage \u0026lt; 1 GB (thÃ´ng thÆ°á»ng) $0.023/GB = ~$0.02/thÃ¡ng S3 Requests Tá»‘i thiá»ƒu (GET/PUT) ~$0.01/thÃ¡ng IAM Roles KhÃ´ng tÃ­nh phÃ­ $0.00 Tá»•ng Chi phÃ­ Æ¯á»›c tÃ­nh: ~$0.03/thÃ¡ng (khÃ´ng Ä‘Ã¡ng ká»ƒ)\nLÆ°u Ã½: Äá»‘i vá»›i serverless applications, chi phÃ­ váº«n tá»‘i thiá»ƒu vÃ¬ chÃºng ta chá»‰ lÆ°u trá»¯ Lambda deployment packages trong S3.\nChecklist HoÃ n thÃ nh Thá»±c hÃ nh Äáº£m báº£o báº¡n Ä‘Ã£ hoÃ n thÃ nh táº¥t cáº£ cÃ¡c bÆ°á»›c vÃ  chá»¥p screenshots yÃªu cáº§u:\nBÆ°á»›c 1: Thá»±c thi lá»‡nh bootstrap vÃ  thÃ nh cÃ´ng - [IMAGE HERE: bootstrap-success.png] BÆ°á»›c 2: Káº¿t quáº£ xÃ¡c minh CLI - [IMAGE HERE: bootstrap-verification-cli.png] BÆ°á»›c 3.1: CloudFormation console - [IMAGE HERE: cloudformation-cdktoolkit.png] BÆ°á»›c 3.2: S3 bucket console - [IMAGE HERE: s3-bucket-console.png] BÆ°á»›c 3.3: IAM roles console - [IMAGE HERE: iam-roles-console.png] XÃ¡c minh tráº¡ng thÃ¡i bootstrap AWS account Láº¥y AWS account ID cá»§a báº¡n Thá»±c thi lá»‡nh CDK bootstrap Táº¡o CDKToolkit CloudFormation stack Cung cáº¥p CDK assets S3 bucket Táº¡o cÃ¡c IAM roles cáº§n thiáº¿t cho CDK deployments XÃ¡c minh phiÃªn báº£n bootstrap trong SSM Parameter Store Hiá»ƒu má»¥c Ä‘Ã­ch vÃ  chi phÃ­ cá»§a má»—i bootstrap resource Trong thá»±c hÃ nh nÃ y, báº¡n Ä‘Ã£ thÃ nh cÃ´ng:\nThá»±c thi lá»‡nh CDK bootstrap cho AWS account cá»§a báº¡n Táº¡o CDKToolkit CloudFormation stack Cung cáº¥p CDK assets S3 bucket Ä‘á»ƒ lÆ°u trá»¯ Lambda packages Táº¡o cÃ¡c IAM roles cáº§n thiáº¿t cho CDK deployments XÃ¡c minh táº¥t cáº£ resources qua CLI vÃ  AWS Console AWS account cá»§a báº¡n giá» Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ triá»ƒn khai cÃ¡c á»©ng dá»¥ng CDK serverless, bao gá»“m cÃ¡c infrastructure stacks cho dá»± Ã¡n EveryoneCook.\nChuáº©n bá»‹ cho infrastructure deployment "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/3.3-blog3/",
	"title": "Blog 3",
	"tags": [],
	"description": "",
	"content": "Amazon Inspector Suppression Rules: Thá»±c hÃ nh tá»‘t nháº¥t cho AWS Organizations Thiáº¿t láº­p Delegated Administrator Chá»‰ Ä‘á»‹nh má»™t tÃ i khoáº£n AWS lÃ m delegated administrator cho Amazon Inspector. TÃ i khoáº£n nÃ y cÃ³ thá»ƒ quáº£n lÃ½ táº­p trung cÃ¡c scans, tá»•ng há»£p findings vÃ  Ã¡p dá»¥ng suppression rules trÃªn táº¥t cáº£ cÃ¡c tÃ i khoáº£n trong AWS Organization. Lá»£i Ã­ch bao gá»“m:\nTáº§m nhÃ¬n táº­p trung vá» cÃ¡c lá»— há»•ng Thá»±c thi chÃ­nh sÃ¡ch nháº¥t quÃ¡n Giáº£m overhead quáº£n trá»‹ CÃ¡c bÆ°á»›c:\nKÃ­ch hoáº¡t AWS Organizations vÃ  thÃªm cÃ¡c tÃ i khoáº£n thÃ nh viÃªn. GÃ¡n vai trÃ² delegated admin cho Amazon Inspector. XÃ¡c nháº­n quyá»n truy cáº­p vÃ  phÃ¢n quyá»n trÃªn cÃ¡c tÃ i khoáº£n. Suppression Rules á»Ÿ quy mÃ´ lá»›n Suppression rules giÃºp lá»c tá»± Ä‘á»™ng cÃ¡c findings rá»§i ro tháº¥p, cho phÃ©p nhÃ³m báº£o máº­t táº­p trung vÃ o cÃ¡c lá»— há»•ng quan trá»ng. Äiá»ƒm chÃ­nh:\nRules cÃ³ thá»ƒ dá»±a trÃªn thuá»™c tÃ­nh cá»§a finding, tags tÃ i nguyÃªn hoáº·c CVSS scores. Findings bá»‹ suppression Ä‘Æ°á»£c lÆ°u trá»¯ (archived), khÃ´ng bá»‹ xÃ³a, Ä‘áº£m báº£o kháº£ nÄƒng kiá»ƒm toÃ¡n. Rules cÃ³ thá»ƒ Ã¡p dá»¥ng trÃªn nhiá»u tÃ i khoáº£n thÃ´ng qua delegated admin. VÃ­ dá»¥: Suppress cÃ¡c findings cho EC2 instance khÃ´ng production, tag Environment:Dev, vá»›i CVSS tháº¥p (\u0026lt;4).\nTagging vÃ  Æ¯u tiÃªn theo rá»§i ro Sá»­ dá»¥ng tags nháº¥t quÃ¡n trÃªn cÃ¡c tÃ i nguyÃªn giÃºp nhÃ³m Æ°u tiÃªn lá»— há»•ng theo tÃ¡c Ä‘á»™ng kinh doanh:\nTag theo mÃ´i trÆ°á»ng (Prod, Dev, Test) Tag theo chá»§ sá»Ÿ há»¯u á»©ng dá»¥ng Tag theo yÃªu cáº§u compliance Amazon Inspector cÃ³ thá»ƒ dÃ¹ng cÃ¡c tags nÃ y Ä‘á»ƒ táº¡o bÃ¡o cÃ¡o vÃ  Ã¡p dá»¥ng suppression má»™t cÃ¡ch cÃ³ chá»n lá»c, phÃ¹ há»£p vá»›i Æ°u tiÃªn cá»§a doanh nghiá»‡p.\nÄÃ¡nh giÃ¡ liÃªn tá»¥c vÃ  cáº£i tiáº¿n Suppression rules vÃ  cáº¥u hÃ¬nh scan khÃ´ng pháº£i lÃ  â€œthiáº¿t láº­p má»™t láº§n rá»“i quÃªnâ€. GiÃ¡m sÃ¡t liÃªn tá»¥c Ä‘áº£m báº£o hiá»‡u quáº£:\nXem láº¡i cÃ¡c findings Ä‘Ã£ suppression thÆ°á»ng xuyÃªn Ä‘á»ƒ Ä‘áº£m báº£o rules váº«n há»£p lá»‡. Äiá»u chá»‰nh lá»‹ch scan, pháº¡m vi vÃ  cÃ i Ä‘áº·t Ä‘á»ƒ phÃ¹ há»£p vá»›i cÃ¡c dá»‹ch vá»¥ hoáº·c workloads má»›i. Sá»­ dá»¥ng bÃ¡o cÃ¡o tá»•ng há»£p tá»« tÃ i khoáº£n delegated admin Ä‘á»ƒ xÃ¡c Ä‘á»‹nh xu hÆ°á»›ng vÃ  lá»— há»•ng. Lá»£i Ã­ch:\nDuy trÃ¬ compliance vá»›i cÃ¡c tiÃªu chuáº©n báº£o máº­t Giáº£m â€œalert fatigueâ€ cho nhÃ³m báº£o máº­t Äáº£m báº£o remediation ká»‹p thá»i cÃ¡c lá»— há»•ng quan trá»ng Xem xÃ©t Ä‘a tÃ i khoáº£n Quáº£n lÃ½ suppression rules trÃªn nhiá»u tÃ i khoáº£n AWS cáº§n láº­p káº¿ hoáº¡ch cáº©n tháº­n:\nSá»­ dá»¥ng AWS Organizations vá»›i delegated admin Ä‘á»ƒ trÃ¡nh trÃ¹ng láº·p rules. Ãp dá»¥ng máº«u káº¿ thá»«a (inheritance patterns) cho cÃ¡c tÃ i khoáº£n thÃ nh viÃªn. Káº¿t há»£p chiáº¿n lÆ°á»£c tagging vá»›i suppression rules Ä‘á»ƒ target cá»¥ thá»ƒ cÃ¡c tÃ i khoáº£n hoáº·c workloads. CÃ¡ch tiáº¿p cáº­n nÃ y Ä‘áº£m báº£o chÃ­nh sÃ¡ch báº£o máº­t nháº¥t quÃ¡n, Ä‘á»“ng thá»i cho phÃ©p má»Ÿ rá»™ng vÃ  linh hoáº¡t cho tá»• chá»©c Ä‘ang phÃ¡t triá»ƒn.\nKáº¿t luáº­n Báº±ng cÃ¡ch táº­n dá»¥ng delegated admin, suppression rules, tagging vÃ  Ä‘Ã¡nh giÃ¡ liÃªn tá»¥c, cÃ¡c tá»• chá»©c cÃ³ thá»ƒ quáº£n lÃ½ lá»— há»•ng hiá»‡u quáº£ á»Ÿ quy mÃ´ lá»›n báº±ng Amazon Inspector. Thá»±c hÃ nh tá»‘t nháº¥t nÃ y Ä‘áº£m báº£o nhÃ³m báº£o máº­t táº­p trung vÃ o cÃ¡c váº¥n Ä‘á» quan trá»ng trong khi váº«n duy trÃ¬ kháº£ nÄƒng kiá»ƒm toÃ¡n vÃ  compliance trÃªn táº¥t cáº£ tÃ i khoáº£n AWS.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/",
	"title": "CÃ¡c bÃ i blogs Ä‘Ã£ dá»‹ch",
	"tags": [],
	"description": "",
	"content": "Táº¡i Ä‘Ã¢y sáº½ lÃ  pháº§n liá»‡t kÃª, giá»›i thiá»‡u cÃ¡c blogs mÃ  cÃ¡c báº¡n Ä‘Ã£ dá»‹ch. VÃ­ dá»¥:\nBlog 1 - CÃ¡ch AWS Báº£o Vá»‡ KhÃ¡ch HÃ ng TrÆ°á»›c CÃ¡c Cuá»™c Táº¥n CÃ´ng DDoS BÃ i blog mÃ´ táº£ cÃ¡ch AWS phÃ¡t hiá»‡n vÃ  ngÄƒn cháº·n táº¥n cÃ´ng DDoS HTTP/2 rapid reset vá»›i lÆ°u lÆ°á»£ng ká»· lá»¥c hÆ¡n 155 triá»‡u yÃªu cáº§u/giÃ¢y. AWS giáº£i thÃ­ch cÆ¡ cháº¿ táº¥n cÃ´ng, Ä‘á»“ng thá»i chá»‰ ra vai trÃ² cá»§a cÃ¡c dá»‹ch vá»¥ nhÆ° CloudFront, Shield, WAF, Route 53 trong viá»‡c duy trÃ¬ tÃ­nh sáºµn sÃ ng. NgoÃ i ra, AWS nháº¥n máº¡nh cÃ¡c thá»±c hÃ nh tá»‘t nháº¥t vÃ  viá»‡c káº¿t há»£p giÃ¡m sÃ¡t, tÃ¬nh bÃ¡o má»‘i Ä‘e dá»a vÃ  há»£p tÃ¡c toÃ n cáº§u** Ä‘á»ƒ báº£o vá»‡ khÃ¡ch hÃ ng trÆ°á»›c cÃ¡c má»‘i Ä‘e dá»a ngÃ y cÃ ng tinh vi.\nBlog 2- Äá»•i má»›i báº£o máº­t Ä‘Ã¡m mÃ¢y táº¡i re:Inforce 2025 Blog nÃ y giá»›i thiá»‡u vá» sá»± kiá»‡n AWS re:Inforce 2025, nÆ¡i cÃ¡c chuyÃªn gia báº£o máº­t cÃ¹ng tháº£o luáº­n cÃ¡ch cÃ¢n báº±ng giá»¯a tá»‘c Ä‘á»™ Ä‘á»•i má»›i vÃ  an toÃ n há»‡ thá»‘ng. Báº¡n sáº½ tÃ¬m hiá»ƒu cÃ¡ch AWS Ä‘á»‹nh hÃ¬nh lá»™ trÃ¬nh báº£o máº­t giÃºp tá»• chá»©c di chuyá»ƒn nhanh hÆ¡n trÃªn Ä‘Ã¡m mÃ¢y, cÃ¡c vÃ­ dá»¥ thá»±c táº¿ tá»« khÃ¡ch hÃ ng, cÃ¹ng mÃ´i trÆ°á»ng há»c táº­p chuyÃªn sÃ¢u vá»›i hÆ¡n 250 phiÃªn ká»¹ thuáº­t, workshop vÃ  phÃ²ng lab. BÃ i viáº¿t nháº¥n máº¡nh táº§m quan trá»ng cá»§a viá»‡c xÃ¢y dá»±ng báº£o máº­t quy mÃ´ lá»›n, Ä‘Æ¡n giáº£n vÃ  hiá»‡u quáº£, trá»Ÿ thÃ nh Ä‘á»™ng lá»±c cho Ä‘á»•i má»›i kinh doanh.\nBlog 3 -Thá»±c hÃ nh tá»‘t nháº¥t cho AWS Organizations BÃ i blog nÃ y giáº£i thÃ­ch cÃ¡ch quáº£n lÃ½ lá»— há»•ng hiá»‡u quáº£ trÃªn nhiá»u tÃ i khoáº£n AWS báº±ng Amazon Inspector. Báº¡n sáº½ há»c cÃ¡ch Æ°u tiÃªn cÃ¡c findings, sá»­ dá»¥ng tags Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ theo rá»§i ro vÃ  Ã¡p dá»¥ng suppression rules Ä‘á»ƒ lá»c cÃ¡c findings Ã­t quan trá»ng. BÃ i viáº¿t nháº¥n máº¡nh viá»‡c xÃ¢y dá»±ng vÄƒn hÃ³a quáº£n lÃ½ lá»— há»•ng liÃªn tá»¥c vÃ  cung cáº¥p hÆ°á»›ng dáº«n thá»±c tiá»…n cho cÃ¡c tá»• chá»©c.\nBlog 4 - Jackbox Games Má»Ÿ Ra CÆ¡ Há»™i Má»›i Vá»›i Amazon GameLift Streams Blog nÃ y giá»›i thiá»‡u Jackbox Games lÃ  studio trÃ² chÆ¡i cÃ³ trá»¥ sá»Ÿ táº¡i Chicago, ná»•i tiáº¿ng vá»›i cÃ¡c tá»±a game party nhÆ° Quiplash, Fibbage, Drawful, Trivia Murder Party, vÃ  nhiá»u trÃ² khÃ¡c. Vá»›i hÆ¡n 50 trÃ² chÆ¡i trong danh má»¥c, Jackbox theo Ä‘uá»•i má»¥c tiÃªu vá» \u0026ldquo;gaming dá»… tiáº¿p cáº­n\u0026rdquo; â€” tá»©c lÃ  ngÆ°á»i chÆ¡i cÃ³ thá»ƒ tham gia tá»« thiáº¿t bá»‹ báº¥t ká»³ mÃ  há» cÃ³. ToÃ n bá»™ háº¡ táº§ng server cá»§a cÃ´ng ty Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn Amazon Web Services.\nBlog 5 - Real-time Iceberg Ingestion with AWS DMS CÃ¡c ná»n táº£ng dá»¯ liá»‡u hiá»‡n Ä‘áº¡i ngÃ y cÃ ng yÃªu cáº§u kháº£ nÄƒng truy cáº­p dá»¯ liá»‡u má»›i vá»›i Ä‘á»™ trá»… tháº¥p Ä‘á»ƒ há»— trá»£ phÃ¢n tÃ­ch thá»i gian thá»±c vÃ  ra quyáº¿t Ä‘á»‹nh nhanh chÃ³ng. Tuy nhiÃªn, nhiá»u tá»• chá»©c gáº·p khÃ³ khÄƒn trong viá»‡c liÃªn tá»¥c ingest cÃ¡c thay Ä‘á»•i (insert, update, delete) tá»« cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u giao dá»‹ch vÃ o data lake trong khi váº«n duy trÃ¬ tÃ­nh nháº¥t quÃ¡n máº¡nh máº½.\nBlog 6 - Native SQL Server Replication Options on Amazon RDS Custom for SQL Server CÃ¡c á»©ng dá»¥ng hiá»‡n Ä‘áº¡i thÆ°á»ng yÃªu cáº§u kháº£ nÄƒng phÃ¢n phá»‘i dá»¯ liá»‡u Ä‘Ã¡ng tin cáº­y vÃ  tÃ­nh sáºµn sÃ ng cao trÃªn nhiá»u cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ há»— trá»£ hoáº¡t Ä‘á»™ng kinh doanh quan trá»ng. SQL Server Replication cho phÃ©p quáº£n trá»‹ viÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u (DBA) tá»± Ä‘á»™ng phÃ¢n phá»‘i dá»¯ liá»‡u giá»¯a cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u theo thá»i gian gáº§n nhÆ° thá»±c, giÃºp giáº£m táº£i cÃ¡c tÃ¡c vá»¥ Ä‘á»c náº·ng tá»« há»‡ thá»‘ng sáº£n xuáº¥t vÃ  Ä‘á»“ng bá»™ dá»¯ liá»‡u giá»¯a cÃ¡c vÃ¹ng hoáº·c cÃ¡c mÃ´i trÆ°á»ng cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c nhau.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/4-eventparticipated/4.3-event3/",
	"title": "Event 3",
	"tags": [],
	"description": "",
	"content": "BÃ¡o cÃ¡o tá»•ng káº¿t: â€œHá»™i Tháº£o AWS Well-Architected Security Pillarâ€ Má»¥c TiÃªu Há»™i Tháº£o Tham gia khÃ³a há»c vá» 5 trá»¥ cá»™t báº£o máº­t trong AWS Well-Architected Framework, giÃºp xÃ¢y dá»±ng ná»n táº£ng báº£o máº­t vá»¯ng cháº¯c vÃ  quy trÃ¬nh á»©ng phÃ³ sá»± cá»‘ toÃ n diá»‡n.\nNá»™i Dung ChÃ­nh Pháº§n Má»Ÿ Äáº§u (8:30 - 8:50 AM) Ná»n Táº£ng Báº£o Máº­t\nVai trÃ² cá»§a Security Pillar trong Well-Architected Framework NguyÃªn táº¯c cá»‘t lÃµi: Least Privilege, Zero Trust, Defense in Depth MÃ´ hÃ¬nh TrÃ¡ch nhiá»‡m Chung (AWS Shared Responsibility Model) CÃ¡c má»‘i Ä‘e dá»a hÃ ng Ä‘áº§u trong mÃ´i trÆ°á»ng cloud táº¡i Viá»‡t Nam Trá»¥ Cá»™t 1: Quáº£n LÃ½ Nháº­n Dáº¡ng \u0026amp; Truy Cáº­p (8:50 - 9:30 AM) CÃ¡c Chá»§ Äá» ChÃ­nh\nKiáº¿n trÃºc IAM hiá»‡n Ä‘áº¡i: Users, Roles, Policies TrÃ¡nh sá»­ dá»¥ng long-term credentials IAM Identity Center: SSO vÃ  permission sets SCP (Service Control Policies) vÃ  permission boundaries cho multi-account MFA enforcement, credential rotation, Access Analyzer Demo Thá»±c HÃ nh\nXÃ¡c thá»±c IAM Policy MÃ´ phá»ng quyá»n truy cáº­p Nhá»¯ng Äiá»ƒm ChÃ­nh\nLeast privilege access giáº£m thiá»ƒu pháº¡m vi áº£nh hÆ°á»Ÿng IAM Identity Center tá»‘i Æ°u hÃ³a báº£o máº­t mÃ´i trÆ°á»ng multi-account SCPs thá»±c thi quáº£n trá»‹ á»Ÿ cáº¥p tá»• chá»©c Trá»¥ Cá»™t 2: PhÃ¡t Hiá»‡n (9:30 - 9:55 AM) CÃ¡c Chá»§ Äá» ChÃ­nh\nCloudTrail (á»Ÿ cáº¥p tá»• chá»©c), GuardDuty, Security Hub Logging táº¡i má»i táº§ng: VPC Flow Logs, ALB logs, S3 logs Alerting vÃ  automation vá»›i EventBridge Detection-as-Code (infrastructure + rules) CÃ¡c Thá»±c HÃ nh Tá»‘t Nháº¥t\nBáº­t CloudTrail á»Ÿ cáº¥p tá»• chá»©c Sá»­ dá»¥ng Config Rules Ä‘á»ƒ phÃ¡t hiá»‡n cáº¥u hÃ¬nh sai Tá»± Ä‘á»™ng hÃ³a cáº£nh bÃ¡o vá»›i SNS, EventBridge, Lambda Giáº£i Lao (9:55 - 10:10 AM) Trá»¥ Cá»™t 3: Báº£o Vá»‡ CÆ¡ Sá»Ÿ Háº¡ Táº§ng (10:10 - 10:40 AM) CÃ¡c Chá»§ Äá» ChÃ­nh\nVPC segmentation: public vs private placement Security Groups vs NACLs: mÃ´ hÃ¬nh Ã¡p dá»¥ng thá»±c táº¿ WAF, Shield, Network Firewall Báº£o vá»‡ workload: EC2, ECS/EKS security basics Thá»±c HÃ nh Thiáº¿t Káº¿\nThiáº¿t káº¿ kiáº¿n trÃºc VPC multi-tier an toÃ n Nhá»¯ng Äiá»ƒm ChÃ­nh\nDefense in depth: báº£o vá»‡ phÃ²ng thá»§ theo táº§ng Báº£o vá»‡ á»©ng dá»¥ng chá»‘ng DDoS, OWASP Top 10 Kiá»ƒm tra táº­p trung báº±ng AWS Network Firewall Trá»¥ Cá»™t 4: Báº£o Vá»‡ Dá»¯ Liá»‡u (10:40 - 11:10 AM) CÃ¡c Chá»§ Äá» ChÃ­nh\nAWS KMS: key policies, grants, rotation MÃ£ hÃ³a at-rest vÃ  in-transit: S3, EBS, RDS, DynamoDB Secrets Manager vÃ  Parameter Store: mÃ´ hÃ¬nh rotation Data classification vÃ  access guardrails Demo Thá»±c HÃ nh\nTriá»ƒn khai mÃ£ hÃ³a quy mÃ´ lá»›n Tá»± Ä‘á»™ng hÃ³a secret rotation Nhá»¯ng Äiá»ƒm ChÃ­nh\nMÃ£ hÃ³a pháº£i Ã¡p dá»¥ng cáº£ at-rest vÃ  in-transit Cáº¥u hÃ¬nh key policy khÃ´ng Ä‘Ãºng cÃ³ thá»ƒ gÃ¢y outage Secrets Manager giáº£m rá»§i ro tá»« hardcoded credentials Trá»¥ Cá»™t 5: á»¨ng PhÃ³ Sá»± Cá»‘ (11:10 - 11:40 AM) CÃ¡c Chá»§ Äá» ChÃ­nh\nIR lifecycle theo AWS Playbook cho cÃ¡c tÃ¬nh huá»‘ng: IAM key bá»‹ xÃ¢m pháº¡m S3 public exposure EC2 malware detection Snapshot, isolation, evidence collection Auto-response báº±ng Lambda/Step Functions Nhá»¯ng Äiá»ƒm ChÃ­nh\nXÃ¢y dá»±ng quy trÃ¬nh á»©ng phÃ³ sá»± cá»‘ toÃ n diá»‡n Tá»± Ä‘á»™ng hÃ³a pháº£n á»©ng giáº£m thá»i gian xá»­ lÃ½ Báº£o tá»“n báº±ng chá»©ng cho viá»‡c Ä‘iá»u tra Tá»•ng Káº¿t \u0026amp; Há»i ÄÃ¡p (11:40 AM - 12:00 PM) Ná»™i Dung Tá»•ng Káº¿t\nTá»•ng káº¿t 5 trá»¥ cá»™t cá»§a Security Pillar Common pitfalls trong thá»±c táº¿ doanh nghiá»‡p Viá»‡t Nam Roadmap há»c táº­p: Security Specialty, SA Pro dá»±a trÃªn ná»™i dung nÃ y Nhá»¯ng Äiá»ƒm ChÃ­nh Cáº§n Nhá»› Ná»n Táº£ng Báº£o Máº­t MÃ´ hÃ¬nh TrÃ¡ch nhiá»‡m Chung xÃ¡c Ä‘á»‹nh ranh giá»›i báº£o máº­t rÃµ rÃ ng Identity lÃ  tuyáº¿n phÃ²ng thá»§ Ä‘áº§u tiÃªn vÃ  máº¡nh nháº¥t Kiáº¿n trÃºc Zero Trust trá»Ÿ thÃ nh tiÃªu chuáº©n má»›i Ká»¹ NÄƒng Ká»¹ Thuáº­t IAM governance Ä‘áº£m báº£o kháº£ nÄƒng má»Ÿ rá»™ng báº£o máº­t KMS Ä‘Æ¡n giáº£n hÃ³a mÃ£ hÃ³a trÃªn cÃ¡c dá»‹ch vá»¥ AWS Isolation máº¡ng giáº£m bá» máº·t táº¥n cÃ´ng Security Hub + GuardDuty = continuous monitoring Ãp Dá»¥ng VÃ o CÃ´ng Viá»‡c Triá»ƒn khai MFA vÃ  IAM least privilege MÃ£ hÃ³a táº¥t cáº£ dá»¯ liá»‡u quan trá»ng vá»›i KMS Báº­t GuardDuty, CloudTrail, Config by default Sá»­ dá»¥ng multi-account architecture vá»›i Control Tower Shift-left security trong CI/CD pipeline Kinh Nghiá»‡m Thá»±c Táº¿ Kiáº¿n Thá»©c ChuyÃªn Gia VÃ­ dá»¥ thá»±c táº¿ vá» cloud breaches Deep dive vÃ o AWS security controls Giáº£i thÃ­ch rÃµ rÃ ng cÃ¡c khÃ¡i niá»‡m IAM vÃ  encryption ThÃ¡ch Thá»©c Phá»• Biáº¿n Misconfiguration lÃ  nguyÃªn nhÃ¢n #1 gÃ¢y cloud incidents Báº£o máº­t pháº£i liÃªn tá»¥c vÃ  tá»± Ä‘á»™ng hÃ³a Multi-account lÃ  essential cho isolation vÃ  least privilege BÃ i Há»c RÃºt Ra Compliance khÃ´ng báº±ng Security (cáº§n cáº£ hai) Automation giáº£m operational noise vÃ  mistakes Identity lÃ  ná»n táº£ng cá»§a Zero Trust "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.3-week3/",
	"title": "Worklog Tuáº§n 3",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu tuáº§n 3: Há»c vÃ  thá»±c hÃ nh vá»›i Amazon VPC (máº¡ng cÆ¡ báº£n, subnet, báº£ng Ä‘á»‹nh tuyáº¿n, security groups). Thá»±c hÃ nh vá»›i EC2 instances: khá»Ÿi táº¡o, káº¿t ná»‘i báº±ng SSH, gáº¯n thÃªm bá»™ nhá»›. Hiá»ƒu vá» EBS, Elastic IP vÃ  cáº¥u hÃ¬nh Security Group. Káº¿t há»£p AWS Console vÃ  CLI Ä‘á»ƒ quáº£n lÃ½ máº¡ng vÃ  lÆ°u trá»¯ cá»§a EC2. Nhiá»‡m vá»¥ trong tuáº§n: NgÃ y Nhiá»‡m vá»¥ NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh TÃ i liá»‡u tham kháº£o 2 - Äá»c qua cÃ¡c yÃªu cáº§u trong hÆ°á»›ng dáº«n lab - Hiá»ƒu cÆ¡ sá»Ÿ háº¡ táº§ng toÃ n cáº§u cá»§a AWS (Regions, AZs, VPC) - Ã”n táº­p cÃ¡c khÃ¡i niá»‡m máº¡ng cÆ¡ báº£n (subnet, báº£ng Ä‘á»‹nh tuyáº¿n, gateway) 22/09/2025 22/09/2025 https://000003.awsstudygroup.com/vi/ 3 - Há»c cÃ¡ch táº¡o VPC tÃ¹y chá»‰nh + XÃ¡c Ä‘á»‹nh CIDR block + ThÃªm subnet cÃ´ng khai \u0026amp; riÃªng tÆ° + Cáº¥u hÃ¬nh báº£ng Ä‘á»‹nh tuyáº¿n \u0026amp; internet gateway + Gáº¯n subnet 23/09/2025 23/09/2025 https://000004.awsstudygroup.com/vi/ 4 - KhÃ¡m phÃ¡ máº¡ng cá»§a EC2: + Security Groups (luá»“ng vÃ o \u0026amp; luá»“ng ra) + Key pairs cho SSH - Chuáº©n bá»‹ mÃ´i trÆ°á»ng Ä‘á»ƒ khá»Ÿi táº¡o EC2 Linux instance 24/09/2025 24/09/2025 https://000004.awsstudygroup.com/vi/ 5 - Thá»±c hÃ nh khá»Ÿi táº¡o EC2: + Chá»n AMI (Amazon Linux/Ubuntu) + Chá»n loáº¡i instance (t2.micro) + Cáº¥u hÃ¬nh máº¡ng (VPC, subnet, SG) + GÃ¡n Elastic IP - Kiá»ƒm tra káº¿t ná»‘i SSH 25/09/2025 25/09/2025 https://000004.awsstudygroup.com/vi/ 6 - LÃ m viá»‡c vá»›i bá»™ nhá»›: + Táº¡o vÃ  gáº¯n thÃªm EBS volume + Äá»‹nh dáº¡ng vÃ  mount volume - Kiá»ƒm tra tráº¡ng thÃ¡i instance \u0026amp; káº¿t ná»‘i qua Console \u0026amp; CLI - Dá»n dáº¹p tÃ i nguyÃªn (xÃ³a EC2, giáº£i phÃ³ng Elastic IP, xÃ³a volume) 26/09/2025 26/09/2025 https://000004.awsstudygroup.com/vi/ Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c tuáº§n 3: Hiá»ƒu cÆ¡ sá»Ÿ háº¡ táº§ng toÃ n cáº§u cá»§a AWS (Regions, AZs, vÃ  VPC). Táº¡o thÃ nh cÃ´ng má»™t VPC tÃ¹y chá»‰nh vá»›i subnet, báº£ng Ä‘á»‹nh tuyáº¿n vÃ  internet gateway. Há»c cÃ¡ch cáº¥u hÃ¬nh Security Groups vÃ  quáº£n lÃ½ luá»“ng vÃ o/ra. Khá»Ÿi táº¡o thÃ nh cÃ´ng má»™t Linux EC2 instance vá»›i cáº¥u hÃ¬nh máº¡ng phÃ¹ há»£p. Thá»±c hÃ nh káº¿t ná»‘i EC2 báº±ng SSH vá»›i key pair. GÃ¡n vÃ  kiá»ƒm tra Elastic IP Ä‘á»ƒ cÃ³ Ä‘á»‹a chá»‰ cÃ´ng cá»™ng á»•n Ä‘á»‹nh. Gáº¯n, Ä‘á»‹nh dáº¡ng vÃ  mount má»™t EBS volume Ä‘á»ƒ má»Ÿ rá»™ng bá»™ nhá»›. Kiá»ƒm tra tráº¡ng thÃ¡i instance vÃ  tÃ i nguyÃªn báº±ng cáº£ AWS Console vÃ  CLI. Thá»±c hÃ nh dá»n dáº¹p tÃ i nguyÃªn Ä‘Ãºng cÃ¡ch: xÃ³a EC2, giáº£i phÃ³ng Elastic IP, xÃ³a EBS volume. XÃ¢y dá»±ng ná»n táº£ng vá»¯ng cháº¯c vá» AWS networking (VPC) vÃ  compute (EC2). "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.3-core-stack/",
	"title": "5.4.3 Core Stack",
	"tags": [],
	"description": "",
	"content": " Core Stack - Háº¡ Táº§ng Data Layer Tá»•ng Quan Core Stack lÃ  táº§ng ná»n táº£ng dá»¯ liá»‡u Phase 2 cá»§a dá»± Ã¡n EveryoneCook. NÃ³ táº¡o ra háº¡ táº§ng cá»‘t lÃµi cho lÆ°u trá»¯ dá»¯ liá»‡u, phÃ¢n phá»‘i ná»™i dung vÃ  mÃ£ hÃ³a mÃ  táº¥t cáº£ cÃ¡c dá»‹ch vá»¥ khÃ¡c phá»¥ thuá»™c vÃ o.\nThá»© Tá»± Triá»ƒn Khai: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai sau Certificate Stack vÃ  trÆ°á»›c Auth Stack vÃ  Backend Stack.\nTrÃ¡ch Nhiá»‡m ChÃ­nh Táº¡o DynamoDB Single Table vá»›i 5 GSI indexes cho truy váº¥n dá»±a trÃªn username Táº¡o S3 buckets vá»›i Intelligent-Tiering Ä‘á»ƒ tá»‘i Æ°u chi phÃ­ (tiáº¿t kiá»‡m 57%) Táº¡o CloudFront CDN distribution vá»›i nÃ©n vÃ  caching Táº¡o KMS encryption keys cho DynamoDB vÃ  S3 Cáº¥u hÃ¬nh Origin Access Control (OAC) cho báº£o máº­t S3 Thiáº¿t láº­p custom domain vá»›i chá»©ng chá»‰ SSL cho CDN Nhá»¯ng GÃ¬ Stack NÃ y Bao Gá»“m Storage:\nDynamoDB Single Table vá»›i mÃ£ hÃ³a at rest S3 Content Bucket (avatars, posts, recipes, backgrounds) S3 CDN Logs Bucket cho CloudFront access logs CDN \u0026amp; Caching:\nCloudFront Distribution vá»›i custom domain Compression Ä‘Æ°á»£c báº­t (Gzip + Brotli, giáº£m 70-80% kÃ­ch thÆ°á»›c) Cache policies (24h máº·c Ä‘á»‹nh, tá»‘i Ä‘a 7 ngÃ y) Origin Access Control (OAC) cho báº£o máº­t S3 Security:\nKMS Customer Managed Keys cho mÃ£ hÃ³a Automatic key rotation (hÃ ng nÄƒm) Security headers (HSTS, X-Frame-Options, v.v.) Tá»‘i Æ¯u Chi PhÃ­:\nS3 Intelligent-Tiering (giáº£m 57% chi phÃ­) CloudFront Price Class 200 (giáº£m 45% chi phÃ­) Pay-per-request billing cho dev environment Kiáº¿n TrÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Core Stack (Phase 2) â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ KMS Encryption Layer â”‚ â”‚\râ”‚ â”‚ â”œâ”€ DynamoDB Key (automatic rotation) â”‚ â”‚\râ”‚ â”‚ â””â”€ S3 Key (automatic rotation) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ DynamoDB Single Table â”‚ â”‚\râ”‚ â”‚ â”œâ”€ PK: USER#{username} â”‚ â”‚\râ”‚ â”‚ â”œâ”€ SK: PROFILE|RECIPE#{id}|POST#{id} â”‚ â”‚\râ”‚ â”‚ â”œâ”€ 5 GSI indexes cho truy váº¥n â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Billing: PAY_PER_REQUEST (dev) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Encryption: Customer Managed KMS â”‚ â”‚\râ”‚ â”‚ â””â”€ Streams: Enabled (NEW_AND_OLD_IMAGES) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ S3 Content Bucket â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Folders: avatars/, posts/, recipes/, backgrounds/ â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Intelligent-Tiering (tiáº¿t kiá»‡m 57%) â”‚ â”‚\râ”‚ â”‚ â”‚ â””â”€ Archive: 90 ngÃ y, Deep Archive: 180 ngÃ y â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Encryption: S3 Managed Keys â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Versioning: Enabled (prod) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ CORS: Cáº¥u hÃ¬nh cho frontend â”‚ â”‚\râ”‚ â”‚ â””â”€ OAC: Chá»‰ CloudFront access â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ CloudFront CDN Distribution â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Custom Domain: cdn.everyonecook.cloud â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Certificate: ACM (us-east-1) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Compression: Gzip + Brotli (giáº£m 70-80%) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Cache TTL: 24h máº·c Ä‘á»‹nh, tá»‘i Ä‘a 7 ngÃ y â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Price Class: 200 (US, EU, Asia - tiáº¿t kiá»‡m 45%) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Security: HTTPS redirect, Security headers â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Protection: Shield Standard (DDoS miá»…n phÃ­) â”‚ â”‚\râ”‚ â”‚ â””â”€ Logs: S3 CDN Logs Bucket â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Route 53 DNS Record (tá»« DNS Stack) â”‚ â”‚\râ”‚ â”‚ cdn.everyonecook.cloud â†’ CloudFront (A + AAAA Alias) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ”‚ Exports\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ–¼ â–¼\rAuth Stack Backend Stack\r(Cognito) (API Gateway, Lambda) Cáº¥u HÃ¬nh Stack Cáº¥u TrÃºc File infrastructure/lib/stacks/\râ””â”€â”€ core-stack.ts # Core Stack implementation (1545 dÃ²ng) Äiá»ƒm Ná»•i Báº­t Trong Triá»ƒn Khai Code File: infrastructure/lib/stacks/core-stack.ts\n1. Táº¡o KMS Keys /** * Táº¡o KMS key cho DynamoDB encryption */ private createDynamoDBKey(): cdk.aws_kms.Key { const key = new cdk.aws_kms.Key(this, \u0026#39;DynamoDBKey\u0026#39;, { alias: `everyonecook-dynamodb-${this.config.environment}`, description: `KMS key cho DynamoDB encryption trong ${this.config.environment} environment`, // Báº­t automatic key rotation (hÃ ng nÄƒm) enableKeyRotation: true, // Deletion protection cho production pendingWindow: this.config.environment === \u0026#39;prod\u0026#39; ? cdk.Duration.days(30) : cdk.Duration.days(7), // Removal policy: RETAIN cho prod, DESTROY cho dev/staging removalPolicy: this.config.environment === \u0026#39;prod\u0026#39; ? cdk.RemovalPolicy.RETAIN : cdk.RemovalPolicy.DESTROY, }); // ThÃªm key policy cho DynamoDB service key.addToResourcePolicy( new cdk.aws_iam.PolicyStatement({ sid: \u0026#39;Allow DynamoDB to use the key\u0026#39;, effect: cdk.aws_iam.Effect.ALLOW, principals: [new cdk.aws_iam.ServicePrincipal(\u0026#39;dynamodb.amazonaws.com\u0026#39;)], actions: [\u0026#39;kms:Decrypt\u0026#39;, \u0026#39;kms:DescribeKey\u0026#39;, \u0026#39;kms:CreateGrant\u0026#39;], resources: [\u0026#39;*\u0026#39;], conditions: { StringEquals: { \u0026#39;kms:ViaService\u0026#39;: `dynamodb.${this.region}.amazonaws.com`, }, }, }) ); return key; } 2. DynamoDB Single Table /** * Táº¡o DynamoDB Single Table vá»›i tá»‘i Æ°u chi phÃ­ */ private createDynamoDBTable(): cdk.aws_dynamodb.Table { const tableName = `EveryoneCook-${this.config.environment}-v2`; const dbConfig = this.config.dynamodb; const table = new cdk.aws_dynamodb.Table(this, \u0026#39;EveryoneCookTable\u0026#39;, { tableName, partitionKey: { name: \u0026#39;PK\u0026#39;, type: cdk.aws_dynamodb.AttributeType.STRING }, sortKey: { name: \u0026#39;SK\u0026#39;, type: cdk.aws_dynamodb.AttributeType.STRING }, // Billing mode: PROVISIONED cho prod/staging, PAY_PER_REQUEST cho dev billingMode: dbConfig.billingMode === \u0026#39;PROVISIONED\u0026#39; ? cdk.aws_dynamodb.BillingMode.PROVISIONED : cdk.aws_dynamodb.BillingMode.PAY_PER_REQUEST, // Point-in-time recovery cho prod/staging pointInTimeRecoverySpecification: { pointInTimeRecoveryEnabled: dbConfig.pointInTimeRecovery, }, // Deletion protection cho production deletionProtection: dbConfig.deletionProtection, // Báº­t DynamoDB Streams stream: dbConfig.streamEnabled ? cdk.aws_dynamodb.StreamViewType.NEW_AND_OLD_IMAGES : undefined, // TTL attribute cho automatic cleanup timeToLiveAttribute: \u0026#39;ttl\u0026#39;, // Encryption vá»›i customer managed KMS key encryption: cdk.aws_dynamodb.TableEncryption.CUSTOMER_MANAGED, encryptionKey: this.dynamoDbKey, // Removal policy removalPolicy: this.config.environment === \u0026#39;prod\u0026#39; ? cdk.RemovalPolicy.RETAIN : cdk.RemovalPolicy.DESTROY, }); // ThÃªm 5 GSI indexes (code tiáº¿p tá»¥c...) return table; } 3. S3 Bucket vá»›i Intelligent-Tiering /** * Táº¡o S3 bucket vá»›i Intelligent-Tiering Ä‘á»ƒ tiáº¿t kiá»‡m 57% chi phÃ­ */ private createContentBucket(): cdk.aws_s3.Bucket { const bucketName = `everyonecook-content-${this.config.environment}`; const s3Config = this.config.s3; const bucket = new cdk.aws_s3.Bucket(this, \u0026#39;ContentBucket\u0026#39;, { bucketName, // Block ALL public access (private bucket) blockPublicAccess: cdk.aws_s3.BlockPublicAccess.BLOCK_ALL, // Báº­t versioning cho production versioned: s3Config.versioning, // S3-managed encryption encryption: cdk.aws_s3.BucketEncryption.S3_MANAGED, // Cáº¥u hÃ¬nh Intelligent-Tiering intelligentTieringConfigurations: [{ name: \u0026#39;EntireBucket\u0026#39;, archiveAccessTierTime: cdk.Duration.days(90), // Archive tier deepArchiveAccessTierTime: cdk.Duration.days(180), // Deep Archive }], // Lifecycle rules lifecycleRules: [ { id: \u0026#39;DeleteOldVersions\u0026#39;, enabled: s3Config.versioning, noncurrentVersionExpiration: cdk.Duration.days(30), }, { id: \u0026#39;DeleteTempUploads\u0026#39;, enabled: true, prefix: \u0026#39;posts/temp/\u0026#39;, expiration: cdk.Duration.days(1), // Dá»n dáº¹p temp files sau 24h }, ], // CORS cho frontend access cors: [{ allowedOrigins: [ `https://${this.config.domain.frontend}`, ...(this.config.environment === \u0026#39;dev\u0026#39; ? [\u0026#39;http://localhost:3000\u0026#39;] : []), ], allowedMethods: [ cdk.aws_s3.HttpMethods.GET, cdk.aws_s3.HttpMethods.PUT, cdk.aws_s3.HttpMethods.POST, cdk.aws_s3.HttpMethods.DELETE, ], allowedHeaders: [\u0026#39;*\u0026#39;], exposedHeaders: [\u0026#39;ETag\u0026#39;], maxAge: 3000, }], removalPolicy: this.config.environment === \u0026#39;prod\u0026#39; ? cdk.RemovalPolicy.RETAIN : cdk.RemovalPolicy.DESTROY, }); return bucket; } 4. CloudFront Distribution /** * Táº¡o CloudFront distribution vá»›i compression vÃ  caching */ private createCloudFrontDistribution(): cdk.aws_cloudfront.Distribution { // Import Route 53 Hosted Zone const hostedZone = cdk.aws_route53.HostedZone.fromHostedZoneAttributes( this, \u0026#39;HostedZone\u0026#39;, { hostedZoneId: cdk.Fn.importValue(this.exportName(\u0026#39;HostedZoneId\u0026#39;)), zoneName: \u0026#39;everyonecook.cloud\u0026#39;, } ); // Import ACM certificate tá»« Certificate Stack (us-east-1) const certificate = cdk.aws_certificatemanager.Certificate.fromCertificateArn( this, \u0026#39;ImportedCloudFrontCertificate\u0026#39;, \u0026#39;arn:aws:acm:us-east-1:616580903213:certificate/8d53776e-0480-47d2-a6ff-4fe9b2eb6534\u0026#39; ); // Táº¡o cache policy vá»›i compression const publicCachePolicy = new cdk.aws_cloudfront.CachePolicy( this, \u0026#39;PublicCachePolicy\u0026#39;, { cachePolicyName: `EveryoneCook-Public-${this.config.environment}`, defaultTtl: cdk.Duration.hours(24), // 24h máº·c Ä‘á»‹nh maxTtl: cdk.Duration.days(7), // tá»‘i Ä‘a 7 ngÃ y minTtl: cdk.Duration.seconds(0), // Báº­t compression (Gzip + Brotli) enableAcceptEncodingGzip: true, enableAcceptEncodingBrotli: true, queryStringBehavior: cdk.aws_cloudfront.CacheQueryStringBehavior.all(), headerBehavior: cdk.aws_cloudfront.CacheHeaderBehavior.allowList( \u0026#39;CloudFront-Viewer-Country\u0026#39; ), cookieBehavior: cdk.aws_cloudfront.CacheCookieBehavior.none(), } ); // Táº¡o CloudFront distribution const distribution = new cdk.aws_cloudfront.Distribution( this, \u0026#39;CDNDistribution\u0026#39;, { comment: `Everyone Cook CDN - ${this.config.environment}`, // Default behavior vá»›i OAC defaultBehavior: { origin: origins.S3BucketOrigin.withOriginAccessControl(this.contentBucket), viewerProtocolPolicy: cdk.aws_cloudfront.ViewerProtocolPolicy.REDIRECT_TO_HTTPS, compress: true, cachePolicy: publicCachePolicy, allowedMethods: cdk.aws_cloudfront.AllowedMethods.ALLOW_GET_HEAD_OPTIONS, }, // Price Class 200 (US, Europe, Asia - tiáº¿t kiá»‡m 45% chi phÃ­) priceClass: cdk.aws_cloudfront.PriceClass.PRICE_CLASS_200, // Custom domain vá»›i SSL domainNames: [this.config.domains.cdn], certificate: certificate, // CloudFront access logs enableLogging: true, logBucket: this.cdnLogsBucket, logFilePrefix: \u0026#39;cdn-access-logs/\u0026#39;, // Báº­t IPv6 enableIpv6: true, // HTTP/2 + HTTP/3 httpVersion: cdk.aws_cloudfront.HttpVersion.HTTP2_AND_3, // TLS 1.2 tá»‘i thiá»ƒu minimumProtocolVersion: cdk.aws_cloudfront.SecurityPolicyProtocol.TLS_V1_2_2021, } ); // Táº¡o Route 53 A record (Alias Ä‘áº¿n CloudFront) new cdk.aws_route53.ARecord(this, \u0026#39;CloudFrontAliasRecord\u0026#39;, { zone: hostedZone, recordName: this.config.domains.cdn, target: cdk.aws_route53.RecordTarget.fromAlias( new targets.CloudFrontTarget(distribution) ), }); return distribution; } Chi Tiáº¿t Cáº¥u HÃ¬nh ChÃ­nh 1. DynamoDB Single Table Design Cáº¥u TrÃºc Table:\nPK: USER#{username}\rSK: PROFILE | RECIPE#{recipeId} | POST#{postId} | COMMENT#{commentId}\rGSI1: username-recipeDate (recipes cá»§a user theo ngÃ y)\rGSI2: username-postDate (posts cá»§a user theo ngÃ y)\rGSI3: recipeId-index (tÃ¬m kiáº¿m recipe)\rGSI4: postId-index (tÃ¬m kiáº¿m post)\rGSI5: email-index (tÃ¬m kiáº¿m email) Billing Modes:\nDev: PAY_PER_REQUEST (khÃ´ng provisioned capacity, tráº£ tiá»n theo request) Staging: PROVISIONED (5 RCU, 5 WCU vá»›i auto-scaling) Prod: PROVISIONED (10 RCU, 10 WCU vá»›i auto-scaling) 2. Tiáº¿t Kiá»‡m Chi PhÃ­ vá»›i S3 Intelligent-Tiering So SÃ¡nh Chi PhÃ­ (100GB ná»™i dung):\nTier Chi phÃ­/GB Chi phÃ­ 100GB Timeline Frequent Access $0.023 $2.30/thÃ¡ng Máº·c Ä‘á»‹nh Infrequent Access $0.0125 $1.25/thÃ¡ng Sau 30 ngÃ y Archive Instant $0.004 $0.40/thÃ¡ng Sau 90 ngÃ y Archive $0.0036 $0.36/thÃ¡ng Sau 90 ngÃ y Deep Archive $0.00099 $0.099/thÃ¡ng Sau 180 ngÃ y Tiáº¿t Kiá»‡m: $2.30 â†’ $0.099 = giáº£m 57% chi phÃ­ sau 12 thÃ¡ng\n3. CloudFront Compression Giáº£m KÃ­ch ThÆ°á»›c File:\nText files (HTML, CSS, JS, JSON): giáº£m 70-80% Images (Ä‘Ã£ nÃ©n sáºµn): KhÃ´ng nÃ©n thÃªm Videos (Ä‘Ã£ nÃ©n sáºµn): KhÃ´ng nÃ©n thÃªm VÃ­ dá»¥:\nJS bundle gá»‘c: 1MB â†’ NÃ©n: 200KB (giáº£m 80%) 1000 requests/ngÃ y: 1GB/ngÃ y â†’ 200MB/ngÃ y (tiáº¿t kiá»‡m 800MB bandwidth) 4. CloudFront Price Class 200 So SÃ¡nh Chi PhÃ­:\nPrice Class Regions Chi phÃ­/GB Tiáº¿t kiá»‡m All Táº¥t cáº£ regions $0.085 Baseline 200 US, EU, Asia $0.047 tiáº¿t kiá»‡m 45% 100 Chá»‰ US, EU $0.025 tiáº¿t kiá»‡m 71% (nhÆ°ng pháº¡m vi háº¡n cháº¿) Quyáº¿t Äá»‹nh: Price Class 200 cÃ¢n báº±ng chi phÃ­ (tiáº¿t kiá»‡m 45%) vá»›i pháº¡m vi toÃ n cáº§u.\nStack Outputs Sau khi triá»ƒn khai, stack export cÃ¡c giÃ¡ trá»‹ sau:\nOutput Name Value ÄÆ°á»£c sá»­ dá»¥ng bá»Ÿi DynamoDBTableName EveryoneCook-dev-v2 Auth Stack, Backend Stack DynamoDBTableArn arn:aws:dynamodb:... Lambda IAM policies DynamoDBTableStreamArn arn:aws:dynamodb:... Event-driven processing DynamoDBKeyId KMS Key ID Encryption references DynamoDBKeyArn arn:aws:kms:... Lambda permissions S3KeyId KMS Key ID S3 encryption ContentBucketName everyonecook-content-dev Backend Stack, Lambda ContentBucketArn arn:aws:s3:... IAM policies CloudFrontDistributionId E1234567890ABC Backend Stack (WAF) CloudFrontDomainName d1234567890.cloudfront.net DNS verification CÃ¡c BÆ°á»›c Triá»ƒn Khai BÆ°á»›c 1: XÃ¡c Minh Äiá»u Kiá»‡n TiÃªn Quyáº¿t TrÆ°á»›c khi triá»ƒn khai Core Stack, hÃ£y Ä‘áº£m báº£o:\nDNS Stack Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng Certificate Stack Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng (us-east-1) Tráº¡ng thÃ¡i CloudFront certificate lÃ  Issued á»¦y quyá»n DNS Route 53 Ä‘ang hoáº¡t Ä‘á»™ng BÆ°á»›c 2: Triá»ƒn Khai Core Stack Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure:\ncd D:\\Project_AWS\\everyonecook\\infrastructure Triá»ƒn khai Core Stack Ä‘áº¿n ap-southeast-1:\n# Triá»ƒn khai Core Stack npx cdk deploy EveryoneCook-dev-Core --context environment=dev Káº¿t quáº£ mong Ä‘á»£i:\nâœ¨ Synthesis time: 8.45s\rEveryoneCook-dev-Core: deploying...\r[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] (12/12)\rEveryoneCook-dev-Core: creating CloudFormation changeset...\rEveryoneCook-dev-Core\râœ¨ Deployment time: 450.23s\rOutputs:\rEveryoneCook-dev-Core.DynamoDBTableName = EveryoneCook-dev-v2\rEveryoneCook-dev-Core.ContentBucketName = everyonecook-content-dev\rEveryoneCook-dev-Core.CloudFrontDistributionId = E2ABCDEFGHIJKL\rEveryoneCook-dev-Core.CloudFrontDomainName = d1a2b3c4d5e6f7.cloudfront.net\rEveryoneCook-dev-Core.StackInfo = Core Stack cho dev environment\rStack ARN:\rarn:aws:cloudformation:ap-southeast-1:616580903213:stack/EveryoneCook-dev-Core/... BÆ°á»›c 3: Chá» CloudFront Distribution Triá»ƒn khai CloudFront distribution máº¥t 15-20 phÃºt. Báº¡n cÃ³ thá»ƒ theo dÃµi tiáº¿n trÃ¬nh:\n# Kiá»ƒm tra tráº¡ng thÃ¡i CloudFront distribution aws cloudfront get-distribution --id E2ABCDEFGHIJKL --query \u0026#39;Distribution.Status\u0026#39; Tiáº¿n trÃ¬nh tráº¡ng thÃ¡i:\nInProgress (0-15 phÃºt) Deployed (sáºµn sÃ ng sá»­ dá»¥ng) BÆ°á»›c 4: XÃ¡c Minh trong AWS Console Äiá»u hÆ°á»›ng Ä‘áº¿n DynamoDB Má»Ÿ AWS Console â†’ region ap-southeast-1 Äi Ä‘áº¿n DynamoDB \u0026gt; Tables TÃ¬m table EveryoneCook-dev-v2 DynamoDB table hiá»ƒn thá»‹ partitionKey (PK), sortKey (SK), 5 GSI indexes, billing mode (PAY_PER_REQUEST), encryption (KMS), vÃ  streams enabled\nXÃ¡c minh:\nPartition key: PK (String) Sort key: SK (String) 5 GSI indexes hiá»ƒn thá»‹ Billing mode: PAY_PER_REQUEST (dev) Encryption: Customer managed KMS Streams: Enabled (NEW_AND_OLD_IMAGES) Äiá»u hÆ°á»›ng Ä‘áº¿n S3 Äi Ä‘áº¿n S3 \u0026gt; Buckets TÃ¬m buckets: everyonecook-content-dev everyonecook-cdn-logs-dev S3 content bucket hiá»ƒn thá»‹ cáº¥u trÃºc thÆ° má»¥c (avatars/, posts/, recipes/, backgrounds/), cáº¥u hÃ¬nh Intelligent-Tiering, versioning, CORS, vÃ  encryption settings\nXÃ¡c minh Content Bucket:\nBlock all public access: On Versioning: Enabled (prod) / Disabled (dev) Intelligent-Tiering: ÄÃ£ cáº¥u hÃ¬nh Encryption: S3-managed keys CORS: ÄÃ£ cáº¥u hÃ¬nh Lifecycle rules: 2 rules Cáº¥u hÃ¬nh S3 Intelligent-Tiering hiá»ƒn thá»‹ Archive Access Tier (90 ngÃ y) vÃ  Deep Archive Access Tier (180 ngÃ y)\nÄiá»u hÆ°á»›ng Ä‘áº¿n CloudFront Äi Ä‘áº¿n CloudFront \u0026gt; Distributions TÃ¬m distribution vá»›i domain cdn-dev.everyonecook.cloud CloudFront distribution hiá»ƒn thá»‹ custom domain, origin (S3 vá»›i OAC), cache behaviors, compression enabled, Price Class 200, SSL certificate, vÃ  status (Deployed)\nXÃ¡c minh:\nStatus: Deployed Domain: cdn-dev.everyonecook.cloud Origin: S3 bucket vá»›i OAC Compression: Enabled Price Class: 200 SSL Certificate: Valid HTTPS: Redirect Cáº¥u hÃ¬nh CloudFront Origin Access Control (OAC) hiá»ƒn thá»‹ S3 origin vá»›i OAC policy tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o\nÄiá»u hÆ°á»›ng Ä‘áº¿n KMS Äi Ä‘áº¿n KMS \u0026gt; Customer managed keys TÃ¬m keys: everyonecook-dynamodb-dev everyonecook-s3-dev KMS customer managed keys hiá»ƒn thá»‹ key aliases, key rotation enabled (hÃ ng nÄƒm), key policies, vÃ  sá»­ dá»¥ng bá»Ÿi DynamoDB vÃ  S3\nXÃ¡c minh:\nKey rotation: Enabled Key state: Enabled Deletion protection: ÄÃ£ cáº¥u hÃ¬nh Key policy: DynamoDB/S3 service access XÃ¡c Minh Route 53 DNS Record Äi Ä‘áº¿n Route 53 \u0026gt; Hosted zones Chá»n everyonecook.cloud XÃ¡c minh A record cho cdn-dev.everyonecook.cloud Route 53 A record (Alias) trá» cdn-dev.everyonecook.cloud Ä‘áº¿n CloudFront distribution\nMong Ä‘á»£i:\ncdn-dev.everyonecook.cloud A Alias d1a2b3c4d5e6f7.cloudfront.net Chi Tiáº¿t Chi PhÃ­ Chi PhÃ­ HÃ ng ThÃ¡ng (Dev Environment) TÃ i nguyÃªn Cáº¥u hÃ¬nh Chi phÃ­ hÃ ng thÃ¡ng Ghi chÃº DynamoDB PAY_PER_REQUEST $1-5 LÆ°u lÆ°á»£ng tháº¥p S3 Content 10GB, Intelligent-Tiering $0.23 Chuyá»ƒn sang Deep Archive S3 Logs 5GB $0.12 Access logs CloudFront 100GB transfer, Price Class 200 $4.70 Tiáº¿t kiá»‡m 45% vs All KMS 2 keys $2.00 $1/key/thÃ¡ng Route 53 1 hosted zone, DNS queries $0.50 Tá»« DNS Stack Tá»•ng (Æ¯á»›c tÃ­nh) ~$8-13/thÃ¡ng Ká»‹ch báº£n lÆ°u lÆ°á»£ng tháº¥p Chiáº¿n LÆ°á»£c Tá»‘i Æ¯u Chi PhÃ­ S3 Intelligent-Tiering: tiáº¿t kiá»‡m 57% cho storage CloudFront Price Class 200: tiáº¿t kiá»‡m 45% cho bandwidth DynamoDB PAY_PER_REQUEST (dev): Chá»‰ tráº£ tiá»n cho sá»­ dá»¥ng thá»±c táº¿ CloudFront WAF removed: tiáº¿t kiá»‡m $9/thÃ¡ng Compression enabled: giáº£m 70-80% bandwidth Tá»•ng Tiáº¿t Kiá»‡m Tiá»m NÄƒng: ~$20-30/thÃ¡ng so vá»›i thiáº¿t láº­p khÃ´ng tá»‘i Æ°u\nCross-Stack Dependencies Import tá»« CÃ¡c Stack TrÆ°á»›c Tá»« DNS Stack:\nhostedZoneId: cdk.Fn.importValue(\u0026#39;EveryoneCook-dev-HostedZoneId\u0026#39;) zoneName: \u0026#39;everyonecook.cloud\u0026#39; Tá»« Certificate Stack:\ncertificateArn: \u0026#39;arn:aws:acm:us-east-1:616580903213:certificate/8d53776e-...\u0026#39; Export ÄÆ°á»£c Sá»­ Dá»¥ng Bá»Ÿi CÃ¡c Stack KhÃ¡c Auth Stack import:\nDynamoDB table (cho user profiles) DynamoDB key (cho Lambda permissions) Backend Stack import:\nDynamoDB table (cho táº¥t cáº£ data operations) S3 content bucket (cho file uploads) CloudFront distribution (cho WAF association) KMS keys (cho encryption) Luá»“ng Dependency DNS Stack â†’ Hosted Zone ID\râ”‚\râ–¼\rCertificate Stack (us-east-1) â†’ Certificate ARN\râ”‚\râ–¼\rCore Stack (ap-southeast-1)\râ”‚\râ”œâ”€â–º DynamoDB Table â†’ Auth Stack, Backend Stack\râ”œâ”€â–º S3 Buckets â†’ Backend Stack\râ”œâ”€â–º CloudFront â†’ Backend Stack (WAF)\râ””â”€â–º KMS Keys â†’ Auth Stack, Backend Stack Danh SÃ¡ch Kiá»ƒm Tra XÃ¡c Thá»±c TrÆ°á»›c khi tiáº¿n hÃ nh triá»ƒn khai Auth Stack:\nCore Stack Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng Ä‘áº¿n ap-southeast-1 DynamoDB table tá»“n táº¡i vá»›i 5 GSI indexes S3 content bucket Ä‘Ã£ cáº¥u hÃ¬nh Intelligent-Tiering S3 CORS Ä‘Ã£ cáº¥u hÃ¬nh cho frontend domain Tráº¡ng thÃ¡i CloudFront distribution lÃ  Deployed CloudFront custom domain phÃ¢n giáº£i: cdn-dev.everyonecook.cloud CloudFront OAC Ä‘Ã£ cáº¥u hÃ¬nh cho S3 access KMS keys Ä‘Ã£ táº¡o vá»›i rotation enabled Route 53 A record Ä‘Ã£ táº¡o cho CloudFront Táº¥t cáº£ stack outputs Ä‘Ã£ export thÃ nh cÃ´ng Kiá»ƒm Tra Kiá»ƒm Tra CloudFront Distribution Kiá»ƒm tra custom domain:\ncurl -I https://cdn-dev.everyonecook.cloud Pháº£n há»“i mong Ä‘á»£i:\nHTTP/2 403\rserver: CloudFront\rx-cache: Error from cloudfront (403 lÃ  mong Ä‘á»£i - bucket trá»‘ng)\nKiá»ƒm tra compression:\ncurl -H \u0026#34;Accept-Encoding: gzip, br\u0026#34; -I https://cdn-dev.everyonecook.cloud Kiá»ƒm tra HTTPS redirect:\ncurl -I http://cdn-dev.everyonecook.cloud Mong Ä‘á»£i: Redirect sang HTTPS\nKiá»ƒm Tra DynamoDB Table # Liá»‡t kÃª tables aws dynamodb list-tables --region ap-southeast-1 # MÃ´ táº£ table aws dynamodb describe-table --table-name EveryoneCook-dev-v2 --region ap-southeast-1 Kiá»ƒm Tra S3 Bucket Access # Thá»­ truy cáº­p S3 trá»±c tiáº¿p (nÃªn bá»‹ cháº·n) curl -I https://everyonecook-content-dev.s3.ap-southeast-1.amazonaws.com # Mong Ä‘á»£i: 403 Forbidden (OAC protection hoáº¡t Ä‘á»™ng) CÃ¡c BÆ°á»›c Tiáº¿p Theo Sau khi triá»ƒn khai thÃ nh cÃ´ng Core Stack:\nâ¡ï¸ 5.4.4 Auth Stack - Táº¡o Cognito User Pool vÃ  authentication\nAuth Stack sáº½:\nTáº¡o Cognito User Pool vá»›i báº£o máº­t nÃ¢ng cao Cáº¥u hÃ¬nh user attributes vÃ  password policy Thiáº¿t láº­p Cognito triggers (Lambda functions) Táº¡o SES email identity cho verification emails Import DynamoDB table tá»« Core Stack TÃ i Liá»‡u Tham Kháº£o MÃ£ nguá»“n: infrastructure/lib/stacks/core-stack.ts Base Stack: infrastructure/lib/base-stack.ts Environment Config: infrastructure/config/environment.ts TÃ i liá»‡u AWS: DynamoDB Single Table Design S3 Intelligent-Tiering CloudFront Origin Access Control KMS Key Rotation "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/",
	"title": "Cáº¥u hÃ¬nh cÃ¡c Infrastructure Stack",
	"tags": [],
	"description": "",
	"content": "Cáº¥u hÃ¬nh cÃ¡c Infrastructure Stack Tá»•ng quan dá»± Ã¡n EveryoneCook Giá»›i thiá»‡u EveryoneCook lÃ  má»™t ná»n táº£ng máº¡ng xÃ£ há»™i chia sáº» cÃ´ng thá»©c náº¥u Äƒn, Ä‘Æ°á»£c xÃ¢y dá»±ng hoÃ n toÃ n trÃªn AWS Cloud. Dá»± Ã¡n sá»­ dá»¥ng kiáº¿n trÃºc serverless, táº­n dá»¥ng cÃ¡c dá»‹ch vá»¥ quáº£n lÃ½ cá»§a AWS Ä‘á»ƒ Ä‘áº£m báº£o kháº£ nÄƒng má»Ÿ rá»™ng, báº£o máº­t vÃ  tá»‘i Æ°u hÃ³a chi phÃ­.\nKiáº¿n trÃºc há»‡ thá»‘ng Dá»± Ã¡n Ä‘Æ°á»£c thiáº¿t káº¿ vá»›i Kiáº¿n trÃºc 5-Stack vá»›i cÃ¡c lá»›p rÃµ rÃ ng:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ EveryoneCook Platform â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ Layer 1: DNS \u0026amp; Certificate (Foundation) â”‚\râ”‚ â”œâ”€ DNS Stack: Route 53 Hosted Zone â”‚\râ”‚ â””â”€ Certificate Stack: ACM Certificates (us-east-1) â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ Layer 2: Data \u0026amp; Storage (Core Infrastructure) â”‚\râ”‚ â””â”€ Core Stack: DynamoDB, S3, CloudFront, KMS â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ Layer 3: Authentication \u0026amp; Security â”‚\râ”‚ â””â”€ Auth Stack: Cognito, Lambda Triggers, SES â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ Layer 4: Application \u0026amp; Business Logic â”‚\râ”‚ â””â”€ Backend Stack: API Gateway, Lambda, SQS, WAF â”‚\râ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\râ”‚ Layer 5: Monitoring \u0026amp; Observability â”‚\râ”‚ â””â”€ Observability Stack: CloudWatch, Alarms, Dashboards â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ CÃ´ng nghá»‡ sá»­ dá»¥ng Infrastructure as Code AWS CDK (TypeScript): Quáº£n lÃ½ háº¡ táº§ng báº±ng code CloudFormation: Engine template cÆ¡ sá»Ÿ cho CDK Git: Quáº£n lÃ½ phiÃªn báº£n cho infrastructure code Backend Services API Gateway REST API: RESTful API endpoint vá»›i custom domain Lambda Functions: Serverless compute cho business logic (6 hÃ m chÃ­nh + 1 worker) Lambda Layers: Lá»›p shared dependencies (giáº£m kÃ­ch thÆ°á»›c deployment 90%) DynamoDB: NoSQL database vá»›i Single Table Design + 5 GSI indexes S3: Object storage cho user content (avatars, posts, recipes, backgrounds) SQS: Message queue cho async processing (4 queues + 4 DLQs) Security \u0026amp; Authentication Cognito User Pool: User authentication \u0026amp; management Cognito User Pool Client: Frontend authentication config WAF (Web Application Firewall): API Gateway protection vá»›i rate limiting KMS (Key Management Service): 2 customer-managed keys (DynamoDB, S3) IAM Roles \u0026amp; Policies: Fine-grained access control cho táº¥t cáº£ services Content Delivery \u0026amp; Networking CloudFront: CDN vá»›i Origin Access Control (OAC) + Shield Standard Route 53: DNS management vá»›i Hosted Zone ACM (Certificate Manager): SSL/TLS certificates (2 certificates) Monitoring \u0026amp; Operations CloudWatch Logs: Centralized logging cho Lambda functions CloudWatch Metrics: Performance metrics tracking CloudWatch Dashboards: 4 dashboards (Core, Auth, Backend, Overview) CloudWatch Alarms: Real-time monitoring (10+ alarms) + Composite Alarm SNS (Simple Notification Service): Email notifications cho alarms Cáº¥u trÃºc thÆ° má»¥c dá»± Ã¡n everyonecook/\râ”œâ”€â”€ infrastructure/ # AWS CDK Infrastructure\râ”‚ â”œâ”€â”€ bin/\râ”‚ â”‚ â””â”€â”€ app.ts # CDK app entry point - táº¡o táº¥t cáº£ stacks\râ”‚ â”œâ”€â”€ lib/\râ”‚ â”‚ â”œâ”€â”€ base-stack.ts # Base class cho táº¥t cáº£ stacks\râ”‚ â”‚ â”œâ”€â”€ stacks/ # Stack definitions\râ”‚ â”‚ â”‚ â”œâ”€â”€ dns-stack.ts # Route 53 Hosted Zone\râ”‚ â”‚ â”‚ â”œâ”€â”€ certificate-stack.ts # ACM Certificates\râ”‚ â”‚ â”‚ â”œâ”€â”€ core-stack.ts # DynamoDB, S3, CloudFront\râ”‚ â”‚ â”‚ â”œâ”€â”€ auth-stack.ts # Cognito, Lambda triggers\râ”‚ â”‚ â”‚ â”œâ”€â”€ backend-stack.ts # API Gateway, Lambda, SQS\râ”‚ â”‚ â”‚ â””â”€â”€ observability-stack.ts # CloudWatch, Alarms\râ”‚ â”‚ â””â”€â”€ constructs/ # Reusable CDK constructs\râ”‚ â”‚ â””â”€â”€ shared-layer.ts # Lambda Layer vá»›i dependencies\râ”‚ â”œâ”€â”€ config/\râ”‚ â”‚ â””â”€â”€ environment.ts # Environment configuration (dev/staging/prod)\râ”‚ â”œâ”€â”€ cdk.json # CDK configuration\râ”‚ â”œâ”€â”€ package.json # Node.js dependencies\râ”‚ â””â”€â”€ tsconfig.json # TypeScript configuration\râ”œâ”€â”€ services/ # Lambda function source code\râ”‚ â”œâ”€â”€ api-router/ # API request routing\râ”‚ â”œâ”€â”€ auth-user/ # Authentication endpoints\râ”‚ â”œâ”€â”€ social/ # Social features (posts, comments)\râ”‚ â”œâ”€â”€ recipe-ai/ # Recipe \u0026amp; AI endpoints\râ”‚ â”œâ”€â”€ admin/ # Admin management\râ”‚ â””â”€â”€ upload/ # File upload handler\râ”œâ”€â”€ shared/ # Shared code \u0026amp; utilities\râ”‚ â”œâ”€â”€ utils/ # Common utilities\râ”‚ â”œâ”€â”€ models/ # Data models\râ”‚ â””â”€â”€ middleware/ # Lambda middleware\râ”œâ”€â”€ frontend/ # Next.js frontend (deployed separately)\râ”‚ â””â”€â”€ ...\râ””â”€â”€ layers/ # Lambda layers\râ””â”€â”€ shared-dependencies/ # Common npm packages Tá»•ng quan kiáº¿n trÃºc Stack 1. DNS Stack (Phase 1) Má»¥c Ä‘Ã­ch: Táº¡o ná»n táº£ng cho DNS management\nTÃ i nguyÃªn chÃ­nh:\nRoute 53 Hosted Zone cho domain everyonecook.cloud Export nameservers Ä‘á»ƒ cáº¥u hÃ¬nh táº¡i domain registrar Thá»© tá»± triá»ƒn khai: Stack nÃ y pháº£i Ä‘Æ°á»£c triá»ƒn khai Ä‘áº§u tiÃªn\nChi phÃ­ Æ°á»›c tÃ­nh: ~$0.50/thÃ¡ng\nLÆ°u Ã½: Sau khi triá»ƒn khai stack nÃ y, cáº­p nháº­t nameservers táº¡i Hostinger Ä‘á»ƒ trá» vá» Route 53.\n2. Certificate Stack (Phase 1.5) Má»¥c Ä‘Ã­ch: Táº¡o SSL/TLS certificates cho CloudFront vÃ  API Gateway\nTÃ i nguyÃªn chÃ­nh:\nACM Certificate cho CloudFront: cdn.everyonecook.cloud ACM Wildcard Certificate cho API Gateway: *.everyonecook.cloud DNS validation records trong Route 53 Region Ä‘áº·c biá»‡t: Báº®T BUá»˜C triá»ƒn khai táº¡i us-east-1 (yÃªu cáº§u cá»§a CloudFront)\nPhá»¥ thuá»™c: DNS Stack (cáº§n Hosted Zone cho DNS validation)\nChi phÃ­ Æ°á»›c tÃ­nh: Miá»…n phÃ­ (ACM certificates miá»…n phÃ­)\nLÆ°u Ã½ quan trá»ng: CloudFront chá»‰ cháº¥p nháº­n certificates tá»« region us-east-1.\n3. Core Stack (Phase 2) Má»¥c Ä‘Ã­ch: Táº¡o lá»›p dá»¯ liá»‡u vÃ  storage infrastructure\nTÃ i nguyÃªn chÃ­nh:\nDynamoDB Table: Single Table Design vá»›i 5 GSI indexes PK: USER#{username}, SK: PROFILE|RECIPE#{id}|POST#{id}|COMMENT#{id} Username-based primary key (immutable) GSI1-GSI5 cho cÃ¡c query patterns khÃ¡c nhau: GSI1: User recipes theo date GSI2: User posts theo date GSI3: Post comments GSI4: Recipe search theo cuisine/difficulty GSI5: Social interactions (likes, follows) Billing mode: Pay-per-request (on-demand) Encryption: Customer-managed KMS key vá»›i auto-rotation S3 Buckets (2 buckets): Content Bucket: User uploads (avatars, posts, recipes, backgrounds) Intelligent-Tiering enabled (tá»± Ä‘á»™ng tá»‘i Æ°u chi phÃ­) Versioning enabled Lifecycle rules: XÃ³a incomplete multipart uploads sau 7 ngÃ y Encryption: Customer-managed KMS key CDN Logs Bucket: CloudFront access logs Intelligent-Tiering enabled Tá»± Ä‘á»™ng xÃ³a logs sau 90 ngÃ y (tá»‘i Æ°u chi phÃ­) CloudFront Distribution: Origin: S3 Content Bucket Origin Access Control (OAC) Ä‘á»ƒ báº£o máº­t S3 access (thay tháº¿ OAI) Custom domain: cdn.everyonecook.cloud SSL Certificate: ACM certificate tá»« Certificate Stack Cache behaviors: Tá»‘i Æ°u cho images \u0026amp; static content Compression: Gzip \u0026amp; Brotli enabled Shield Standard: DDoS protection (miá»…n phÃ­, tá»± Ä‘á»™ng báº­t) LÆ¯U Ã: CloudFront WAF Ä‘Ã£ Ä‘Æ°á»£c gá»¡ bá» Ä‘á»ƒ tiáº¿t kiá»‡m $9/thÃ¡ng KMS Keys (2 customer-managed keys): DynamoDB Encryption Key: Auto-rotation enabled (hÃ ng nÄƒm) Sá»­ dá»¥ng bá»Ÿi: DynamoDB table, CloudWatch Logs S3 Encryption Key: Auto-rotation enabled (hÃ ng nÄƒm) Sá»­ dá»¥ng bá»Ÿi: S3 buckets, CloudFront signed URLs IAM Roles: CloudFront Origin Access Control role Lambda execution roles vá»›i DynamoDB \u0026amp; S3 access Phá»¥ thuá»™c: Certificate Stack (cáº§n certificate cho CloudFront)\nChi phÃ­ Æ°á»›c tÃ­nh: ~$8-15/thÃ¡ng\nTá»‘i Æ°u chi phÃ­:\nS3 Intelligent-Tiering tá»± Ä‘á»™ng chuyá»ƒn objects sang storage ráº» hÆ¡n CloudFront WAF Ä‘Ã£ gá»¡ bá» (Shield Standard cung cáº¥p DDoS protection) CloudWatch Logs tá»± Ä‘á»™ng xÃ³a sau retention period 4. Auth Stack (Phase 3) Má»¥c Ä‘Ã­ch: Authentication vÃ  user management\nTÃ i nguyÃªn chÃ­nh:\nCognito User Pool: PhÆ°Æ¡ng thá»©c Ä‘Äƒng nháº­p: Username HOáº¶C Email + Password KHÃ”NG yÃªu cáº§u MFA (chá»‰ email + password) Password policy: Min 12 kÃ½ tá»± cho prod (8 kÃ½ tá»± cho dev) YÃªu cáº§u uppercase, lowercase, digits, symbols Standard attributes: email, given_name (fullName), birthdate, gender Custom attributes: account_status (cho admin ban), country (ISO 3166-1) Device tracking: Enabled (KHÃ”NG yÃªu cáº§u challenge) Email verification: Báº¯t buá»™c trÆ°á»›c khi sá»­ dá»¥ng Account recovery: Dá»±a trÃªn Email LÆ¯U Ã: Advanced Security Mode Táº®T Ä‘á»ƒ tiáº¿t kiá»‡m ~$5/thÃ¡ng Lambda Triggers (5 functions vá»›i CloudWatch Logs): Pre-signup: Validate username uniqueness Kiá»ƒm tra profanity/banned words Runtime: Node.js 20.x Post-confirmation: Táº¡o user profile trong DynamoDB Initialize user stats Pre-authentication: Kiá»ƒm tra account status (active/banned) Log login attempts Post-authentication: Cáº­p nháº­t last login timestamp Track user activity Custom message: Customize verification emails Branded email templates Cognito User Pool Client: OAuth flows: Authorization code grant Token validity: Access token: 1 giá» Refresh token: 30 ngÃ y Read/Write attributes Ä‘Æ°á»£c cáº¥u hÃ¬nh CloudWatch Log Groups: Má»—i Lambda trigger cÃ³ dedicated log group Retention: 7 ngÃ y Encryption: KMS DynamoDB key IAM Roles: Lambda execution roles Permissions: DynamoDB read/write, Cognito admin, Logs write Phá»¥ thuá»™c: Core Stack (Lambda triggers cáº§n access DynamoDB)\nChi phÃ­ Æ°á»›c tÃ­nh: ~$0-2/thÃ¡ng (Cognito free tier: 50,000 MAU)\nBáº£o máº­t:\nAdvanced Security Mode khÃ´ng báº­t Ä‘á»ƒ tá»‘i Æ°u chi phÃ­ (sáº½ tá»‘n thÃªm ~$5/thÃ¡ng) Device tracking enabled nhÆ°ng KHÃ”NG MFA Ä‘á»ƒ cáº£i thiá»‡n user experience Táº¥t cáº£ Lambda triggers cÃ³ CloudWatch logging 5. Backend Stack (Phase 4) Má»¥c Ä‘Ã­ch: Application layer vÃ  business logic\nTÃ i nguyÃªn chÃ­nh:\nAPI Gateway REST API: Custom domain: api.everyonecook.cloud SSL Certificate: Wildcard ACM certificate (*.everyonecook.cloud) Cognito Authorizer: Validate JWT tokens Request validators: Body validator: Validate request body Params validator: Validate query params \u0026amp; path params Full validator: Validate cáº£ body \u0026amp; params Deployment stage: dev/staging/prod CloudWatch Logs: Access logs + execution logs WAF Web ACL attached (API protection) Lambda Functions (6 main modules + CloudWatch Logs): API Router: Route requests tá»›i appropriate handlers Memory: 256 MB, Timeout: 30s Auth User: Login, register, forgot-password, verify-email Cognito integration Memory: 512 MB, Timeout: 30s Social: Create/edit/delete posts, comments, likes Follow/unfollow users Memory: 512 MB, Timeout: 30s Recipe AI: CRUD operations cho recipes AI recipe generation (Bedrock integration) Recipe search \u0026amp; recommendations Memory: 1024 MB, Timeout: 60s Admin: User management, ban/unban Content moderation Analytics dashboard Memory: 512 MB, Timeout: 30s Upload: File upload lÃªn S3 Generate pre-signed URLs Image validation Memory: 512 MB, Timeout: 30s Runtime: Node.js 20.x Environment variables: DynamoDB table, S3 bucket, SQS queues Lambda Layer - Shared Dependencies: AWS SDK v3 clients: DynamoDB, S3, SQS, Cognito, Bedrock, Lambda Utilities: uuid, jsonwebtoken, jwks-rsa Lá»£i Ã­ch: Giáº£m kÃ­ch thÆ°á»›c deployment tá»« 8MB â†’ 200KB per function (giáº£m 90%) Compatible runtimes: Node.js 18.x, 20.x SQS Queues (4 main queues + 4 DLQs): AI Queue: AI recipe generation requests Visibility timeout: 120s (2 phÃºt) Message retention: 4 ngÃ y Max receive count: 3 (sau Ä‘Ã³ chuyá»ƒn sang DLQ) Image Processing Queue: Image optimization, thumbnails Visibility timeout: 60s Message retention: 4 ngÃ y Analytics Queue: User activity tracking Visibility timeout: 30s Message retention: 4 ngÃ y Notification Queue: Push notifications, emails Visibility timeout: 30s Message retention: 4 ngÃ y Encryption: AWS managed KMS keys Worker Lambda (1 active): AI Worker: Process AI Queue messages Call Amazon Bedrock cho recipe generation Store results trong DynamoDB Memory: 1024 MB, Timeout: 120s Event source: AI Queue (batch size: 10) LÆ°u Ã½: CÃ¡c workers khÃ¡c chÆ°a Ä‘Æ°á»£c implement WAF Web ACL (chá»‰ API Gateway): Rate limiting: 2000 requests / 5 phÃºt per IP AWS Managed Rules: AWSManagedRulesCommonRuleSet (OWASP Top 10) AWSManagedRulesKnownBadInputsRuleSet Custom rules: Block specific patterns LÆ¯U Ã: CloudFront WAF Ä‘Ã£ gá»¡ bá» Ä‘á»ƒ tiáº¿t kiá»‡m $9/thÃ¡ng Shield Standard: Tá»± Ä‘á»™ng báº­t (DDoS protection - miá»…n phÃ­) CloudWatch Log Groups: API Gateway access logs + execution logs Lambda function logs (per function) Retention: 7 ngÃ y (tá»‘i Æ°u chi phÃ­) Encryption: KMS DynamoDB key IAM Roles \u0026amp; Policies: API Gateway execution role Lambda execution roles (per function) Permissions: DynamoDB, S3, SQS, Cognito, Bedrock, Logs, KMS Shared Lambda Layer:\nAWS SDK v3 clients (DynamoDB, S3, SQS, Cognito, Bedrock) Common utilities (uuid, jsonwebtoken, jwks-rsa) Giáº£m deployment size: 8MB â†’ 200KB per function Phá»¥ thuá»™c: Auth Stack (cáº§n Cognito User Pool)\nChi phÃ­ Æ°á»›c tÃ­nh: ~$10-25/thÃ¡ng\nTá»‘i Æ°u chi phÃ­:\nCloudFront WAF Ä‘Ã£ gá»¡ bá» (Shield Standard cung cáº¥p DDoS protection) WAF chá»‰ enabled cho API Gateway (main attack surface) Lambda Layer giáº£m deployment size 90% CloudWatch Logs tá»± Ä‘á»™ng xÃ³a sau 7 ngÃ y 6. Observability Stack (Phase 7) Má»¥c Ä‘Ã­ch: Monitoring, logging vÃ  alerting\nTÃ i nguyÃªn chÃ­nh:\nCloudWatch Dashboards (4 dashboards): Core Dashboard: DynamoDB metrics: Read/write capacity, throttling, latency S3 metrics: Request count, 4xx/5xx errors, bytes downloaded CloudFront metrics: Request count, cache hit rate, error rate KMS metrics: Key usage, encryption/decryption operations Auth Dashboard: Cognito metrics: Sign-ups, sign-ins, failed authentications Lambda trigger metrics: Invocations, errors, duration User pool analytics Backend Dashboard: API Gateway metrics: Request count, 4xx/5xx errors, latency Lambda metrics: Invocations, errors, duration, throttles, concurrent executions SQS metrics: Messages sent, received, deleted, DLQ depth WAF metrics: Blocked requests, allowed requests, rule matches Overview Dashboard: System health summary Cost tracking Composite alarm status Key metrics tá»« táº¥t cáº£ stacks CloudWatch Alarms (15+ alarms): Critical Alarms (notify ngay láº­p tá»©c): API Gateway 5xx errors \u0026gt; 5% (system errors) Lambda error rate \u0026gt; 10% DynamoDB read/write throttling SQS DLQ cÃ³ messages (failed processing) S3 5xx errors Cost \u0026gt; $50/thÃ¡ng (vÆ°á»£t ngÃ¢n sÃ¡ch) Warning Alarms (notify nhÆ°ng khÃ´ng kháº©n cáº¥p): API Gateway 4xx errors \u0026gt; 10% (client errors) Lambda duration \u0026gt; 25s (sáº¯p timeout) Lambda throttling (Ä‘áº¡t concurrent limit) DynamoDB latency cao (\u0026gt; 100ms) S3 4xx errors SQS queue age \u0026gt; 15 phÃºt (processing lag) Cost \u0026gt; $35/thÃ¡ng (cáº£nh bÃ¡o ngÃ¢n sÃ¡ch) Táº¥t cáº£ alarms: Evaluation periods: 1-2 periods Datapoints to alarm: CÃ³ thá»ƒ cáº¥u hÃ¬nh Treatment of missing data: NOT_BREACHING Composite Alarm: Name: \u0026ldquo;SystemHealth\u0026rdquo; Káº¿t há»£p táº¥t cáº£ critical alarms Alarm rule: OR logic (báº¥t ká»³ critical alarm nÃ o trigger) Actions: Gá»­i SNS notification Má»¥c Ä‘Ã­ch: Má»™t alarm duy nháº¥t cho overall system health SNS Topic: Topic name: EveryoneCook-{env}-Alarms Email subscription: Admin email tá»« config Delivery status logging enabled Encryption: AWS managed key CloudWatch Logs: Retention: 7 ngÃ y (tá»‘i Æ°u chi phÃ­) Encryption: KMS DynamoDB key Log groups: API Gateway, Lambda functions (táº¥t cáº£ Ä‘á»u cÃ³ logs) Cost Tracking: CloudWatch metric: EstimatedCharges Alarms: Warning ($35) + Critical ($50) Daily cost monitoring Phá»¥ thuá»™c: Táº¥t cáº£ stacks khÃ¡c (monitor toÃ n bá»™ infrastructure)\nChi phÃ­ Æ°á»›c tÃ­nh: ~$3-8/thÃ¡ng\nBest practice:\nDeploy stack nÃ y cuá»‘i cÃ¹ng Ä‘á»ƒ cÃ³ visibility hoÃ n chá»‰nh Composite alarm giÃºp giáº£m alarm fatigue 7-day log retention cÃ¢n báº±ng debugging needs vÃ  cost Cost alarms ngÄƒn ngá»«a hÃ³a Ä‘Æ¡n báº¥t ngá» Luá»“ng phá»¥ thuá»™c Stack DNS Stack (Route 53)\râ†“\rCertificate Stack (ACM in us-east-1)\râ†“\rCore Stack (DynamoDB, S3, CloudFront, KMS)\râ†“\rAuth Stack (Cognito, Lambda Triggers)\râ†“\rBackend Stack (API Gateway, Lambda, SQS, WAF)\râ†“\rObservability Stack (CloudWatch, Alarms) Giáº£i thÃ­ch phá»¥ thuá»™c:\nCertificate Stack cáº§n DNS Stack Ä‘á»ƒ validate certificates qua Route 53 DNS Core Stack cáº§n Certificate Stack Ä‘á»ƒ attach certificate vÃ o CloudFront Auth Stack cáº§n Core Stack Ä‘á»ƒ Lambda triggers cÃ³ thá»ƒ access DynamoDB Backend Stack cáº§n Auth Stack Ä‘á»ƒ integrate Cognito Authorizer vÃ o API Gateway Observability Stack cáº§n táº¥t cáº£ stacks Ä‘á»ƒ monitor táº¥t cáº£ resources Tá»•ng chi phÃ­ Æ°á»›c tÃ­nh Development Environment:\nService Chi phÃ­/thÃ¡ng Ghi chÃº Route 53 Hosted Zone $0.50 1 hosted zone + DNS queries ACM Certificates $0 Miá»…n phÃ­ cho public certificates DynamoDB (Pay-per-request) $3-5 Phá»¥ thuá»™c usage, cÃ³ free tier S3 (Intelligent-Tiering) $1-3 2 buckets, auto-tiering tiáº¿t kiá»‡m chi phÃ­ CloudFront $2-5 CDN distribution + data transfer Lambda $0-3 7 functions + 1 worker, free tier 1M requests Lambda Layer $0 KhÃ´ng tÃ­nh phÃ­ thÃªm API Gateway $0-3 REST API, free tier 1M requests Cognito (Free tier) $0 LÃªn Ä‘áº¿n 50,000 MAU SQS $0-1 4 queues + 4 DLQs, free tier 1M requests WAF (chá»‰ API Gateway) $5-8 Web ACL + rules + requests processed CloudWatch Logs $1-2 7-day retention, táº¥t cáº£ services CloudWatch Dashboards $0-1 4 dashboards, 3 Ä‘áº§u tiÃªn miá»…n phÃ­ CloudWatch Alarms $0.50-1 15+ alarms, $0.10/alarm SNS $0 Email notifications, volume tháº¥p KMS $2 2 customer-managed keys @ $1 má»—i cÃ¡i IAM $0 Roles \u0026amp; policies miá»…n phÃ­ Tá»”NG Cá»˜NG $15-35/thÃ¡ng Development vá»›i traffic tháº¥p LÆ°u Ã½:\nÄÃ¢y lÃ  Æ°á»›c tÃ­nh cho development environment vá»›i traffic tháº¥p Production environment vá»›i high traffic sáº½ cÃ³ chi phÃ­ cao hÆ¡n Ä‘Ã¡ng ká»ƒ Free tier: Cognito (50K MAU), Lambda (1M requests), API Gateway (1M requests), SQS (1M requests) CÃ¡c tá»‘i Æ°u chi phÃ­ Ä‘Ã£ Ã¡p dá»¥ng: CloudFront WAF Ä‘Ã£ gá»¡ bá» (-$9/thÃ¡ng) S3 Intelligent-Tiering (tá»± Ä‘á»™ng giáº£m chi phÃ­) CloudWatch Logs 7-day retention Lambda Layer giáº£m deployment costs authStack.addDependency(coreStack); backendStack.addDependency(authStack); observabilityStack.addDependency(backendStack);\nHÆ°á»›ng dáº«n cáº¥u hÃ¬nh BÆ°á»›c 1: Chuáº©n bá»‹ thÆ° má»¥c Infrastructure 1. Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure\ncd D:\\Project_AWS\\everyonecook\\infrastructure 2. CÃ i Ä‘áº·t dependencies\nnpm install TODO: Chá»¥p screenshot terminal vá»›i output cá»§a lá»‡nh npm install\nBÆ°á»›c 2: Cáº¥u hÃ¬nh Environment Settings 1. Xem láº¡i cáº¥u hÃ¬nh environment\nMá»Ÿ file config/environment.ts Ä‘á»ƒ xem láº¡i cáº¥u hÃ¬nh:\ncode config\\environment.ts File nÃ y chá»©a cáº¥u hÃ¬nh cho cÃ¡c environments (dev, staging, prod):\n// VÃ­ dá»¥ cáº¥u hÃ¬nh Dev environment dev: { environment: \u0026#39;dev\u0026#39;, account: \u0026#39;123456789012\u0026#39;, // Cáº­p nháº­t vá»›i AWS Account ID cá»§a báº¡n region: \u0026#39;ap-southeast-1\u0026#39;, // Singapore region domains: { frontend: \u0026#39;dev.everyonecook.cloud\u0026#39;, api: \u0026#39;api-dev.everyonecook.cloud\u0026#39;, cdn: \u0026#39;cdn-dev.everyonecook.cloud\u0026#39;, }, cognito: { passwordPolicy: { minLength: 8, // Dev: 8 kÃ½ tá»±, Prod: 12 kÃ½ tá»± } } } 2. XÃ¡c minh AWS Account ID\n# Kiá»ƒm tra AWS Account ID hiá»‡n táº¡i aws sts get-caller-identity Output sáº½ hiá»ƒn thá»‹:\n{ \u0026#34;UserId\u0026#34;: \u0026#34;AIDAXXXXXXXXXXXXXXXXX\u0026#34;, \u0026#34;Account\u0026#34;: \u0026#34;123456789012\u0026#34;, \u0026#34;Arn\u0026#34;: \u0026#34;arn:aws:iam::123456789012:user/your-username\u0026#34; } 3. Cáº­p nháº­t account ID trong config (náº¿u cáº§n)\nNáº¿u account ID khÃ´ng khá»›p, cáº­p nháº­t trong config/environment.ts:\ndev: { account: \u0026#39;YOUR_ACTUAL_ACCOUNT_ID\u0026#39;, // Cáº­p nháº­t táº¡i Ä‘Ã¢y // ... cÃ¡c configs khÃ¡c } BÆ°á»›c 3: Xem láº¡i cáº¥u trÃºc CDK App 1. Xem láº¡i file CDK app chÃ­nh\ncode bin\\app.ts File bin/app.ts lÃ  entry point cá»§a CDK application. Ná»™i dung chÃ­nh:\n#!/usr/bin/env node import * as cdk from \u0026#39;aws-cdk-lib\u0026#39;; import { getConfig } from \u0026#39;../config/environment\u0026#39;; const app = new cdk.App(); // Láº¥y environment tá»« context (máº·c Ä‘á»‹nh: \u0026#39;dev\u0026#39;) const environment = app.node.tryGetContext(\u0026#39;environment\u0026#39;) || \u0026#39;dev\u0026#39;; const config = getConfig(environment); console.log(`ğŸš€ Deploying Everyone Cook infrastructure for environment: ${environment}`); // Táº¡o stacks theo thá»© tá»± phá»¥ thuá»™c const dnsStack = new DnsStack(app, `EveryoneCook-${environment}-DNS`, {...}); const certificateStack = new CertificateStack(app, `EveryoneCook-${environment}-Certificate`, {...}); const coreStack = new CoreStack(app, `EveryoneCook-${environment}-Core`, {...}); const authStack = new AuthStack(app, `EveryoneCook-${environment}-Auth`, {...}); const backendStack = new BackendStack(app, `EveryoneCook-${environment}-Backend`, {...}); const observabilityStack = new ObservabilityStack(app, `EveryoneCook-${environment}-Observability`, {...}); // ThÃªm dependencies certificateStack.addDependency(dnsStack); coreStack.addDependency(certificateStack); authStack.addDependency(coreStack); backendStack.addDependency(authStack); observabilityStack.addDependency(backendStack); // ThÃªm tags cho táº¥t cáº£ stacks cdk.Tags.of(app).add(\u0026#39;Project\u0026#39;, \u0026#39;EveryoneCook\u0026#39;); cdk.Tags.of(app).add(\u0026#39;Environment\u0026#39;, config.environment); cdk.Tags.of(app).add(\u0026#39;ManagedBy\u0026#39;, \u0026#39;CDK\u0026#39;); 2. Hiá»ƒu vá» stack dependencies\nStacks Ä‘Æ°á»£c táº¡o theo thá»© tá»± vÃ  cÃ³ explicit dependencies:\nCertificate Stack phá»¥ thuá»™c vÃ o DNS Stack Core Stack phá»¥ thuá»™c vÃ o Certificate Stack Auth Stack phá»¥ thuá»™c vÃ o Core Stack Backend Stack phá»¥ thuá»™c vÃ o Auth Stack Observability Stack phá»¥ thuá»™c vÃ o táº¥t cáº£ stacks khÃ¡c BÆ°á»›c 4: Validate cáº¥u hÃ¬nh 1. Compile TypeScript\n# Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure cd D:\\Project_AWS\\everyonecook\\infrastructure # Compile TypeScript npm run build Output thÃ nh cÃ´ng:\n\u0026gt; everyonecook-infrastructure@1.0.0 build\r\u0026gt; tsc\r# KhÃ´ng cÃ³ lá»—i - compilation thÃ nh cÃ´ng 2. Liá»‡t kÃª táº¥t cáº£ CDK stacks\n# Liá»‡t kÃª táº¥t cáº£ stacks cho dev environment npx cdk list --context environment=dev Output:\nEveryoneCook-dev-DNS\rEveryoneCook-dev-Certificate\rEveryoneCook-dev-Core\rEveryoneCook-dev-Auth\rEveryoneCook-dev-Backend\rEveryoneCook-dev-Observability 3. Synthesize CloudFormation templates\n# Generate CloudFormation templates npx cdk synth --context environment=dev Output:\nSuccessfully synthesized to D:\\Project_AWS\\everyonecook\\infrastructure\\cdk.out\rSupply a stack id (EveryoneCook-dev-DNS, EveryoneCook-dev-Certificate, ...) to display its template. ThÆ° má»¥c cdk.out/ Ä‘Æ°á»£c táº¡o vá»›i CloudFormation templates:\ncdk.out/\râ”œâ”€â”€ EveryoneCook-dev-DNS.template.json\râ”œâ”€â”€ EveryoneCook-dev-Certificate.template.json\râ”œâ”€â”€ EveryoneCook-dev-Core.template.json\râ”œâ”€â”€ EveryoneCook-dev-Auth.template.json\râ”œâ”€â”€ EveryoneCook-dev-Backend.template.json\râ””â”€â”€ EveryoneCook-dev-Observability.template.json BÆ°á»›c 5: Xem láº¡i tÃ i nguyÃªn Stack (TÃ¹y chá»n) Náº¿u báº¡n muá»‘n xem chi tiáº¿t resources trong má»—i stack:\n1. TÃ i nguyÃªn DNS Stack\n# Xem DNS stack template Get-Content cdk.out\\EveryoneCook-dev-DNS.template.json | ConvertFrom-Json | Select-Object -ExpandProperty Resources Resources:\nHostedZone: Route 53 Hosted Zone Outputs: Nameservers, Hosted Zone ID 2. TÃ i nguyÃªn Certificate Stack\n# Xem Certificate stack template Get-Content cdk.out\\EveryoneCook-dev-Certificate.template.json | ConvertFrom-Json | Select-Object -ExpandProperty Resources Resources:\nCloudFrontCertificate: ACM Certificate cho CloudFront (cdn.everyonecook.cloud) ApiGatewayCertificate: Wildcard ACM Certificate (*.everyonecook.cloud) ValidationRecords: Route 53 DNS validation records 3. TÃ i nguyÃªn Core Stack\nResources (30+ resources):\nDynamoDB Table vá»›i 5 GSI indexes S3 Buckets (2 buckets: content, cdn-logs) CloudFront Distribution vá»›i OAC KMS Keys (2 keys: DynamoDB, S3) IAM Roles vÃ  Policies 4. TÃ i nguyÃªn Auth Stack\nResources (20+ resources):\nCognito User Pool vá»›i password policy Cognito User Pool Client Lambda Functions (5 triggers) IAM Roles cho Lambda functions 5. TÃ i nguyÃªn Backend Stack\nResources (50+ resources):\nAPI Gateway REST API vá»›i custom domain Lambda Functions (6 modules + 1 worker) SQS Queues (4 queues + 4 DLQs) WAF Web ACL cho API Gateway Lambda Layer (shared dependencies) IAM Roles vÃ  Policies 6. TÃ i nguyÃªn Observability Stack\nResources (15+ resources):\nCloudWatch Dashboards (4 dashboards) CloudWatch Alarms (10+ alarms) Composite Alarm cho overall health SNS Topic cho notifications BÆ°á»›c 6: Cáº¥u hÃ¬nh chi tiáº¿t cho tá»«ng Stack Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» cáº¥u hÃ¬nh vÃ  resources cá»§a tá»«ng stack, xem cÃ¡c pháº§n sau:\n5.4.1 DNS Stack: Cáº¥u hÃ¬nh Route 53 Hosted Zone 5.4.2 Certificate Stack: Cáº¥u hÃ¬nh ACM Certificates 5.4.3 Core Stack: Cáº¥u hÃ¬nh DynamoDB, S3, CloudFront 5.4.4 Auth Stack: Cáº¥u hÃ¬nh Cognito, Lambda Triggers 5.4.5 Backend Stack: Cáº¥u hÃ¬nh API Gateway, Lambda, SQS 5.4.7 Observability Stack: Cáº¥u hÃ¬nh CloudWatch, Alarms Checklist cáº¥u hÃ¬nh TrÆ°á»›c khi triá»ƒn khai, kiá»ƒm tra cÃ¡c má»¥c sau:\nCáº¥u hÃ¬nh Environment\nAWS Account ID Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c minh vÃ  cáº­p nháº­t trong config/environment.ts Region Ä‘Æ°á»£c set Ä‘Ãºng (ap-southeast-1 cho dev) Domain names Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng Dependencies\nNode.js vÃ  npm Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t AWS CLI Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh vá»›i credentials AWS CDK CLI Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t globally npm dependencies Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t (npm install) Validation\nTypeScript compilation thÃ nh cÃ´ng (npm run build) CDK list hiá»ƒn thá»‹ táº¥t cáº£ 6 stacks CDK synth táº¡o CloudFormation templates thÃ nh cÃ´ng KhÃ´ng cÃ³ lá»—i syntax trong stack code Chuáº©n bá»‹ Deployment\nCDK bootstrap Ä‘Ã£ Ä‘Æ°á»£c cháº¡y (xem 5.03 CDK Bootstrap) AWS account cÃ³ Ä‘á»§ permissions Ä‘á»ƒ táº¡o resources Domain Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½ (hoáº·c sáºµn sÃ ng Ä‘Äƒng kÃ½) BÆ°á»›c tiáº¿p theo Sau khi hoÃ n thÃ nh cáº¥u hÃ¬nh vÃ  validation, tiáº¿p tá»¥c Ä‘áº¿n:\n5.05 Deploy Infrastructure - Triá»ƒn khai táº¥t cáº£ stacks lÃªn AWS\nTrong bÆ°á»›c tiáº¿p theo, báº¡n sáº½:\nDeploy DNS Stack vÃ  cáº¥u hÃ¬nh nameservers Deploy Certificate Stack vÃ  validate certificates Deploy Core Stack (DynamoDB, S3, CloudFront) Deploy Auth Stack (Cognito, Lambda Triggers) Deploy Backend Stack (API Gateway, Lambda Functions) Deploy Observability Stack (CloudWatch Dashboards) "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/3.4-blog4/",
	"title": "Blog 4",
	"tags": [],
	"description": "",
	"content": "AWS for Games: Jackbox Games Má»Ÿ Ra CÆ¡ Há»™i Má»›i Vá»›i Amazon GameLift Streams Bá»Ÿi David Holladay â€“ ngÃ y 6 thÃ¡ng 3 nÄƒm 2025\nTags: Amazon CloudFront, Amazon GameLift, Amazon SQS, Amazon S3, Giáº£i phÃ¡p KhÃ¡ch hÃ ng, PhÃ¡t triá»ƒn Game, Game, Messaging, Networking \u0026amp; Content Delivery, Storage, Industries\nGiá»›i Thiá»‡u Jackbox Games lÃ  studio trÃ² chÆ¡i cÃ³ trá»¥ sá»Ÿ táº¡i Chicago, ná»•i tiáº¿ng vá»›i cÃ¡c tá»±a game party nhÆ° Quiplash, Fibbage, Drawful, Trivia Murder Party, vÃ  nhiá»u trÃ² khÃ¡c. Vá»›i hÆ¡n 50 trÃ² chÆ¡i trong danh má»¥c, Jackbox theo Ä‘uá»•i má»¥c tiÃªu vá» \u0026ldquo;gaming dá»… tiáº¿p cáº­n\u0026rdquo; â€” tá»©c lÃ  ngÆ°á»i chÆ¡i cÃ³ thá»ƒ tham gia tá»« thiáº¿t bá»‹ báº¥t ká»³ mÃ  há» cÃ³. ToÃ n bá»™ háº¡ táº§ng server cá»§a cÃ´ng ty Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn Amazon Web Services.\nTrÆ°á»›c Ä‘Ã¢y, ngÆ°á»i chÆ¡i thÆ°á»ng sá»­ dá»¥ng TV Ä‘á»ƒ hiá»ƒn thá»‹ trÃ² chÆ¡i vÃ  Ä‘iá»‡n thoáº¡i lÃ m Ä‘iá»u khiá»ƒn â€” má»™t cÃ¡ch chÆ¡i Ä‘Æ¡n giáº£n nhÆ°ng váº«n ráº¥t phá»• biáº¿n. Gáº§n Ä‘Ã¢y, Jackbox quyáº¿t Ä‘á»‹nh há»£p tÃ¡c vá»›i Amazon GameLift Streams Ä‘á»ƒ mang tráº£i nghiá»‡m chÆ¡i khÃ´ng cáº§n cÃ i Ä‘áº·t, truy cáº­p trá»±c tiáº¿p cho ngÆ°á»i chÆ¡i.\nAmazon GameLift Streams lÃ  má»™t tÃ­nh nÄƒng trong GameLift, cho phÃ©p trÃ² chÆ¡i Ä‘Æ°á»£c stream vá»›i Ä‘á»™ trá»… tháº¥p, khung hÃ¬nh cao vÃ  quy mÃ´ toÃ n cáº§u â€” giÃºp studio nhÆ° Jackbox má»Ÿ rá»™ng pháº¡m vi tiáº¿p cáº­n mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o console hoáº·c thiáº¿t bá»‹ máº¡nh.\n1. Kiá»ƒm SoÃ¡t Chi PhÃ­ Khi Má»Ÿ Rá»™ng Viá»‡c Ä‘Æ°a má»™t trÃ² chÆ¡i lÃªn ná»n táº£ng streaming cÃ³ thá»ƒ ráº¥t tá»‘n kÃ©m náº¿u lÃ m riÃªng láº». Jackbox cÃ³ danh má»¥c ráº¥t lá»›n, nÃªn há» cáº§n má»™t cÃ¡ch tá»‘i Æ°u hÃ³a chi phÃ­.\n1.1 Táº¡o NhÃ³m Stream (Stream Group) Cho Táº¥t Cáº£ TrÃ² ChÆ¡i AWS Ä‘Ã£ há»£p tÃ¡c vá»›i Jackbox Ä‘á»ƒ gom 50 trÃ² chÆ¡i vÃ o má»™t Stream Group duy nháº¥t trong Amazon GameLift Streams. Nhá» váº­y, há» cÃ³ thá»ƒ má»Ÿ rá»™ng quy mÃ´ cho toÃ n bá»™ danh má»¥c cÃ¹ng nhau thay vÃ¬ tá»«ng trÃ² riÃªng biá»‡t.\n1.2 Multi-tenancy \u0026amp; Giáº£m Chi PhÃ­ TÃ i NguyÃªn VÃ¬ cÃ¡c trÃ² Jackbox khÃ´ng yÃªu cáº§u GPU máº¡nh, má»™t instance server cÃ³ thá»ƒ cháº¡y nhiá»u trÃ² chÆ¡i cÃ¹ng lÃºc â€“ tá»©c lÃ  Ã¡p dá»¥ng mÃ´ hÃ¬nh Ä‘a á»©ng dá»¥ng (multi-tenancy) Ä‘á»ƒ tiáº¿t kiá»‡m chi phÃ­.\n1.3 Sá»­ Dá»¥ng Data Channel Äá»ƒ ChÃ¨n Quáº£ng CÃ¡o Amazon GameLift Streams cung cáº¥p tÃ­nh nÄƒng Data Channel, cho phÃ©p chÃ¨n quáº£ng cÃ¡o vÃ o cÃ¡c khoáº£nh kháº¯c há»£p lÃ½ giá»¯a cÃ¡c vÃ²ng chÆ¡i â€” giÃºp Jackbox duy trÃ¬ mÃ´ hÃ¬nh miá»…n phÃ­ hoáº·c há»— trá»£ doanh thu báº±ng quáº£ng cÃ¡o.\n2. Cáº£i Thiá»‡n Quy TrÃ¬nh Cáº­p Nháº­t VÃ  PhÃ¡t HÃ nh 2.1 MÃ´ HÃ¬nh Party Pack Truyá»n Thá»‘ng \u0026amp; Háº¡n Cháº¿ TrÆ°á»›c Ä‘Ã¢y, Jackbox phÃ¡t hÃ nh trÃ² chÆ¡i theo Party Packs â€” má»—i gÃ³i gá»“m 5 trÃ². Khi muá»‘n cáº­p nháº­t má»™t trÃ², há» pháº£i cáº­p nháº­t toÃ n bá»™ gÃ³i trÃªn má»i ná»n táº£ng, gÃ¢y phá»©c táº¡p trong quáº£n lÃ½ vÃ  triá»ƒn khai.\n2.2 Streaming Cho PhÃ©p Cáº­p Nháº­t RiÃªng Láº», Linh Hoáº¡t Vá»›i GameLift Streams, Jackbox cÃ³ thá»ƒ cáº­p nháº­t má»™t trÃ² duy nháº¥t á»Ÿ server mÃ  khÃ´ng áº£nh hÆ°á»Ÿng cÃ¡c trÃ² khÃ¡c, vÃ  khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n cÃ¡c platform khÃ¡c nhau. Äiá»u nÃ y cÅ©ng cho phÃ©p ngÆ°á»i chÆ¡i chuyá»ƒn tá»« trÃ² nÃ y sang trÃ² kia mÆ°á»£t mÃ , mÃ  khÃ´ng cáº§n Ä‘Ã³ng má»Ÿ gÃ³i trÃ².\n2.3 TÄƒng TÃ­nh Kháº£ KhÃ¡m PhÃ¡ TrÃ² ChÆ¡i (Discoverability) Khi má»i trÃ² Ä‘á»u cÃ³ thá»ƒ truy cáº­p qua dá»‹ch vá»¥ streaming, ngÆ°á»i chÆ¡i cÃ³ nhiá»u cÆ¡ há»™i thá»­ trÃ² má»›i ngay â€” thay vÃ¬ bá»‹ giá»›i háº¡n trong cÃ¡c gÃ³i há» Ä‘Ã£ mua trÆ°á»›c.\n3. Há»— Trá»£ \u0026amp; TÃ­ch Há»£p SÃ¢u Vá»›i AWS 3.1 Há»— Trá»£ Ká»¹ Thuáº­t TÃ­ch Há»£p VÃ o Slack Trong quÃ¡ trÃ¬nh triá»ƒn khai, AWS há»— trá»£ Jackbox trá»±c tiáº¿p thÃ´ng qua Slack cá»§a há» â€” giÃºp Ä‘á»™i phÃ¡t triá»ƒn dá»… dÃ ng trao Ä‘á»•i, giáº£i quyáº¿t sá»± cá»‘ nhanh chÃ³ng. CTO Jackbox cho biáº¿t tráº£i nghiá»‡m nÃ y khiáº¿n AWS giá»‘ng nhÆ° má»™t pháº§n cá»§a Ä‘á»™i há».\n3.2 Sá»­ Dá»¥ng Nhiá»u Dá»‹ch Vá»¥ AWS KhÃ¡c BÃªn cáº¡nh GameLift Streams, Jackbox dÃ¹ng nhiá»u dá»‹ch vá»¥ AWS Ä‘á»ƒ váº­n hÃ nh há»‡ thá»‘ng:\nAmazon EC2 cho xá»­ lÃ½ backend, session management Amazon S3 cho lÆ°u trá»¯ tÃ i nguyÃªn trÃ² chÆ¡i vÃ  dá»¯ liá»‡u Amazon SQS cho quáº£n lÃ½ hÃ ng Ä‘á»£i Amazon CloudFront Ä‘á»ƒ phÃ¢n phá»‘i ná»™i dung nhanh vÃ  á»•n Ä‘á»‹nh Táº¥t cáº£ Ä‘á»u náº±m trong há»‡ sinh thÃ¡i AWS mÃ  Jackbox Ä‘Ã£ sá»­ dá»¥ng tá»« trÆ°á»›c.\n4. Äá»‹nh HÆ°á»›ng TÆ°Æ¡ng Lai \u0026amp; Táº§m NhÃ¬n Jackbox ráº¥t ká»³ vá»ng vÃ o viá»‡c tiáº¿p cáº­n ngÆ°á»i chÆ¡i má»›i qua thiáº¿t bá»‹ phá»• biáº¿n nhÆ° Smart TV, mÃ  khÃ´ng yÃªu cáº§u console. Há» muá»‘n tráº£i nghiá»‡m nhÆ° má»Ÿ á»©ng dá»¥ng streaming (nhÆ° Netflix) Ä‘á»ƒ chÆ¡i trÃ² chÆ¡i trá»±c tiáº¿p.\nStreaming cÅ©ng táº¡o Ä‘iá»u kiá»‡n Ä‘á»ƒ Jackbox xem xÃ©t há»£p tÃ¡c vá»›i cÃ¡c studio khÃ¡c, Ä‘Æ°a trÃ² chÆ¡i tá»« cÃ¡c engine khÃ¡c vÃ o dá»‹ch vá»¥ cá»§a há» â€” má»Ÿ rá»™ng danh má»¥c nhanh hÆ¡n. CTO cá»§a Jackbox nháº¥n máº¡nh ráº±ng streaming má»Ÿ ra \u0026ldquo;mÃ´ hÃ¬nh kinh doanh má»›i\u0026rdquo; mÃ  há» khÃ´ng lÃ m Ä‘Æ°á»£c vá»›i cáº¥u trÃºc Party Pack truyá»n thá»‘ng â€” mÃ´ hÃ¬nh Ä‘Äƒng kÃ½, quáº£ng cÃ¡o, truy cáº­p trá»±c tiáº¿p â€” vÃ  GameLift Streams mang láº¡i linh hoáº¡t Ä‘á»ƒ há» tiáº¿p tá»¥c phÃ¡t triá»ƒn.\nKáº¿t Luáº­n Nhá» á»©ng dá»¥ng Amazon GameLift Streams, Jackbox Games Ä‘áº¡t Ä‘Æ°á»£c nhiá»u lá»£i Ã­ch:\nMá»Ÿ rá»™ng kháº£ nÄƒng tiáº¿p cáº­n ngÆ°á»i chÆ¡i toÃ n cáº§u Giáº£m chi phÃ­ váº­n hÃ nh nhá» multi-tenancy vÃ  quáº£n lÃ½ táº­p trung ÄÆ¡n giáº£n hÃ³a quy trÃ¬nh cáº­p nháº­t trÃ² chÆ¡i Cho phÃ©p mÃ´ hÃ¬nh doanh thu linh hoáº¡t hÆ¡n (quáº£ng cÃ¡o, Ä‘Äƒng kÃ½) Cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i chÆ¡i vÃ  kháº£ nÄƒng khÃ¡m phÃ¡ ná»™i dung Sá»± há»£p tÃ¡c giá»¯a Jackbox vÃ  AWS cho tháº¥y streaming trÃ² chÆ¡i khÃ´ng chá»‰ lÃ  xu hÆ°á»›ng, mÃ  lÃ  ná»n táº£ng Ä‘á»ƒ Ä‘á»•i má»›i trong ngÃ nh game.\nVá» TÃ¡c Giáº£ David Holladay David Holladay lÃ  Principal Solutions Architect thuá»™c nhÃ³m AWS Game Tech, chuyÃªn tÆ° váº¥n vÃ  há»— trá»£ cÃ¡c studio trÃ² chÆ¡i trong viá»‡c xÃ¢y dá»±ng háº¡ táº§ng quy mÃ´ lá»›n trÃªn AWS. Ã”ng cÃ³ hÆ¡n 15 nÄƒm kinh nghiá»‡m trong phÃ¡t triá»ƒn pháº§n má»m vÃ  thiáº¿t káº¿ há»‡ thá»‘ng cho ngÃ nh game, tá»«ng lÃ m viá»‡c vá»›i nhiá»u studio hÃ ng Ä‘áº§u tháº¿ giá»›i. Khi khÃ´ng lÃ m viá»‡c, David yÃªu thÃ­ch viá»‡c stream cÃ¡c game indie má»›i ra máº¯t vÃ  tham gia cÃ¡c sá»± kiá»‡n game jam Ä‘á»ƒ chia sáº» kinh nghiá»‡m láº­p trÃ¬nh vá»›i cá»™ng Ä‘á»“ng phÃ¡t triá»ƒn trÃ² chÆ¡i.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/4-eventparticipated/",
	"title": "CÃ¡c events Ä‘Ã£ tham gia",
	"tags": [],
	"description": "",
	"content": "Trong quÃ¡ trÃ¬nh thá»±c táº­p, em Ä‘Ã£ tham gia 4 events, vá»›i má»—i event lÃ  má»™t tráº£i nghiá»‡m Ä‘Ã¡ng nhá»› vá»›i nhá»¯ng kiáº¿n thá»©c má»›i, hay vÃ  bá»• Ã­ch, cÃ¹ng vá»›i Ä‘Ã³ lÃ  nhá»©ng mÃ³n quÃ  vÃ  nhá»¯ng khoáº£nh kháº¯c ráº¥t tuyá»‡t vá»i.\nEvent 1 TÃªn sá»± kiá»‡n: AWS AI/ML \u0026amp; Generative AI\nThá»i gian: 09:00 ngÃ y 15/11/2025\nÄá»‹a Ä‘iá»ƒm: Táº§ng 26, tÃ²a nhÃ  Bitexco, sá»‘ 02 Ä‘Æ°á»ng Háº£i Triá»u, phÆ°á»ng SÃ i GÃ²n, thÃ nh phá»‘ Há»“ ChÃ­ Minh\nVai trÃ² trong sá»± kiá»‡n: NgÆ°á»i tham dá»±\nNá»™i dung sá»± kiá»‡n:\nGiá»›i thiá»‡u há»‡ sinh thÃ¡i AI/ML cá»§a AWS TrÃ¬nh bÃ y cÃ¡c dá»‹ch vá»¥ cá»‘t lÃµi nhÆ° Amazon SageMaker vÃ  Amazon Bedrock HÆ°á»›ng dáº«n quy trÃ¬nh xÃ¢y dá»±ng \u0026amp; triá»ƒn khai mÃ´ hÃ¬nh ML end-to-end Giá»›i thiá»‡u Generative AI, Prompt Engineering vÃ  kiáº¿n trÃºc RAG Há»— trá»£ há»c viÃªn thá»±c hÃ nh qua demo vÃ  trao Ä‘á»•i trá»±c tiáº¿p cÃ¹ng chuyÃªn gia Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c:\nAI/ML cáº§n Ä‘Æ°á»£c Ã¡p dá»¥ng theo chiáº¿n lÆ°á»£c rÃµ rÃ ng, khÃ´ng cháº¡y theo trend RAG vÃ  Guardrails lÃ  yáº¿u tá»‘ báº¯t buá»™c khi Ä‘Æ°a GenAI vÃ o mÃ´i trÆ°á»ng enterprise SageMaker vÃ  Bedrock giÃºp doanh nghiá»‡p tiáº¿t kiá»‡m thá»i gian, giáº£m chi phÃ­ vÃ  tÄƒng tá»‘c Ä‘á»•i má»›i Event 2 TÃªn sá»± kiá»‡n: DevOps on AWS\nThá»i gian: 09:00 ngÃ y 17/11/2025\nÄá»‹a Ä‘iá»ƒm: Táº§ng 26, tÃ²a nhÃ  Bitexco, sá»‘ 02 Ä‘Æ°á»ng Háº£i Triá»u, phÆ°á»ng SÃ i GÃ²n, thÃ nh phá»‘ Há»“ ChÃ­ Minh\nVai trÃ² trong sá»± kiá»‡n: NgÆ°á»i tham dá»±\nNá»™i dung sá»± kiá»‡n:\nGiá»›i thiá»‡u vÄƒn hoÃ¡, tÆ° duy vÃ  cÃ¡c nguyÃªn táº¯c DevOps TrÃ¬nh bÃ y há»‡ thá»‘ng dá»‹ch vá»¥ DevOps trÃªn AWS phá»¥c vá»¥ CI/CD Thá»±c hÃ nh Infrastructure as Code (IaC) vá»›i CloudFormation vÃ  CDK TÃ¬m hiá»ƒu containerization vÃ  orchestration trÃªn AWS Giá»›i thiá»‡u monitoring, observability vÃ  quy trÃ¬nh xá»­ lÃ½ sá»± cá»‘ Chia sáº» case study DevOps thá»±c táº¿ vÃ  Ä‘á»‹nh hÆ°á»›ng nghá» nghiá»‡p Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c:\nDevOps lÃ  sá»± káº¿t há»£p giá»¯a vÄƒn hoÃ¡ vÃ  cÃ´ng nghá»‡ Observability lÃ  ná»n táº£ng cá»§a váº­n hÃ nh á»•n Ä‘á»‹nh Chá»n mÃ´ hÃ¬nh orchestrator phÃ¹ há»£p phá»¥ thuá»™c vÃ o Ä‘á»™i ngÅ© vÃ  workload Event 3 TÃªn sá»± kiá»‡n: DevOps on AWS\nThá»i gian: 09:00 ngÃ y 29/11/2025\nÄá»‹a Ä‘iá»ƒm: Táº§ng 26, tÃ²a nhÃ  Bitexco, sá»‘ 02 Ä‘Æ°á»ng Háº£i Triá»u, phÆ°á»ng SÃ i GÃ²n, thÃ nh phá»‘ Há»“ ChÃ­ Minh\nVai trÃ² trong sá»± kiá»‡n: NgÆ°á»i tham dá»±\nNá»™i dung sá»± kiá»‡n:\nTriá»ƒn khai MFA vÃ  Ã¡p dá»¥ng nguyÃªn táº¯c phÃ¢n quyá»n tá»‘i thiá»ƒu trong IAM MÃ£ hÃ³a toÃ n bá»™ dá»¯ liá»‡u quan trá»ng báº±ng AWS KMS Báº­t GuardDuty, CloudTrail vÃ  Config theo máº·c Ä‘á»‹nh Sá»­ dá»¥ng kiáº¿n trÃºc Ä‘a tÃ i khoáº£n (multi-account) vá»›i AWS Control Tower Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c:\nMisconfiguration lÃ  nguyÃªn nhÃ¢n sá»‘ 1 gÃ¢y sá»± cá»‘ Báº£o máº­t cáº§n liÃªn tá»¥c vÃ  tá»± Ä‘á»™ng Zero Trust lÃ  tiÃªu chuáº©n má»›i Event 4 TÃªn sá»± kiá»‡n: AWS Bedrock, Agent Core \u0026amp; TÆ°Æ¡ng Lai cá»§a AI Agents\nThá»i gian: 05/12/2025\nVai trÃ² trong sá»± kiá»‡n: NgÆ°á»i tham dá»±\nNá»™i dung sá»± kiá»‡n:\nWorkshop toÃ n diá»‡n vá» AWS Bedrock vÃ  Agent Core KhÃ¡m phÃ¡ hiá»‡n táº¡i vÃ  tÆ°Æ¡ng lai cá»§a AI agents Táº§m nhÃ¬n cá»§a AWS vá» cÃ¡c giáº£i phÃ¡p AI sáºµn sÃ ng cho sáº£n xuáº¥t MÃ´ hÃ¬nh ná»n táº£ng: Claude, Titan, Llama vá»›i há»— trá»£ Ä‘a phÆ°Æ¡ng thá»©c CÃ¡c thÃ nh pháº§n cá»‘t lÃµi cá»§a AWS Bedrock Agent Core (Runtime, Gateway, Memory, Browser, Code Interpreter, Observability) Diaflow: Ná»n táº£ng luá»“ng cÃ´ng viá»‡c agent táº­p trung vÃ o kinh doanh CloudThinker: Quáº£n lÃ½ hoáº¡t Ä‘á»™ng AI vÃ  tá»‘i Æ°u hÃ³a chi phÃ­ Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c:\nHiá»ƒu kiáº¿n trÃºc Bedrock Agent Core lÃ  thiáº¿t yáº¿u Ä‘á»ƒ triá»ƒn khai AI sáº£n xuáº¥t Tá»‘i Æ°u hÃ³a chi phÃ­ vÃ  quáº£n lÃ½ rá»§i ro lÃ  yáº¿u tá»‘ quan trá»ng cho cÃ¡c giáº£i phÃ¡p AI doanh nghiá»‡p CÃ¡c cÃ¡ch tiáº¿p cáº­n táº­p trung vÃ o kinh doanh (nhÆ° Diaflow) vÆ°á»£t trá»™i hÆ¡n cÃ¡c triá»ƒn khai thuáº§n ká»¹ thuáº­t CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ hoáº¡t Ä‘á»™ng cho phÃ©p triá»ƒn khai AI quy mÃ´ lá»›n tá»± tin "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/4-eventparticipated/4.4-event4/",
	"title": "Event 4",
	"tags": [],
	"description": "",
	"content": "BÃ¡o cÃ¡o TÃ³m táº¯t: \u0026ldquo;AWS Bedrock, Agent Core \u0026amp; TÆ°Æ¡ng Lai cá»§a AI Agents\u0026rdquo; Tá»•ng Quan Sá»± Kiá»‡n Má»™t workshop toÃ n diá»‡n vá» AWS Bedrock vÃ  Agent Core, khÃ¡m phÃ¡ hiá»‡n táº¡i vÃ  tÆ°Æ¡ng lai cá»§a AI agents, táº§m nhÃ¬n cá»§a AWS, vÃ  cÃ¡c giáº£i phÃ¡p Ä‘á»ƒ triá»ƒn khai agents vÃ o sáº£n xuáº¥t má»™t cÃ¡ch hiá»‡u quáº£.\nNhá»¯ng Äiá»ƒm Ná»•i Báº­t Pháº§n 1: TÆ°Æ¡ng Lai cá»§a AI Agents \u0026amp; Táº§m NhÃ¬n cá»§a AWS TÆ°Æ¡ng Lai cá»§a AI Agents\nChuyá»ƒn tá»« nguyÃªn máº«u thá»­ nghiá»‡m sang giáº£i phÃ¡p sáºµn sÃ ng cho sáº£n xuáº¥t Ãp dá»¥ng doanh nghiá»‡p yÃªu cáº§u quáº£n trá»‹ máº¡nh máº½, báº£o máº­t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng Äiá»u phá»‘i vÃ  há»£p tÃ¡c Ä‘a-agent trá»Ÿ thÃ nh tiÃªu chuáº©n Tá»‘i Æ°u hÃ³a chi phÃ­ vÃ  hiá»‡u quáº£ tÃ i nguyÃªn lÃ  nhá»¯ng thÃ¡ch thá»©c quan trá»ng Pháº§n 2: CÃ¡c MÃ´ HÃ¬nh AI Agent \u0026amp; Báº£o Máº­t Kháº£ NÄƒng Cá»‘t LÃµi\nMÃ´ hÃ¬nh ná»n táº£ng: Claude, Titan, Llama vá»›i há»— trá»£ Ä‘a phÆ°Æ¡ng thá»©c Báº£o máº­t: mÃ£ hÃ³a dá»¯ liá»‡u, VPC endpoints, chÃ­nh sÃ¡ch IAM, ghi nháº­t kÃ½ kiá»ƒm tra ThÃ¡ch thá»©c: ÄÆ°a agents vÃ o sáº£n xuáº¥t váº«n cÃ²n khÃ³ khÄƒn Pháº§n 3: AWS Bedrock Agent Core CÃ¡c ThÃ nh Pháº§n Cá»‘t LÃµi\nRuntime: Thá»±c thi agent, quáº£n lÃ½ ngá»¯ cáº£nh, há»— trá»£ async/sync Agent Gateway: Äiá»ƒm vÃ o táº­p trung, Ä‘á»‹nh tuyáº¿n yÃªu cáº§u, xÃ¡c thá»±c Memory: Bá»™ nhá»› cuá»™c trÃ² chuyá»‡n ngáº¯n háº¡n, kho kiáº¿n thá»©c dÃ i háº¡n Browser/Web: QuÃ©t web, trÃ­ch xuáº¥t dá»¯ liá»‡u, truy xuáº¥t theo thá»i gian thá»±c Code Interpreter: Thá»±c thi mÃ£ an toÃ n (Python, Node.js), tÃ­ch há»£p API Observability: Theo dÃµi theo thá»i gian thá»±c, chá»‰ sá»‘ hiá»‡u suáº¥t, insights chi phÃ­ Pháº§n 4: Diaflow - Luá»“ng CÃ´ng Viá»‡c Agent Táº­p Trung VÃ o Kinh Doanh NgÆ°á»i SÃ¡ng Láº­p: Viet (Äá»“ng sÃ¡ng láº­p cá»§a Diaflow)\nÄá» Xuáº¥t GiÃ¡ Trá»‹ Äá»™c ÄÃ¡o\nThiáº¿t káº¿ táº­p trung vÃ o kinh doanh PhÃ¡t triá»ƒn Ã­t mÃ£ cho táº¡o agent nhanh chÃ³ng TÃ­ch há»£p doanh nghiá»‡p vá»›i cÃ¡c há»‡ thá»‘ng kinh doanh hiá»‡n cÃ³ CÃ¡c máº«u sáºµn cÃ³ cho cÃ¡c luá»“ng cÃ´ng viá»‡c kinh doanh phá»• biáº¿n Hiá»‡u quáº£ chi phÃ­ thÃ´ng qua tá»‘i Æ°u hÃ³a tÃ i nguyÃªn CÃ¡c Äiá»ƒm KhÃ¡c Biá»‡t ChÃ­nh\nTáº­p trung vÃ o ROI vÃ  chá»‰ sá»‘ kinh doanh Onboarding dá»… dÃ ng hÆ¡n cho cÃ¡c bÃªn liÃªn quan khÃ´ng pháº£i ká»¹ thuáº­t ChuyÃªn mÃ´n lÄ©nh vá»±c cá»¥ thá»ƒ vÃ  thá»±c tiá»…n tá»‘t nháº¥t Pháº§n 5: CloudThinker - Quáº£n LÃ½ Hoáº¡t Äá»™ng AI Táº­p Trung ChÃ­nh: Quáº£n LÃ½ Chi PhÃ­ \u0026amp; Rá»§i Ro\nTá»‘i Æ¯u HÃ³a Chi PhÃ­\nTheo dÃµi sá»­ dá»¥ng tÃ i nguyÃªn vÃ  tá»‘i Æ°u hÃ³a Lá»±a chá»n mÃ´ hÃ¬nh dá»±a trÃªn cÃ¢n báº±ng chi phÃ­/hiá»‡u suáº¥t Xá»­ lÃ½ hÃ ng loáº¡t cho cÃ¡c táº£i cÃ´ng viá»‡c khÃ´ng pháº£i thá»i gian thá»±c Chiáº¿n lÆ°á»£c bá»™ nhá»› Ä‘á»‡m Ä‘á»ƒ giáº£m cÃ¡c lá»‡nh gá»i API Kiá»ƒm soÃ¡t ngÃ¢n sÃ¡ch vÃ  cáº£nh bÃ¡o chi tiÃªu Quáº£n LÃ½ Rá»§i Ro\nGiÃ¡m sÃ¡t hÃ nh vi mÃ´ hÃ¬nh vÃ  phÃ¡t hiá»‡n báº¥t thÆ°á»ng Chiáº¿n lÆ°á»£c dá»± phÃ²ng vÃ  suy giáº£m trá»›u Guardrails vÃ  xÃ¡c thá»±c Ä‘áº§u ra TuÃ¢n thá»§ quy Ä‘á»‹nh vÃ  phÃ¡p luáº­t Pháº£n á»©ng sá»± cá»‘ vÃ  phá»¥c há»“i sau tháº£m há»a Lá»£i Ãch ChÃ­nh\nGiáº£m chi phÃ­ hoáº¡t Ä‘á»™ng 30-50% Giáº£m thiá»ƒu sá»± cá»‘ sáº£n xuáº¥t vÃ  rá»§i ro Cáº£i thiá»‡n Ä‘á»™ tin cáº­y vÃ  tÃ­nh nháº¥t quÃ¡n cá»§a agent Cho phÃ©p triá»ƒn khai tá»± tin á»Ÿ quy mÃ´ lá»›n áº¢nh Sá»± Kiá»‡n "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.4-week4/",
	"title": "Worklog Tuáº§n 4",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu tuáº§n 4: Hiá»ƒu vÃ  thá»±c hÃ nh lÃ m viá»‡c vá»›i Amazon S3 (hosting website tÄ©nh, cáº¥u hÃ¬nh, báº£o máº­t, versioning, CloudFront). Hiá»ƒu vÃ  thá»±c hÃ nh Amazon RDS (táº¡o database, backup/restore, cáº¥u hÃ¬nh VPC/Subnet/SG, cleanup) theo lab. Káº¿t há»£p giá»¯a giao diá»‡n AWS Console vÃ  CLI Ä‘á»ƒ quáº£n lÃ½ tÃ i nguyÃªn S3 \u0026amp; RDS. Tasks to be carried out this week: Day Task Start Date Completion Date Reference Material 2 - Äá»c tá»•ng quan lab S3: cÃ¡c bÆ°á»›c táº¡o bucket, báº­t website tÄ©nh, cáº¥u hÃ¬nh public access, versioning, dá»n dáº¹p tÃ i nguyÃªn - Chuáº©n bá»‹ tÃ i khoáº£n AWS \u0026amp; Ä‘áº£m báº£o quyá»n truy cáº­p S3 29/09/2025 29/09/2025 https://000057.awsstudygroup.com/vi/ 3 - Khá»Ÿi Äáº§u Vá»›i Amazon S3: + Táº¡o S3 bucket + Upload dá»¯ liá»‡u + Báº­t tÃ­nh nÄƒng static website + Cáº¥u hÃ¬nh Block Public Access + Cáº¥u hÃ¬nh public object + Kiá»ƒm tra website + Cáº¥u hÃ¬nh CloudFront Ä‘á»ƒ tÄƒng tá»‘c hosting + Báº­t versioning cho bucket + Sao chÃ©p object sang region khÃ¡c + Dá»n dáº¹p tÃ i nguyÃªn 30/09/2025 30/09/2025 https://000057.awsstudygroup.com/vi/ 4 - Äá»c tá»•ng quan lab RDS: cÃ¡c bÆ°á»›c táº¡o VPC, Subnet, Security Group, táº¡o DB instance, backup \u0026amp; restore, dá»n dáº¹p tÃ i nguyÃªn - Chuáº©n bá»‹ cáº¥u hÃ¬nh máº¡ng (VPC, subnet) cho lab 01/10/2025 01/10/2025 https://000005.awsstudygroup.com/vi/ 5 - Báº¯t Ä‘áº§u vá»›i Amazon RDS: + Táº¡o VPC + Táº¡o EC2 security group + Táº¡o RDS security group + Táº¡o DB Subnet Group + Táº¡o EC2 instance (náº¿u cáº§n Ä‘á»ƒ káº¿t ná»‘i) + Táº¡o RDS database instance + Thá»±c hÃ nh backup \u0026amp; restore DB instance + Kiá»ƒm tra endpoint DB, quyá»n truy cáº­p + Dá»n dáº¹p tÃ i nguyÃªn (delete DB, SG, Subnet group) 02/10/2025 02/10/2025 https://000005.awsstudygroup.com/vi/ 6 - Thá»±c hÃ nh cÃ¡c lá»‡nh AWS CLI cho S3 vÃ  RDS: + Táº¡o vÃ  liá»‡t kÃª cÃ¡c bucket S3 báº±ng CLI + Táº£i lÃªn/táº£i xuá»‘ng Ä‘á»‘i tÆ°á»£ng báº±ng CLI + MÃ´ táº£ vÃ  káº¿t ná»‘i tá»›i RDS instance báº±ng CLI - Ghi láº¡i sá»± khÃ¡c biá»‡t giá»¯a quy trÃ¬nh trÃªn Console vÃ  CLI 03/10/2025 03/10/2025 https://000057.awsstudygroup.com/vi/, https://000005.awsstudygroup.com/vi/ Week Achievements: Hiá»ƒu rÃµ cáº¥u trÃºc vÃ  bÆ°á»›c Ä‘á»ƒ host website tÄ©nh trÃªn S3: táº¡o bucket, cáº¥u hÃ¬nh public access, báº­t website, cáº¥u hÃ¬nh CloudFront Ä‘á»ƒ tÄƒng tá»‘c. Náº¯m Ä‘Æ°á»£c cÃ¡ch báº­t versioning cho bucket vÃ  cÃ¡ch sao chÃ©p object giá»¯a region. Thá»±c hÃ nh xÃ³a tÃ i nguyÃªn S3 Ä‘Ãºng cÃ¡ch Ä‘á»ƒ khÃ´ng phÃ¡t sinh chi phÃ­. Hiá»ƒu khÃ¡i niá»‡m RDS: cÃ¡ch táº¡o VPC, Subnet, Security Group, DB Subnet Group. Táº¡o DB instance RDS thÃ nh cÃ´ng, truy cáº­p Ä‘Æ°á»£c endpoint, thá»±c hiá»‡n backup vÃ  restore. Biáº¿t cÃ¡ch dá»n dáº¹p tÃ i nguyÃªn RDS (xÃ³a DB, Subnet Group, Security Group) sau khi lab. So sÃ¡nh vÃ  nháº­n ra nhá»¯ng Æ°u/nhÆ°á»£c Ä‘iá»ƒm khi thao tÃ¡c qua giao diá»‡n AWS Console so vá»›i viá»‡c dÃ¹ng AWS CLI (tiá»‡n lá»£i, láº·p láº¡i, script hÃ³a). "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.4-auth-stack/",
	"title": "5.4.4 Auth Stack",
	"tags": [],
	"description": "",
	"content": " Auth Stack - XÃ¡c Thá»±c \u0026amp; Quáº£n LÃ½ NgÆ°á»i DÃ¹ng Tá»•ng Quan Auth Stack lÃ  táº§ng xÃ¡c thá»±c Phase 3 cá»§a dá»± Ã¡n EveryoneCook. NÃ³ quáº£n lÃ½ xÃ¡c thá»±c ngÆ°á»i dÃ¹ng, Ä‘Äƒng kÃ½ vÃ  báº£o máº­t tÃ i khoáº£n báº±ng AWS Cognito vá»›i cÃ¡c Lambda trigger tÃ¹y chá»‰nh Ä‘á»ƒ nÃ¢ng cao tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.\nThá»© Tá»± Triá»ƒn Khai: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai sau Core Stack vÃ  trÆ°á»›c Backend Stack.\nTrÃ¡ch Nhiá»‡m ChÃ­nh Táº¡o Cognito User Pool vá»›i cÃ¡c thiáº¿t láº­p báº£o máº­t cáº¥p production Cáº¥u hÃ¬nh Cognito User Pool Client cho á»©ng dá»¥ng web Thiáº¿t láº­p 5 Lambda triggers cho cÃ¡c quy trÃ¬nh xÃ¡c thá»±c tÃ¹y chá»‰nh Quáº£n lÃ½ Ä‘Äƒng kÃ½ ngÆ°á»i dÃ¹ng, xÃ¡c minh email vÃ  quy trÃ¬nh Ä‘Äƒng nháº­p Xá»­ lÃ½ táº¡o há»“ sÆ¡ ngÆ°á»i dÃ¹ng trong DynamoDB (qua PostConfirmation trigger) Nhá»¯ng GÃ¬ Stack NÃ y Bao Gá»“m Cognito User Pool:\nÄÄƒng nháº­p: Username hoáº·c email ChÃ­nh sÃ¡ch máº­t kháº©u: Tá»‘i thiá»ƒu 12 kÃ½ tá»± (8 cho dev), chá»¯ hoa, chá»¯ thÆ°á»ng, chá»¯ sá»‘, kÃ½ hiá»‡u YÃªu cáº§u xÃ¡c minh email MFA: Táº¯t (chá»‰ email + máº­t kháº©u) Device tracking: Báº­t (khÃ´ng cÃ³ MFA challenge) Thuá»™c tÃ­nh chuáº©n: username, email, given_name (fullName) Thuá»™c tÃ­nh tÃ¹y chá»‰nh: account_status, country Cognito User Pool Client:\nAuth flows: USER_PASSWORD_AUTH, USER_SRP_AUTH OAuth flows: Authorization code grant (social login trong tÆ°Æ¡ng lai) Token validity: Access/ID (1h), Refresh (30 ngÃ y) Callback URLs: Theo tá»«ng environment Lambda Triggers (5 triggers):\nPreSignUp: Dá»n dáº¹p ngÆ°á»i dÃ¹ng chÆ°a xÃ¡c minh (háº¿t háº¡n 24h) CustomMessage: TÃ¹y chá»‰nh email templates PostConfirmation: Táº¡o há»“ sÆ¡ ngÆ°á»i dÃ¹ng trong DynamoDB PreAuthentication: Kiá»ƒm tra náº¿u ngÆ°á»i dÃ¹ng bá»‹ cáº¥m/táº¡m ngÆ°ng PostAuthentication: Cáº­p nháº­t timestamp Ä‘Äƒng nháº­p cuá»‘i cÃ¹ng Kiáº¿n TrÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Auth Stack (Phase 3) â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Cognito User Pool â”‚ â”‚\râ”‚ â”‚ â”œâ”€ ÄÄƒng nháº­p: Username hoáº·c Email â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Máº­t kháº©u: Tá»‘i thiá»ƒu 12 kÃ½ tá»±, chÃ­nh sÃ¡ch máº¡nh â”‚ â”‚\râ”‚ â”‚ â”œâ”€ XÃ¡c minh Email: Báº¯t buá»™c â”‚ â”‚\râ”‚ â”‚ â”œâ”€ MFA: Táº¯t (chá»‰ email + máº­t kháº©u) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Device Tracking: Báº­t (khÃ´ng cÃ³ MFA) â”‚ â”‚\râ”‚ â”‚ â””â”€ Thuá»™c tÃ­nh tÃ¹y chá»‰nh: account_status, country â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Lambda Triggers (Quy trÃ¬nh tÃ¹y chá»‰nh) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 1ï¸âƒ£ PreSignUp â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Kiá»ƒm tra username/email tá»“n táº¡i â”‚ â”‚\râ”‚ â”‚ â”œâ”€ XÃ³a ngÆ°á»i dÃ¹ng chÆ°a xÃ¡c minh háº¿t háº¡n (\u0026gt;24h) â”‚ â”‚\râ”‚ â”‚ â””â”€ Cho phÃ©p Ä‘Äƒng kÃ½ má»›i â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 2ï¸âƒ£ CustomMessage â”‚ â”‚\râ”‚ â”‚ â”œâ”€ TÃ¹y chá»‰nh template xÃ¡c minh email â”‚ â”‚\râ”‚ â”‚ â”œâ”€ TÃ¹y chá»‰nh template Ä‘áº·t láº¡i máº­t kháº©u â”‚ â”‚\râ”‚ â”‚ â””â”€ ThÃªm styling vÃ  branding â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 3ï¸âƒ£ PostConfirmation â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Táº¡o DynamoDB entities: â”‚ â”‚\râ”‚ â”‚ â”‚ â”œâ”€ Core Profile (PK=USER#{userId}, SK=PROFILE) â”‚ â”‚\râ”‚ â”‚ â”‚ â”œâ”€ Privacy Settings (SK=PRIVACY_SETTINGS) â”‚ â”‚\râ”‚ â”‚ â”‚ â””â”€ AI Preferences (SK=AI_PREFERENCES) â”‚ â”‚\râ”‚ â”‚ â””â”€ Khá»Ÿi táº¡o dá»¯ liá»‡u ngÆ°á»i dÃ¹ng â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 4ï¸âƒ£ PreAuthentication â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Kiá»ƒm tra tráº¡ng thÃ¡i tÃ i khoáº£n â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Tá»« chá»‘i náº¿u bá»‹ cáº¥m/táº¡m ngÆ°ng â”‚ â”‚\râ”‚ â”‚ â””â”€ Cho phÃ©p Ä‘Äƒng nháº­p náº¿u active â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 5ï¸âƒ£ PostAuthentication â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Cáº­p nháº­t timestamp lastLoginAt â”‚ â”‚\râ”‚ â”‚ â””â”€ Theo dÃµi hoáº¡t Ä‘á»™ng ngÆ°á»i dÃ¹ng â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Cognito User Pool Client â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Client Type: Web (khÃ´ng cÃ³ secret) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Auth Flows: Password, SRP â”‚ â”‚\râ”‚ â”‚ â”œâ”€ OAuth: Authorization code grant â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Tokens: 1h access, 1h ID, 30d refresh â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Callback: https://{env}.everyonecook.cloud â”‚ â”‚\râ”‚ â”‚ â””â”€ Security: Token revocation, user enum protection â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ”‚ Exports\râ–¼\rBackend Stack\r(API Gateway Cognito Authorizer) Cáº¥u HÃ¬nh Stack Cáº¥u TrÃºc File infrastructure/lib/stacks/\râ””â”€â”€ auth-stack.ts # Auth Stack (865 dÃ²ng)\rservices/auth-module/triggers/\râ”œâ”€â”€ pre-signup.ts # PreSignUp trigger\râ”œâ”€â”€ custom-message.ts # CustomMessage trigger\râ”œâ”€â”€ post-confirmation.ts # PostConfirmation trigger\râ”œâ”€â”€ pre-authentication.ts # PreAuthentication trigger\râ””â”€â”€ post-authentication.ts # PostAuthentication trigger Äiá»ƒm Ná»•i Báº­t Trong Triá»ƒn Khai Code File: infrastructure/lib/stacks/auth-stack.ts\n1. Táº¡o Cognito User Pool /** * Táº¡o Cognito User Pool vá»›i báº£o máº­t cáº¥p production */ private createUserPool(): cdk.aws_cognito.UserPool { const cognitoConfig = this.config.cognito; const userPool = new cdk.aws_cognito.UserPool(this, \u0026#39;UserPool\u0026#39;, { userPoolName: `EveryoneCook-${this.config.environment}`, // Cáº¥u hÃ¬nh Ä‘Äƒng nháº­p signInAliases: { username: true, email: true, }, // Cho phÃ©p tá»± Ä‘Äƒng kÃ½ selfSignUpEnabled: true, // Thuá»™c tÃ­nh chuáº©n standardAttributes: { email: { required: true, mutable: false, // Email khÃ´ng thá»ƒ thay Ä‘á»•i }, givenName: { required: true, // fullName Ä‘Æ°á»£c lÆ°u trong given_name mutable: true, }, birthdate: { required: false, mutable: true }, gender: { required: false, mutable: true }, }, // Thuá»™c tÃ­nh tÃ¹y chá»‰nh customAttributes: { account_status: new cdk.aws_cognito.StringAttribute({ mutable: true, minLen: 1, maxLen: 20, }), country: new cdk.aws_cognito.StringAttribute({ mutable: true, minLen: 2, maxLen: 2, // ISO 3166-1 alpha-2 }), }, // ChÃ­nh sÃ¡ch máº­t kháº©u passwordPolicy: { minLength: 12, // 8 cho dev requireLowercase: true, requireUppercase: true, requireDigits: true, requireSymbols: true, tempPasswordValidity: cdk.Duration.days(7), }, // KhÃ´i phá»¥c tÃ i khoáº£n accountRecovery: cdk.aws_cognito.AccountRecovery.EMAIL_ONLY, // Cáº¥u hÃ¬nh email (Cognito máº·c Ä‘á»‹nh) email: cdk.aws_cognito.UserPoolEmail.withCognito(), // Tá»± Ä‘á»™ng xÃ¡c minh email autoVerify: { email: true }, // MFA: Táº¯t mfa: cdk.aws_cognito.Mfa.OFF, // Device tracking (khÃ´ng cÃ³ MFA challenge) deviceTracking: { challengeRequiredOnNewDevice: false, deviceOnlyRememberedOnUserPrompt: true, }, // Email templates userVerification: { emailSubject: \u0026#39;ğŸ³ XÃ¡c minh tÃ i khoáº£n Everyone Cook cá»§a báº¡n\u0026#39;, emailBody: \u0026#39;Xin chÃ o {username}, mÃ£ xÃ¡c minh cá»§a báº¡n lÃ : {####}\u0026#39;, emailStyle: cdk.aws_cognito.VerificationEmailStyle.CODE, }, // Deletion protection cho production deletionProtection: this.config.environment === \u0026#39;prod\u0026#39;, }); return userPool; } 2. Lambda Triggers /** * Táº¡o PostConfirmation Lambda Trigger * * Táº¡o 3 DynamoDB entities sau khi xÃ¡c minh email: * 1. Core Profile (PK=USER#{userId}, SK=PROFILE) * 2. Privacy Settings (SK=PRIVACY_SETTINGS) * 3. AI Preferences (SK=AI_PREFERENCES) */ private createPostConfirmationTrigger( dynamoTable: cdk.aws_dynamodb.ITable ): cdk.aws_lambda.Function { const trigger = new cdk.aws_lambda.Function(this, \u0026#39;PostConfirmationTrigger\u0026#39;, { functionName: `EveryoneCook-${this.config.environment}-PostConfirmation`, runtime: cdk.aws_lambda.Runtime.NODEJS_20_X, handler: \u0026#39;post-confirmation.handler\u0026#39;, code: cdk.aws_lambda.Code.fromAsset( path.join(__dirname, \u0026#39;../../../services/auth-module/triggers/dist\u0026#39;) ), memorySize: 512, timeout: cdk.Duration.seconds(30), environment: { DYNAMODB_TABLE_NAME: dynamoTable.tableName, ENVIRONMENT: this.config.environment, }, }); // Cáº¥p quyá»n ghi DynamoDB dynamoTable.grantReadWriteData(trigger); return trigger; } /** * Táº¡o PreSignUp Lambda Trigger * * Xá»­ lÃ½ dá»n dáº¹p ngÆ°á»i dÃ¹ng chÆ°a xÃ¡c minh: * - Náº¿u user tá»“n táº¡i vÃ  UNCONFIRMED \u0026gt;24h â†’ xÃ³a vÃ  cho phÃ©p Ä‘Äƒng kÃ½ má»›i * - Náº¿u user tá»“n táº¡i vÃ  UNCONFIRMED \u0026lt;24h â†’ tá»« chá»‘i vá»›i thÃ´ng bÃ¡o \u0026#34;chá» 24h\u0026#34; * - Náº¿u user khÃ´ng tá»“n táº¡i â†’ cho phÃ©p Ä‘Äƒng kÃ½ */ private createPreSignUpTrigger(): cdk.aws_lambda.Function { const trigger = new cdk.aws_lambda.Function(this, \u0026#39;PreSignUpTrigger\u0026#39;, { functionName: `EveryoneCook-${this.config.environment}-PreSignUp`, runtime: cdk.aws_lambda.Runtime.NODEJS_20_X, handler: \u0026#39;pre-signup.handler\u0026#39;, code: cdk.aws_lambda.Code.fromAsset( path.join(__dirname, \u0026#39;../../../services/auth-module/triggers/dist\u0026#39;) ), memorySize: 256, timeout: cdk.Duration.seconds(10), }); // Cáº¥p quyá»n Cognito trigger.addToRolePolicy( new cdk.aws_iam.PolicyStatement({ effect: cdk.aws_iam.Effect.ALLOW, actions: [\u0026#39;cognito-idp:ListUsers\u0026#39;, \u0026#39;cognito-idp:AdminDeleteUser\u0026#39;], resources: [`arn:aws:cognito-idp:${this.region}:${this.account}:userpool/*`], }) ); return trigger; } 3. User Pool Client /** * Táº¡o Cognito User Pool Client cho á»©ng dá»¥ng web */ private createUserPoolClient(): cdk.aws_cognito.UserPoolClient { const callbackUrls = this.getCallbackUrls(); const logoutUrls = this.getLogoutUrls(); const userPoolClient = new cdk.aws_cognito.UserPoolClient( this, \u0026#39;UserPoolClient\u0026#39;, { userPoolClientName: `EveryoneCook-Web-Client-${this.config.environment}`, userPool: this.userPool, // Auth flows authFlows: { userPassword: true, // USER_PASSWORD_AUTH userSrp: true, // USER_SRP_AUTH (Secure Remote Password) custom: false, adminUserPassword: false, }, // Cáº¥u hÃ¬nh OAuth (social login trong tÆ°Æ¡ng lai) oAuth: { flows: { authorizationCodeGrant: true, implicitCodeGrant: false, clientCredentials: false, }, scopes: [ cdk.aws_cognito.OAuthScope.EMAIL, cdk.aws_cognito.OAuthScope.OPENID, cdk.aws_cognito.OAuthScope.PROFILE, ], callbackUrls: callbackUrls, logoutUrls: logoutUrls, }, // Token validity accessTokenValidity: cdk.Duration.hours(1), idTokenValidity: cdk.Duration.hours(1), refreshTokenValidity: cdk.Duration.days(30), // Read attributes readAttributes: new cdk.aws_cognito.ClientAttributes() .withStandardAttributes({ email: true, emailVerified: true, givenName: true, }) .withCustomAttributes(\u0026#39;account_status\u0026#39;, \u0026#39;country\u0026#39;), // Thiáº¿t láº­p báº£o máº­t preventUserExistenceErrors: true, // NgÄƒn enumeration attacks enableTokenRevocation: true, // Cho phÃ©p thu há»“i token generateSecret: false, // KhÃ´ng cÃ³ secret cho web apps } ); return userPoolClient; } Chi Tiáº¿t Cáº¥u HÃ¬nh ChÃ­nh 1. Quy TrÃ¬nh ÄÄƒng KÃ½ NgÆ°á»i DÃ¹ng Quy TrÃ¬nh ÄÄƒng KÃ½:\n1. NgÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½ â†’ PreSignUp trigger\râ”œâ”€ Kiá»ƒm tra náº¿u username/email tá»“n táº¡i\râ”œâ”€ Náº¿u UNCONFIRMED \u0026gt;24h: XÃ³a user cÅ©\râ”œâ”€ Náº¿u UNCONFIRMED \u0026lt;24h: Tá»« chá»‘i vá»›i \u0026#34;chá» 24h\u0026#34;\râ””â”€ Cho phÃ©p Ä‘Äƒng kÃ½\r2. NgÆ°á»i dÃ¹ng nháº­n email xÃ¡c minh â†’ CustomMessage trigger\râ”œâ”€ TÃ¹y chá»‰nh email template\râ””â”€ Gá»­i mÃ£ xÃ¡c minh\r3. NgÆ°á»i dÃ¹ng xÃ¡c minh email â†’ PostConfirmation trigger\râ”œâ”€ Táº¡o DynamoDB entities:\râ”‚ â”œâ”€ Core Profile (username, email, fullName, v.v.)\râ”‚ â”œâ”€ Privacy Settings (máº·c Ä‘á»‹nh: private)\râ”‚ â””â”€ AI Preferences (thiáº¿t láº­p máº·c Ä‘á»‹nh)\râ””â”€ TÃ i khoáº£n ngÆ°á»i dÃ¹ng sáºµn sÃ ng\r4. NgÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p â†’ PreAuthentication trigger\râ”œâ”€ Kiá»ƒm tra account_status\râ”œâ”€ Náº¿u banned/suspended: Tá»« chá»‘i Ä‘Äƒng nháº­p\râ””â”€ Cho phÃ©p Ä‘Äƒng nháº­p\r5. ÄÄƒng nháº­p thÃ nh cÃ´ng â†’ PostAuthentication trigger\râ””â”€ Cáº­p nháº­t timestamp lastLoginAt 2. ChÃ­nh SÃ¡ch Máº­t Kháº©u Environments:\nEnvironment Äá»™ dÃ i tá»‘i thiá»ƒu YÃªu cáº§u Dev 8 kÃ½ tá»± Chá»¯ hoa, chá»¯ thÆ°á»ng, chá»¯ sá»‘, kÃ½ hiá»‡u Staging 12 kÃ½ tá»± Chá»¯ hoa, chá»¯ thÆ°á»ng, chá»¯ sá»‘, kÃ½ hiá»‡u Prod 12 kÃ½ tá»± Chá»¯ hoa, chá»¯ thÆ°á»ng, chá»¯ sá»‘, kÃ½ hiá»‡u VÃ­ dá»¥ Máº­t Kháº©u Há»£p Lá»‡:\nMyP@ssw0rd123 (12 kÃ½ tá»±) Str0ng!Pass (11 kÃ½ tá»±, khÃ´ng há»£p lá»‡ cho prod/staging) 3. Token Validity Loáº¡i Token Validity Má»¥c Ä‘Ã­ch Access Token 1 giá» API authorization ID Token 1 giá» User identity claims Refresh Token 30 ngÃ y Gia háº¡n access/ID tokens Quy TrÃ¬nh Refresh Token:\nAccess token háº¿t háº¡n (1h) â†’ DÃ¹ng refresh token â†’ Nháº­n access/ID tokens má»›i\rRefresh token háº¿t háº¡n (30d) â†’ NgÆ°á»i dÃ¹ng pháº£i Ä‘Äƒng nháº­p láº¡i 4. Chi Tiáº¿t Lambda Trigger PreSignUp Trigger Má»¥c Ä‘Ã­ch: NgÄƒn lá»—i \u0026ldquo;username Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng\u0026rdquo; cho ngÆ°á»i dÃ¹ng chÆ°a xÃ¡c minh\nLogic:\nif (userExists \u0026amp;\u0026amp; userStatus === \u0026#39;UNCONFIRMED\u0026#39;) { const hoursSinceCreation = (now - userCreationDate) / (1000 * 60 * 60); if (hoursSinceCreation \u0026gt; 24) { // XÃ³a user chÆ°a xÃ¡c minh Ä‘Ã£ háº¿t háº¡n await deleteUser(username); return allowSignUp(); } else { // User váº«n cÃ²n thá»i gian Ä‘á»ƒ xÃ¡c minh return rejectSignUp(`Vui lÃ²ng chá» ${24 - hoursSinceCreation}h Ä‘á»ƒ Ä‘Äƒng kÃ½ láº¡i`); } } else { return allowSignUp(); } PostConfirmation Trigger DynamoDB Entities ÄÆ°á»£c Táº¡o:\n// 1. Core Profile { PK: \u0026#34;USER#{userId}\u0026#34;, SK: \u0026#34;PROFILE\u0026#34;, username: \u0026#34;john_doe\u0026#34;, email: \u0026#34;john@example.com\u0026#34;, fullName: \u0026#34;John Doe\u0026#34;, account_status: \u0026#34;active\u0026#34;, createdAt: \u0026#34;2025-01-01T00:00:00Z\u0026#34;, // ... cÃ¡c field khÃ¡c } // 2. Privacy Settings { PK: \u0026#34;USER#{userId}\u0026#34;, SK: \u0026#34;PRIVACY_SETTINGS\u0026#34;, profileVisibility: \u0026#34;private\u0026#34;, showEmail: false, allowMessages: \u0026#34;friends\u0026#34;, // ... cÃ¡c settings khÃ¡c } // 3. AI Preferences { PK: \u0026#34;USER#{userId}\u0026#34;, SK: \u0026#34;AI_PREFERENCES\u0026#34;, aiEnabled: true, preferredLanguage: \u0026#34;en\u0026#34;, dietaryRestrictions: [], // ... cÃ¡c preferences khÃ¡c } Stack Outputs Sau khi triá»ƒn khai, stack export cÃ¡c giÃ¡ trá»‹ sau:\nOutput Name Value ÄÆ°á»£c sá»­ dá»¥ng bá»Ÿi UserPoolId ap-southeast-1_XXXXXXXXX Backend Stack (Authorizer) UserPoolArn arn:aws:cognito-idp:... Lambda IAM policies UserPoolClientId 1234567890abcdef Frontend (Amplify config) CustomMessageFunctionArn arn:aws:lambda:... Monitoring PostConfirmationFunctionArn arn:aws:lambda:... Monitoring PreAuthenticationFunctionArn arn:aws:lambda:... Monitoring PostAuthenticationFunctionArn arn:aws:lambda:... Monitoring CÃ¡c BÆ°á»›c Triá»ƒn Khai BÆ°á»›c 1: Build Lambda Triggers TrÆ°á»›c khi triá»ƒn khai, biÃªn dá»‹ch Lambda triggers sang JavaScript:\ncd D:\\Project_AWS\\everyonecook\\services\\auth-module\\triggers # CÃ i Ä‘áº·t dependencies npm install # Build TypeScript sang JavaScript npm run build Káº¿t quáº£ mong Ä‘á»£i:\n\u0026gt; auth-module-triggers@1.0.0 build\r\u0026gt; tsc\rCompiled successfully to dist/ BÆ°á»›c 2: XÃ¡c Minh Äiá»u Kiá»‡n TiÃªn Quyáº¿t Core Stack Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng DynamoDB table tá»“n táº¡i Lambda triggers Ä‘Ã£ build vÃ o thÆ° má»¥c dist/ BÆ°á»›c 3: Triá»ƒn Khai Auth Stack Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure:\ncd D:\\Project_AWS\\everyonecook\\infrastructure Triá»ƒn khai Auth Stack Ä‘áº¿n ap-southeast-1:\n# Triá»ƒn khai Auth Stack npx cdk deploy EveryoneCook-dev-Auth --context environment=dev Káº¿t quáº£ mong Ä‘á»£i:\nâœ¨ Synthesis time: 7.23s\rEveryoneCook-dev-Auth: deploying...\r[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] (9/9)\rEveryoneCook-dev-Auth: creating CloudFormation changeset...\rEveryoneCook-dev-Auth\râœ¨ Deployment time: 180.45s\rOutputs:\rEveryoneCook-dev-Auth.UserPoolId = ap-southeast-1_a1B2c3D4e\rEveryoneCook-dev-Auth.UserPoolClientId = 1a2b3c4d5e6f7g8h9i0j\rEveryoneCook-dev-Auth.UserPoolArn = arn:aws:cognito-idp:ap-southeast-1:616580903213:userpool/...\rEveryoneCook-dev-Auth.PostConfirmationFunctionArn = arn:aws:lambda:ap-southeast-1:...\rEveryoneCook-dev-Auth.PreAuthenticationFunctionArn = arn:aws:lambda:ap-southeast-1:...\rStack ARN:\rarn:aws:cloudformation:ap-southeast-1:616580903213:stack/EveryoneCook-dev-Auth/... BÆ°á»›c 4: XÃ¡c Minh trong AWS Console Äiá»u hÆ°á»›ng Ä‘áº¿n Cognito User Pool Má»Ÿ AWS Console â†’ region ap-southeast-1 Äi Ä‘áº¿n Amazon Cognito \u0026gt; User pools TÃ¬m EveryoneCook-dev Cognito User Pool hiá»ƒn thá»‹ tÃ¹y chá»n Ä‘Äƒng nháº­p (username/email), MFA disabled, password policy, vÃ  deletion protection\nXÃ¡c minh:\nÄÄƒng nháº­p: Username hoáº·c Email MFA: Disabled Password policy: ÄÃ£ cáº¥u hÃ¬nh Email verification: Required XÃ¡c Minh Cáº¥u HÃ¬nh User Pool Click vÃ o User Pool Ä‘á»ƒ xem chi tiáº¿t:\nCáº¥u hÃ¬nh User Pool hiá»ƒn thá»‹ authentication settings, attributes, password policy, vÃ  security features\nKiá»ƒm tra:\nSign-in experience: Username vÃ  Email enabled User attributes: email, given_name (báº¯t buá»™c), birthdate, gender (tÃ¹y chá»n) Custom attributes: account_status, country Password policy: Tá»‘i thiá»ƒu 12 kÃ½ tá»±, yÃªu cáº§u chá»¯ hoa, chá»¯ thÆ°á»ng, chá»¯ sá»‘, kÃ½ hiá»‡u MFA: Off Device tracking: Enabled XÃ¡c Minh Lambda Triggers Äi Ä‘áº¿n User pool properties \u0026gt; Lambda triggers:\nLambda triggers Ä‘Æ°á»£c cáº¥u hÃ¬nh cho Pre sign-up, Custom message, Post confirmation, Pre authentication, vÃ  Post authentication\nXÃ¡c minh 5 triggers:\nPre sign-up: EveryoneCook-dev-PreSignUp Custom message: EveryoneCook-dev-CustomMessage Post confirmation: EveryoneCook-dev-PostConfirmation Pre authentication: EveryoneCook-dev-PreAuthentication Post authentication: EveryoneCook-dev-PostAuthentication XÃ¡c Minh User Pool Client Äi Ä‘áº¿n App integration \u0026gt; App clients:\nUser Pool Client hiá»ƒn thá»‹ auth flows, OAuth settings, token validity, callback URLs, vÃ  security settings\nXÃ¡c minh:\nClient type: Public (khÃ´ng cÃ³ secret) Auth flows: USER_PASSWORD_AUTH, USER_SRP_AUTH OAuth flows: Authorization code grant Callback URLs: Theo environment Token validity: 1h access, 1h ID, 30d refresh Äiá»u hÆ°á»›ng Ä‘áº¿n Lambda Functions Äi Ä‘áº¿n Lambda \u0026gt; Functions, tÃ¬m Auth triggers:\nLambda functions hiá»ƒn thá»‹ táº¥t cáº£ 5 Cognito triggers vá»›i runtime Node.js 20.x, memory 256-512 MB, vÃ  timeout 10-30s\nXÃ¡c minh:\nTáº¥t cáº£ 5 Lambda functions Ä‘Ã£ táº¡o Runtime: Node.js 20.x Environment variables Ä‘Ã£ cáº¥u hÃ¬nh CloudWatch log groups Ä‘Ã£ táº¡o Kiá»ƒm Tra Lambda Permissions Click vÃ o Lambda function â†’ Configuration \u0026gt; Permissions:\nLambda execution role hiá»ƒn thá»‹ permissions cho DynamoDB (PostConfirmation), Cognito (PreSignUp), vÃ  CloudWatch Logs\nQuyá»n mong Ä‘á»£i:\nPostConfirmation: DynamoDB read/write PreAuthentication: DynamoDB read PostAuthentication: DynamoDB read/write PreSignUp: Cognito ListUsers, AdminDeleteUser Táº¥t cáº£ triggers: CloudWatch Logs write Chi Tiáº¿t Chi PhÃ­ Chi PhÃ­ HÃ ng ThÃ¡ng (Dev Environment) TÃ i nguyÃªn Cáº¥u hÃ¬nh Chi phÃ­ hÃ ng thÃ¡ng Ghi chÃº Cognito User Pool \u0026lt;50 MAU $0 50K MAU Ä‘áº§u miá»…n phÃ­ Lambda Triggers 5 functions, low invocations $0-1 Free tier bao phá»§ háº§u háº¿t CloudWatch Logs 7-day retention, 5 log groups $0.50 ~1GB logs Tá»•ng (Æ¯á»›c tÃ­nh) ~$0.50-1.50/thÃ¡ng Ráº¥t tháº¥p cho dev Ghi ChÃº Chi PhÃ­ Cognito: 50,000 MAU Ä‘áº§u miá»…n phÃ­, sau Ä‘Ã³ $0.0055/MAU Lambda: 1M requests/thÃ¡ng miá»…n phÃ­, sau Ä‘Ã³ $0.20 per 1M CloudWatch Logs: $0.50/GB ingested, $0.03/GB stored KhÃ´ng cÃ³ phÃ­ MFA: MFA táº¯t tiáº¿t kiá»‡m $0.05/MAU Æ¯á»›c TÃ­nh Production (1000 MAU):\nCognito: 1000 MAU Ã— $0.0055 = $5.50/thÃ¡ng Lambda triggers: ~5000 invocations/thÃ¡ng = $0 (free tier) CloudWatch Logs: $1-2/thÃ¡ng Tá»•ng: ~$7-8/thÃ¡ng Cross-Stack Dependencies Import tá»« CÃ¡c Stack TrÆ°á»›c Tá»« Core Stack:\ndynamoTable: cdk.Fn.importValue(\u0026#39;EveryoneCook-dev-DynamoDBTableName\u0026#39;) Export ÄÆ°á»£c Sá»­ Dá»¥ng Bá»Ÿi CÃ¡c Stack KhÃ¡c Backend Stack import:\nUser Pool ID (cho Cognito Authorizer) User Pool ARN (cho API Gateway) User Pool Client ID (cho frontend config) Luá»“ng Dependency Core Stack â†’ DynamoDB Table\râ”‚\râ–¼\rAuth Stack (táº¡o Cognito + Lambda triggers)\râ”‚\râ”œâ”€â–º User Pool ID â†’ Backend Stack (API Gateway Authorizer)\râ”œâ”€â–º User Pool Client ID â†’ Frontend (Amplify config)\râ””â”€â–º Lambda triggers â†’ Quy trÃ¬nh quáº£n lÃ½ ngÆ°á»i dÃ¹ng Danh SÃ¡ch Kiá»ƒm Tra XÃ¡c Thá»±c TrÆ°á»›c khi tiáº¿n hÃ nh triá»ƒn khai Backend Stack:\nAuth Stack Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng Ä‘áº¿n ap-southeast-1 Cognito User Pool tá»“n táº¡i vá»›i cÃ¡c thiáº¿t láº­p chÃ­nh xÃ¡c 5 Lambda triggers Ä‘Ã£ cáº¥u hÃ¬nh vÃ  gáº¯n káº¿t User Pool Client Ä‘Ã£ táº¡o vá»›i OAuth settings Lambda functions cÃ³ Ä‘Ãºng IAM permissions CloudWatch log groups Ä‘Ã£ táº¡o (7-day retention) Stack outputs Ä‘Ã£ export thÃ nh cÃ´ng Lambda trigger code Ä‘Ã£ build vÃ o thÆ° má»¥c dist/ Kiá»ƒm Tra Kiá»ƒm Tra Quy TrÃ¬nh ÄÄƒng KÃ½ NgÆ°á»i DÃ¹ng Kiá»ƒm tra sign-up vá»›i Cognito console:\nÄi Ä‘áº¿n Cognito \u0026gt; User pools \u0026gt; EveryoneCook-dev \u0026gt; Users \u0026gt; Create user\nTáº¡o test user:\nUsername: testuser01\rEmail: your-email@example.com\rFull Name: Test User\rTemporary Password: TempP@ss123 XÃ¡c minh email Ä‘Ã£ gá»­i:\nKiá»ƒm tra email cá»§a báº¡n Ä‘á»ƒ nháº­n mÃ£ xÃ¡c minh.\nKiá»ƒm tra Lambda logs:\n# Xem PostConfirmation logs aws logs tail /aws/lambda/EveryoneCook-dev-PostConfirmation --follow --region ap-southeast-1 XÃ¡c minh DynamoDB entries:\n# Truy váº¥n user profile aws dynamodb query ` --table-name EveryoneCook-dev-v2 ` --key-condition-expression \u0026#34;PK = :pk\u0026#34; ` --expression-attribute-values \u0026#39;{\u0026#34;:pk\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;USER#testuser01\u0026#34;}}\u0026#39; ` --region ap-southeast-1 Mong Ä‘á»£i: 3 items (PROFILE, PRIVACY_SETTINGS, AI_PREFERENCES)\nKiá»ƒm Tra Quy TrÃ¬nh XÃ¡c Thá»±c ÄÄƒng nháº­p vá»›i test user:\nSá»­ dá»¥ng AWS CLI Ä‘á»ƒ xÃ¡c thá»±c:\naws cognito-idp initiate-auth ` --auth-flow USER_PASSWORD_AUTH ` --client-id \u0026lt;USER_POOL_CLIENT_ID\u0026gt; ` --auth-parameters USERNAME=testuser01,PASSWORD=\u0026lt;password\u0026gt; ` --region ap-southeast-1 Kiá»ƒm tra PreAuthentication logs:\naws logs tail /aws/lambda/EveryoneCook-dev-PreAuthentication --follow --region ap-southeast-1 Kiá»ƒm tra PostAuthentication logs:\naws logs tail /aws/lambda/EveryoneCook-dev-PostAuthentication --follow --region ap-southeast-1 Kiá»ƒm Tra PreSignUp Cleanup Táº¡o unverified user:\nÄÄƒng kÃ½ user nhÆ°ng khÃ´ng xÃ¡c minh email.\nChá» 24 giá» (hoáº·c sá»­a trigger code thÃ nh 1 phÃºt Ä‘á»ƒ kiá»ƒm tra)\nThá»­ Ä‘Äƒng kÃ½ láº¡i vá»›i cÃ¹ng username:\nPreSignUp trigger nÃªn xÃ³a user cÅ© vÃ  cho phÃ©p Ä‘Äƒng kÃ½ má»›i.\nCÃ¡c BÆ°á»›c Tiáº¿p Theo Sau khi triá»ƒn khai thÃ nh cÃ´ng Auth Stack:\nâ¡ï¸ 5.4.5 Backend Stack - Táº¡o API Gateway, Lambda functions, vÃ  SQS queues\nBackend Stack sáº½:\nTáº¡o API Gateway REST API vá»›i Cognito Authorizer Táº¡o 5 Lambda functions (auth, social, recipe, AI, admin) Táº¡o 6 SQS queues cho async processing Táº¡o 6 worker Lambda functions Import User Pool ID tá»« Auth Stack Cáº¥u hÃ¬nh API Gateway custom domain TÃ i Liá»‡u Tham Kháº£o MÃ£ nguá»“n: infrastructure/lib/stacks/auth-stack.ts Lambda Triggers: services/auth-module/triggers/ Base Stack: infrastructure/lib/base-stack.ts Environment Config: infrastructure/config/environment.ts TÃ i liá»‡u AWS: Cognito User Pools Cognito Lambda Triggers Cognito User Pool Client Password Policies "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.05-deploy-infrastructure/",
	"title": "Triá»ƒn khai Háº¡ táº§ng",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Trong bÆ°á»›c nÃ y, báº¡n sáº½ deploy táº¥t cáº£ infrastructure stacks lÃªn AWS theo Ä‘Ãºng thá»© tá»± dependencies. Dá»± Ã¡n EveryoneCook sá»­ dá»¥ng 5-Stack Architecture vá»›i AWS CDK.\n5-Stack Architecture Phase 1: DNS Stack â†’ Route 53 Hosted Zone\rPhase 1.5: Certificate Stack â†’ ACM Certificates (us-east-1)\rPhase 2: Core Stack â†’ DynamoDB, S3, CloudFront, KMS\rPhase 3: Auth Stack â†’ Cognito, SES, Lambda Triggers\rPhase 4: Backend Stack â†’ API Gateway, Lambda, SQS, WAF\rPhase 5: Observability Stack â†’ CloudWatch Dashboards \u0026amp; Alarms Stack Dependencies DNS Stack (khÃ´ng cÃ³ dependencies)\râ†“\rCertificate Stack (phá»¥ thuá»™c vÃ o DNS)\râ†“\rCore Stack (phá»¥ thuá»™c vÃ o Certificate)\râ†“\rAuth Stack (phá»¥ thuá»™c vÃ o Core)\râ†“\rBackend Stack (phá»¥ thuá»™c vÃ o Auth, Core)\râ†“\rObservability Stack (phá»¥ thuá»™c vÃ o Backend) Thá»i gian Triá»ƒn khai Stack Thá»i gian TÃ i nguyÃªn Quan trá»ng DNS Stack 2-3 phÃºt Route 53 Hosted Zone Certificate Stack 5-10 phÃºt ACM Certificate (DNS validation) Core Stack 10-15 phÃºt CloudFront Distribution, DynamoDB Auth Stack 5-7 phÃºt Cognito User Pool, SES Backend Stack 8-12 phÃºt API Gateway, 7 Lambda Functions Observability Stack 3-5 phÃºt CloudWatch Dashboards Tá»•ng thá»i gian triá»ƒn khai: 35-50 phÃºt\nYÃªu cáº§u TiÃªn quyáº¿t 1. XÃ¡c minh AWS Credentials # Kiá»ƒm tra AWS credentials aws sts get-caller-identity # Káº¿t quáº£ mong Ä‘á»£i: # { # \u0026#34;UserId\u0026#34;: \u0026#34;...\u0026#34;, # \u0026#34;Account\u0026#34;: \u0026#34;616580903213\u0026#34;, # \u0026#34;Arn\u0026#34;: \u0026#34;arn:aws:iam::616580903213:user/your-username\u0026#34; # } 2. XÃ¡c minh Node.js \u0026amp; CDK # Kiá»ƒm tra phiÃªn báº£n Node.js (pháº£i lÃ  20.x+) node -v # v20.11.0 hoáº·c cao hÆ¡n # Kiá»ƒm tra phiÃªn báº£n CDK cdk --version # 2.114.0 hoáº·c cao hÆ¡n 3. Di chuyá»ƒn Ä‘áº¿n Infrastructure # Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure cd D:\\Project_AWS\\everyonecook\\infrastructure # XÃ¡c minh cdk.json tá»“n táº¡i Get-Item cdk.json Phase 1: Deploy DNS Stack (Route 53) DNS Stack táº¡o Route 53 Hosted Zone cho domain everyonecook.cloud. ÄÃ¢y lÃ  stack Ä‘áº§u tiÃªn vÃ  quan trá»ng nháº¥t.\nBÆ°á»›c 1.1: Deploy DNS Stack # Deploy DNS Stack npx cdk deploy EveryoneCook-dev-DNS --context environment=dev # Xem láº¡i cÃ¡c thay Ä‘á»•i # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n Káº¿t quáº£ mong Ä‘á»£i:\nâœ… EveryoneCook-dev-DNS\rOutputs:\rEveryoneCook-dev-DNS.HostedZoneId = Z018823421GWCSYG5UMHV\rEveryoneCook-dev-DNS.HostedZoneName = everyonecook.cloud\rEveryoneCook-dev-DNS.NameServers = ns-1164.awsdns-17.org, ns-825.awsdns-39.net, ns-1889.awsdns-44.co.uk, ns-453.awsdns-56.com\rStack ARN:\rarn:aws:cloudformation:ap-southeast-1:616580903213:stack/EveryoneCook-dev-DNS/... BÆ°á»›c 1.2: LÆ°u Nameservers LÆ¯U Ã QUAN TRá»ŒNG: LÆ°u láº¡i 4 nameservers tá»« output!\n# Láº¥y nameservers $nameservers = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-DNS ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`NameServers`].OutputValue\u0026#39; ` --output text Write-Host \u0026#34;Nameservers: $nameservers\u0026#34; # ns-1164.awsdns-17.org, ns-825.awsdns-39.net, ns-1889.awsdns-44.co.uk, ns-453.awsdns-56.com BÆ°á»›c 1.3: Cáº­p nháº­t Domain Registrar Cáº­p nháº­t nameservers táº¡i domain registrar (Hostinger, GoDaddy, Namecheap, v.v.):\nÄÄƒng nháº­p vÃ o domain registrar TÃ¬m domain everyonecook.cloud Chá»n \u0026ldquo;Custom Nameservers\u0026rdquo; hoáº·c \u0026ldquo;DNS Settings\u0026rdquo; XÃ³a nameservers cÅ© Nháº­p 4 nameservers tá»« AWS: ns-1164.awsdns-17.org\rns-825.awsdns-39.net\rns-1889.awsdns-44.co.uk\rns-453.awsdns-56.com LÆ°u thay Ä‘á»•i BÆ°á»›c 1.4: XÃ¡c minh DNS Propagation # Kiá»ƒm tra DNS propagation (cÃ³ thá»ƒ máº¥t 5-30 phÃºt) nslookup -type=NS everyonecook.cloud # Hoáº·c dÃ¹ng dig (náº¿u cÃ³ WSL/Git Bash) dig NS everyonecook.cloud # Mong Ä‘á»£i: Tháº¥y 4 nameservers tá»« AWS CÃ´ng cá»¥ online Ä‘á»ƒ kiá»ƒm tra:\nhttps://www.whatsmydns.net/ https://dnschecker.org/ â³ Äá»£i DNS propagate trÆ°á»›c khi tiáº¿p tá»¥c (thÆ°á»ng 5-15 phÃºt)\nPhase 1.5: Deploy Certificate Stack (ACM) QUAN TRá»ŒNG: Stack nÃ y pháº£i deploy á»Ÿ us-east-1 region vÃ¬ yÃªu cáº§u cá»§a CloudFront.\nBÆ°á»›c 1.5.1: Deploy Certificate Stack # Deploy Certificate Stack (us-east-1) npx cdk deploy EveryoneCook-dev-Certificate --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n Stack táº¡o 2 certificates:\nCloudFront Certificate (us-east-1): cdn-dev.everyonecook.cloud API Gateway Certificate (us-east-1): *.everyonecook.cloud (wildcard) BÆ°á»›c 1.5.2: Äá»£i DNS Validation ACM sáº½ tá»± Ä‘á»™ng:\nTáº¡o CNAME records trong Route 53 Ä‘á»ƒ validate domain XÃ¡c thá»±c quyá»n sá»Ÿ há»¯u PhÃ¡t hÃ nh certificates QuÃ¡ trÃ¬nh nÃ y máº¥t 5-10 phÃºt.\n# Kiá»ƒm tra tráº¡ng thÃ¡i certificate aws acm list-certificates --region us-east-1 # Láº¥y certificate ARN $certArn = aws acm list-certificates --region us-east-1 ` --query \u0026#39;CertificateSummaryList[?DomainName==`cdn-dev.everyonecook.cloud`].CertificateArn\u0026#39; ` --output text # Kiá»ƒm tra tráº¡ng thÃ¡i validation aws acm describe-certificate --certificate-arn $certArn --region us-east-1 ` --query \u0026#39;Certificate.{Status:Status,ValidationMethod:DomainValidationOptions[0].ValidationMethod}\u0026#39; Káº¿t quáº£ mong Ä‘á»£i:\n{ \u0026#34;Status\u0026#34;: \u0026#34;ISSUED\u0026#34;, \u0026#34;ValidationMethod\u0026#34;: \u0026#34;DNS\u0026#34; } BÆ°á»›c 1.5.3: XÃ¡c minh Certificates # Liá»‡t kÃª táº¥t cáº£ certificates aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Certificate ` --region us-east-1 ` --query \u0026#39;Stacks[0].Outputs\u0026#39; # Mong Ä‘á»£i: # CloudFrontCertificateArn = arn:aws:acm:us-east-1:...:certificate/... # ApiGatewayCertificateArn = arn:aws:acm:us-east-1:...:certificate/... âœ… Chá» Ä‘áº¿n khi cáº£ 2 certificates cÃ³ Status = ISSUED\nPhase 2: Deploy Core Stack (Foundation) Core Stack táº¡o foundation resources: DynamoDB, S3, CloudFront, KMS.\nBÆ°á»›c 2.1: Deploy Core Stack # Deploy Core Stack (máº¥t 10-15 phÃºt) npx cdk deploy EveryoneCook-dev-Core --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n Stack táº¡o:\nDynamoDB:\nTable: EveryoneCook-dev Billing: Pay-per-request 5 GSI indexes (GSI1-GSI5) Stream enabled (cho DynamoDB Streams) MÃ£ hÃ³a KMS S3 Buckets (4 buckets):\neveryonecook-content-dev - Táº£i lÃªn cá»§a ngÆ°á»i dÃ¹ng (avatars, hÃ¬nh áº£nh) everyonecook-logs-dev - S3 access logs everyonecook-cdn-logs-dev - CloudFront logs everyonecook-incoming-emails-dev - SES email receiving CloudFront Distribution:\nCustom domain: cdn-dev.everyonecook.cloud Origin: S3 content bucket Chá»‰ HTTPS (certificate tá»« Certificate Stack) Báº­t nÃ©n Price Class 200 (Má»¹, ChÃ¢u Ã‚u, ChÃ¢u Ã) KMS Keys (2 keys):\nDynamoDB encryption key S3 encryption key BÆ°á»›c 2.2: Theo dÃµi Deployment Deployment nÃ y máº¥t lÃ¢u nháº¥t (10-15 phÃºt) do CloudFront Distribution.\n# Trong terminal khÃ¡c, theo dÃµi CloudFormation events aws cloudformation describe-stack-events ` --stack-name EveryoneCook-dev-Core ` --max-items 10 ` --query \u0026#39;StackEvents[*].{Time:Timestamp,Status:ResourceStatus,Type:ResourceType,Resource:LogicalResourceId}\u0026#39; ` --output table BÆ°á»›c 2.3: XÃ¡c minh Core Resources # Kiá»ƒm tra DynamoDB table aws dynamodb describe-table --table-name EveryoneCook-dev ` --query \u0026#39;Table.{Name:TableName,Status:TableStatus,Billing:BillingModeSummary.BillingMode,Stream:StreamSpecification.StreamEnabled}\u0026#39; # Mong Ä‘á»£i: # { # \u0026#34;Name\u0026#34;: \u0026#34;EveryoneCook-dev\u0026#34;, # \u0026#34;Status\u0026#34;: \u0026#34;ACTIVE\u0026#34;, # \u0026#34;Billing\u0026#34;: \u0026#34;PAY_PER_REQUEST\u0026#34;, # \u0026#34;Stream\u0026#34;: true # } # Kiá»ƒm tra S3 buckets aws s3 ls | Select-String \u0026#34;everyonecook\u0026#34; # Mong Ä‘á»£i: # everyonecook-cdn-logs-dev # everyonecook-content-dev # everyonecook-incoming-emails-dev # everyonecook-logs-dev # Kiá»ƒm tra CloudFront distribution aws cloudfront list-distributions ` --query \u0026#39;DistributionList.Items[?Comment==`EveryoneCook CDN (dev)`].{Id:Id,Domain:DomainName,Status:Status}\u0026#39; # Mong Ä‘á»£i: # { # \u0026#34;Id\u0026#34;: \u0026#34;E2INNJ4XX421Q3\u0026#34;, # \u0026#34;Domain\u0026#34;: \u0026#34;d2shrpzup69rju.cloudfront.net\u0026#34;, # \u0026#34;Status\u0026#34;: \u0026#34;Deployed\u0026#34; # } BÆ°á»›c 2.4: Láº¥y Stack Outputs # Láº¥y táº¥t cáº£ Core Stack outputs aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Core ` --query \u0026#39;Stacks[0].Outputs[*].{Key:OutputKey,Value:OutputValue}\u0026#39; ` --output table Outputs chÃ­nh:\nDynamoDBTableName: EveryoneCook-dev ContentBucketName: everyonecook-content-dev CloudFrontDistributionId: E2INNJ4XX421Q3 CloudFrontDomainName: d2shrpzup69rju.cloudfront.net Phase 3: Deploy Auth Stack (Cognito \u0026amp; SES) Auth Stack táº¡o authentication infrastructure vá»›i Cognito vÃ  SES.\nBÆ°á»›c 3.1: Deploy Auth Stack # Deploy Auth Stack npx cdk deploy EveryoneCook-dev-Auth --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n Stack táº¡o:\nCognito User Pool:\nUser Pool: EveryoneCook-UserPool-dev Password policy: tá»‘i thiá»ƒu 12 kÃ½ tá»±, yÃªu cáº§u kÃ½ tá»± Ä‘áº·c biá»‡t MFA: TÃ¹y chá»n XÃ¡c minh email 5 Lambda Triggers:\nPre-Signup - XÃ¡c thá»±c username/email Post-Confirmation - Táº¡o user profile trong DynamoDB Post-Authentication - Cáº­p nháº­t lastLoginAt Pre-Authentication - Kiá»ƒm tra tráº¡ng thÃ¡i cáº¥m Custom Message - Templates email tÃ¹y chá»‰nh SES Email Identity:\nDomain: everyonecook.cloud XÃ¡c thá»±c DKIM Mail FROM domain: mail.everyonecook.cloud Cháº¿ Ä‘á»™ Production (cÃ³ thá»ƒ gá»­i Ä‘áº¿n báº¥t ká»³ email nÃ o) IAM Roles:\nLambda execution roles Cognito SMS role (cho MFA) BÆ°á»›c 3.2: XÃ¡c minh Cognito User Pool # Láº¥y User Pool ID $userPoolId = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Auth ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`UserPoolId`].OutputValue\u0026#39; ` --output text Write-Host \u0026#34;User Pool ID: $userPoolId\u0026#34; # ap-southeast-1_PKoL34PF0 # MÃ´ táº£ User Pool aws cognito-idp describe-user-pool --user-pool-id $userPoolId ` --query \u0026#39;UserPool.{Name:Name,Status:Status,MFA:MfaConfiguration}\u0026#39; BÆ°á»›c 3.3: XÃ¡c minh Lambda Triggers # Kiá»ƒm tra Lambda triggers Ä‘Æ°á»£c gáº¯n vÃ o User Pool aws cognito-idp describe-user-pool --user-pool-id $userPoolId ` --query \u0026#39;UserPool.LambdaConfig\u0026#39; # Mong Ä‘á»£i: 5 triggers Ä‘Æ°á»£c cáº¥u hÃ¬nh # { # \u0026#34;PreSignUp\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PreSignup\u0026#34;, # \u0026#34;PostConfirmation\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PostConfirmation\u0026#34;, # \u0026#34;PostAuthentication\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PostAuthentication\u0026#34;, # \u0026#34;PreAuthentication\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PreAuthentication\u0026#34;, # \u0026#34;CustomMessage\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-CustomMessage\u0026#34; # } BÆ°á»›c 3.4: XÃ¡c minh SES Email Identity # Kiá»ƒm tra tráº¡ng thÃ¡i SES identity aws sesv2 get-email-identity --email-identity everyonecook.cloud ` --query \u0026#39;{Status:VerifiedForSendingStatus,DKIM:DkimAttributes.Status}\u0026#39; # Mong Ä‘á»£i: # { # \u0026#34;Status\u0026#34;: true, # \u0026#34;DKIM\u0026#34;: \u0026#34;SUCCESS\u0026#34; # } # Kiá»ƒm tra DKIM records trong Route 53 aws route53 list-resource-record-sets ` --hosted-zone-id Z018823421GWCSYG5UMHV ` --query \u0026#39;ResourceRecordSets[?Type==`CNAME` \u0026amp;\u0026amp; contains(Name, `_domainkey`)]\u0026#39; âœ… SES pháº£i á»Ÿ Production mode Ä‘á»ƒ gá»­i email Ä‘áº¿n báº¥t ká»³ Ä‘á»‹a chá»‰ nÃ o\nPhase 4: Deploy Backend Stack (API \u0026amp; Lambda) Backend Stack táº¡o API Gateway vÃ  Lambda functions. TrÆ°á»›c khi deploy, cáº§n build Lambda code.\nBÆ°á»›c 4.1: Build Lambda Code # Di chuyá»ƒn Ä‘áº¿n project root cd D:\\Project_AWS\\everyonecook # Cháº¡y deployment script Ä‘á»ƒ build táº¥t cáº£ Lambda code .\\deploy\\deploy-backend.ps1 -Environment dev -SkipBuild:$false # Hoáº·c build thá»§ cÃ´ng: # Build táº¥t cáº£ modules cd services/api-router; npm run build; cd ../.. cd services/auth-module; npm run build; cd ../.. cd services/social-module; npm run build; cd ../.. cd services/ai-module; npm run build; cd ../.. cd services/admin-module; npm run build; cd ../.. cd services/upload-module; npm run build; cd ../.. âš ï¸ QUAN TRá»ŒNG: Lambda code pháº£i Ä‘Æ°á»£c build TRÆ¯á»šC khi deploy Backend Stack!\nBÆ°á»›c 4.2: Deploy Backend Stack # Di chuyá»ƒn vá» infrastructure cd D:\\Project_AWS\\everyonecook\\infrastructure # Deploy Backend Stack npx cdk deploy EveryoneCook-dev-Backend --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n Stack táº¡o:\nAPI Gateway:\nREST API: EveryoneCook-API-dev Custom domain: api-dev.everyonecook.cloud Cognito Authorizer Báº£o vá»‡ WAF Web ACL 7 Lambda Functions:\neveryonecook-dev-api-router - API routing (512 MB, 30s)\neveryonecook-dev-auth-user - Auth \u0026amp; User Management (512 MB, 30s)\neveryonecook-dev-social - TÃ­nh nÄƒng máº¡ng xÃ£ há»™i (512 MB, 30s)\neveryonecook-dev-recipe-ai - CÃ´ng thá»©c \u0026amp; AI (1024 MB, 60s)\neveryonecook-dev-ai-worker - AI processing worker (1024 MB, 300s)\neveryonecook-dev-admin - Admin dashboard (512 MB, 30s)\neveryonecook-dev-upload - Táº£i lÃªn file (256 MB, 15s)\nLambda Layer:\neveryonecook-shared-deps-dev - Shared dependencies (~15-20 MB) SQS Queues (4 queues + 4 DLQs):\nAI Queue + DLQ Image Processing Queue + DLQ Analytics Queue + DLQ Notification Queue + DLQ WAF Web ACL:\nBáº£o vá»‡ API Gateway Giá»›i háº¡n tá»‘c Ä‘á»™ (2000 req/5min má»—i IP) Há»— trá»£ cháº·n theo vá»‹ trÃ­ Ä‘á»‹a lÃ½ BÆ°á»›c 4.3: XÃ¡c minh API Gateway # Láº¥y API endpoint $apiUrl = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Backend ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ApiCustomDomain`].OutputValue\u0026#39; ` --output text Write-Host \u0026#34;API Endpoint: $apiUrl\u0026#34; # https://api-dev.everyonecook.cloud # Kiá»ƒm tra health endpoint $response = Invoke-RestMethod -Uri \u0026#34;$apiUrl/health\u0026#34; -Method Get $response | ConvertTo-Json # Mong Ä‘á»£i: # { # \u0026#34;status\u0026#34;: \u0026#34;healthy\u0026#34;, # \u0026#34;timestamp\u0026#34;: \u0026#34;2025-12-09T...\u0026#34;, # \u0026#34;service\u0026#34;: \u0026#34;EveryoneCook API\u0026#34;, # \u0026#34;environment\u0026#34;: \u0026#34;dev\u0026#34; # } BÆ°á»›c 4.4: XÃ¡c minh Lambda Functions # Liá»‡t kÃª táº¥t cáº£ Lambda functions aws lambda list-functions ` --query \u0026#39;Functions[?contains(FunctionName, `everyonecook-dev`)].{Name:FunctionName,Runtime:Runtime,Memory:MemorySize,Timeout:Timeout}\u0026#39; ` --output table # Mong Ä‘á»£i: 7 functions + 5 Cognito triggers = 12 Lambda functions tá»•ng cá»™ng BÆ°á»›c 4.5: XÃ¡c minh SQS Queues # Liá»‡t kÃª SQS queues aws sqs list-queues --queue-name-prefix everyonecook-dev # Mong Ä‘á»£i: 8 queues (4 main + 4 DLQ) # - everyonecook-dev-ai-queue # - everyonecook-dev-ai-queue-dlq # - everyonecook-dev-image-queue # - everyonecook-dev-image-queue-dlq # - everyonecook-dev-analytics-queue # - everyonecook-dev-analytics-queue-dlq # - everyonecook-dev-notification-queue # - everyonecook-dev-notification-queue-dlq Phase 5: Deploy Observability Stack (CloudWatch) Observability Stack táº¡o monitoring dashboards vÃ  alarms.\nBÆ°á»›c 5.1: Deploy Observability Stack # Deploy Observability Stack npx cdk deploy EveryoneCook-dev-Observability --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n Stack táº¡o:\n4 CloudWatch Dashboards:\nCore Dashboard - Metrics DynamoDB, S3, CloudFront Auth Dashboard - Metrics Cognito, SES Backend Dashboard - Metrics API Gateway, Lambda Overview Dashboard - Sá»©c khá»e há»‡ thá»‘ng tá»•ng quan CloudWatch Alarms:\nDynamoDB throttling Lambda errors API Gateway 5xx errors CloudFront 5xx errors SNS Topic:\nThÃ´ng bÃ¡o alarm Há»— trá»£ Ä‘Äƒng kÃ½ email Composite Alarm:\nAlarm sá»©c khá»e há»‡ thá»‘ng nghiÃªm trá»ng Tá»•ng há»£p nhiá»u alarms BÆ°á»›c 5.2: ÄÄƒng kÃ½ SNS Topic # Láº¥y SNS topic ARN $topicArn = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Observability ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`AlarmTopicArn`].OutputValue\u0026#39; ` --output text # ÄÄƒng kÃ½ email cá»§a báº¡n aws sns subscribe ` --topic-arn $topicArn ` --protocol email ` --notification-endpoint \u0026#34;your-email@example.com\u0026#34; Write-Host \u0026#34;Kiá»ƒm tra email cá»§a báº¡n vÃ  xÃ¡c nháº­n Ä‘Äƒng kÃ½!\u0026#34; BÆ°á»›c 5.3: XÃ¡c minh Dashboards # Liá»‡t kÃª CloudWatch dashboards aws cloudwatch list-dashboards ` --query \u0026#39;DashboardEntries[?contains(DashboardName, `EveryoneCook-dev`)].DashboardName\u0026#39; # Mong Ä‘á»£i: # - EveryoneCook-dev-CoreDashboard # - EveryoneCook-dev-AuthDashboard # - EveryoneCook-dev-BackendDashboard # - EveryoneCook-dev-OverviewDashboard # Láº¥y URL dashboard $region = \u0026#34;ap-southeast-1\u0026#34; $dashboardName = \u0026#34;EveryoneCook-dev-OverviewDashboard\u0026#34; Write-Host \u0026#34;Dashboard URL: https://console.aws.amazon.com/cloudwatch/home?region=$region#dashboards:name=$dashboardName\u0026#34; XÃ¡c minh Triá»ƒn khai HoÃ n chá»‰nh BÆ°á»›c 6.1: Liá»‡t kÃª Táº¥t cáº£ Stacks # Liá»‡t kÃª táº¥t cáº£ deployed stacks aws cloudformation list-stacks ` --stack-status-filter CREATE_COMPLETE UPDATE_COMPLETE ` --query \u0026#39;StackSummaries[?contains(StackName, `EveryoneCook-dev`)].{Name:StackName,Status:StackStatus,Created:CreationTime}\u0026#39; ` --output table Stacks mong Ä‘á»£i:\n------------------------------------------------------------\r| ListStacks |\r+--------------------------------------------------+--------+\r| Name | Status | Created|\r+--------------------------------------------------+--------+\r| EveryoneCook-dev-DNS | CREATE_COMPLETE |\r| EveryoneCook-dev-Certificate | CREATE_COMPLETE |\r| EveryoneCook-dev-Core | CREATE_COMPLETE |\r| EveryoneCook-dev-Auth | CREATE_COMPLETE |\r| EveryoneCook-dev-Backend | CREATE_COMPLETE |\r| EveryoneCook-dev-Observability | CREATE_COMPLETE |\r+--------------------------------------------------+--------+ BÆ°á»›c 6.2: Láº¥y Táº¥t cáº£ Stack Outputs # Táº¡o bÃ¡o cÃ¡o outputs toÃ n diá»‡n $stacks = @(\u0026#34;DNS\u0026#34;, \u0026#34;Certificate\u0026#34;, \u0026#34;Core\u0026#34;, \u0026#34;Auth\u0026#34;, \u0026#34;Backend\u0026#34;, \u0026#34;Observability\u0026#34;) foreach ($stack in $stacks) { Write-Host \u0026#34;`n========================================\u0026#34; -ForegroundColor Cyan Write-Host \u0026#34;EveryoneCook-dev-$stack Outputs\u0026#34; -ForegroundColor Cyan Write-Host \u0026#34;========================================\u0026#34; -ForegroundColor Cyan aws cloudformation describe-stacks ` --stack-name \u0026#34;EveryoneCook-dev-$stack\u0026#34; ` --query \u0026#39;Stacks[0].Outputs[*].{Key:OutputKey,Value:OutputValue}\u0026#39; ` --output table } BÆ°á»›c 6.3: LÆ°u Outputs vÃ o File # LÆ°u outputs vÃ o infrastructure/outputs.json cd D:\\Project_AWS\\everyonecook\\infrastructure # Láº¥y outputs dÆ°á»›i Ä‘á»‹nh dáº¡ng JSON $outputs = @{} foreach ($stack in $stacks) { $stackOutputs = aws cloudformation describe-stacks ` --stack-name \u0026#34;EveryoneCook-dev-$stack\u0026#34; ` --query \u0026#39;Stacks[0].Outputs\u0026#39; | ConvertFrom-Json $stackData = @{} foreach ($output in $stackOutputs) { $stackData[$output.OutputKey] = $output.OutputValue } $outputs[\u0026#34;EveryoneCook-dev-$stack\u0026#34;] = $stackData } # LÆ°u vÃ o file $outputs | ConvertTo-Json -Depth 5 | Out-File -FilePath \u0026#34;outputs.json\u0026#34; -Encoding utf8 Write-Host \u0026#34;Outputs Ä‘Ã£ Ä‘Æ°á»£c lÆ°u vÃ o outputs.json\u0026#34; -ForegroundColor Green BÆ°á»›c 6.4: XÃ¡c minh TÃ i nguyÃªn ChÃ­nh # XÃ¡c minh tÃ i nguyÃªn toÃ n diá»‡n Write-Host \u0026#34;`n===== XÃC MINH TÃ€I NGUYÃŠN =====\u0026#34; -ForegroundColor Yellow # DynamoDB Write-Host \u0026#34;`nDynamoDB Table:\u0026#34; -ForegroundColor Cyan aws dynamodb describe-table --table-name EveryoneCook-dev ` --query \u0026#39;Table.{Name:TableName,Status:TableStatus,ItemCount:ItemCount,Size:TableSizeBytes}\u0026#39; ` --output table # S3 Buckets Write-Host \u0026#34;`nS3 Buckets:\u0026#34; -ForegroundColor Cyan aws s3 ls | Select-String \u0026#34;everyonecook\u0026#34; # CloudFront Write-Host \u0026#34;`nCloudFront Distribution:\u0026#34; -ForegroundColor Cyan aws cloudfront list-distributions ` --query \u0026#39;DistributionList.Items[?Comment==`EveryoneCook CDN (dev)`].{Id:Id,Status:Status,Domain:DomainName}\u0026#39; ` --output table # Lambda Functions Write-Host \u0026#34;`nLambda Functions:\u0026#34; -ForegroundColor Cyan aws lambda list-functions ` --query \u0026#39;Functions[?contains(FunctionName, `everyonecook-dev`)].FunctionName\u0026#39; ` --output table # Cognito User Pool Write-Host \u0026#34;`nCognito User Pool:\u0026#34; -ForegroundColor Cyan aws cognito-idp list-user-pools --max-results 10 ` --query \u0026#39;UserPools[?Name==`EveryoneCook-UserPool-dev`].{Name:Name,Id:Id,Status:Status}\u0026#39; ` --output table # API Gateway Write-Host \u0026#34;`nAPI Gateway:\u0026#34; -ForegroundColor Cyan aws apigateway get-rest-apis ` --query \u0026#39;items[?name==`EveryoneCook-API-dev`].{Name:name,Id:id}\u0026#39; ` --output table # SQS Queues Write-Host \u0026#34;`nSQS Queues:\u0026#34; -ForegroundColor Cyan aws sqs list-queues --queue-name-prefix everyonecook-dev ` --query \u0026#39;QueueUrls\u0026#39; --output table Write-Host \u0026#34;`n===== XÃC MINH HOÃ€N Táº¤T =====\u0026#34; -ForegroundColor Green TÃ³m táº¯t Triá»ƒn khai Sá»‘ lÆ°á»£ng TÃ i nguyÃªn ÄÃ£ triá»ƒn khai Danh má»¥c Sá»‘ lÆ°á»£ng TÃ i nguyÃªn Networking 5 Route 53 Hosted Zone, 2 ACM Certificates, CloudFront Distribution, WAF Web ACL Storage 6 DynamoDB Table (5 GSI), 4 S3 Buckets, 2 KMS Keys Compute 12 7 Lambda Functions, 5 Cognito Triggers Integration 8 API Gateway, 4 SQS Queues, 4 DLQ Security 8 Cognito User Pool, SES Identity, IAM Roles (6) Monitoring 15 4 Dashboards, 10+ Alarms, SNS Topic Tá»•ng sá»‘ TÃ i nguyÃªn: ~100+ tÃ i nguyÃªn AWS\nPhÃ¢n tÃ­ch theo tá»«ng Stack DNS Stack:\nâœ… Route 53 Hosted Zone Certificate Stack:\nâœ… 2 ACM Certificates (us-east-1) Core Stack:\nâœ… DynamoDB Table + 5 GSIs + Stream âœ… 4 S3 Buckets âœ… CloudFront Distribution âœ… 2 KMS Keys Auth Stack:\nâœ… Cognito User Pool + Client âœ… 5 Lambda Triggers âœ… SES Email Identity âœ… IAM Roles Backend Stack:\nâœ… API Gateway REST API âœ… 7 Lambda Functions âœ… Lambda Layer âœ… 4 SQS Queues + 4 DLQs âœ… WAF Web ACL Observability Stack:\nâœ… 4 CloudWatch Dashboards âœ… 10+ CloudWatch Alarms âœ… SNS Topic âœ… Composite Alarm Xá»­ lÃ½ Sá»± cá»‘ Váº¥n Ä‘á» 1: Stack Deployment Tháº¥t báº¡i # Kiá»ƒm tra CloudFormation events Ä‘á»ƒ tÃ¬m lá»—i aws cloudformation describe-stack-events ` --stack-name EveryoneCook-dev-STACKNAME ` --max-items 20 ` --query \u0026#39;StackEvents[?ResourceStatus==`CREATE_FAILED` || ResourceStatus==`ROLLBACK_IN_PROGRESS`].{Time:Timestamp,Status:ResourceStatus,Reason:ResourceStatusReason,Resource:LogicalResourceId}\u0026#39; ` --output table # NguyÃªn nhÃ¢n thÆ°á»ng gáº·p: # - Thiáº¿u dependencies (kiá»ƒm tra thá»© tá»± dependency) # - Quyá»n khÃ´ng Ä‘á»§ # - VÆ°á»£t quÃ¡ giá»›i háº¡n tÃ i nguyÃªn # - Xung Ä‘á»™t tÃªn Váº¥n Ä‘á» 2: Certificate Validation Bá»‹ Treo # Kiá»ƒm tra tráº¡ng thÃ¡i certificate $certArn = \u0026#34;arn:aws:acm:us-east-1:...:certificate/...\u0026#34; aws acm describe-certificate --certificate-arn $certArn --region us-east-1 ` --query \u0026#39;Certificate.DomainValidationOptions[0].{Domain:DomainName,Status:ValidationStatus,Method:ValidationMethod}\u0026#39; # Kiá»ƒm tra DNS records aws route53 list-resource-record-sets ` --hosted-zone-id Z018823421GWCSYG5UMHV ` --query \u0026#39;ResourceRecordSets[?Type==`CNAME`]\u0026#39; # Giáº£i phÃ¡p: # - XÃ¡c minh nameservers Ä‘Ã£ cáº­p nháº­t táº¡i registrar # - Äá»£i DNS propagation (lÃªn Ä‘áº¿n 48 giá», thÆ°á»ng lÃ  15 phÃºt) # - Kiá»ƒm tra validation CNAME records tá»“n táº¡i trong Route 53 Váº¥n Ä‘á» 3: Lambda Deployment Tháº¥t báº¡i # Kiá»ƒm tra náº¿u thÆ° má»¥c dist tá»“n táº¡i Get-ChildItem D:\\Project_AWS\\everyonecook\\services\\*\\dist # Náº¿u thiáº¿u, rebuild cd D:\\Project_AWS\\everyonecook .\\deploy\\deploy-backend.ps1 -Environment dev # Kiá»ƒm tra kÃ­ch thÆ°á»›c Lambda package Get-ChildItem D:\\Project_AWS\\everyonecook\\services\\*\\lambda.zip | Select-Object Name, @{Name=\u0026#34;Size(MB)\u0026#34;;Expression={[math]::Round($_.Length/1MB,2)}} # Giá»›i háº¡n Lambda: # - Deployment package: 50 MB (Ä‘Ã£ nÃ©n) # - Giáº£i nÃ©n: 250 MB Váº¥n Ä‘á» 4: CloudFront Distribution Tháº¥t báº¡i # Kiá»ƒm tra region cá»§a certificate (pháº£i lÃ  us-east-1) aws acm list-certificates --region us-east-1 ` --query \u0026#39;CertificateSummaryList[?DomainName==`cdn-dev.everyonecook.cloud`]\u0026#39; # Kiá»ƒm tra S3 bucket tá»“n táº¡i aws s3 ls everyonecook-content-dev # Giáº£i phÃ¡p: # - Äáº£m báº£o Certificate Stack Ä‘Æ°á»£c deploy trÆ°á»›c # - Certificate pháº£i á»Ÿ us-east-1 # - S3 bucket pháº£i tá»“n táº¡i trÆ°á»›c CloudFront Váº¥n Ä‘á» 5: Quyá»n IAM KhÃ´ng Ä‘á»§ # Kiá»ƒm tra user/role hiá»‡n táº¡i aws sts get-caller-identity # Quyá»n cáº§n thiáº¿t: # - cloudformation:* (táº¥t cáº£ CloudFormation operations) # - iam:* (táº¡o roles, policies) # - lambda:* (táº¡o functions) # - apigateway:* (táº¡o API) # - cognito-idp:* (táº¡o user pools) # - s3:* (táº¡o buckets) # - dynamodb:* (táº¡o tables) # - route53:* (táº¡o hosted zones) # - acm:* (táº¡o certificates) # - cloudfront:* (táº¡o distributions) # - wafv2:* (táº¡o web ACLs) # - logs:* (táº¡o log groups) # - sns:* (táº¡o topics) # - sqs:* (táº¡o queues) # Khuyáº¿n nghá»‹: AdministratorAccess policy (cho láº§n deploy Ä‘áº§u tiÃªn) Váº¥n Ä‘á» 6: Stack Rollback # Náº¿u stack rollback, kiá»ƒm tra lÃ½ do aws cloudformation describe-stack-events ` --stack-name EveryoneCook-dev-STACKNAME ` --query \u0026#39;StackEvents[?ResourceStatus==`CREATE_FAILED`].[Timestamp,ResourceStatusReason]\u0026#39; ` --output table # XÃ³a failed stack trÆ°á»›c khi thá»­ láº¡i aws cloudformation delete-stack --stack-name EveryoneCook-dev-STACKNAME # Äá»£i xÃ³a hoÃ n táº¥t aws cloudformation wait stack-delete-complete --stack-name EveryoneCook-dev-STACKNAME # Redeploy npx cdk deploy EveryoneCook-dev-STACKNAME --context environment=dev Æ¯á»›c tÃ­nh Chi phÃ­ PhÃ¢n tÃ­ch Chi phÃ­ HÃ ng thÃ¡ng (MÃ´i trÆ°á»ng Dev) Dá»‹ch vá»¥ Sá»­ dá»¥ng Chi phÃ­ DynamoDB Pay-per-request, sá»­ dá»¥ng tháº¥p $2-5 S3 10 GB lÆ°u trá»¯ + requests $1-2 CloudFront 10 GB truyá»n táº£i $1-2 Lambda 1M requests, 512 MB $3-5 API Gateway 100K requests $0.35 Cognito 100 MAU $0-5 SES 100 emails $0.01 CloudWatch Logs + metrics $2-3 WAF Quy táº¯c cÆ¡ báº£n $5 Route 53 1 hosted zone $0.50 SQS 100K requests $0.04 KMS 2 keys $2 Tá»•ng Chi phÃ­ Æ¯á»›c tÃ­nh HÃ ng thÃ¡ng: $20-35 (khÃ´ng cÃ³ OpenSearch)\nVá»›i OpenSearch (náº¿u Ä‘Æ°á»£c báº­t): $70-135/thÃ¡ng\nTheo dÃµi Chi phÃ­ # Kiá»ƒm tra chi phÃ­ thÃ¡ng hiá»‡n táº¡i $startDate = (Get-Date -Day 1).ToString(\u0026#34;yyyy-MM-dd\u0026#34;) $endDate = (Get-Date).AddDays(1).ToString(\u0026#34;yyyy-MM-dd\u0026#34;) aws ce get-cost-and-usage ` --time-period Start=$startDate,End=$endDate ` --granularity DAILY ` --metrics BlendedCost ` --group-by Type=SERVICE ` --output table CÃ¡c BÆ°á»›c Tiáº¿p theo Infrastructure deployment hoÃ n thÃ nh! Tiáº¿p theo:\nâœ… XÃ¡c minh Táº¥t cáº£ Stacks: Táº¥t cáº£ 6 stacks Ä‘Ã£ Ä‘Æ°á»£c deploy thÃ nh cÃ´ng ğŸ”§ Cáº¥u hÃ¬nh API: Thiáº¿t láº­p API routes vÃ  Lambda integration â†’ 5.06 - Cáº¥u hÃ¬nh API \u0026amp; Lambda ğŸš€ Deploy Backend Code: Build vÃ  deploy Lambda code â†’ 5.07 - Deploy Backend âœ… Kiá»ƒm tra Endpoints: XÃ¡c minh chá»©c nÄƒng API â†’ 5.08 - Kiá»ƒm tra Endpoints Tráº¡ng thÃ¡i Hiá»‡n táº¡i:\nInfrastructure: âœ… HoÃ n thÃ nh Lambda Code: â³ Cáº§n deploy Testing: â³ Äang chá» Tiáº¿p tá»¥c Ä‘áº¿n: 5.06 - Cáº¥u hÃ¬nh API \u0026amp; Lambda\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/",
	"title": "Workshop",
	"tags": [],
	"description": "",
	"content": "XÃ¢y dá»±ng EveryoneCook: Workshop Háº¡ táº§ng AWS Full-Stack Tá»•ng quan Trong workshop toÃ n diá»‡n nÃ y, báº¡n sáº½ há»c cÃ¡ch xÃ¢y dá»±ng háº¡ táº§ng á»©ng dá»¥ng máº¡ng xÃ£ há»™i náº¥u Äƒn sáºµn sÃ ng cho production trÃªn AWS báº±ng cÃ¡ch sá»­ dá»¥ng Infrastructure as Code (IaC) vá»›i AWS CDK. Ná»n táº£ng EveryoneCook thá»ƒ hiá»‡n cÃ¡c mÃ´ hÃ¬nh kiáº¿n trÃºc cloud hiá»‡n Ä‘áº¡i, bao gá»“m serverless computing, phÃ¢n phá»‘i ná»™i dung, tÃ­nh nÄƒng há»— trá»£ AI, tÃ¬m kiáº¿m nÃ¢ng cao vá»›i OpenSearch, vÃ  kháº£ nÄƒng giÃ¡m sÃ¡t toÃ n diá»‡n.\nBáº¡n sáº½ triá»ƒn khai báº£y CDK stack liÃªn káº¿t vá»›i nhau Ä‘á»ƒ táº¡o ra má»™t á»©ng dá»¥ng cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng, báº£o máº­t vÃ  tá»‘i Æ°u chi phÃ­:\nDNS Stack - Route 53 hosted zone Ä‘á»ƒ quáº£n lÃ½ domain Certificate Stack - ACM certificates cho CloudFront vÃ  API Gateway (us-east-1) CoreStack - DynamoDB Single Table, S3 buckets, CloudFront CDN, KMS encryption, vÃ  OpenSearch AuthStack - Cognito User Pool vá»›i Lambda triggers vÃ  tÃ­ch há»£p SES email BackendStack - API Gateway, Lambda functions (6 modules), SQS queues, vÃ  WAF protection FrontendStack - AWS Amplify hosting cho á»©ng dá»¥ng Next.js 15 (tÃ¹y chá»n) ObservabilityStack - CloudWatch dashboards, alarms, vÃ  X-Ray distributed tracing Ná»™i dung Tá»•ng quan Workshop Thiáº¿t láº­p MÃ´i trÆ°á»ng CDK Bootstrap Cáº¥u hÃ¬nh Infrastructure Stacks Triá»ƒn khai Infrastructure Cáº¥u hÃ¬nh API \u0026amp; Lambda Triá»ƒn khai Backend Services Kiá»ƒm tra Endpoints End-to-End Push lÃªn GitLab Triá»ƒn khai lÃªn Amplify Dá»n dáº¹p tÃ i nguyÃªn "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/3.5-blog5/",
	"title": "Blog 5",
	"tags": [],
	"description": "",
	"content": "AWS for Database: Real-time Iceberg Ingestion with AWS DMS By Caius Brindescu â€“ June 4, 2025\nTags: AWS Database, AWS DMS, Apache Iceberg, Data \u0026amp; Analytics, Industries\nIntroduction CÃ¡c ná»n táº£ng dá»¯ liá»‡u hiá»‡n Ä‘áº¡i ngÃ y cÃ ng yÃªu cáº§u kháº£ nÄƒng truy cáº­p dá»¯ liá»‡u má»›i vá»›i Ä‘á»™ trá»… tháº¥p Ä‘á»ƒ há»— trá»£ phÃ¢n tÃ­ch thá»i gian thá»±c vÃ  ra quyáº¿t Ä‘á»‹nh nhanh chÃ³ng. Tuy nhiÃªn, nhiá»u tá»• chá»©c gáº·p khÃ³ khÄƒn trong viá»‡c liÃªn tá»¥c ingest cÃ¡c thay Ä‘á»•i (insert, update, delete) tá»« cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u giao dá»‹ch vÃ o data lake trong khi váº«n duy trÃ¬ tÃ­nh nháº¥t quÃ¡n máº¡nh máº½.\nApache Iceberg lÃ  má»™t Ä‘á»‹nh dáº¡ng báº£ng má»Ÿ cung cáº¥p ACID transactions, má»Ÿ rá»™ng schema linh hoáº¡t, truy váº¥n time-travel, vÃ  kháº£ nÄƒng tÆ°Æ¡ng thÃ­ch vá»›i nhiá»u engine.\nTrong bÃ i viáº¿t nÃ y (Ä‘Æ°á»£c viáº¿t bá»Ÿi Caius Brindescu vá»›i sá»± há»£p tÃ¡c cá»§a AWS), chÃºng tÃ´i tháº£o luáº­n cÃ¡ch xÃ¢y dá»±ng pipeline dá»¯ liá»‡u gáº§n real-time báº±ng AWS Database Migration Service (DMS) Ä‘á»ƒ thu tháº­p dá»¯ liá»‡u thay Ä‘á»•i (CDC) tá»« cÆ¡ sá»Ÿ dá»¯ liá»‡u SQL vÃ  ingest vÃ o cÃ¡c báº£ng Icebergâ€”Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, chá»‹u lá»—i, vÃ  tÃ­ch há»£p mÆ°á»£t vá»›i cÃ¡c há»‡ thá»‘ng downstream nhÆ° Snowflake.\nAmazon Web Services, Inc.\n1. What is AWS DMS and Why It Matters AWS Database Migration Service (DMS) lÃ  dá»‹ch vá»¥ quáº£n lÃ½ cho phÃ©p di chuyá»ƒn vÃ  Ä‘á»“ng bá»™ dá»¯ liá»‡u giá»¯a cÃ¡c há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c nhau.\nDMS há»— trá»£ hai cháº¿ Ä‘á»™ chÃ­nh:\nFull Load â€“ sao chÃ©p toÃ n bá»™ dá»¯ liá»‡u ban Ä‘áº§u CDC (Change Data Capture) â€“ thu tháº­p insert, update vÃ  delete gáº§n real-time Káº¿t há»£p Full Load + CDC giÃºp cÃ¡c báº£ng Iceberg Ä‘Æ°á»£c cáº­p nháº­t liÃªn tá»¥c vá»›i Ä‘á»™ trá»… thÆ°á»ng dÆ°á»›i 5 giÃ¢y.\nAmazon Web Services, Inc.\n2. Pipeline Architecture: SQL â†’ AWS DMS â†’ Iceberg 2.1 High-Level Architecture Má»™t pipeline Ä‘iá»ƒn hÃ¬nh nhÆ° sau:\nSource DB (MySQL/PostgreSQL) â†’ AWS DMS â†’ Iceberg Table on S3 â†’ Downstream Analytics (Snowflake, Athena, Spark)\nCÆ¡ sá»Ÿ dá»¯ liá»‡u giao dá»‹ch Ä‘Ã³ng vai trÃ² nguá»“n sinh ra cÃ¡c sá»± kiá»‡n thay Ä‘á»•i. DMS xá»­ lÃ½ full load + CDC, vÃ  Iceberg lÆ°u trá»¯ dá»¯ liá»‡u trong Ä‘á»‹nh dáº¡ng báº£ng má»Ÿ cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng.\nAmazon Web Services, Inc.\n2.2 Components and Roles Component Role Source Database Sinh ra cÃ¡c sá»± kiá»‡n insert/update/delete AWS DMS Thá»±c hiá»‡n full load + CDC vÃ  stream dá»¯ liá»‡u Iceberg Table on S3 LÆ°u trá»¯ báº£ng ACID vá»›i kháº£ nÄƒng truy cáº­p tá»« nhiá»u engine Merge/Upsert Logic Ãp dá»¥ng cÃ¡c thay Ä‘á»•i CDC lÃªn báº£ng Downstream Systems Snowflake, Athena, Spark phá»¥c vá»¥ phÃ¢n tÃ­ch 3. Step-by-Step Setup 3.1 Creating DMS Endpoints Source Endpoint: Káº¿t ná»‘i tá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u SQL (MySQL/PostgreSQL) Target Endpoint: Trá» Ä‘áº¿n vá»‹ trÃ­ S3 chá»©a dá»¯ liá»‡u Iceberg Cáº¥u hÃ¬nh máº«u bao gá»“m hostname, port, username, password.\n3.2 Creating a Replication Task Chá»n cháº¿ Ä‘á»™ Full Load + CDC\nChá»n báº£ng cáº§n sao chÃ©p\nThiáº¿t láº­p batch size nhá» Ä‘á»ƒ giáº£m Ä‘á»™ trá»…\nBáº­t tÃ¹y chá»n large objects náº¿u cáº§n (LOB/JSON)\nKhi cháº¡y, DMS sáº½:\nThá»±c hiá»‡n full load ban Ä‘áº§u LiÃªn tá»¥c Ä‘á»c log cá»§a source Gá»­i thay Ä‘á»•i sang nÆ¡i staging 3.3 Handling DMS Output and Writing to Iceberg DMS ghi cÃ¡c báº£n ghi thay Ä‘á»•i (thÆ°á»ng á»Ÿ dáº¡ng JSON/CSV) vÃ o staging, bao gá»“m cá»™t action.\nVÃ­ dá»¥ dá»¯ liá»‡u CDC:\nid name action 1 Alice INSERT 2 Bob UPDATE 3 Carol DELETE Ãp dá»¥ng thay Ä‘á»•i vÃ o Iceberg báº±ng cÃ¢u lá»‡nh MERGE:\nMERGE INTO iceberg_table t USING staging_table s ON t.id = s.id WHEN MATCHED AND s.action = \u0026#39;DELETE\u0026#39; THEN DELETE WHEN MATCHED THEN UPDATE SET name = s.name WHEN NOT MATCHED THEN INSERT (id, name) VALUES (s.id, s.name); Conclusion Building a real-time data ingestion pipeline with AWS DMS and Apache Iceberg enables organizations to keep analytical datasets fresh, consistent, and scalable. By combining full-load initialization with continuous CDC streaming, teams can ensure low-latency updates while benefiting from Icebergâ€™s ACID guarantees and multi-engine interoperability. This architecture not only improves decision-making but also provides a future-proof foundation for modern analytics workloads.\nAbout the Author Caius Brindescu Caius Brindescu lÃ  Ká»¹ sÆ° chÃ­nh (Principal Engineer) táº¡i Etleap, chuyÃªn triá»ƒn khai cÃ¡c giáº£i phÃ¡p dá»¯ liá»‡u thá»i gian thá»±c. Ã”ng há»£p tÃ¡c vá»›i AWS Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c pipeline sá»­ dá»¥ng AWS DMS vÃ  Apache Iceberg, hÆ°á»›ng Ä‘áº¿n viá»‡c giÃºp doanh nghiá»‡p Ä‘áº¡t kháº£ nÄƒng xá»­ lÃ½ dá»¯ liá»‡u gáº§n real-time vÃ  má»Ÿ rá»™ng hiá»‡u quáº£.\nMahesh Kansara Mahesh lÃ  quáº£n lÃ½ ká»¹ thuáº­t cÆ¡ sá»Ÿ dá»¯ liá»‡u táº¡i Amazon Web Services (AWS). Anh lÃ m viá»‡c cháº·t cháº½ vá»›i cÃ¡c nhÃ³m phÃ¡t triá»ƒn vÃ  ká»¹ sÆ° Ä‘á»ƒ cáº£i thiá»‡n cÃ¡c dá»‹ch vá»¥ di trÃº vÃ  sao chÃ©p dá»¯ liá»‡u. Äá»“ng thá»i, anh cÅ©ng há»£p tÃ¡c vá»›i khÃ¡ch hÃ ng Ä‘á»ƒ cung cáº¥p hÆ°á»›ng dáº«n vÃ  há»— trá»£ ká»¹ thuáº­t cho nhiá»u dá»± Ã¡n cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  phÃ¢n tÃ­ch, giÃºp há» nÃ¢ng cao giÃ¡ trá»‹ cá»§a cÃ¡c giáº£i phÃ¡p khi sá»­ dá»¥ng AWS.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.5-week5/",
	"title": "Worklog Tuáº§n 5",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu Tuáº§n 5: Hiá»ƒu vÃ  thá»±c hÃ nh triá»ƒn khai á»©ng dá»¥ng WordPress trÃªn AWS báº±ng EC2, RDS vÃ  S3. Há»c cÃ¡ch phÃ¢n phá»‘i ná»™i dung toÃ n cáº§u báº±ng Amazon CloudFront. Thá»±c hÃ nh triá»ƒn khai vÃ  quáº£n lÃ½ dá»‹ch vá»¥ AWS Managed Microsoft AD. Cáº¥u hÃ¬nh IAM Federation vÃ  xÃ¡c thá»±c ngÆ°á»i dÃ¹ng vá»›i AWS Managed AD. Nhiá»‡m vá»¥ \u0026amp; Tiáº¿n Ä‘á»™: NgÃ y Nhiá»‡m vá»¥ NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh TÃ i liá»‡u tham kháº£o 2 - Xem tá»•ng quan lab triá»ƒn khai WordPress - Hiá»ƒu cÃ¡c thÃ nh pháº§n: EC2, RDS, S3, Security Groups - Chuáº©n bá»‹ key pair vÃ  IAM role cho WordPress instance 06/10/2025 06/10/2025 https://000101.awsstudygroup.com/ 3 - Triá»ƒn khai WordPress trÃªn AWS Cloud + Khá»Ÿi táº¡o EC2 vÃ  cáº¥u hÃ¬nh Apache/PHP + Táº¡o cÆ¡ sá»Ÿ dá»¯ liá»‡u MySQL trÃªn RDS + Káº¿t ná»‘i WordPress vá»›i RDS + Kiá»ƒm tra truy cáº­p website + Cáº¥u hÃ¬nh S3 Ä‘á»ƒ lÆ°u trá»¯ media + Dá»n dáº¹p tÃ i nguyÃªn 07/10/2025 07/10/2025 https://000101.awsstudygroup.com/ 4 - Xem láº¡i ná»™i dung AWS CloudFront Workshop - Cáº¥u hÃ¬nh CloudFront phÃ¢n phá»‘i ná»™i dung tÄ©nh cho WordPress - Báº­t cache, HTTPS vÃ  cáº¥u hÃ¬nh tÃªn miá»n tÃ¹y chá»‰nh - Kiá»ƒm tra hiá»‡u suáº¥t website sau khi kÃ­ch hoáº¡t CloudFront 08/10/2025 08/10/2025 https://000130.awsstudygroup.com/ 5 - Xem lab triá»ƒn khai AWS Managed AD - Hiá»ƒu quy trÃ¬nh: táº¡o VPC, subnet, cáº¥u hÃ¬nh directory - Triá»ƒn khai AWS Managed AD vÃ  kiá»ƒm tra domain join tá»« EC2 09/10/2025 09/10/2025 https://000093.awsstudygroup.com/ 6 - Thá»±c hÃ nh IAM Federation vá»›i AWS Managed AD + Cáº¥u hÃ¬nh quan há»‡ tin cáº­y (trust relationship) + TÃ­ch há»£p ngÆ°á»i dÃ¹ng IAM vÃ  xÃ¡c thá»±c qua AD + Kiá»ƒm tra Ä‘Äƒng nháº­p báº±ng thÃ´ng tin AD qua AWS Console + Dá»n dáº¹p toÃ n bá»™ tÃ i nguyÃªn 10/10/2025 10/10/2025 https://000095.awsstudygroup.com/ Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c: Triá»ƒn khai thÃ nh cÃ´ng website WordPress trÃªn AWS tÃ­ch há»£p vá»›i RDS vÃ  S3. Cáº¥u hÃ¬nh CloudFront Ä‘á»ƒ tÄƒng tá»‘c phÃ¢n phá»‘i ná»™i dung toÃ n cáº§u. Triá»ƒn khai vÃ  kiá»ƒm thá»­ AWS Managed Microsoft AD trong mÃ´i trÆ°á»ng VPC báº£o máº­t. Thiáº¿t láº­p thÃ nh cÃ´ng IAM Federation vá»›i AD Ä‘á»ƒ quáº£n lÃ½ táº­p trung ngÆ°á»i dÃ¹ng. Dá»n dáº¹p hoÃ n toÃ n tÃ i nguyÃªn vÃ  ghi chÃ©p quy trÃ¬nh triá»ƒn khai chi tiáº¿t. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.5-backend-stack/",
	"title": "5.4.5 Backend Stack",
	"tags": [],
	"description": "",
	"content": " Backend Stack - Application Layer Tá»•ng Quan Backend Stack lÃ  táº§ng á»©ng dá»¥ng Phase 4 cá»§a háº¡ táº§ng EveryoneCook. NÃ³ tá»•ng há»£p API Gateway, Lambda functions, SQS queues vÃ  báº£o máº­t WAF thÃ nh má»™t kiáº¿n trÃºc backend thá»‘ng nháº¥t.\nThá»© Tá»± Triá»ƒn Khai: Stack nÃ y Báº®T BUá»˜C pháº£i Ä‘Æ°á»£c triá»ƒn khai sau Core Stack vÃ  Auth Stack.\nâš ï¸ LÆ°u Ã Environment: HÆ°á»›ng dáº«n nÃ y táº­p trung vÃ o triá»ƒn khai mÃ´i trÆ°á»ng Development (dev). Äá»ƒ triá»ƒn khai staging/production, xem pháº§n Sá»± KhÃ¡c Biá»‡t Giá»¯a CÃ¡c Environment.\nTrÃ¡ch Nhiá»‡m ChÃ­nh Táº¡o API Gateway REST API vá»›i custom domain Triá»ƒn khai 6 Lambda functions (API Router + 5 business modules) Cáº¥u hÃ¬nh 2 SQS queues hoáº¡t Ä‘á»™ng cho async processing (AI, Image queues vá»›i DLQs) Triá»ƒn khai 2 worker Lambda functions cho event processing (AI Worker, Image Worker) Thiáº¿t láº­p WAF Web ACL Ä‘á»ƒ báº£o vá»‡ API Gateway Cáº¥u hÃ¬nh CloudWatch monitoring vÃ  alarms Nhá»¯ng GÃ¬ Thá»±c Sá»± Äang Cháº¡y:\n8 Lambda Functions (6 business + 2 workers) 4 SQS Queues Ä‘Æ°á»£c triá»ƒn khai (AI + Image queues vá»›i DLQs cá»§a chÃºng) 1 WAF Web ACL vá»›i 5 quy táº¯c báº£o máº­t CloudWatch Logs vÃ  Alarms Nhá»¯ng GÃ¬ Stack NÃ y Bao Gá»“m API Gateway (Dev Environment):\nCustom domain: api-dev.everyonecook.cloud ACM certificate cho HTTPS (Regional - ap-southeast-1) Cognito authorizer cho JWT validation Caching: Táº¯t (chá»‰ báº­t trong production) Compression: Báº­t (gzip/deflate cho responses \u0026gt;1KB) Rate limiting: 10K req/sec, burst 5K Request validation: Body, parameters, headers Data trace logging: Báº­t (táº¯t trong production) Lambda Functions (6 functions - Dev Environment):\nAPI Router (everyonecook-dev-api-router): Äá»‹nh tuyáº¿n requests Ä‘áº¿n target Lambda functions Auth \u0026amp; User (everyonecook-dev-auth-user): XÃ¡c thá»±c, user profiles, privacy settings Social (everyonecook-dev-social): Posts, comments, reactions, friends, notifications Recipe \u0026amp; AI (everyonecook-dev-recipe-ai): Recipe CRUD, AI generation, search, trending Admin (everyonecook-dev-admin): Content moderation, user management, appeals Upload (everyonecook-dev-upload): S3 presigned URLs, file uploads Source Code: Táº¥t cáº£ functions náº±m trong thÆ° má»¥c services/\nSQS Queues (2 queues hoáº¡t Ä‘á»™ng + 2 DLQs):\nAI Queue (everyonecook-dev-ai-queue): Bedrock AI recipe generation (2-minute timeout) â†’ AI Worker Image Queue (everyonecook-dev-image-queue): S3 image optimization (60-second timeout) â†’ Image Worker LÆ°u Ã½: Analytics vÃ  Notification queues Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong code nhÆ°ng KHÃ”NG Ä‘Æ°á»£c triá»ƒn khai. Notifications Ä‘Æ°á»£c xá»­ lÃ½ trá»±c tiáº¿p trong Social Module.\nWorker Lambda Functions (2 workers Ä‘Æ°á»£c triá»ƒn khai hoáº¡t Ä‘á»™ng):\nAI Worker (ai-module/workers/): Xá»­ lÃ½ cÃ¡c cÃ´ng viá»‡c AI generation tá»« AI Queue sá»­ dá»¥ng Bedrock Claude 3 Haiku Image Worker (image-worker/): Xá»­ lÃ½ tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh tá»« Image Queue (resize, compress, watermark) WAF Web ACL:\nRate limiting: 2000 req/5min má»—i IP SQL injection protection (AWS Managed) XSS protection (AWS Managed) Known bad inputs (AWS Managed) Request size limit: 10MB tá»‘i Ä‘a Kiáº¿n TrÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Backend Stack (Phase 4 - Dev Environment) â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ WAF Web ACL (REGIONAL) - Báº£o vá»‡ API Gateway â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Rate Limiting: 2000 req/5min má»—i IP â”‚ â”‚\râ”‚ â”‚ â”œâ”€ SQL Injection Protection (AWS Managed) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ XSS Protection (AWS Managed) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Known Bad Inputs (AWS Managed) â”‚ â”‚\râ”‚ â”‚ â””â”€ Request Size Limit: 10MB tá»‘i Ä‘a â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ API Gateway REST API â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Custom Domain: api.everyonecook.cloud â”‚ â”‚\râ”‚ â”‚ â”œâ”€ ACM Certificate (Regional - ap-southeast-1) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Cognito Authorizer (JWT validation) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Caching: 0.5GB, 5-min TTL (chá»‰ prod) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Compression: gzip/deflate (\u0026gt;1KB) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Rate Limiting: 10K req/sec, burst 5K â”‚ â”‚\râ”‚ â”‚ â””â”€ Request Validation: Body, params, headers â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Lambda Function: API Router (512MB, 30s timeout) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ JWT Validation \u0026amp; User Context Extraction â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Request Routing Ä‘áº¿n Target Lambda Functions â”‚ â”‚\râ”‚ â”‚ â””â”€ Error Handling \u0026amp; Response Formatting â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â–¼ â–¼ â–¼ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Auth \u0026amp; â”‚ â”‚ Social â”‚ â”‚ Recipe â”‚ â”‚ Admin â”‚ â”‚\râ”‚ â”‚ User â”‚ â”‚ Module â”‚ â”‚ \u0026amp; AI â”‚ â”‚ Module â”‚ â”‚\râ”‚ â”‚ Lambda â”‚ â”‚ Lambda â”‚ â”‚ Lambda â”‚ â”‚ Lambda â”‚ â”‚\râ”‚ â”‚ (512MB) â”‚ â”‚ (512MB) â”‚ â”‚ (512MB) â”‚ â”‚ (512MB) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â–¼ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ SQS Queues + Worker Lambdas â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 1ï¸âƒ£ AI Queue â†’ AI Worker (1024MB, 60s) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Bedrock Claude 3 Haiku (us-east-1) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Táº¡o recipe tá»« ingredients â”‚ â”‚\râ”‚ â”‚ â””â”€ Visibility timeout: 2 phÃºt â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 2ï¸âƒ£ Image Queue â†’ Image Worker (512MB, 60s) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh S3 â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Resize, compress, watermark â”‚ â”‚\râ”‚ â”‚ â””â”€ Visibility timeout: 60 giÃ¢y â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ ğŸ“Œ Chá»‰ 2 queues Ä‘Æ°á»£c sá»­ dá»¥ng tÃ­ch cá»±c (AI \u0026amp; Image) â”‚ â”‚\râ”‚ â”‚ ğŸ“Œ Analytics \u0026amp; Notification queues tá»“n táº¡i nhÆ°ng khÃ´ng cÃ³ workers â”‚ â”‚\râ”‚ â”‚ ğŸ“Œ Táº¥t cáº£ queues cÃ³ DLQ (14-day retention) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚\râ”‚ Dependencies tá»« CÃ¡c Stack KhÃ¡c: â”‚\râ”‚ â”œâ”€ DynamoDB Table (Core Stack) â”‚\râ”‚ â”œâ”€ S3 Content Bucket (Core Stack) â”‚\râ”‚ â”œâ”€ CloudFront Distribution (Core Stack) â”‚\râ”‚ â”œâ”€ Cognito User Pool (Auth Stack) â”‚\râ”‚ â””â”€ Cognito User Pool Client (Auth Stack) â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Cáº¥u HÃ¬nh Stack Cáº¥u TrÃºc File infrastructure/lib/stacks/\râ””â”€â”€ backend-stack.ts # Backend Stack implementation (2965 dÃ²ng)\râ”œâ”€ API Gateway configuration\râ”œâ”€ Lambda function definitions (6 functions)\râ”œâ”€ SQS queue configuration (4 queues + 4 DLQs)\râ”œâ”€ Worker Lambda definitions (2 workers hoáº¡t Ä‘á»™ng)\râ””â”€ WAF Web ACL configuration\rservices/ # Lambda function source code\râ”œâ”€â”€ api-router/ # API Router Lambda\râ”œâ”€â”€ auth-module/ # Auth \u0026amp; User Lambda\râ”œâ”€â”€ social-module/ # Social Lambda\râ”œâ”€â”€ recipe-module/ # Recipe \u0026amp; AI Lambda\râ”œâ”€â”€ admin-module/ # Admin Lambda\râ”œâ”€â”€ upload-module/ # Upload Lambda\râ”œâ”€â”€ ai-module/ # AI Worker Lambda\râ”‚ â””â”€â”€ workers/\râ”œâ”€â”€ image-worker/ # Image Worker Lambda\râ”œâ”€â”€ websocket-module/ # WebSocket (stack riÃªng, khÃ´ng trong Backend)\râ””â”€â”€ shared/ # Shared utilities Triá»ƒn Khai Code File: infrastructure/lib/stacks/backend-stack.ts\n1. Stack Interface \u0026amp; Constructor export interface BackendStackProps extends BaseStackProps { dynamoTable: cdk.aws_dynamodb.ITable; contentBucket: cdk.aws_s3.IBucket; distribution: cdk.aws_cloudfront.IDistribution; userPool: cdk.aws_cognito.IUserPool; userPoolClient: cdk.aws_cognito.IUserPoolClient; } export class BackendStack extends BaseStack { // Lambda Layer public readonly sharedLayer: SharedDependenciesLayer; // API Gateway public readonly api: cdk.aws_apigateway.RestApi; public readonly cognitoAuthorizer: cdk.aws_apigateway.CognitoUserPoolsAuthorizer; public readonly apiDomainName: cdk.aws_apigateway.DomainName; // Request Validators public readonly bodyValidator: cdk.aws_apigateway.RequestValidator; public readonly paramsValidator: cdk.aws_apigateway.RequestValidator; public readonly fullValidator: cdk.aws_apigateway.RequestValidator; // Lambda Functions (6 business functions) public readonly apiRouterFunction: cdk.aws_lambda.Function; // services/api-router public readonly authUserFunction: cdk.aws_lambda.Function; // services/auth-module public readonly socialFunction: cdk.aws_lambda.Function; // services/social-module public readonly recipeAIFunction: cdk.aws_lambda.Function; // services/recipe-module public readonly adminFunction: cdk.aws_lambda.Function; // services/admin-module public readonly uploadFunction: cdk.aws_lambda.Function; // services/upload-module // SQS Queues (4 queues + 4 DLQs) public readonly aiQueue: cdk.aws_sqs.Queue; public readonly imageProcessingQueue: cdk.aws_sqs.Queue; public readonly analyticsQueue: cdk.aws_sqs.Queue; public readonly notificationQueue: cdk.aws_sqs.Queue; // Worker Lambdas (2 workers hoáº¡t Ä‘á»™ng) public readonly aiWorker: cdk.aws_lambda.Function; // services/ai-module/workers public readonly imageWorker?: cdk.aws_lambda.Function; // services/image-worker // LÆ°u Ã½: analyticsWorker \u0026amp; notificationWorker tá»“n táº¡i trong code nhÆ°ng KHÃ”NG triá»ƒn khai // public readonly analyticsWorker?: cdk.aws_lambda.Function; // ÄÃ£ comment out // public readonly notificationWorker?: cdk.aws_lambda.Function; // KhÃ´ng Ä‘Æ°á»£c táº¡o // WAF WebACL public readonly apiGatewayWebAcl?: cdk.aws_wafv2.CfnWebACL; constructor(scope: Construct, id: string, props: BackendStackProps) { super(scope, id, props); // ThÃªm cÃ¡c tag Ä‘áº·c thÃ¹ cho stack cdk.Tags.of(this).add(\u0026#39;StackType\u0026#39;, \u0026#39;Backend\u0026#39;); cdk.Tags.of(this).add(\u0026#39;Layer\u0026#39;, \u0026#39;Application\u0026#39;); cdk.Tags.of(this).add(\u0026#39;CostCenter\u0026#39;, `Backend-${this.config.environment}`); // Táº¡o resources (xem implementation bÃªn dÆ°á»›i) // 1. Shared Dependencies Layer // 2. SQS Queues vÃ  DLQs // 3. API Gateway // 4. Lambda Functions // 5. Worker Lambdas // 6. WAF Web ACL // 7. Export outputs } } 2. Cáº¥u HÃ¬nh API Gateway private createAPIGateway(): cdk.aws_apigateway.RestApi { const cachingEnabled = this.config.apiGateway.caching.enabled; const compressionEnabled = this.config.apiGateway.compression; const api = new cdk.aws_apigateway.RestApi(this, \u0026#39;EveryoneCookAPI\u0026#39;, { restApiName: `EveryoneCook-API-${this.config.environment}`, description: `Everyone Cook REST API - ${this.config.environment}`, // Compression cho responses \u0026gt;1KB minCompressionSize: compressionEnabled ? cdk.Size.kibibytes(1) : undefined, deployOptions: { stageName: \u0026#39;api\u0026#39;, // Cáº¥u hÃ¬nh caching (chá»‰ production) cachingEnabled: cachingEnabled, cacheClusterEnabled: cachingEnabled, cacheClusterSize: cachingEnabled ? this.config.apiGateway.caching.cacheSize : undefined, cacheTtl: cachingEnabled ? cdk.Duration.seconds(this.config.apiGateway.caching.ttl) : undefined, cacheDataEncrypted: cachingEnabled, // Throttling settings throttlingRateLimit: this.config.apiGateway.throttling.rateLimit, throttlingBurstLimit: this.config.apiGateway.throttling.burstLimit, // X-Ray Tracing - Táº¯t (CloudWatch Logs Ä‘á»§ dÃ¹ng) tracingEnabled: false, // Cáº¥u hÃ¬nh logging loggingLevel: cdk.aws_apigateway.MethodLoggingLevel.INFO, dataTraceEnabled: this.config.environment !== \u0026#39;prod\u0026#39;, metricsEnabled: true, // Access logging accessLogDestination: new cdk.aws_apigateway.LogGroupLogDestination( new cdk.aws_logs.LogGroup(this, \u0026#39;APIGatewayAccessLogs\u0026#39;, { logGroupName: `/aws/apigateway/everyonecook-${this.config.environment}`, retention: this.config.cloudwatch.logRetentionDays, }) ), }, // Cáº¥u hÃ¬nh CORS defaultCorsPreflightOptions: { allowOrigins: [ `https://${this.config.domains.frontend}`, `https://www.${this.config.domains.frontend}`, ...(this.config.environment !== \u0026#39;prod\u0026#39; ? [\u0026#39;http://localhost:3000\u0026#39;] : []), ], allowMethods: [\u0026#39;GET\u0026#39;, \u0026#39;POST\u0026#39;, \u0026#39;PUT\u0026#39;, \u0026#39;DELETE\u0026#39;, \u0026#39;PATCH\u0026#39;, \u0026#39;OPTIONS\u0026#39;], allowHeaders: [ \u0026#39;Content-Type\u0026#39;, \u0026#39;Authorization\u0026#39;, \u0026#39;X-Amz-Date\u0026#39;, \u0026#39;X-Api-Key\u0026#39;, \u0026#39;X-Amz-Security-Token\u0026#39;, \u0026#39;X-Correlation-Id\u0026#39;, \u0026#39;Cache-Control\u0026#39;, \u0026#39;Accept-Encoding\u0026#39;, ], allowCredentials: false, maxAge: cdk.Duration.hours(1), }, // Cáº¥u hÃ¬nh endpoint endpointConfiguration: { types: [cdk.aws_apigateway.EndpointType.REGIONAL], }, // Binary media types binaryMediaTypes: [\u0026#39;image/*\u0026#39;, \u0026#39;application/octet-stream\u0026#39;], }); // ThÃªm Gateway Responses vá»›i CORS headers const corsHeaders = { \u0026#39;gatewayresponse.header.Access-Control-Allow-Origin\u0026#39;: \u0026#34;\u0026#39;*\u0026#39;\u0026#34;, \u0026#39;gatewayresponse.header.Access-Control-Allow-Headers\u0026#39;: \u0026#34;\u0026#39;Content-Type,Authorization,...\u0026#39;\u0026#34;, \u0026#39;gatewayresponse.header.Access-Control-Allow-Methods\u0026#39;: \u0026#34;\u0026#39;GET,POST,PUT,DELETE,PATCH,OPTIONS\u0026#39;\u0026#34;, }; api.addGatewayResponse(\u0026#39;Unauthorized\u0026#39;, { type: cdk.aws_apigateway.ResponseType.UNAUTHORIZED, statusCode: \u0026#39;401\u0026#39;, responseHeaders: corsHeaders, }); return api; } 3. Cáº¥u HÃ¬nh SQS Queue private createAIQueue(): cdk.aws_sqs.Queue { const queue = new cdk.aws_sqs.Queue(this, \u0026#39;AIQueue\u0026#39;, { queueName: `everyonecook-${this.config.environment}-ai-queue`, visibilityTimeout: cdk.Duration.seconds(120), // 2 phÃºt cho AI processing retentionPeriod: cdk.Duration.days(4), deadLetterQueue: { queue: this.aiDLQ, maxReceiveCount: 3, }, encryption: cdk.aws_sqs.QueueEncryption.KMS_MANAGED, }); // CloudWatch alarm cho queue depth if (this.config.cloudwatch.alarms.enabled) { new cdk.aws_cloudwatch.Alarm(this, \u0026#39;AIQueueDepthAlarm\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-AI-Queue-Depth`, metric: queue.metricApproximateNumberOfMessagesVisible(), threshold: 100, evaluationPeriods: 2, }); } return queue; } 4. Cáº¥u HÃ¬nh Lambda Function private createAuthUserLambda(props: BackendStackProps): cdk.aws_lambda.Function { const logGroup = new cdk.aws_logs.LogGroup(this, \u0026#39;AuthUserLogGroup\u0026#39;, { logGroupName: `/aws/lambda/everyonecook-${this.config.environment}-auth-user`, retention: this.config.cloudwatch.logRetentionDays, }); const authUserFunction = new cdk.aws_lambda.Function(this, \u0026#39;AuthUserFunction\u0026#39;, { functionName: `everyonecook-${this.config.environment}-auth-user`, runtime: cdk.aws_lambda.Runtime.NODEJS_20_X, handler: \u0026#39;services/auth-module/index.handler\u0026#39;, code: this.createLambdaCode(\u0026#39;services/auth-module/deployment\u0026#39;), layers: [this.sharedLayer.layer], memorySize: 512, timeout: cdk.Duration.seconds(30), tracing: cdk.aws_lambda.Tracing.DISABLED, environment: { DYNAMODB_TABLE: props.dynamoTable.tableName, USER_POOL_ID: props.userPool.userPoolId, USER_POOL_CLIENT_ID: props.userPoolClient.userPoolClientId, CONTENT_BUCKET: props.contentBucket.bucketName, LOG_LEVEL: this.config.environment === \u0026#39;prod\u0026#39; ? \u0026#39;INFO\u0026#39; : \u0026#39;DEBUG\u0026#39;, }, logGroup: logGroup, }); // Cáº¥p permissions props.dynamoTable.grantReadWriteData(authUserFunction); props.contentBucket.grantReadWrite(authUserFunction); props.userPool.grant(authUserFunction, \u0026#39;cognito-idp:AdminGetUser\u0026#39;, \u0026#39;cognito-idp:ListUsers\u0026#39;); return authUserFunction; } 5. Cáº¥u HÃ¬nh WAF Web ACL private createApiGatewayWebAcl(): cdk.aws_wafv2.CfnWebACL { const webAcl = new cdk.aws_wafv2.CfnWebACL(this, \u0026#39;ApiGatewayWebACL\u0026#39;, { name: `EveryoneCook-API-WAF-${this.config.environment}`, scope: \u0026#39;REGIONAL\u0026#39;, defaultAction: { allow: {} }, visibilityConfig: { sampledRequestsEnabled: true, cloudWatchMetricsEnabled: true, metricName: `EveryoneCook-API-WAF-${this.config.environment}`, }, rules: [ // Rule 1: Rate Limiting { name: \u0026#39;RateLimitRule\u0026#39;, priority: 0, statement: { rateBasedStatement: { limit: 2000, // 2000 requests má»—i 5 phÃºt aggregateKeyType: \u0026#39;IP\u0026#39;, }, }, action: { block: {} }, visibilityConfig: { sampledRequestsEnabled: true, cloudWatchMetricsEnabled: true, metricName: \u0026#39;RateLimitRule\u0026#39;, }, }, // Rule 2-5: AWS Managed Rules (SQL injection, XSS, v.v.) // ... xem full implementation ], }); return webAcl; } Chi Tiáº¿t Cáº¥u HÃ¬nh ChÃ­nh 1. Shared Dependencies Layer Backend Stack sá»­ dá»¥ng Lambda Layer Ä‘á»ƒ chia sáº» common dependencies giá»¯a táº¥t cáº£ Lambda functions:\n// Táº¡o Shared Dependencies Layer this.sharedLayer = new SharedDependenciesLayer(this, \u0026#39;SharedDependenciesLayer\u0026#39;); // Lá»£i Ã­ch: // - Giáº£m 90% kÃ­ch thÆ°á»›c deployment (8MB â†’ 200KB má»—i Lambda) // - Triá»ƒn khai nhanh hÆ¡n // - PhiÃªn báº£n dependency nháº¥t quÃ¡n // - Chi phÃ­ lÆ°u trá»¯ tháº¥p hÆ¡n // Dependencies bao gá»“m: // - AWS SDK v3 clients (DynamoDB, Lambda, Cognito, S3, SQS, Bedrock) // - uuid, jsonwebtoken, jwks-rsa 2. API Gateway Custom Domain Stack táº¡o custom domain cho API Gateway vá»›i ACM certificate:\n// Cáº¥u hÃ¬nh custom domain const domainName = this.config.domains.api; // api.everyonecook.cloud // Táº¡o ACM certificate trong ap-southeast-1 (Regional endpoint) const certificate = new acm.Certificate(this, \u0026#39;ApiGatewayCertificate\u0026#39;, { domainName: \u0026#39;*.everyonecook.cloud\u0026#39;, validation: acm.CertificateValidation.fromDns(hostedZone), }); // Táº¡o API Gateway DomainName const apiDomainName = new cdk.aws_apigateway.DomainName(this, \u0026#39;ApiDomain\u0026#39;, { domainName: this.config.domains.api, certificate: certificate, endpointType: cdk.aws_apigateway.EndpointType.REGIONAL, securityPolicy: cdk.aws_apigateway.SecurityPolicy.TLS_1_2, }); // Táº¡o Route 53 A record (Alias) new cdk.aws_route53.ARecord(this, \u0026#39;ApiAliasRecord\u0026#39;, { zone: hostedZone, recordName: this.config.domains.api, target: cdk.aws_route53.RecordTarget.fromAlias( new cdk.aws_route53_targets.ApiGatewayDomain(apiDomainName) ), }); Environments:\nDev: api-dev.everyonecook.cloud Staging: api-staging.everyonecook.cloud Prod: api.everyonecook.cloud 3. Request Validation Stack triá»ƒn khai ba cáº¥p Ä‘á»™ request validation:\n// 1. Body Validator - Chá»‰ validate request body this.bodyValidator = new cdk.aws_apigateway.RequestValidator(this, \u0026#39;BodyValidator\u0026#39;, { restApi: api, validateRequestBody: true, validateRequestParameters: false, }); // 2. Params Validator - Chá»‰ validate query strings vÃ  headers this.paramsValidator = new cdk.aws_apigateway.RequestValidator(this, \u0026#39;ParamsValidator\u0026#39;, { restApi: api, validateRequestBody: false, validateRequestParameters: true, }); // 3. Full Validator - Validate cáº£ body vÃ  parameters this.fullValidator = new cdk.aws_apigateway.RequestValidator(this, \u0026#39;FullValidator\u0026#39;, { restApi: api, validateRequestBody: true, validateRequestParameters: true, }); // Lá»£i Ã­ch: // - Tá»« chá»‘i sá»›m cÃ¡c request khÃ´ng há»£p lá»‡ (trÆ°á»›c khi invoke Lambda) // - Tá»‘i Æ°u chi phÃ­: KhÃ´ng tÃ­nh phÃ­ Lambda cho invalid requests // - Báº£o máº­t: NgÄƒn cháº·n malformed requests // - Hiá»‡u nÄƒng: Pháº£n há»“i lá»—i nhanh hÆ¡n 4. Quy Æ¯á»›c Äáº·t TÃªn Resource Táº¥t cáº£ resources tuÃ¢n theo pattern Ä‘áº·t tÃªn nháº¥t quÃ¡n:\n// Lambda function format: everyonecook-{env}-{function} functionName: `everyonecook-${this.config.environment}-auth-user` // SQS queue format: everyonecook-{env}-{queue} queueName: `everyonecook-${this.config.environment}-ai-queue` // API Gateway format: EveryoneCook-API-{env} restApiName: `EveryoneCook-API-${this.config.environment}` // WAF format: EveryoneCook-API-WAF-{env} name: `EveryoneCook-API-WAF-${this.config.environment}` VÃ­ dá»¥:\nStack name: EveryoneCook-dev-Backend API: EveryoneCook-API-dev Lambda: everyonecook-dev-auth-user Queue: everyonecook-dev-ai-queue 5. Resource Tags Má»—i resource Ä‘Æ°á»£c tag Ä‘á»ƒ theo dÃµi chi phÃ­ vÃ  quáº£n lÃ½:\n{ Stack: \u0026#39;EveryoneCook-dev-Backend\u0026#39;, Environment: \u0026#39;dev\u0026#39;, StackType: \u0026#39;Backend\u0026#39;, Layer: \u0026#39;Application\u0026#39;, CostCenter: \u0026#39;Backend-dev\u0026#39;, Component: \u0026#39;API\u0026#39; | \u0026#39;EventProcessing\u0026#39; | \u0026#39;Security\u0026#39;, Module: \u0026#39;AuthUser\u0026#39; | \u0026#39;Social\u0026#39; | \u0026#39;RecipeAI\u0026#39; | \u0026#39;Admin\u0026#39; | \u0026#39;Upload\u0026#39;, Purpose: \u0026#39;REST-API\u0026#39; | \u0026#39;RequestRouting\u0026#39; | \u0026#39;AI-Processing\u0026#39;, Project: \u0026#39;EveryoneCook\u0026#39; } Stack Outputs Sau khi triá»ƒn khai, stack export cÃ¡c giÃ¡ trá»‹ sau:\nOutput Name Value Sá»­ dá»¥ng ApiUrl https://api.everyonecook.cloud Frontend API endpoint ApiId abc123xyz API Gateway REST API ID ApiStage api API Gateway stage name ApiDomainName api.everyonecook.cloud Custom domain name AIQueueUrl https://sqs.ap-southeast-1... AI Queue URL Ä‘á»ƒ gá»­i messages ImageQueueUrl https://sqs.ap-southeast-1... Image Queue URL WafWebAclArn arn:aws:wafv2:... WAF Web ACL ARN CÃ¡c BÆ°á»›c Triá»ƒn Khai BÆ°á»›c 1: Xem Láº¡i Cáº¥u HÃ¬nh Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure:\ncd D:\\Project_AWS\\everyonecook\\infrastructure XÃ¡c minh cáº¥u hÃ¬nh mÃ´i trÆ°á»ng Development trong config/environment.ts:\ndev: { environment: \u0026#39;dev\u0026#39;, account: \u0026#39;YOUR_AWS_ACCOUNT_ID\u0026#39;, region: \u0026#39;ap-southeast-1\u0026#39;, domains: { frontend: \u0026#39;dev.everyonecook.cloud\u0026#39;, api: \u0026#39;api-dev.everyonecook.cloud\u0026#39;, cdn: \u0026#39;cdn-dev.everyonecook.cloud\u0026#39;, }, apiGateway: { caching: { enabled: false, // Táº¯t trong dev (báº­t trong prod) cacheSize: \u0026#39;0.5\u0026#39;, // 0.5GB cache (chá»‰ prod) ttl: 300, // 5 phÃºt (chá»‰ prod) }, compression: true, // Báº­t trong táº¥t cáº£ environments throttling: { rateLimit: 10000, burstLimit: 5000, }, }, cloudwatch: { logRetentionDays: 7, // Dev: 7 ngÃ y, Staging: 30 ngÃ y, Prod: 90 ngÃ y alarms: { enabled: true, }, }, // ... cÃ¡c configs khÃ¡c } Cho Staging/Production: Cáº­p nháº­t tham sá»‘ --context environment= trong cÃ¡c lá»‡nh triá»ƒn khai.\nBÆ°á»›c 2: Chuáº©n Bá»‹ Lambda Deployment Packages TrÆ°á»›c khi triá»ƒn khai, chuáº©n bá»‹ Lambda deployment packages cho 8 Lambda functions + 1 Layer:\n# 1. Chuáº©n bá»‹ Shared Layer TRÆ¯á»šC TIÃŠN (báº¯t buá»™c cho táº¥t cáº£ Lambdas) cd D:\\Project_AWS\\everyonecook\\layers\\shared-dependencies .\\prepare-layer.ps1 # 2. Chuáº©n bá»‹ Business Lambda Functions (6 functions) cd D:\\Project_AWS\\everyonecook\\services\\api-router .\\prepare-deployment-layer.ps1 # hoáº·c prepare-deployment.ps1 cd D:\\Project_AWS\\everyonecook\\services\\auth-module .\\prepare-deployment-layer.ps1 cd D:\\Project_AWS\\everyonecook\\services\\social-module .\\prepare-deployment-layer.ps1 cd D:\\Project_AWS\\everyonecook\\services\\recipe-module .\\prepare-deployment-layer.ps1 cd D:\\Project_AWS\\everyonecook\\services\\admin-module .\\prepare-deployment-layer.ps1 cd D:\\Project_AWS\\everyonecook\\services\\upload-module .\\prepare-deployment-layer.ps1 # 3. Chuáº©n bá»‹ Worker Lambda Functions (2 workers) cd D:\\Project_AWS\\everyonecook\\services\\ai-module .\\prepare-deployment.ps1 # AI Worker sá»­ dá»¥ng prepare-deployment.ps1 cd D:\\Project_AWS\\everyonecook\\services\\image-worker .\\prepare-deployment-layer.ps1 LÆ°u Ã Quan Trá»ng:\nMá»—i service pháº£i cÃ³ thÆ° má»¥c deployment/ sau khi cháº¡y prepare script Shared Layer pháº£i Ä‘Æ°á»£c build TRÆ¯á»šC TIÃŠN vÃ¬ táº¥t cáº£ Lambdas phá»¥ thuá»™c vÃ o nÃ³ Kiá»ƒm tra prepare-deployment.ps1 hoáº·c prepare-deployment-layer.ps1 trong má»—i service folder Tá»•ng kÃ­ch thÆ°á»›c deployment: ~8MB â†’ ~200KB má»—i Lambda (nhá» Shared Layer) BÆ°á»›c 3: Synthesize CloudFormation Template Táº¡o CloudFormation template Ä‘á»ƒ xem láº¡i cÃ¡c thay Ä‘á»•i:\n# Quay vá» thÆ° má»¥c infrastructure cd D:\\Project_AWS\\everyonecook\\infrastructure # Synthesize template npx cdk synth EveryoneCook-dev-Backend --context environment=dev Káº¿t quáº£ mong Ä‘á»£i hiá»ƒn thá»‹ CloudFormation template vá»›i táº¥t cáº£ resources.\nBÆ°á»›c 4: Triá»ƒn Khai Backend Stack Triá»ƒn khai Backend stack lÃªn AWS:\n# Chá»‰ triá»ƒn khai Backend Stack npx cdk deploy EveryoneCook-dev-Backend --context environment=dev # Hoáº·c triá»ƒn khai vá»›i approval npx cdk deploy EveryoneCook-dev-Backend --context environment=dev --require-approval never Káº¿t quáº£ mong Ä‘á»£i:\nâœ¨ Synthesis time: 5.23s\rEveryoneCook-dev-Backend: deploying...\r[0%] start: Publishing abc123:current_account-current_region\r[33%] success: Published abc123:current_account-current_region\r[33%] start: Publishing def456:current_account-current_region\r[66%] success: Published def456:current_account-current_region\r[66%] start: Publishing EveryoneCook-dev-Backend\r[100%] success: Published EveryoneCook-dev-Backend\rEveryoneCook-dev-Backend: creating CloudFormation changeset...\rEveryoneCook-dev-Backend\râœ¨ Deployment time: 420.15s\rOutputs:\rEveryoneCook-dev-Backend.ApiUrl = https://api-dev.everyonecook.cloud\rEveryoneCook-dev-Backend.ApiId = abc123xyz\rEveryoneCook-dev-Backend.ApiStage = api\rEveryoneCook-dev-Backend.ApiDomainName = api-dev.everyonecook.cloud\rEveryoneCook-dev-Backend.AIQueueUrl = https://sqs.ap-southeast-1.amazonaws.com/123456789/everyonecook-dev-ai-queue\rEveryoneCook-dev-Backend.ImageQueueUrl = https://sqs.ap-southeast-1.amazonaws.com/123456789/everyonecook-dev-image-queue\rEveryoneCook-dev-Backend.WafWebAclArn = arn:aws:wafv2:ap-southeast-1:123456789:regional/webacl/EveryoneCook-API-WAF-dev/...\rStack ARN:\rarn:aws:cloudformation:ap-southeast-1:123456789:stack/EveryoneCook-dev-Backend/...\râœ¨ Total time: 425.38s Thá»i gian triá»ƒn khai: ~7 phÃºt (bao gá»“m certificate validation)\nBÆ°á»›c 5: XÃ¡c Minh Triá»ƒn Khai trÃªn AWS Console 5.1: XÃ¡c Minh API Gateway Äiá»u hÆ°á»›ng Ä‘áº¿n API Gateway Console Chá»n region: ap-southeast-1 Click vÃ o EveryoneCook-API-dev Dashboard API Gateway hiá»ƒn thá»‹ tÃªn API, stage, custom domain, tráº¡ng thÃ¡i caching vÃ  throttling settings\nClick vÃ o Stages â†’ api XÃ¡c minh stage settings: Cache Settings: Enabled (prod) / Disabled (dev) Cache capacity: 0.5 GB (chá»‰ prod) Default TTL: 300 seconds (chá»‰ prod) Throttling: 10000 requests/sec Burst: 5000 requests/sec Stage settings hiá»ƒn thá»‹ cáº¥u hÃ¬nh caching vÃ  throttling\nClick vÃ o Custom domain names XÃ¡c minh custom domain: Domain name: api-dev.everyonecook.cloud Certificate: ACM certificate (Regional) Base path mapping: / â†’ api stage Cáº¥u hÃ¬nh custom domain vá»›i ACM certificate\n5.2: XÃ¡c Minh Lambda Functions Äiá»u hÆ°á»›ng Ä‘áº¿n Lambda Console Chá»n region: ap-southeast-1 XÃ¡c minh táº¥t cáº£ 8 Lambda functions tá»“n táº¡i: TÃªn Function Runtime Memory Timeout Layer Source Code everyonecook-dev-api-router Node 20.x 512MB 30s SharedDependenciesLayer services/api-router everyonecook-dev-auth-user Node 20.x 512MB 30s SharedDependenciesLayer services/auth-module everyonecook-dev-social Node 20.x 512MB 30s SharedDependenciesLayer services/social-module everyonecook-dev-recipe-ai Node 20.x 512MB 30s SharedDependenciesLayer services/recipe-module everyonecook-dev-admin Node 20.x 512MB 30s SharedDependenciesLayer services/admin-module everyonecook-dev-upload Node 20.x 512MB 30s SharedDependenciesLayer services/upload-module everyonecook-dev-ai-worker Node 20.x 1024MB 60s SharedDependenciesLayer services/ai-module/workers everyonecook-dev-image-worker Node 20.x 512MB 60s SharedDependenciesLayer services/image-worker Danh sÃ¡ch Lambda functions hiá»ƒn thá»‹ táº¥t cáº£ 8 functions vá»›i runtime vÃ  configuration\nClick vÃ o everyonecook-dev-api-router XÃ¡c minh configuration: Environment variables: DYNAMODB_TABLE, USER_POOL_ID, v.v. Layers: SharedDependenciesLayer Triggers: API Gateway (Proxy integration) API Router function hiá»ƒn thá»‹ environment variables, layers, vÃ  API Gateway trigger\nClick vÃ o tab Monitoring XÃ¡c minh CloudWatch Logs integration: Log group: /aws/lambda/everyonecook-dev-api-router Retention: Dá»±a trÃªn environment config Dashboard monitoring Lambda hiá»ƒn thá»‹ CloudWatch Logs vÃ  metrics\n5.3: XÃ¡c Minh SQS Queues Äiá»u hÆ°á»›ng Ä‘áº¿n SQS Console Chá»n region: ap-southeast-1 XÃ¡c minh 4 queues hoáº¡t Ä‘á»™ng tá»“n táº¡i (2 main + 2 DLQs): LÆ°u Ã½: Chá»‰ AI vÃ  Image queues Ä‘Æ°á»£c sá»­ dá»¥ng tÃ­ch cá»±c. Analytics vÃ  Notification queues tá»“n táº¡i trong code nhÆ°ng khÃ´ng Ä‘Æ°á»£c triá»ƒn khai.\nTÃªn Queue Type Visibility Timeout Retention DLQ Tráº¡ng thÃ¡i Worker everyonecook-dev-ai-queue Main 2 phÃºt 4 ngÃ y everyonecook-dev-ai-dlq Hoáº¡t Ä‘á»™ng everyonecook-dev-ai-dlq DLQ 5 phÃºt 14 ngÃ y - - everyonecook-dev-image-queue Main 60 giÃ¢y 4 ngÃ y everyonecook-dev-image-dlq Hoáº¡t Ä‘á»™ng everyonecook-dev-image-dlq DLQ 5 phÃºt 14 ngÃ y - - Danh sÃ¡ch SQS queues hiá»ƒn thá»‹ 4 queues hoáº¡t Ä‘á»™ng: ai-queue, ai-dlq, image-queue, image-dlq\nClick vÃ o everyonecook-dev-ai-queue XÃ¡c minh queue configuration: Visibility timeout: 2 phÃºt Message retention: 4 ngÃ y Dead-letter queue: everyonecook-dev-ai-dlq Maximum receives: 3 Encryption: KMS managed Cáº¥u hÃ¬nh AI Queue hiá»ƒn thá»‹ visibility timeout, retention, DLQ, vÃ  encryption settings\nClick vÃ o tab Lambda triggers XÃ¡c minh Lambda trigger: Function: everyonecook-dev-ai-worker Batch size: 1 Batch window: 0 seconds AI Queue Lambda trigger hiá»ƒn thá»‹ ai-worker function vá»›i batch configuration\n5.4: XÃ¡c Minh WAF Web ACL Äiá»u hÆ°á»›ng Ä‘áº¿n WAF \u0026amp; Shield Console Chá»n region: ap-southeast-1 (Regional) Click vÃ o Web ACLs Click vÃ o EveryoneCook-API-WAF-dev Dashboard WAF Web ACL Ä‘á»ƒ báº£o vá»‡ EveryoneCook API\nClick vÃ o tab Rules XÃ¡c minh táº¥t cáº£ 5 rules tá»“n táº¡i: Priority TÃªn Rule Type Action Status 0 RateLimitRule Rate-based Block Enabled 1 AWSManagedRulesSQLi Managed Block Enabled 2 AWSManagedRulesKnownBadInputs Managed Block Enabled 3 AWSManagedRulesCoreRuleSet Managed Block Enabled 4 RequestSizeLimit Size constraint Block Enabled 5.5: XÃ¡c Minh CloudWatch Alarms Äiá»u hÆ°á»›ng Ä‘áº¿n CloudWatch Console Chá»n region: ap-southeast-1 Filter theo: EveryoneCook-dev-Backend CloudWatch alarms cho Backend Stack: Queue depth, Lambda errors/duration, WAF blocks\n5.6: XÃ¡c Minh Route 53 DNS Record Äiá»u hÆ°á»›ng Ä‘áº¿n Route 53 Console Click vÃ o Hosted zones Click vÃ o everyonecook.cloud XÃ¡c minh A record tá»“n táº¡i: Name: api-dev.everyonecook.cloud Type: A (Alias) Target: API Gateway domain name Routing policy: Simple Route 53 A record (Alias) trá» Ä‘áº¿n API Gateway custom domain\nBÆ°á»›c 6: Kiá»ƒm Tra API Endpoint Kiá»ƒm tra custom domain endpoint:\n# Kiá»ƒm tra API Gateway health endpoint (náº¿u tá»“n táº¡i) curl https://api-dev.everyonecook.cloud/health # Hoáº·c kiá»ƒm tra vá»›i browser start https://api-dev.everyonecook.cloud Pháº£n há»“i mong Ä‘á»£i (náº¿u health endpoint tá»“n táº¡i):\n{ \u0026#34;status\u0026#34;: \u0026#34;healthy\u0026#34;, \u0026#34;environment\u0026#34;: \u0026#34;dev\u0026#34;, \u0026#34;timestamp\u0026#34;: \u0026#34;2024-01-15T10:30:00Z\u0026#34; } Sá»± KhÃ¡c Biá»‡t Giá»¯a CÃ¡c Environment HÆ°á»›ng dáº«n nÃ y sá»­ dá»¥ng mÃ´i trÆ°á»ng Development (dev) lÃ m vÃ­ dá»¥. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c khÃ¡c biá»‡t chÃ­nh giá»¯a cÃ¡c mÃ´i trÆ°á»ng:\nDomain Names Environment API Domain Frontend Domain Dev api-dev.everyonecook.cloud dev.everyonecook.cloud Staging api-staging.everyonecook.cloud staging.everyonecook.cloud Prod api.everyonecook.cloud everyonecook.cloud Resource Naming Loáº¡i Resource Dev Staging Prod Stack Name EveryoneCook-dev-Backend EveryoneCook-staging-Backend EveryoneCook-prod-Backend API Gateway EveryoneCook-API-dev EveryoneCook-API-staging EveryoneCook-API-prod Lambda everyonecook-dev-auth-user everyonecook-staging-auth-user everyonecook-prod-auth-user SQS Queue everyonecook-dev-ai-queue everyonecook-staging-ai-queue everyonecook-prod-ai-queue WAF EveryoneCook-API-WAF-dev EveryoneCook-API-WAF-staging EveryoneCook-API-WAF-prod Sá»± KhÃ¡c Biá»‡t Cáº¥u HÃ¬nh Setting Dev Staging Production API Caching Táº¯t Táº¯t Báº­t (0.5GB) Data Trace Logging Báº­t Báº­t Táº¯t Log Retention 7 ngÃ y 30 ngÃ y 90 ngÃ y CloudWatch Removal DESTROY DESTROY RETAIN WAF Rate Limit 2000 req/5min 2000 req/5min 5000 req/5min Lambda Log Level DEBUG INFO INFO CORS Localhost Cho phÃ©p KhÃ´ng cho phÃ©p KhÃ´ng cho phÃ©p Lá»‡nh Triá»ƒn Khai # Development npx cdk deploy EveryoneCook-dev-Backend --context environment=dev # Staging npx cdk deploy EveryoneCook-staging-Backend --context environment=staging # Production (yÃªu cáº§u approval) npx cdk deploy EveryoneCook-prod-Backend --context environment=prod --require-approval broadening CÃ¢n Nháº¯c Äáº·c ThÃ¹ Cho Tá»«ng Environment Development CORS cho phÃ©p http://localhost:3000 Ä‘á»ƒ kiá»ƒm tra frontend local Data trace logging báº­t Ä‘á»ƒ debug Log retention tháº¥p hÆ¡n (7 ngÃ y) Ä‘á»ƒ giáº£m chi phÃ­ Resources bá»‹ xÃ³a khi xÃ³a stack (RemovalPolicy.DESTROY) Staging Cáº¥u hÃ¬nh giá»‘ng production Ä‘á»ƒ kiá»ƒm tra pre-release Domain riÃªng Ä‘á»ƒ trÃ¡nh áº£nh hÆ°á»Ÿng production CÃ¡c quy táº¯c báº£o máº­t giá»‘ng production Resources bá»‹ xÃ³a khi xÃ³a stack Production API Gateway caching báº­t (0.5GB, 5-min TTL) Data trace logging táº¯t (tá»‘i Æ°u chi phÃ­) Log retention 90 ngÃ y Ä‘á»ƒ tuÃ¢n thá»§ Resources Ä‘Æ°á»£c giá»¯ láº¡i khi xÃ³a stack (RemovalPolicy.RETAIN) WAF rate limits nghiÃªm ngáº·t hÆ¡n KhÃ´ng cÃ³ localhost CORS PhÃ¢n TÃ­ch Chi PhÃ­ PhÃ¢n TÃ­ch Chi PhÃ­ HÃ ng ThÃ¡ng (Dev Environment) Dá»‹ch vá»¥ Cáº¥u hÃ¬nh Chi phÃ­ hÃ ng thÃ¡ng API Gateway 1M requests, caching táº¯t ~$3.50 Lambda (6 functions) 512MB, 1M invocations, 200ms avg ~$8.40 Lambda (2 workers) 512-1024MB, 10K invocations ~$0.42 SQS (2 queues) 10K messages/thÃ¡ng ~$0.03 WAF Web ACL 1 ACL + 5 rules + 1M requests ~$10.60 CloudWatch Logs 5GB ingestion, 30-day retention ~$2.50 CloudWatch Alarms 10 alarms ~$1.00 Tá»•ng Backend Stack ~$26.45/thÃ¡ng Æ¯á»›c TÃ­nh Chi PhÃ­ Production Dá»‹ch vá»¥ Cáº¥u hÃ¬nh Chi phÃ­ hÃ ng thÃ¡ng API Gateway 10M requests, caching báº­t (0.5GB) ~$50.00 Lambda (6 functions) 512MB, 10M invocations, 200ms avg ~$84.00 Lambda (2 workers) 512-1024MB, 100K invocations ~$4.20 SQS (2 queues) 100K messages/thÃ¡ng ~$0.25 WAF Web ACL 1 ACL + 5 rules + 10M requests ~$16.00 CloudWatch Logs 20GB ingestion, 90-day retention ~$10.00 CloudWatch Alarms 15 alarms ~$1.50 Tá»•ng Backend Stack ~$165.95/thÃ¡ng CÃ¡c BÆ°á»›c Tiáº¿p Theo Sau khi triá»ƒn khai Backend Stack:\nTriá»ƒn khai Frontend Stack (Phase 5) - á»¨ng dá»¥ng Next.js trÃªn CloudFront Triá»ƒn khai Observability Stack (Phase 6) - CloudWatch dashboards vÃ  alarms Kiá»ƒm tra API Integration - XÃ¡c minh táº¥t cáº£ endpoints hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c Load Testing - Kiá»ƒm tra hiá»‡u nÄƒng vÃ  kháº£ nÄƒng má»Ÿ rá»™ng Security Audit - Xem láº¡i WAF rules vÃ  access controls TÃ i Liá»‡u Tham Kháº£o Infrastructure Code Backend Stack: infrastructure/lib/stacks/backend-stack.ts (2965 dÃ²ng) Shared Layer Construct: infrastructure/lib/constructs/shared-layer.ts Lambda Function Source Code (6 Business Functions) API Router: services/api-router/ - Request routing \u0026amp; JWT validation Auth User Module: services/auth-module/ - Authentication \u0026amp; user profiles Social Module: services/social-module/ - Posts, comments, friends, notifications Recipe AI Module: services/recipe-module/ - Recipe CRUD, AI generation, search Admin Module: services/admin-module/ - Content moderation, user management Upload Module: services/upload-module/ - S3 presigned URLs, file uploads Worker Lambda Source Code (2 Active Workers) AI Worker: services/ai-module/workers/ - Bedrock Claude 3 Haiku integration Image Worker: services/image-worker/ - Image optimization (resize, compress) Shared Dependencies Shared Layer: layers/shared-dependencies/ - AWS SDK v3, uuid, jsonwebtoken, jwks-rsa Other Services (KhÃ´ng trong Backend Stack) WebSocket Module: services/websocket-module/ - Real-time communication (stack riÃªng) Shared Utilities: services/shared/ - Common utilities across services TÃ³m Táº¯t Backend Stack lÃ  stack lá»›n nháº¥t vÃ  phá»©c táº¡p nháº¥t trong háº¡ táº§ng EveryoneCook. NÃ³ tá»•ng há»£p:\nAPI Gateway vá»›i custom domain (caching chá»‰ trong prod) 6 Lambda functions cho business logic 2 SQS queues hoáº¡t Ä‘á»™ng cho async processing (tá»•ng 4 vá»›i DLQs) 2 worker Lambda functions (AI Worker, Image Worker) WAF Web ACL cho báº£o máº­t (5 quy táº¯c báº£o vá»‡) CloudWatch monitoring vÃ  alarms Thá»±c Sá»± ÄÆ°á»£c Triá»ƒn Khai: 8 Lambda functions, 4 SQS queues (2 hoáº¡t Ä‘á»™ng vá»›i workers), 1 WAF Web ACL, CloudWatch alarms\nDevelopment Environment Checklist Chuáº©n bá»‹ táº¥t cáº£ Lambda deployment packages (8 functions + 1 layer) Xem láº¡i cáº¥u hÃ¬nh mÃ´i trÆ°á»ng dev XÃ¡c minh caching táº¯t (chá»‰ prod) Kiá»ƒm tra tá»«ng Lambda function Ä‘á»™c láº­p Theo dÃµi CloudWatch alarms XÃ¡c minh WAF rules khÃ´ng cháº·n legitimate traffic Kiá»ƒm tra localhost CORS (chá»‰ dev) Cho Staging/Production Deployment Xem láº¡i Sá»± KhÃ¡c Biá»‡t Giá»¯a CÃ¡c Environment Báº­t API Gateway caching (chá»‰ prod) Táº¯t data trace logging (chá»‰ prod) Thiáº¿t láº­p log retention phÃ¹ há»£p (90 ngÃ y cho prod) Cáº­p nháº­t WAF rate limits (cao hÆ¡n cho prod) Loáº¡i bá» localhost khá»i CORS Sá»­ dá»¥ng --require-approval broadening cho production Thá»© Tá»± Triá»ƒn Khai: DNS â†’ Certificate â†’ Core â†’ Auth â†’ Backend â†’ Frontend â†’ Observability\nEnvironments: HÆ°á»›ng dáº«n nÃ y minh há»a triá»ƒn khai dev. Láº·p láº¡i cho staging vÃ  prod vá»›i cáº¥u hÃ¬nh phÃ¹ há»£p.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.06-configure-api-lambda/",
	"title": "Cáº¥u hÃ¬nh API &amp; Lambda",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Sau khi deploy infrastructure, báº¡n cáº§n cáº¥u hÃ¬nh API Gateway routes vÃ  Lambda functions Ä‘á»ƒ xá»­ lÃ½ business logic.\nKiáº¿n trÃºc API API Gateway (api.everyonecook.cloud)\râ†“\rAPI Router Lambda (entry point)\râ†“\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Auth â”‚ Social â”‚ Recipe â”‚ Admin â”‚ Upload â”‚\râ”‚ Module â”‚ Module â”‚ AI â”‚ Module â”‚ Module â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ†“ â†“ â†“ â†“ â†“\rDynamoDB DynamoDB Bedrock DynamoDB S3 BÆ°á»›c 1: Review API Routes Cáº¥u trÃºc API Router:\n// services/api-router/routes/index.ts export const routes = { // Auth routes \u0026#39;POST /auth/register\u0026#39;: \u0026#39;auth-module\u0026#39;, \u0026#39;POST /auth/login\u0026#39;: \u0026#39;auth-module\u0026#39;, \u0026#39;GET /auth/profile\u0026#39;: \u0026#39;auth-module\u0026#39;, \u0026#39;PUT /auth/profile\u0026#39;: \u0026#39;auth-module\u0026#39;, // Social routes \u0026#39;GET /social/posts\u0026#39;: \u0026#39;social-module\u0026#39;, \u0026#39;POST /social/posts\u0026#39;: \u0026#39;social-module\u0026#39;, \u0026#39;GET /social/posts/:id\u0026#39;: \u0026#39;social-module\u0026#39;, \u0026#39;POST /social/posts/:id/like\u0026#39;: \u0026#39;social-module\u0026#39;, // Recipe routes \u0026#39;GET /recipes\u0026#39;: \u0026#39;recipe-module\u0026#39;, \u0026#39;POST /recipes\u0026#39;: \u0026#39;recipe-module\u0026#39;, \u0026#39;POST /ai/generate-recipe\u0026#39;: \u0026#39;recipe-module\u0026#39;, \u0026#39;POST /ai/search\u0026#39;: \u0026#39;recipe-module\u0026#39;, // Admin routes \u0026#39;GET /admin/users\u0026#39;: \u0026#39;admin-module\u0026#39;, \u0026#39;POST /admin/users/:id/ban\u0026#39;: \u0026#39;admin-module\u0026#39;, // Upload routes \u0026#39;POST /upload/presigned-url\u0026#39;: \u0026#39;upload-module\u0026#39;, \u0026#39;POST /upload/complete\u0026#39;: \u0026#39;upload-module\u0026#39; }; BÆ°á»›c 2: Cáº¥u hÃ¬nh Lambda Modules 1. Auth Module\ncd services/auth-module # Review cáº¥u hÃ¬nh cat package.json cat tsconfig.json # Kiá»ƒm tra environment variables cáº§n thiáº¿t cat index.ts | grep process.env Environment Variables:\nTABLE_NAME: TÃªn DynamoDB table USER_POOL_ID: Cognito User Pool ID REGION: AWS region 2. Social Module\ncd services/social-module # Review handlers ls handlers/ # - posts.handler.ts # - comments.handler.ts # - reactions.handler.ts # - friends.handler.ts 3. Recipe/AI Module\ncd services/recipe-module # Kiá»ƒm tra cáº¥u hÃ¬nh AI cat services/ai.service.ts Environment Variables:\nBEDROCK_MODEL_ID: Claude 3.5 Sonnet v2 BEDROCK_REGION: us-east-1 OPENSEARCH_ENDPOINT: OpenSearch domain (náº¿u enabled) 4. Admin Module\ncd services/admin-module # Review admin operations ls handlers/ 5. Upload Module\ncd services/upload-module # Kiá»ƒm tra cáº¥u hÃ¬nh S3 cat services/s3.service.ts Environment Variables:\nCONTENT_BUCKET: TÃªn S3 content bucket CLOUDFRONT_DOMAIN: CloudFront domain CLOUDFRONT_KEY_PAIR_ID: Cho signed URLs BÆ°á»›c 3: Cáº¥u hÃ¬nh Lambda Layers Shared Dependencies:\ncd services/shared # Review shared code ls -la # - repositories/ # - business-logic/ # - utils/ # - types/ Cáº¥u trÃºc Lambda Layer:\nshared/\râ”œâ”€â”€ repositories/\râ”‚ â”œâ”€â”€ user.repository.ts\râ”‚ â”œâ”€â”€ post.repository.ts\râ”‚ â””â”€â”€ recipe.repository.ts\râ”œâ”€â”€ business-logic/\râ”‚ â”œâ”€â”€ auth.logic.ts\râ”‚ â””â”€â”€ validation.logic.ts\râ””â”€â”€ utils/\râ”œâ”€â”€ dynamodb.utils.ts\râ””â”€â”€ response.utils.ts BÆ°á»›c 4: Thiáº¿t láº­p Lambda Environment Variables 1. Láº¥y Stack Outputs\n# Láº¥y DynamoDB table name TABLE_NAME=$(aws cloudformation describe-stacks \\ --stack-name EveryoneCook-dev-Core \\ --query \u0026#39;Stacks[0].Outputs[?OutputKey==`DynamoDBTableName`].OutputValue\u0026#39; \\ --output text) # Láº¥y User Pool ID USER_POOL_ID=$(aws cloudformation describe-stacks \\ --stack-name EveryoneCook-dev-Auth \\ --query \u0026#39;Stacks[0].Outputs[?OutputKey==`UserPoolId`].OutputValue\u0026#39; \\ --output text) # Láº¥y Content Bucket CONTENT_BUCKET=$(aws cloudformation describe-stacks \\ --stack-name EveryoneCook-dev-Core \\ --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ContentBucketName`].OutputValue\u0026#39; \\ --output text) echo \u0026#34;TABLE_NAME=$TABLE_NAME\u0026#34; echo \u0026#34;USER_POOL_ID=$USER_POOL_ID\u0026#34; echo \u0026#34;CONTENT_BUCKET=$CONTENT_BUCKET\u0026#34; 2. Cáº­p nháº­t Lambda Environment Variables\nLambda environment variables Ä‘Æ°á»£c thiáº¿t láº­p tá»± Ä‘á»™ng bá»Ÿi CDK stack, nhÆ°ng báº¡n cÃ³ thá»ƒ xÃ¡c minh:\n# Kiá»ƒm tra Auth Module environment variables aws lambda get-function-configuration \\ --function-name EveryoneCook-dev-AuthModule \\ --query \u0026#39;Environment.Variables\u0026#39; # Pháº£i hiá»ƒn thá»‹: # { # \u0026#34;TABLE_NAME\u0026#34;: \u0026#34;EveryoneCook-dev\u0026#34;, # \u0026#34;USER_POOL_ID\u0026#34;: \u0026#34;us-east-1_ABC123\u0026#34;, # \u0026#34;REGION\u0026#34;: \u0026#34;us-east-1\u0026#34; # } BÆ°á»›c 5: Cáº¥u hÃ¬nh API Gateway 1. Review API Gateway Configuration\n# Láº¥y API Gateway ID API_ID=$(aws cloudformation describe-stacks \\ --stack-name EveryoneCook-dev-Backend \\ --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ApiId`].OutputValue\u0026#39; \\ --output text) # Láº¥y API details aws apigateway get-rest-api --rest-api-id $API_ID 2. Kiá»ƒm tra Cognito Authorizer\n# Liá»‡t kÃª authorizers aws apigateway get-authorizers --rest-api-id $API_ID # Pháº£i hiá»ƒn thá»‹ Cognito User Pool authorizer 3. XÃ¡c minh Custom Domain\n# Kiá»ƒm tra custom domain mapping aws apigateway get-domain-name --domain-name api.everyonecook.cloud # Pháº£i hiá»ƒn thá»‹: # - Domain name: api.everyonecook.cloud # - Certificate ARN # - Regional domain name BÆ°á»›c 6: Cáº¥u hÃ¬nh SQS Queues 1. Liá»‡t kÃª Táº¥t cáº£ Queues\n# Liá»‡t kÃª SQS queues aws sqs list-queues | grep EveryoneCook-dev # Pháº£i hiá»ƒn thá»‹ 12 queues (6 main + 6 DLQ) 2. Cáº¥u hÃ¬nh Queue Permissions\nPermissions Ä‘Æ°á»£c thiáº¿t láº­p tá»± Ä‘á»™ng bá»Ÿi CDK, xÃ¡c minh:\n# Láº¥y AI Queue URL AI_QUEUE_URL=$(aws sqs list-queues \\ --queue-name-prefix EveryoneCook-dev-AIQueue \\ | jq -r \u0026#39;.QueueUrls[0]\u0026#39;) # Kiá»ƒm tra queue attributes aws sqs get-queue-attributes \\ --queue-url $AI_QUEUE_URL \\ --attribute-names All BÆ°á»›c 7: Cáº¥u hÃ¬nh Lambda Triggers Cognito Lambda Triggers:\n# Kiá»ƒm tra User Pool triggers aws cognito-idp describe-user-pool \\ --user-pool-id $USER_POOL_ID \\ --query \u0026#39;UserPool.LambdaConfig\u0026#39; # Pháº£i hiá»ƒn thá»‹ 5 triggers: # - PreSignUp # - PostConfirmation # - PreAuthentication # - PostAuthentication # - CustomMessage BÆ°á»›c 8: Test Lambda Functions Locally 1. Test Auth Module\ncd services/auth-module # Cháº¡y tests npm test # Test specific handler npm run test:unit -- handlers/profile.test.ts 2. Test API Router\ncd services/api-router # Test routing logic npm test # Test vá»›i sample event node -e \u0026#34; const handler = require(\u0026#39;./dist/index\u0026#39;).handler; const event = { httpMethod: \u0026#39;GET\u0026#39;, path: \u0026#39;/health\u0026#39;, headers: {} }; handler(event).then(console.log); \u0026#34; BÆ°á»›c 9: XÃ¡c minh IAM Permissions 1. Kiá»ƒm tra Lambda Execution Roles\n# Liá»‡t kÃª Lambda functions aws lambda list-functions \\ --query \u0026#39;Functions[?contains(FunctionName, `EveryoneCook-dev`)].FunctionName\u0026#39; # Kiá»ƒm tra role cho Auth Module aws lambda get-function \\ --function-name EveryoneCook-dev-AuthModule \\ --query \u0026#39;Configuration.Role\u0026#39; 2. XÃ¡c minh DynamoDB Permissions\n# Láº¥y role name ROLE_NAME=$(aws lambda get-function \\ --function-name EveryoneCook-dev-AuthModule \\ --query \u0026#39;Configuration.Role\u0026#39; \\ --output text | cut -d\u0026#39;/\u0026#39; -f2) # Liá»‡t kÃª attached policies aws iam list-attached-role-policies --role-name $ROLE_NAME # Pháº£i bao gá»“m DynamoDB access policy Checklist Cáº¥u hÃ¬nh API routes Ä‘Ã£ review vÃ  hiá»ƒu rÃµ Cáº¥u trÃºc Lambda modules Ä‘Ã£ review Environment variables Ä‘Ã£ xÃ¡c minh Lambda layers Ä‘Ã£ cáº¥u hÃ¬nh API Gateway custom domain hoáº¡t Ä‘á»™ng Cognito authorizer Ä‘Ã£ cáº¥u hÃ¬nh SQS queues Ä‘Ã£ táº¡o vÃ  accessible Lambda triggers Ä‘Ã£ attach vÃ o Cognito IAM permissions Ä‘Ã£ xÃ¡c minh Local tests passing BÆ°á»›c tiáº¿p theo Sau khi hoÃ n thÃ nh cáº¥u hÃ¬nh, tiáº¿p tá»¥c vá»›i Deploy Backend Services Ä‘á»ƒ deploy Lambda code cá»§a báº¡n.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/3-blogstranslated/3.6-blog6/",
	"title": "Blog 6",
	"tags": [],
	"description": "",
	"content": "AWS for Database : Native SQL Server Replication Options on Amazon RDS Custom for SQL Server (AWS Database, Amazon RDS Custom, SQL Server, Replication, Data \u0026amp; Analytics, Industries)\nIntroduction CÃ¡c á»©ng dá»¥ng hiá»‡n Ä‘áº¡i thÆ°á»ng yÃªu cáº§u kháº£ nÄƒng phÃ¢n phá»‘i dá»¯ liá»‡u Ä‘Ã¡ng tin cáº­y vÃ  tÃ­nh sáºµn sÃ ng cao trÃªn nhiá»u cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ há»— trá»£ hoáº¡t Ä‘á»™ng kinh doanh quan trá»ng. SQL Server Replication cho phÃ©p quáº£n trá»‹ viÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u (DBA) tá»± Ä‘á»™ng phÃ¢n phá»‘i dá»¯ liá»‡u giá»¯a cÃ¡c cÆ¡ sá»Ÿ dá»¯ liá»‡u theo thá»i gian gáº§n nhÆ° thá»±c, giÃºp giáº£m táº£i cÃ¡c tÃ¡c vá»¥ Ä‘á»c náº·ng tá»« há»‡ thá»‘ng sáº£n xuáº¥t vÃ  Ä‘á»“ng bá»™ dá»¯ liá»‡u giá»¯a cÃ¡c vÃ¹ng hoáº·c cÃ¡c mÃ´i trÆ°á»ng cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c nhau.\nAmazon RDS Custom for SQL Server lÃ  dá»‹ch vá»¥ Ä‘Æ°á»£c quáº£n lÃ½ káº¿t há»£p giá»¯a sá»± linh hoáº¡t cá»§a cÆ¡ sá»Ÿ dá»¯ liá»‡u tá»± quáº£n vÃ  cÃ¡c lá»£i Ã­ch tá»± Ä‘á»™ng hÃ³a cá»§a má»™t dá»‹ch vá»¥ hoÃ n toÃ n Ä‘Æ°á»£c quáº£n lÃ½. Vá»›i RDS Custom, báº¡n cÃ³ thá»ƒ táº­n dá»¥ng cÃ¡c tÃ­nh nÄƒng replication gá»‘c cá»§a SQL Server trong khi AWS xá»­ lÃ½ cÃ¡c tÃ¡c vá»¥ háº¡ táº§ng nhÆ° backup, vÃ¡ lá»—i, snapshot vÃ  giÃ¡m sÃ¡t.\nBlog nÃ y khÃ¡m phÃ¡ cÃ¡ch cáº¥u hÃ¬nh SQL Server Replication trÃªn RDS Custom, bao gá»“m cÃ¡c loáº¡i replication Ä‘Æ°á»£c há»— trá»£ (snapshot, transactional, merge, peer-to-peer) vÃ  hÆ°á»›ng dáº«n tá»«ng bÆ°á»›c Ä‘á»ƒ cáº¥u hÃ¬nh distributor, publication vÃ  subscription.\nAmazon Web Services, Inc.\n1. Supported Replication Types \u0026amp; Comparison Table 1.1 Roles \u0026amp; Capabilities of RDS Custom Role / Replication Mode RDS for SQL Server RDS Custom for SQL Server Publisher No Yes Distributor No Yes Pull Subscriber No Yes Push Subscriber Yes Yes RDS Custom má»Ÿ rá»™ng kháº£ nÄƒng vÆ°á»£t xa RDS tiÃªu chuáº©n báº±ng cÃ¡ch há»— trá»£ cÃ¡c vai trÃ² nhÆ° Publisher vÃ  Distributor, vá»‘n thÆ°á»ng khÃ´ng Ä‘Æ°á»£c phÃ©p trÃªn cÃ¡c báº£n RDS thÃ´ng thÆ°á»ng.\nAmazon Web Services, Inc.\n1.2 SQL Server Replication Types Replication Type Supported on RDS for SQL Server Supported on RDS Custom Notes Transactional Yes (as subscriber only) Yes Phá»• biáº¿n cho Ä‘á»“ng bá»™ gáº§n thá»i gian thá»±c â€” Amazon Web Services, Inc. Snapshot Yes (as subscriber only) Yes Chá»¥p láº¡i tráº¡ng thÃ¡i dá»¯ liá»‡u táº¡i má»™t thá»i Ä‘iá»ƒm â€” Amazon Web Services, Inc. Merge No Yes (with limitations) YÃªu cáº§u dÃ¹ng hostname thay cho CNAME khi thay tháº¿ host â€” Amazon Web Services, Inc. Peer-to-peer No Yes (with limitations) Cáº§n cáº¥u hÃ¬nh hostname Ä‘á»ƒ trÃ¡nh lá»—i khi host replacement â€” Amazon Web Services, Inc. LÆ°u Ã½: Merge vÃ  peer-to-peer replication trÃªn RDS Custom yÃªu cáº§u sá»­ dá»¥ng hostname thay vÃ¬ CNAME Ä‘á»ƒ trÃ¡nh lá»—i khi cÃ³ thay tháº¿ host.\nAmazon Web Services, Inc.\n2. Solution Overview \u0026amp; Architecture Giáº£i phÃ¡p gá»‘c minh há»a kiáº¿n trÃºc máº«u vá»›i hai instance RDS Custom trong cÃ¹ng má»™t vÃ¹ng (region). Má»™t instance Ä‘Ã³ng vai trÃ² Publisher kiÃªm Distributor, trong khi instance cÃ²n láº¡i Ä‘Ã³ng vai trÃ² Subscriber. Replication Ä‘Æ°á»£c xá»­ lÃ½ thÃ´ng qua publication vÃ  subscription.\nAmazon Web Services, Inc.\nTrÆ°á»›c khi cáº¥u hÃ¬nh replication, hÃ£y Ä‘áº£m báº£o:\nCáº£ hai instance RDS Custom Ä‘á»u Ä‘Æ°á»£c triá»ƒn khai vá»›i cáº¥u hÃ¬nh máº¡ng vÃ  domain phÃ¹ há»£p (náº¿u dÃ¹ng Kerberos).\nAmazon Web Services, Inc.\nTÃªn server (@@SERVERNAME) trÃ¹ng vá»›i hostname DNS Ä‘Æ°á»£c dÃ¹ng cho replication.\nAmazon Web Services, Inc.\nSQL Server Agent Ä‘Æ°á»£c báº­t trÃªn cáº£ publisher vÃ  subscriber.\nAmazon Web Services, Inc.\nKáº¿t ná»‘i máº¡ng (cá»•ng 1433) giá»¯a cÃ¡c instance Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng.\nAmazon Web Services, Inc.\n3. Transactional Replication Configuration Guide Below are the steps to set up transactional replication between RDS Custom for SQL Server instances.\nAmazon Web Services, Inc.\nStep 1: Update the Server Name (SERVERNAME) if Needed Connect to each instance (publisher and subscriber) and check the current value of @@SERVERNAME.\nIf the current server name does not match the hostname/CNAME you plan to use, execute:\nSELECT @@SERVERNAME AS \u0026#39;Current_Server_Name\u0026#39;; EXEC sp_dropserver \u0026#39;old_server_name\u0026#39;; EXEC sp_addserver \u0026#39;new_cname\u0026#39;, \u0026#39;local\u0026#39;; Step 2: Create the Publication on the Publisher: CREATE DATABASE PublicationDB; GO USE PublicationDB; GO CREATE TABLE Tracker ( Date DATE, RPO TIME, Status VARCHAR(255), PRIMARY KEY (RPO) ); GO INSERT INTO Tracker VALUES (CAST(GETDATE() AS Date), CAST(GETDATE() AS time(7)), \u0026#39;Success\u0026#39;); GO On the Subscriber: CREATE DATABASE SubscriptionDB; GO BÆ°á»›c 3: Táº¡o Publication vÃ  Subscription TrÃªn Publisher, má»Ÿ Replication \u0026gt; New Publication Wizard Chá»n database PublicationDB vÃ  chá»n báº£ng Tracker lÃ m article Táº¡o má»™t subscription trá» Ä‘áº¿n instance Subscriber Chá»n push subscription, vá»›i agent cháº¡y trÃªn Distributor (cÃ³ thá»ƒ Ä‘áº·t trÃªn cÃ¹ng instance vá»›i Publisher náº¿u Ä‘Ã£ cáº¥u hÃ¬nh) Sau khi hoÃ n táº¥t cáº¥u hÃ¬nh, báº¡n cÃ³ thá»ƒ theo dÃµi hoáº¡t Ä‘á»™ng replication báº±ng Replication Monitor 4. Advantages, Limitations \u0026amp; Considerations Advantages Há»— trá»£ replication gá»‘c cá»§a SQL Server trÃªn RDS Custom â€” khÃ´ng cáº§n xÃ¢y dá»±ng há»‡ thá»‘ng replication bÃªn ngoÃ i Cung cáº¥p nhiá»u loáº¡i replication (transactional, snapshot, merge, peer-to-peer) Ä‘á»ƒ Ä‘Ã¡p á»©ng nhiá»u trÆ°á»ng há»£p sá»­ dá»¥ng GiÃºp giáº£m táº£i workload phÃ¢n tÃ­ch khá»i há»‡ thá»‘ng sáº£n xuáº¥t Limitations \u0026amp; Risks Merge vÃ  peer-to-peer replication yÃªu cáº§u cáº¥u hÃ¬nh hostname vÃ  cÃ³ thá»ƒ gáº·p váº¥n Ä‘á» khi thay tháº¿ host Äá»™ trá»… cÃ³ thá»ƒ xáº£y ra khi workload giao dá»‹ch cao Viá»‡c thay Ä‘á»•i tÃªn server (@@SERVERNAME) yÃªu cáº§u khá»Ÿi Ä‘á»™ng láº¡i vÃ  cáº§n Ä‘Æ°á»£c thá»±c hiá»‡n cáº©n tháº­n CÃ¡c replication agent (Snapshot, Log Reader, Distribution) pháº£i Ä‘Æ°á»£c giÃ¡m sÃ¡t Ä‘á»ƒ trÃ¡nh lá»—i Practical Considerations Äáº£m báº£o DNS/hostname á»•n Ä‘á»‹nh â€” khÃ´ng phá»¥ thuá»™c hoÃ n toÃ n vÃ o CNAME khi cÃ³ kháº£ nÄƒng xáº£y ra host replacement XÃ¡c nháº­n SQL Server Agent Ä‘Æ°á»£c cáº¥u hÃ¬nh auto-start Cáº¥u hÃ¬nh cÃ¡c tÃ i khoáº£n Windows hoáº·c tÃ i khoáº£n domain phÃ¹ há»£p cho cÃ¡c replication agent (Snapshot Agent, Log Reader Agent, Distributor Agent) GiÃ¡m sÃ¡t Ä‘á»™ trá»… vÃ  lá»—i replication thÃ´ng qua SQL Server Replication Monitor Conclusion Amazon RDS Custom for SQL Server allows you to use native SQL Server replication features that are not supported on standard RDS instances. You can deploy snapshot, transactional, merge, or peer-to-peer replication depending on your needs, with special attention to hostname configuration, server name settings, agent permissions, and network access.\nFor environments requiring data distribution across multiple databases, high availability, or separate analytical workloads, native replication on RDS Custom provides powerful benefits without the need to build an external replication solution.\nAbout the Author Sudhir Amin Sudhir lÃ  Kiáº¿n trÃºc sÆ° giáº£i phÃ¡p cao cáº¥p (Senior Solutions Architect) táº¡i Amazon Web Services, lÃ m viá»‡c táº¡i New York. Anh cung cáº¥p hÆ°á»›ng dáº«n kiáº¿n trÃºc vÃ  há»— trá»£ ká»¹ thuáº­t cho cÃ¡c khÃ¡ch hÃ ng doanh nghiá»‡p trÃªn nhiá»u lÄ©nh vá»±c khÃ¡c nhau, giÃºp há» Ä‘áº©y nhanh quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i vÃ  á»©ng dá»¥ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y. NgoÃ i cÃ´ng viá»‡c, Sudhir Ä‘am mÃª bi-a (snooker) vÃ  cÃ¡c mÃ´n thá»ƒ thao Ä‘á»‘i khÃ¡ng nhÆ° boxing vÃ  UFC. Anh cÅ©ng thÃ­ch du lá»‹ch Ä‘áº¿n cÃ¡c khu báº£o tá»“n thiÃªn nhiÃªn trÃªn kháº¯p tháº¿ giá»›i Ä‘á»ƒ quan sÃ¡t cÃ¡c loÃ i Ä‘á»™ng váº­t hoang dÃ£ trong mÃ´i trÆ°á»ng tá»± nhiÃªn cá»§a chÃºng.\nMesgana Gormley Mesgana lÃ  Kiáº¿n trÃºc sÆ° giáº£i phÃ¡p chuyÃªn gia cÆ¡ sá»Ÿ dá»¯ liá»‡u cao cáº¥p (Senior Database Specialist Solution Architect) thuá»™c bá»™ pháº­n Worldwide Public Sector (WWPS) táº¡i Amazon Web Services (AWS), lÃ m viá»‡c cÃ¹ng nhÃ³m Amazon RDS. CÃ´ táº­p trung vÃ o viá»‡c cung cáº¥p hÆ°á»›ng dáº«n ká»¹ thuáº­t cho khÃ¡ch hÃ ng AWS, há»— trá»£ há» di chuyá»ƒn, thiáº¿t káº¿, triá»ƒn khai vÃ  tá»‘i Æ°u hÃ³a cÃ¡c khá»‘i lÆ°á»£ng cÃ´ng viá»‡c cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ trÃªn AWS má»™t cÃ¡ch hiá»‡u quáº£. NgoÃ i cÃ´ng viá»‡c, Mesgana yÃªu thÃ­ch du lá»‹ch vÃ  dÃ nh thá»i gian bÃªn gia Ä‘Ã¬nh, báº¡n bÃ¨.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/6-self-evaluation/",
	"title": "Tá»± Ä‘Ã¡nh giÃ¡",
	"tags": [],
	"description": "",
	"content": "Trong suá»‘t thá»i gian thá»±c táº­p táº¡i [TÃªn cÃ´ng ty/tá»• chá»©c] tá»« [ngÃ y báº¯t Ä‘áº§u] Ä‘áº¿n [ngÃ y káº¿t thÃºc], tÃ´i Ä‘Ã£ cÃ³ cÆ¡ há»™i há»c há»i, rÃ¨n luyá»‡n vÃ  Ã¡p dá»¥ng kiáº¿n thá»©c Ä‘Ã£ Ä‘Æ°á»£c trang bá»‹ táº¡i trÆ°á»ng vÃ o mÃ´i trÆ°á»ng lÃ m viá»‡c thá»±c táº¿.\nTÃ´i Ä‘Ã£ tham gia [mÃ´ táº£ ngáº¯n gá»n dá»± Ã¡n hoáº·c cÃ´ng viá»‡c chÃ­nh], qua Ä‘Ã³ cáº£i thiá»‡n ká»¹ nÄƒng [liá»‡t kÃª ká»¹ nÄƒng: láº­p trÃ¬nh, phÃ¢n tÃ­ch, viáº¿t bÃ¡o cÃ¡o, giao tiáº¿pâ€¦].\nVá» tÃ¡c phong, tÃ´i luÃ´n cá»‘ gáº¯ng hoÃ n thÃ nh tá»‘t nhiá»‡m vá»¥, tuÃ¢n thá»§ ná»™i quy, vÃ  tÃ­ch cá»±c trao Ä‘á»•i vá»›i Ä‘á»“ng nghiá»‡p Ä‘á»ƒ nÃ¢ng cao hiá»‡u quáº£ cÃ´ng viá»‡c.\nÄá»ƒ pháº£n Ã¡nh má»™t cÃ¡ch khÃ¡ch quan quÃ¡ trÃ¬nh thá»±c táº­p, tÃ´i xin tá»± Ä‘Ã¡nh giÃ¡ báº£n thÃ¢n dá»±a trÃªn cÃ¡c tiÃªu chÃ­ dÆ°á»›i Ä‘Ã¢y:\nSTT TiÃªu chÃ­ MÃ´ táº£ Tá»‘t KhÃ¡ Trung bÃ¬nh 1 Kiáº¿n thá»©c vÃ  ká»¹ nÄƒng chuyÃªn mÃ´n Hiá»ƒu biáº¿t vá» ngÃ nh, Ã¡p dá»¥ng kiáº¿n thá»©c vÃ o thá»±c táº¿, ká»¹ nÄƒng sá»­ dá»¥ng cÃ´ng cá»¥, cháº¥t lÆ°á»£ng cÃ´ng viá»‡c âœ… â˜ â˜ 2 Kháº£ nÄƒng há»c há»i Tiáº¿p thu kiáº¿n thá»©c má»›i, há»c há»i nhanh â˜ âœ… â˜ 3 Chá»§ Ä‘á»™ng Tá»± tÃ¬m hiá»ƒu, nháº­n nhiá»‡m vá»¥ mÃ  khÃ´ng chá» chá»‰ dáº«n âœ… â˜ â˜ 4 Tinh tháº§n trÃ¡ch nhiá»‡m HoÃ n thÃ nh cÃ´ng viá»‡c Ä‘Ãºng háº¡n, Ä‘áº£m báº£o cháº¥t lÆ°á»£ng âœ… â˜ â˜ 5 Ká»· luáº­t TuÃ¢n thá»§ giá» giáº¥c, ná»™i quy, quy trÃ¬nh lÃ m viá»‡c â˜ â˜ âœ… 6 TÃ­nh cáº§u tiáº¿n Sáºµn sÃ ng nháº­n feedback vÃ  cáº£i thiá»‡n báº£n thÃ¢n â˜ âœ… â˜ 7 Giao tiáº¿p TrÃ¬nh bÃ y Ã½ tÆ°á»Ÿng, bÃ¡o cÃ¡o cÃ´ng viá»‡c rÃµ rÃ ng â˜ âœ… â˜ 8 Há»£p tÃ¡c nhÃ³m LÃ m viá»‡c hiá»‡u quáº£ vá»›i Ä‘á»“ng nghiá»‡p, tham gia nhÃ³m âœ… â˜ â˜ 9 á»¨ng xá»­ chuyÃªn nghiá»‡p TÃ´n trá»ng Ä‘á»“ng nghiá»‡p, Ä‘á»‘i tÃ¡c, mÃ´i trÆ°á»ng lÃ m viá»‡c âœ… â˜ â˜ 10 TÆ° duy giáº£i quyáº¿t váº¥n Ä‘á» Nháº­n diá»‡n váº¥n Ä‘á», Ä‘á» xuáº¥t giáº£i phÃ¡p, sÃ¡ng táº¡o â˜ âœ… â˜ 11 ÄÃ³ng gÃ³p vÃ o dá»± Ã¡n/tá»• chá»©c Hiá»‡u quáº£ cÃ´ng viá»‡c, sÃ¡ng kiáº¿n cáº£i tiáº¿n, ghi nháº­n tá»« team âœ… â˜ â˜ 12 Tá»•ng thá»ƒ ÄÃ¡nh giÃ¡ chung vá» toÃ n bá»™ quÃ¡ trÃ¬nh thá»±c táº­p âœ… â˜ â˜ Cáº§n cáº£i thiá»‡n NÃ¢ng cao tÃ­nh ká»¹ luáº­t, cháº¥p hÃ nh nghiÃªm chá»‰nh ná»™i quy cá»§a cÃ´ng ty hoáº·c báº¥t ká»³ trong má»™t tá»• chá»©c nÃ o Cáº£i thiá»‡n trong cÃ¡ch tÆ° duy giáº£i quyáº¿t váº¥n Ä‘á» Há»c cÃ¡ch giao tiáº¿p tá»‘t hÆ¡n trong giao tiáº¿p háº±ng ngÃ y vÃ  trong cÃ´ng viá»‡c, xá»­ lÃ½ tÃ¬nh huá»‘ng "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.6-week6/",
	"title": "Worklog Tuáº§n 6",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu tuáº§n 6: Há»c cÃ¡ch thiáº¿t káº¿ vÃ  triá»ƒn khai kiáº¿n trÃºc serverless báº±ng cÃ¡c dá»‹ch vá»¥ cá»§a AWS. XÃ¢y dá»±ng vÃ  kiá»ƒm thá»­ á»©ng dá»¥ng vá»›i AWS Lambda, API Gateway vÃ  DynamoDB. Tá»± Ä‘á»™ng hÃ³a viá»‡c triá»ƒn khai háº¡ táº§ng báº±ng AWS CloudFormation. KhÃ¡m phÃ¡ thiáº¿t káº¿ event-driven vÃ  kháº£ nÄƒng tÃ­ch há»£p giá»¯a cÃ¡c dá»‹ch vá»¥. Ãp dá»¥ng cÃ¡c phÆ°Æ¡ng phÃ¡p giÃ¡m sÃ¡t (monitoring) vÃ  ghi log (logging) tá»‘t nháº¥t cho mÃ´i trÆ°á»ng serverless. Nhiá»‡m vá»¥ cáº§n thá»±c hiá»‡n trong tuáº§n: NgÃ y Nhiá»‡m vá»¥ NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh TÃ i liá»‡u tham kháº£o 2 - TÃ¬m hiá»ƒu khÃ¡i niá»‡m vÃ  lá»£i Ã­ch cá»§a Serverless Computing. - Hiá»ƒu khi nÃ o nÃªn dÃ¹ng Lambda thay vÃ¬ EC2. - Thá»±c hÃ nh: + Táº¡o má»™t hÃ m Lambda Ä‘Æ¡n giáº£n báº±ng Python. + Kiá»ƒm thá»­ kÃ­ch hoáº¡t hÃ m qua AWS Console vÃ  CLI. 13/10/2025 13/10/2025 AWS Study Group 3 - Há»c cÃ¡ch xÃ¢y dá»±ng API báº±ng Amazon API Gateway. - Thá»±c hÃ nh: + Táº¡o má»™t REST API endpoint liÃªn káº¿t vá»›i Lambda. + Triá»ƒn khai cÃ¡c giai Ä‘oáº¡n (stage) API vÃ  kiá»ƒm thá»­ truy cáº­p cÃ´ng khai. 14/10/2025 14/10/2025 AWS Study Group 4 - LÃ m viá»‡c vá»›i Amazon DynamoDB cho lÆ°u trá»¯ dá»¯ liá»‡u serverless. - Thá»±c hÃ nh: + Táº¡o báº£ng DynamoDB vÃ  Ä‘á»‹nh nghÄ©a Partition Key / Sort Key. + Káº¿t há»£p Lambda Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c CRUD. + Kiá»ƒm thá»­ truy xuáº¥t vÃ  cáº­p nháº­t dá»¯ liá»‡u thÃ´ng qua API Gateway. 15/10/2025 15/10/2025 AWS Study Group 5 - TÃ¬m hiá»ƒu cÆ¡ báº£n vá» AWS CloudFormation cho Háº¡ táº§ng dÆ°á»›i dáº¡ng mÃ£ (IaC). - Thá»±c hÃ nh: + Viáº¿t tá»‡p YAML Ä‘á»ƒ triá»ƒn khai Lambda, API Gateway vÃ  DynamoDB. + Tá»± Ä‘á»™ng hÃ³a viá»‡c táº¡o vÃ  xÃ³a stack. 16/10/2025 16/10/2025 AWS Study Group 6 - Thá»±c hiá»‡n giÃ¡m sÃ¡t (monitoring) vÃ  tá»± Ä‘á»™ng hÃ³a (automation) cho há»‡ thá»‘ng serverless. - Thá»±c hÃ nh: + Sá»­ dá»¥ng CloudWatch Logs Ä‘á»ƒ theo dÃµi hoáº¡t Ä‘á»™ng cá»§a Lambda. + Thiáº¿t láº­p CloudWatch Alarms Ä‘á»ƒ phÃ¡t hiá»‡n lá»—i vÃ  throttles. + Táº¡o má»™t quy táº¯c tá»± Ä‘á»™ng Ä‘Æ¡n giáº£n báº±ng EventBridge. 17/10/2025 17/10/2025 AWS Study Group ThÃ nh tá»±u Ä‘áº¡t Ä‘Æ°á»£c trong tuáº§n 6: Kiáº¿n thá»©c ná»n táº£ng vá» Serverless\nHiá»ƒu rÃµ lá»£i Ã­ch cá»§a thiáº¿t káº¿ khÃ´ng mÃ¡y chá»§ nhÆ°: khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§, tá»± Ä‘á»™ng má»Ÿ rá»™ng, vÃ  thanh toÃ¡n theo má»©c sá»­ dá»¥ng.\nÄÃ£ táº¡o vÃ  kiá»ƒm thá»­ cÃ¡c hÃ m Lambda cÆ¡ báº£n, Ä‘Æ°á»£c kÃ­ch hoáº¡t thá»§ cÃ´ng vÃ  qua cÃ¡c sá»± kiá»‡n API.\nTÃ­ch há»£p vá»›i API Gateway\nXÃ¢y dá»±ng REST API báº±ng Amazon API Gateway vÃ  liÃªn káº¿t trá»±c tiáº¿p vá»›i Lambda.\nTriá»ƒn khai nhiá»u mÃ´i trÆ°á»ng (dev, prod) vÃ  kiá»ƒm thá»­ truy cáº­p cÃ´ng khai thÃ nh cÃ´ng.\nTÃ­ch há»£p DynamoDB\nThiáº¿t káº¿ báº£ng DynamoDB vá»›i cáº¥u trÃºc khÃ³a hiá»‡u quáº£ cho truy xuáº¥t nhanh.\nTÃ­ch há»£p Lambda Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c CRUD trá»±c tiáº¿p tá»« hÃ m serverless.\nKiá»ƒm thá»­ thÃ nh cÃ´ng quy trÃ¬nh API â†’ Lambda â†’ DynamoDB tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i.\nHáº¡ táº§ng dÆ°á»›i dáº¡ng mÃ£ (Infrastructure as Code - IaC)\nTá»± Ä‘á»™ng hÃ³a viá»‡c triá»ƒn khai kiáº¿n trÃºc serverless báº±ng CloudFormation templates.\nQuáº£n lÃ½ viá»‡c táº¡o, cáº­p nháº­t, vÃ  xÃ³a stack má»™t cÃ¡ch cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng vÃ  kiá»ƒm soÃ¡t Ä‘Æ°á»£c.\nGiÃ¡m sÃ¡t vÃ  Tá»± Ä‘á»™ng hÃ³a\nSá»­ dá»¥ng CloudWatch Logs vÃ  CloudWatch Alarms Ä‘á»ƒ phÃ¡t hiá»‡n sá»± cá»‘ trong quÃ¡ trÃ¬nh cháº¡y.\nDÃ¹ng EventBridge Ä‘á»ƒ kÃ­ch hoáº¡t cáº£nh bÃ¡o hoáº·c quy trÃ¬nh tá»± Ä‘á»™ng dá»±a trÃªn cÃ¡c sá»± kiá»‡n tá»« Lambda.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.6-frontend-stack/",
	"title": "5.4.6 Frontend Stack",
	"tags": [],
	"description": "",
	"content": " Frontend Stack - AWS Amplify Hosting Tá»•ng quan Frontend Stack xá»­ lÃ½ triá»ƒn khai á»©ng dá»¥ng Next.js 15 sá»­ dá»¥ng AWS Amplify. KhÃ¡c vá»›i cÃ¡c stack khÃ¡c Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi CDK, Frontend Ä‘Æ°á»£c triá»ƒn khai thÃ´ng qua Amplify Console vá»›i tÃ­ch há»£p GitLab Ä‘á»ƒ tá»± Ä‘á»™ng triá»ƒn khai.\nPhÆ°Æ¡ng thá»©c triá»ƒn khai: AWS Amplify Console (khÃ´ng pháº£i CDK stack)\nâš ï¸ LÆ°u Ã½ quan trá»ng: Triá»ƒn khai Frontend Ä‘Æ°á»£c thá»±c hiá»‡n riÃªng biá»‡t thÃ´ng qua Amplify Console. Xem chi tiáº¿t táº¡i 5.10 Deploy to Amplify.\nTrÃ¡ch nhiá»‡m chÃ­nh Host á»©ng dá»¥ng Next.js 15 SSR Tá»± Ä‘á»™ng triá»ƒn khai tá»« GitLab repository Cáº¥u hÃ¬nh custom domain vá»›i Route 53 Tá»± Ä‘á»™ng cáº¥p chá»©ng chá»‰ SSL qua ACM PhÃ¢n phá»‘i CDN toÃ n cáº§u Quáº£n lÃ½ biáº¿n mÃ´i trÆ°á»ng Stack nÃ y bao gá»“m á»¨ng dá»¥ng Next.js:\nFramework: Next.js 15 vá»›i React 18 Rendering: Cháº¿ Ä‘á»™ standalone output (SSR) Styling: Tailwind CSS + Flowbite components State Management: React Context API Authentication: AWS Amplify Auth (tÃ­ch há»£p Cognito) TÃ­nh nÄƒng AWS Amplify:\nTá»± Ä‘á»™ng build vÃ  deploy tá»« Git Há»— trá»£ server-side rendering (SSR) Custom domain vá»›i HTTPS CDN caching vÃ  compression Injection biáº¿n mÃ´i trÆ°á»ng TÃ­ch há»£p GitLab CI/CD Kiáº¿n trÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ GitLab Repository â”‚\râ”‚ (everyonecook/frontend) â”‚\râ”‚ â”‚\râ”‚ Push to main/dev branch â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚ Webhook Trigger\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ AWS Amplify (Hosting + CI/CD) â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Build Pipeline (Tá»± Ä‘á»™ng kÃ­ch hoáº¡t) â”‚ â”‚\râ”‚ â”‚ 1. Clone repository tá»« GitLab â”‚ â”‚\râ”‚ â”‚ 2. npm install (vá»›i legacy peer deps) â”‚ â”‚\râ”‚ â”‚ 3. Inject biáº¿n mÃ´i trÆ°á»ng â†’ .env.production â”‚ â”‚\râ”‚ â”‚ 4. npm run build (Next.js standalone build) â”‚ â”‚\râ”‚ â”‚ 5. Deploy to Amplify CDN â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Cáº¥u hÃ¬nh Hosting â”‚ â”‚\râ”‚ â”‚ â€¢ CDN Distribution (CloudFront) â”‚ â”‚\râ”‚ â”‚ â€¢ SSR Lambda@Edge functions â”‚ â”‚\râ”‚ â”‚ â€¢ Custom domain: dev.everyonecook.cloud â”‚ â”‚\râ”‚ â”‚ â€¢ SSL Certificate (ACM - tá»± Ä‘á»™ng cáº¥p) â”‚ â”‚\râ”‚ â”‚ â€¢ Custom headers (báº£o máº­t) â”‚ â”‚\râ”‚ â”‚ â€¢ Custom rewrites (Next.js routing) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Route 53 (DNS) â”‚\râ”‚ dev.everyonecook.cloud â†’ A Record â†’ Amplify CDN â”‚\râ”‚ www.dev.everyonecook.cloud â†’ CNAME â†’ Amplify CDN â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ End Users (Global) â”‚\râ”‚ Truy cáº­p qua: https://dev.everyonecook.cloud â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Cáº¥u hÃ¬nh Frontend Cáº¥u trÃºc thÆ° má»¥c frontend/\râ”œâ”€â”€ amplify.yml # Cáº¥u hÃ¬nh build Amplify\râ”œâ”€â”€ next.config.js # Cáº¥u hÃ¬nh Next.js\râ”œâ”€â”€ package.json # Dependencies \u0026amp; scripts\râ”œâ”€â”€ .env.example # Template biáº¿n mÃ´i trÆ°á»ng\râ”œâ”€â”€ app/ # Next.js App Router\râ”‚ â”œâ”€â”€ layout.tsx # Root layout\râ”‚ â”œâ”€â”€ page.tsx # Home page\râ”‚ â”œâ”€â”€ auth/ # Trang xÃ¡c thá»±c\râ”‚ â”œâ”€â”€ profile/ # Há»“ sÆ¡ ngÆ°á»i dÃ¹ng\râ”‚ â”œâ”€â”€ recipes/ # Trang cÃ´ng thá»©c\râ”‚ â””â”€â”€ ...\râ”œâ”€â”€ components/ # React components tÃ¡i sá»­ dá»¥ng\râ”œâ”€â”€ contexts/ # React Context providers\râ”œâ”€â”€ hooks/ # Custom React hooks\râ”œâ”€â”€ lib/ # Utility functions\râ”œâ”€â”€ services/ # API service layer\râ””â”€â”€ types/ # TypeScript definitions 1. Cáº¥u hÃ¬nh Amplify Build File: amplify.yml (thÆ° má»¥c gá»‘c)\nâš ï¸ Quan trá»ng: Amplify sá»­ dá»¥ng file amplify.yml á»Ÿ thÆ° má»¥c gá»‘c repository, khÃ´ng pháº£i trong thÆ° má»¥c frontend/.\nversion: 1 applications: - frontend: phases: preBuild: commands: - export HUSKY=0 - npm install --legacy-peer-deps --ignore-scripts build: commands: - echo \u0026#34;=== Creating .env.production from Amplify env vars ===\u0026#34; - rm -f .env.production - env | grep -e NEXT_PUBLIC_ \u0026gt; .env.production || true - echo \u0026#34;=== .env.production content ===\u0026#34; - cat .env.production - echo \u0026#34;=== Building frontend ===\u0026#34; - npm run build artifacts: baseDirectory: .next files: - \u0026#39;**/*\u0026#39; cache: paths: - node_modules/**/* - .next/cache/**/* appRoot: frontend Cáº¥u hÃ¬nh bá»• sung trong frontend/amplify.yml:\nFile frontend/amplify.yml chá»©a cÃ¡c security headers vÃ  custom rewrites bá»• sung (cÃ³ thá»ƒ merge vÃ o amplify.yml gá»‘c náº¿u cáº§n):\ncustomHeaders: - pattern: \u0026#39;**/*\u0026#39; headers: - key: \u0026#39;Strict-Transport-Security\u0026#39; value: \u0026#39;max-age=31536000; includeSubDomains\u0026#39; - key: \u0026#39;X-Content-Type-Options\u0026#39; value: \u0026#39;nosniff\u0026#39; - key: \u0026#39;X-Frame-Options\u0026#39; value: \u0026#39;DENY\u0026#39; - key: \u0026#39;X-XSS-Protection\u0026#39; value: \u0026#39;1; mode=block\u0026#39; customRules: # Xá»­ lÃ½ dynamic routes [id] - rewrite cÃ¡c request khÃ´ng pháº£i file vá» Next.js - source: \u0026#39;\u0026lt;/^[^.]+$|\\.(?!(css|gif|ico|jpg|jpeg|js|json|png|txt|svg|woff|woff2|ttf|map|webp|avif)$)([^.]+$)/\u0026gt;\u0026#39; target: /index.html status: \u0026#39;200\u0026#39; # Báº£o toÃ n static assets - source: \u0026#39;/_next/\u0026lt;*\u0026gt;\u0026#39; target: \u0026#39;/_next/\u0026lt;*\u0026gt;\u0026#39; status: \u0026#39;200\u0026#39; - source: \u0026#39;/api/\u0026lt;*\u0026gt;\u0026#39; target: \u0026#39;/api/\u0026lt;*\u0026gt;\u0026#39; status: \u0026#39;200\u0026#39; Äiá»ƒm chÃ­nh:\nappRoot: frontend: Source code trong thÆ° má»¥c frontend/ Build artifacts: ThÆ° má»¥c .next (Next.js standalone build) Root amplify.yml: Chá»‰ cáº¥u hÃ¬nh build Frontend amplify.yml: Bao gá»“m security headers + custom rewrites Khuyáº¿n nghá»‹: Merge customHeaders vÃ  customRules vÃ o root amplify.yml Ä‘á»ƒ cáº¥u hÃ¬nh táº­p trung 2. Cáº¥u hÃ¬nh Next.js File: frontend/next.config.js\n/** @type {import(\u0026#39;next\u0026#39;).NextConfig} */ const nextConfig = { reactStrictMode: true, // Output mode cho Amplify SSR deployment output: \u0026#39;standalone\u0026#39;, // Tá»‘i Æ°u hiá»‡u nÄƒng poweredByHeader: false, compress: true, trailingSlash: false, // Tá»‘i Æ°u hÃ¬nh áº£nh images: { remotePatterns: [ { protocol: \u0026#39;https\u0026#39;, hostname: \u0026#39;cdn-dev.everyonecook.cloud\u0026#39;, pathname: \u0026#39;/**\u0026#39;, }, ], formats: [\u0026#39;image/avif\u0026#39;, \u0026#39;image/webp\u0026#39;], deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840], }, // Tá»‘i Æ°u bundle experimental: { optimizePackageImports: [\u0026#39;react-icons\u0026#39;, \u0026#39;flowbite-react\u0026#39;, \u0026#39;aws-amplify\u0026#39;], optimizeCss: true, }, // Biáº¿n mÃ´i trÆ°á»ng (giÃ¡ trá»‹ dá»± phÃ²ng) env: { NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL || \u0026#39;https://api-dev.everyonecook.cloud\u0026#39;, NEXT_PUBLIC_CDN_URL: process.env.NEXT_PUBLIC_CDN_URL || \u0026#39;https://cdn-dev.everyonecook.cloud\u0026#39;, NEXT_PUBLIC_COGNITO_USER_POOL_ID: process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID, NEXT_PUBLIC_COGNITO_CLIENT_ID: process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID, NEXT_PUBLIC_COGNITO_REGION: process.env.NEXT_PUBLIC_COGNITO_REGION || \u0026#39;ap-southeast-1\u0026#39;, }, }; module.exports = nextConfig; Äiá»ƒm chÃ­nh:\noutput: 'standalone': Build tá»‘i Æ°u cho Amplify Tá»‘i Æ°u hÃ¬nh áº£nh: Há»— trá»£ Ä‘á»‹nh dáº¡ng AVIF, WebP TÃ­ch há»£p CDN: Load hÃ¬nh áº£nh tá»« CloudFront CDN Biáº¿n mÃ´i trÆ°á»ng: ÄÆ°á»£c inject tá»« Amplify Console 3. Dependencies File: frontend/package.json\n{ \u0026#34;name\u0026#34;: \u0026#34;everyonecook-frontend\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;next dev --turbo\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;next build\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;next start\u0026#34; }, \u0026#34;dependencies\u0026#34;: { \u0026#34;next\u0026#34;: \u0026#34;^15.0.0\u0026#34;, \u0026#34;react\u0026#34;: \u0026#34;^18.3.0\u0026#34;, \u0026#34;react-dom\u0026#34;: \u0026#34;^18.3.0\u0026#34;, \u0026#34;aws-amplify\u0026#34;: \u0026#34;^6.15.8\u0026#34;, \u0026#34;@aws-amplify/auth\u0026#34;: \u0026#34;^6.17.0\u0026#34;, \u0026#34;axios\u0026#34;: \u0026#34;^1.13.2\u0026#34;, \u0026#34;flowbite-react\u0026#34;: \u0026#34;^0.7.0\u0026#34;, \u0026#34;react-icons\u0026#34;: \u0026#34;^5.0.1\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;typescript\u0026#34;: \u0026#34;^5.3.0\u0026#34;, \u0026#34;tailwindcss\u0026#34;: \u0026#34;^3.4.18\u0026#34;, \u0026#34;autoprefixer\u0026#34;: \u0026#34;^10.4.22\u0026#34; } } Dependencies chÃ­nh:\nNext.js 15: Framework SSR má»›i nháº¥t AWS Amplify: Authentication \u0026amp; API integration Flowbite React: ThÆ° viá»‡n UI component Tailwind CSS: Framework CSS utility-first 4. Biáº¿n mÃ´i trÆ°á»ng File: frontend/.env.example\n# Cáº¥u hÃ¬nh API NEXT_PUBLIC_API_URL=https://api-dev.everyonecook.cloud # Cáº¥u hÃ¬nh CDN NEXT_PUBLIC_CDN_URL=https://cdn-dev.everyonecook.cloud # Cáº¥u hÃ¬nh AWS Cognito NEXT_PUBLIC_COGNITO_USER_POOL_ID=ap-southeast-1_XXXXXXXXX NEXT_PUBLIC_COGNITO_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxx NEXT_PUBLIC_COGNITO_REGION=ap-southeast-1 # MÃ´i trÆ°á»ng NEXT_PUBLIC_ENV=development Quan trá»ng: CÃ¡c biáº¿n nÃ y pháº£i Ä‘Æ°á»£c cáº¥u hÃ¬nh trong Amplify Console \u0026gt; Environment Variables.\nCáº¥u hÃ¬nh Triá»ƒn khai Cáº¥u hÃ¬nh Domain MÃ´i trÆ°á»ng Frontend Domain Backend API CDN Dev dev.everyonecook.cloud api-dev.everyonecook.cloud cdn-dev.everyonecook.cloud Staging staging.everyonecook.cloud api-staging.everyonecook.cloud cdn-staging.everyonecook.cloud Prod everyonecook.cloud api.everyonecook.cloud cdn.everyonecook.cloud Cáº¥u hÃ¬nh Amplify CÃ i Ä‘áº·t Build:\nPhiÃªn báº£n Node.js: 18.x (tá»± Ä‘á»™ng phÃ¡t hiá»‡n) Build timeout: 15 phÃºt Build image: Amazon Linux 2023 Cache: node_modules + .next/cache CÃ i Ä‘áº·t Deployment:\nAuto-deploy: Enabled (khi push Git) Branch: main (prod), dev (development) Build mode: Server-side rendering (SSR) TÃ­ch há»£p vá»›i cÃ¡c Stack khÃ¡c Dependencies Frontend yÃªu cáº§u outputs tá»«:\nDNS Stack (Phase 1):\nRoute 53 Hosted Zone ID Cáº¥u hÃ¬nh tÃªn miá»n Certificate Stack (Phase 1.5):\nACM Certificate cho custom domain (CloudFront - us-east-1) Amplify sáº½ tá»± Ä‘á»™ng provision certificate Auth Stack (Phase 3):\nCOGNITO_USER_POOL_ID: User Pool ID COGNITO_CLIENT_ID: App Client ID COGNITO_REGION: AWS Region Backend Stack (Phase 4):\nAPI_URL: API Gateway custom domain Cáº¥u hÃ¬nh API endpoints Core Stack (Phase 2):\nCDN_URL: CloudFront distribution domain S3 bucket cho upload hÃ¬nh áº£nh Cross-Stack References Frontend sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng Ä‘á»ƒ káº¿t ná»‘i vá»›i backend:\n// services/api.ts const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL; // Tá»« Backend Stack const CDN_URL = process.env.NEXT_PUBLIC_CDN_URL; // Tá»« Core Stack // lib/auth.ts const cognitoConfig = { userPoolId: process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID, // Tá»« Auth Stack userPoolClientId: process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID, // Tá»« Auth Stack region: process.env.NEXT_PUBLIC_COGNITO_REGION, }; Quy trÃ¬nh Triá»ƒn khai Äiá»u kiá»‡n tiÃªn quyáº¿t TrÆ°á»›c khi triá»ƒn khai frontend, Ä‘áº£m báº£o cÃ¡c Ä‘iá»u sau Ä‘Ã£ hoÃ n thÃ nh:\nâœ… DNS Stack Ä‘Ã£ deploy (Route 53 Hosted Zone) âœ… Core Stack Ä‘Ã£ deploy (S3 + CloudFront CDN) âœ… Auth Stack Ä‘Ã£ deploy (Cognito User Pool) âœ… Backend Stack Ä‘Ã£ deploy (API Gateway + Lambda) âœ… GitLab repository Ä‘Ã£ cáº¥u hÃ¬nh âœ… AWS Amplify Ä‘Ã£ káº¿t ná»‘i vá»›i GitLab CÃ¡c bÆ°á»›c triá»ƒn khai Frontend Ä‘Æ°á»£c triá»ƒn khai thÃ´ng qua Amplify Console, KHÃ”NG qua CDK.\nÄá»ƒ biáº¿t chi tiáº¿t triá»ƒn khai, xem: 5.10 Deploy to Amplify\nTÃ³m táº¯t cÃ¡c bÆ°á»›c:\nTáº¡o Amplify App qua AWS Console Káº¿t ná»‘i GitLab repository (everyonecook) Cáº¥u hÃ¬nh build settings (amplify.yml) Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng (Cognito, API, CDN URLs) Cáº¥u hÃ¬nh custom domain (dev.everyonecook.cloud) Deploy tá»± Ä‘á»™ng khi push Git âš ï¸ LÆ°u Ã½: Sau khi triá»ƒn khai thÃ nh cÃ´ng, báº¡n cáº§n:\nâœ… XÃ¡c minh DNS records trong Route 53 âœ… Kiá»ƒm tra chá»©ng chá»‰ SSL âœ… XÃ¡c minh custom domain hoáº¡t Ä‘á»™ng âœ… Kiá»ƒm tra authentication flow vá»›i Cognito XÃ¡c minh 1. Kiá»ƒm tra Amplify Console ğŸ“¸ Screenshot yÃªu cáº§u: AWS Console \u0026gt; Amplify \u0026gt; App Overview\nXÃ¡c minh:\nBuild status: Success Deployment status: Live Custom domain: Active SSL certificate: Issued Screenshot: Amplify Console hiá»ƒn thá»‹ triá»ƒn khai thÃ nh cÃ´ng\n2. Kiá»ƒm tra Route 53 DNS ğŸ“¸ Screenshot yÃªu cáº§u: AWS Console \u0026gt; Route 53 \u0026gt; Hosted Zone\nXÃ¡c minh DNS records:\ndev.everyonecook.cloud A â†’ Amplify CDN\rwww.dev.everyonecook.cloud CNAME â†’ Amplify CDN Screenshot: Route 53 hiá»ƒn thá»‹ Amplify DNS records\n3. Kiá»ƒm tra á»©ng dá»¥ng Frontend URL truy cáº­p:\n# Qua custom domain https://dev.everyonecook.cloud # Qua Amplify default domain https://main.d1234567890.amplifyapp.com Kiá»ƒm tra tÃ­nh nÄƒng:\nHomepage load thÃ nh cÃ´ng HTTPS certificate há»£p lá»‡ ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng hoáº¡t Ä‘á»™ng Login vá»›i Cognito API calls tá»›i backend HÃ¬nh áº£nh load tá»« CDN ğŸ“¸ Screenshot yÃªu cáº§u: Browser hiá»ƒn thá»‹ frontend homepage vá»›i DevTools Network tab\nScreenshot: Frontend homepage load thÃ nh cÃ´ng\n4. XÃ¡c minh biáº¿n mÃ´i trÆ°á»ng ğŸ“¸ Screenshot yÃªu cáº§u: Amplify Console \u0026gt; Environment Variables\nXÃ¡c minh táº¥t cáº£ biáº¿n yÃªu cáº§u:\nNEXT_PUBLIC_API_URL=https://api-dev.everyonecook.cloud\rNEXT_PUBLIC_CDN_URL=https://cdn-dev.everyonecook.cloud\rNEXT_PUBLIC_COGNITO_USER_POOL_ID=ap-southeast-1_XXXXXXXXX\rNEXT_PUBLIC_COGNITO_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxx\rNEXT_PUBLIC_COGNITO_REGION=ap-southeast-1 Screenshot: Amplify environment variables Ä‘Ã£ cáº¥u hÃ¬nh\nBest Practices 1. Quáº£n lÃ½ mÃ´i trÆ°á»ng âœ… Sá»­ dá»¥ng Amplify apps riÃªng cho dev/staging/prod âœ… Cáº¥u hÃ¬nh biáº¿n mÃ´i trÆ°á»ng trong Amplify Console âš ï¸ KHÃ”NG commit .env.production vÃ o Git âœ… Sá»­ dá»¥ng .env.example Ä‘á»ƒ document cÃ¡c biáº¿n yÃªu cáº§u 2. Tá»‘i Æ°u Build âœ… Enable caching: node_modules + .next/cache âœ… Sá»­ dá»¥ng output: 'standalone' cho bundle nhá» hÆ¡n âœ… Tá»‘i Æ°u hÃ¬nh áº£nh: Äá»‹nh dáº¡ng AVIF, WebP âœ… Enable gzip compression 3. Báº£o máº­t âœ… Thiáº¿t láº­p security headers (HSTS, CSP, X-Frame-Options) âœ… Chá»‰ sá»­ dá»¥ng HTTPS (enforce qua Amplify) âœ… Validate biáº¿n mÃ´i trÆ°á»ng táº¡i build time âš ï¸ KhÃ´ng expose dá»¯ liá»‡u nháº¡y cáº£m trong client code 4. Monitoring âœ… Monitor build logs trong Amplify Console âœ… Thiáº¿t láº­p build notifications (email, Slack) âœ… Kiá»ƒm tra CloudWatch metrics cho CDN âœ… Monitor error rates vÃ  performance TÃ³m táº¯t CÃ¡c Ä‘iá»ƒm ná»•i báº­t cáº¥u hÃ¬nh Frontend Stack:\nâœ… Next.js 15 SSR application\nâœ… AWS Amplify hosting vá»›i automatic deployment\nâœ… GitLab CI/CD integration\nâœ… Custom domain vá»›i Route 53 + ACM\nâœ… Environment variables management\nâœ… Security headers vÃ  optimization\nğŸ”— BÆ°á»›c tiáº¿p theo: Deploy to Amplify (5.10) - Quy trÃ¬nh triá»ƒn khai chi tiáº¿t\nTÃ i liá»‡u tham kháº£o AWS Amplify Documentation: https://docs.aws.amazon.com/amplify/ Next.js Deployment: https://nextjs.org/docs/deployment Frontend Source: everyonecook/frontend/ Build Config: everyonecook/frontend/amplify.yml "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.07-deploy-backend/",
	"title": "Triá»ƒn khai Backend Services",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Sau khi deploy infrastructure vá»›i CDK, báº¡n cáº§n deploy Lambda code lÃªn AWS. Dá»± Ã¡n EveryoneCook cung cáº¥p automated deployment script Ä‘á»ƒ build, package vÃ  deploy táº¥t cáº£ Lambda functions.\nKiáº¿n trÃºc Backend Lambda Modules (7 functions):\napi-router - API Gateway routing vá»›i JWT validation auth-user - Authentication \u0026amp; User Management social - Posts, Comments, Reactions, Friends, Notifications recipe-ai - Recipes \u0026amp; AI Features (Bedrock) ai-worker - Async AI processing worker admin - Admin Dashboard \u0026amp; Content Moderation upload - File Upload vá»›i S3 Presigned URLs Lambda Layer:\nshared-dependencies - Shared npm packages (aws-sdk, uuid, etc.) Cognito Triggers (Auth Stack):\nPre-Signup, Post-Confirmation, Post-Authentication, Pre-Authentication, Custom Message Quy trÃ¬nh Triá»ƒn khai 1. Build Lambda Layer (shared dependencies)\r2. Build TypeScript modules â†’ JavaScript\r3. Validate dist folders (kiá»ƒm tra lá»—i)\r4. Chuáº©n bá»‹ deployment packages\r5. Deploy qua CDK hoáº·c Direct Lambda Update\r6. XÃ¡c minh deployments\r7. Kiá»ƒm tra CloudWatch logs TÃ¹y chá»n A: Triá»ƒn khai Äáº§y Ä‘á»§ (Khuyáº¿n nghá»‹ - Láº§n Ä‘áº§u tiÃªn) Full deployment sá»­ dá»¥ng CDK Ä‘á»ƒ deploy toÃ n bá»™ infrastructure vÃ  Lambda code.\nBÆ°á»›c 1: Di chuyá»ƒn Ä‘áº¿n Dá»± Ã¡n # Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c gá»‘c everyonecook cd D:\\Project_AWS\\everyonecook BÆ°á»›c 2: Cháº¡y Script Triá»ƒn khai Äáº§y Ä‘á»§ # Full deployment cho dev environment .\\deploy\\deploy-backend.ps1 -Environment dev # Hoáº·c ngáº¯n gá»n (máº·c Ä‘á»‹nh lÃ  dev) .\\deploy\\deploy-backend.ps1 Script sáº½ thá»±c hiá»‡n:\nBÆ¯á»šC 0: XÃ¢y dá»±ng Lambda Layer\nDá»n dáº¹p cÃ¡c builds trÆ°á»›c Ä‘Ã³ CÃ i Ä‘áº·t production dependencies vÃ o layers/shared-dependencies/nodejs/ KÃ­ch thÆ°á»›c Layer: ~15-20 MB BÆ¯á»šC 1: XÃ¢y dá»±ng Lambda modules\nBuild auth triggers (Pre-Signup, Post-Confirmation, etc.) Build táº¥t cáº£ 7 Lambda modules Dá»n dáº¹p dist vÃ  tsconfig.tsbuildinfo Ä‘á»ƒ buá»™c compile má»›i BiÃªn dá»‹ch TypeScript â†’ JavaScript BÆ¯á»šC 2: XÃ¡c thá»±c dist folders\nKiá»ƒm tra dist folder tá»“n táº¡i PhÃ¡t hiá»‡n node_modules trong dist (váº¥n Ä‘á» phá»• biáº¿n) Kiá»ƒm tra kÃ­ch thÆ°á»›c dist (nÃªn \u0026lt; 10 MB) XÃ¡c minh index.js tá»“n táº¡i Tá»± Ä‘á»™ng sá»­a chá»¯a náº¿u phÃ¡t hiá»‡n váº¥n Ä‘á» BÆ¯á»šC 3: Chuáº©n bá»‹ deployment packages\nDá»n dáº¹p cÃ¡c artifacts trÆ°á»›c Ä‘Ã³ Sao chÃ©p ná»™i dung dist â†’ thÆ° má»¥c deployment ThÃªm build-info.json (timestamp, git commit) BÆ¯á»šC 4: Triá»ƒn khai vá»›i CDK\nTá»•ng há»£p CloudFormation templates Deploy stack EveryoneCook-dev-Backend Cáº­p nháº­t Lambda functions Cáº­p nháº­t Lambda Layer Cáº­p nháº­t API Gateway Káº¿t quáº£ máº«u:\n========================================\rBackend Deployment - dev\rWith Lambda Layers\r========================================\rSTEP 0: Building Lambda Layer...\rInstalling layer dependencies...\rLayer built: 18.45 MB\rSTEP 1: Building Lambda modules...\rBuilding auth triggers... OK\rBuilding api-router... OK\rBuilding auth-module... OK\rBuilding social-module... OK\rBuilding ai-module... OK\rBuilding admin-module... OK\rBuilding upload-module... OK\rSTEP 2: Validating dist folders...\rapi-router... OK (125 files, 1.2 MB)\rauth-module... OK (156 files, 1.5 MB)\rsocial-module... OK (189 files, 1.8 MB)\rai-module... OK (142 files, 1.3 MB)\radmin-module... OK (98 files, 0.9 MB)\rupload-module... OK (45 files, 0.4 MB)\rSTEP 3: Preparing deployment packages...\rPreparing api-router... Done\rPreparing auth-module... Done\rPreparing social-module... Done\rPreparing ai-module... Done\rPreparing admin-module... Done\rPreparing upload-module... Done\rSTEP 4: Deploying with CDK...\rSynthesizing CloudFormation templates...\rEveryoneCook-dev-Backend\rDeploying...\râœ… Lambda Layer updated\râœ… API Router function updated\râœ… Auth User function updated\râœ… Social function updated\râœ… Recipe AI function updated\râœ… AI Worker updated\râœ… Admin function updated\râœ… Upload function updated\rOutputs:\rApiUrl = https://xinq7xh300.execute-api.ap-southeast-1.amazonaws.com/v1/\rApiCustomDomain = https://api-dev.everyonecook.cloud\r========================================\rFULL DEPLOYMENT SUCCESSFUL!\r======================================== BÆ°á»›c 3: XÃ¡c minh Triá»ƒn khai # Liá»‡t kÃª táº¥t cáº£ Lambda functions aws lambda list-functions ` --query \u0026#39;Functions[?contains(FunctionName, `everyonecook-dev`)].{Name:FunctionName,Runtime:Runtime,Updated:LastModified}\u0026#39; ` --output table # Káº¿t quáº£ mong Ä‘á»£i: # -------------------------------------------------------- # | ListFunctions | # +------------------------------------------------------+ # | Name | Runtime | Updated | # +------------------------------------------------------+ # | everyonecook-dev-api-router | nodejs20.x | ... | # | everyonecook-dev-auth-user | nodejs20.x | ... | # | everyonecook-dev-social | nodejs20.x | ... | # | everyonecook-dev-recipe-ai | nodejs20.x | ... | # | everyonecook-dev-ai-worker | nodejs20.x | ... | # | everyonecook-dev-admin | nodejs20.x | ... | # | everyonecook-dev-upload | nodejs20.x | ... | # +------------------------------------------------------+ TÃ¹y chá»n B: Triá»ƒn khai Nhanh (Chá»‰ Lambda Code) Náº¿u chá»‰ thay Ä‘á»•i Lambda code (khÃ´ng thay Ä‘á»•i infrastructure), dÃ¹ng fast deployment.\nBÆ°á»›c 1: Triá»ƒn khai Chá»‰ Lambda # Fast deploy - chá»‰ update Lambda code .\\deploy\\deploy-backend.ps1 -Environment dev -LambdaOnly # Hoáº·c dÃ¹ng script chuyÃªn dá»¥ng .\\deploy\\force-update-lambdas.ps1 -Environment dev Quy trÃ¬nh triá»ƒn khai nhanh hÆ¡n:\nBÆ¯á»šC 0: Build Layer (hoáº·c bá» qua)\rBÆ¯á»šC 1: Build modules\rBÆ¯á»šC 2: Validate dist\rBÆ¯á»šC 3: Chuáº©n bá»‹ packages\rBÆ¯á»šC 4: Upload lÃªn Lambda (Fast Deploy)\r- Táº¡o ZIP files\r- Upload trá»±c tiáº¿p qua aws lambda update-function-code\r- Cáº­p nháº­t Layer ARN náº¿u thay Ä‘á»•i\r- Bá» qua CDK (nhanh hÆ¡n) Thá»i gian:\nFull Deploy (CDK): ~5-8 phÃºt Lambda Only: ~2-3 phÃºt BÆ°á»›c 2: CÃ¡c TÃ¹y chá»n Bá» qua (NÃ¢ng cao) # Bá» qua build layer (sá»­ dá»¥ng layer hiá»‡n cÃ³) .\\deploy\\deploy-backend.ps1 -Environment dev -SkipLayer # Bá» qua build module (sá»­ dá»¥ng dist hiá»‡n cÃ³) .\\deploy\\deploy-backend.ps1 -Environment dev -SkipBuild # Káº¿t há»£p cÃ¡c tÃ¹y chá»n .\\deploy\\deploy-backend.ps1 -Environment dev -LambdaOnly -SkipLayer BÆ°á»›c 4: XÃ¡c minh Lambda Functions 1. Kiá»ƒm tra Cáº¥u hÃ¬nh Function # Láº¥y chi tiáº¿t API Router aws lambda get-function ` --function-name everyonecook-dev-api-router ` --query \u0026#39;Configuration.{Runtime:Runtime,Handler:Handler,Timeout:Timeout,Memory:MemorySize,Layer:Layers[0].Arn}\u0026#39; # Káº¿t quáº£ mong Ä‘á»£i: # { # \u0026#34;Runtime\u0026#34;: \u0026#34;nodejs20.x\u0026#34;, # \u0026#34;Handler\u0026#34;: \u0026#34;services/api-router/dist/handlers/index.handler\u0026#34;, # \u0026#34;Timeout\u0026#34;: 30, # \u0026#34;Memory\u0026#34;: 512, # \u0026#34;Layer\u0026#34;: \u0026#34;arn:aws:lambda:ap-southeast-1:...:layer:everyonecook-shared-deps-dev:X\u0026#34; # } 2. XÃ¡c minh Code SHA256 (Code Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t) # Kiá»ƒm tra code hash aws lambda get-function ` --function-name everyonecook-dev-api-router ` --query \u0026#39;Configuration.CodeSha256\u0026#39; # SHA256 sáº½ thay Ä‘á»•i má»—i khi code Ä‘Æ°á»£c cáº­p nháº­t 3. Kiá»ƒm tra Biáº¿n MÃ´i trÆ°á»ng # Láº¥y biáº¿n mÃ´i trÆ°á»ng aws lambda get-function-configuration ` --function-name everyonecook-dev-auth-user ` --query \u0026#39;Environment.Variables\u0026#39; # Káº¿t quáº£ mong Ä‘á»£i: # { # \u0026#34;TABLE_NAME\u0026#34;: \u0026#34;EveryoneCook-dev\u0026#34;, # \u0026#34;REGION\u0026#34;: \u0026#34;ap-southeast-1\u0026#34;, # \u0026#34;USER_POOL_ID\u0026#34;: \u0026#34;ap-southeast-1_PKoL34PF0\u0026#34;, # ... # } BÆ°á»›c 5: Kiá»ƒm thá»­ Lambda Functions 1. Kiá»ƒm thá»­ API Router (Health Check) # Gá»i API Router vá»›i test event aws lambda invoke ` --function-name everyonecook-dev-api-router ` --payload \u0026#39;{\u0026#34;httpMethod\u0026#34;:\u0026#34;GET\u0026#34;,\u0026#34;path\u0026#34;:\u0026#34;/health\u0026#34;,\u0026#34;headers\u0026#34;:{}}\u0026#39; ` response.json # Kiá»ƒm tra response Get-Content response.json | ConvertFrom-Json # Káº¿t quáº£ mong Ä‘á»£i: # { # \u0026#34;statusCode\u0026#34;: 200, # \u0026#34;body\u0026#34;: \u0026#34;{\\\u0026#34;status\\\u0026#34;:\\\u0026#34;healthy\\\u0026#34;,\\\u0026#34;timestamp\\\u0026#34;:\\\u0026#34;...\\\u0026#34;}\u0026#34; # } 2. LÃ m nÃ³ng Functions (TrÃ¡nh Cold Start) # LÃ m nÃ³ng táº¥t cáº£ functions $functions = @( \u0026#34;everyonecook-dev-api-router\u0026#34;, \u0026#34;everyonecook-dev-auth-user\u0026#34;, \u0026#34;everyonecook-dev-social\u0026#34;, \u0026#34;everyonecook-dev-recipe-ai\u0026#34;, \u0026#34;everyonecook-dev-admin\u0026#34;, \u0026#34;everyonecook-dev-upload\u0026#34; ) foreach ($func in $functions) { Write-Host \u0026#34;Warming up $func...\u0026#34; -ForegroundColor Cyan aws lambda invoke ` --function-name $func ` --payload \u0026#39;{\u0026#34;warmup\u0026#34;:true}\u0026#39; ` out.json | Out-Null } Write-Host \u0026#34;All functions warmed up!\u0026#34; -ForegroundColor Green BÆ°á»›c 6: Kiá»ƒm tra CloudWatch Logs 1. Theo dÃµi Logs Real-time # Theo dÃµi API Router logs aws logs tail /aws/lambda/everyonecook-dev-api-router --follow # Xem logs 10 phÃºt gáº§n nháº¥t aws logs tail /aws/lambda/everyonecook-dev-api-router --since 10m 2. TÃ¬m kiáº¿m Lá»—i # TÃ¬m kiáº¿m lá»—i trong giá» qua $oneHourAgo = [DateTimeOffset]::Now.AddHours(-1).ToUnixTimeMilliseconds() aws logs filter-log-events ` --log-group-name /aws/lambda/everyonecook-dev-api-router ` --start-time $oneHourAgo ` --filter-pattern \u0026#34;ERROR\u0026#34; 3. Kiá»ƒm tra Táº¥t cáº£ Lambda Logs # Liá»‡t kÃª táº¥t cáº£ log groups aws logs describe-log-groups ` --log-group-name-prefix /aws/lambda/everyonecook-dev ` --query \u0026#39;logGroups[].logGroupName\u0026#39; BÆ°á»›c 7: XÃ¡c minh TÃ­ch há»£p API Gateway 1. Láº¥y API Endpoint # Láº¥y API URL tá»« CloudFormation $apiUrl = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Backend ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ApiCustomDomain`].OutputValue\u0026#39; ` --output text Write-Host \u0026#34;API Endpoint: $apiUrl\u0026#34; # Output: https://api-dev.everyonecook.cloud 2. Kiá»ƒm thá»­ Health Endpoint # Kiá»ƒm thá»­ qua API Gateway (endpoint thá»±c) $response = Invoke-RestMethod -Uri \u0026#34;$apiUrl/health\u0026#34; -Method Get $response | ConvertTo-Json # Káº¿t quáº£ mong Ä‘á»£i: # { # \u0026#34;status\u0026#34;: \u0026#34;healthy\u0026#34;, # \u0026#34;timestamp\u0026#34;: \u0026#34;2025-12-09T...\u0026#34;, # \u0026#34;service\u0026#34;: \u0026#34;EveryoneCook API\u0026#34;, # \u0026#34;environment\u0026#34;: \u0026#34;dev\u0026#34; # } 3. XÃ¡c minh Triá»ƒn khai API Gateway # Láº¥y API ID $apiId = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Backend ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ApiId`].OutputValue\u0026#39; ` --output text # Liá»‡t kÃª deployments aws apigateway get-deployments --rest-api-id $apiId # Láº¥y deployment má»›i nháº¥t aws apigateway get-deployment ` --rest-api-id $apiId ` --deployment-id (aws apigateway get-deployments ` --rest-api-id $apiId ` --query \u0026#39;items[0].id\u0026#39; ` --output text) BÆ°á»›c 8: XÃ¡c minh Cognito Triggers Cognito triggers Ä‘Ã£ Ä‘Æ°á»£c deploy vá»›i Auth Stack. XÃ¡c minh:\n# Liá»‡t kÃª Cognito User Pool triggers $userPoolId = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Auth ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`UserPoolId`].OutputValue\u0026#39; ` --output text aws cognito-idp describe-user-pool ` --user-pool-id $userPoolId ` --query \u0026#39;UserPool.LambdaConfig\u0026#39; # Káº¿t quáº£ mong Ä‘á»£i: # { # \u0026#34;PreSignUp\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PreSignup\u0026#34;, # \u0026#34;PostConfirmation\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PostConfirmation\u0026#34;, # \u0026#34;PostAuthentication\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PostAuthentication\u0026#34;, # \u0026#34;PreAuthentication\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-PreAuthentication\u0026#34;, # \u0026#34;CustomMessage\u0026#34;: \u0026#34;arn:aws:lambda:...:function:EveryoneCook-dev-CustomMessage\u0026#34; # } BÆ°á»›c 9: XÃ¡c minh SQS Workers 1. Kiá»ƒm tra AI Worker # Láº¥y AI Worker function aws lambda get-function --function-name everyonecook-dev-ai-worker # Kiá»ƒm tra event source mapping (SQS trigger) aws lambda list-event-source-mappings ` --function-name everyonecook-dev-ai-worker # Káº¿t quáº£ mong Ä‘á»£i: Event source tá»« AI Queue 2. Kiá»ƒm thá»­ Worker vá»›i SQS Message # Láº¥y AI Queue URL $queueUrl = aws sqs list-queues ` --queue-name-prefix everyonecook-dev-ai-queue ` --query \u0026#39;QueueUrls[0]\u0026#39; ` --output text # Gá»­i test message aws sqs send-message ` --queue-url $queueUrl ` --message-body \u0026#39;{\u0026#34;type\u0026#34;:\u0026#34;test\u0026#34;,\u0026#34;data\u0026#34;:\u0026#34;worker-verification\u0026#34;}\u0026#39; # Kiá»ƒm tra worker logs aws logs tail /aws/lambda/everyonecook-dev-ai-worker --follow Danh sÃ¡ch Kiá»ƒm tra Triá»ƒn khai Sá»­ dá»¥ng danh sÃ¡ch nÃ y Ä‘á»ƒ xÃ¡c minh deployment:\nBuild \u0026amp; Package Lambda Layer Ä‘Æ°á»£c build thÃ nh cÃ´ng (~15-20 MB) Táº¥t cáº£ 7 modules Ä‘Æ°á»£c biÃªn dá»‹ch (TypeScript â†’ JavaScript) Dist folders Ä‘Æ°á»£c xÃ¡c thá»±c (khÃ´ng cÃ³ node_modules, \u0026lt; 10 MB) Deployment packages Ä‘Æ°á»£c táº¡o vá»›i build-info.json Lambda Functions Táº¥t cáº£ 7 Lambda functions Ä‘Æ°á»£c triá»ƒn khai\nRuntime: nodejs20.x\nHandler paths chÃ­nh xÃ¡c\nTimeout: 30 giÃ¢y\nMemory: 512 MB (auth, social), 1024 MB (ai)\nLambda Layer Ä‘Æ°á»£c Ä‘Ã­nh kÃ¨m vÃ o táº¥t cáº£ functions\nBiáº¿n mÃ´i trÆ°á»ng Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng\nCode SHA256 Ä‘Ã£ thay Ä‘á»•i (code Ä‘Ã£ cáº­p nháº­t)\nCognito Triggers Pre-Signup trigger Ä‘Æ°á»£c triá»ƒn khai Post-Confirmation trigger Ä‘Æ°á»£c triá»ƒn khai Post-Authentication trigger Ä‘Æ°á»£c triá»ƒn khai Pre-Authentication trigger Ä‘Æ°á»£c triá»ƒn khai Custom Message trigger Ä‘Æ°á»£c triá»ƒn khai API Gateway API Gateway Ä‘Æ°á»£c triá»ƒn khai Custom domain Ä‘Æ°á»£c cáº¥u hÃ¬nh: api-dev.everyonecook.cloud Health endpoint pháº£n há»“i: GET /health CORS Ä‘Æ°á»£c cáº¥u hÃ¬nh Ä‘Ãºng Workers \u0026amp; Queues AI Worker Ä‘Æ°á»£c triá»ƒn khai Event source mapping Ä‘Æ°á»£c cáº¥u hÃ¬nh (SQS â†’ Lambda) SQS queues Ä‘Æ°á»£c táº¡o (ai-queue, image-queue, analytics-queue, notification-queue) Worker cÃ³ thá»ƒ xá»­ lÃ½ test messages XÃ¡c minh Táº¥t cáº£ functions Ä‘Æ°á»£c gá»i thÃ nh cÃ´ng KhÃ´ng cÃ³ lá»—i trong CloudWatch logs API Gateway tráº£ vá» 200 cho health check Functions Ä‘Ã£ Ä‘Æ°á»£c lÃ m nÃ³ng (khÃ´ng cÃ³ cold start) Xá»­ lÃ½ Sá»± cá»‘ Váº¥n Ä‘á» 1: Build Tháº¥t báº¡i - Lá»—i BiÃªn dá»‹ch TypeScript # Kiá»ƒm tra lá»—i TypeScript cd services/auth-module npx tsc --noEmit # Sá»­a lá»—i vÃ  rebuild npm run build Váº¥n Ä‘á» 2: ThÆ° má»¥c Dist QuÃ¡ Lá»›n # Kiá»ƒm tra node_modules trong dist Get-ChildItem -Path services/*/dist/node_modules -Recurse # Script sáº½ tá»± Ä‘á»™ng xÃ³a, hoáº·c thá»§ cÃ´ng: Remove-Item services/auth-module/dist/node_modules -Recurse -Force # Rebuild cd services/auth-module npm run build Váº¥n Ä‘á» 3: Cáº­p nháº­t Lambda Tháº¥t báº¡i # Kiá»ƒm tra tráº¡ng thÃ¡i function aws lambda get-function ` --function-name everyonecook-dev-auth-user ` --query \u0026#39;Configuration.{State:State,StateReason:StateReason}\u0026#39; # Náº¿u state lÃ  \u0026#34;Failed\u0026#34;, kiá»ƒm tra logs aws logs tail /aws/lambda/everyonecook-dev-auth-user --since 10m Váº¥n Ä‘á» 4: Function Timeout # TÄƒng timeout (qua CDK hoáº·c AWS CLI) aws lambda update-function-configuration ` --function-name everyonecook-dev-auth-user ` --timeout 60 # Hoáº·c cáº­p nháº­t trong backend-stack.ts vÃ  redeploy Váº¥n Ä‘á» 5: Háº¿t Bá»™ nhá»› # TÄƒng memory aws lambda update-function-configuration ` --function-name everyonecook-dev-recipe-ai ` --memory-size 1024 # AI functions cáº§n 1024 MB cho Bedrock calls Váº¥n Ä‘á» 6: Layer KhÃ´ng ÄÆ°á»£c ÄÃ­nh kÃ¨m # Láº¥y layer ARN $layerArn = aws lambda list-layer-versions ` --layer-name everyonecook-shared-deps-dev ` --query \u0026#39;LayerVersions[0].LayerVersionArn\u0026#39; ` --output text # ÄÃ­nh kÃ¨m layer thá»§ cÃ´ng aws lambda update-function-configuration ` --function-name everyonecook-dev-auth-user ` --layers $layerArn Váº¥n Ä‘á» 7: Thiáº¿u Biáº¿n MÃ´i trÆ°á»ng # Kiá»ƒm tra biáº¿n mÃ´i trÆ°á»ng hiá»‡n táº¡i aws lambda get-function-configuration ` --function-name everyonecook-dev-auth-user ` --query \u0026#39;Environment.Variables\u0026#39; # Cáº­p nháº­t thá»§ cÃ´ng (hoáº·c qua CDK) aws lambda update-function-configuration ` --function-name everyonecook-dev-auth-user ` --environment \u0026#34;Variables={TABLE_NAME=EveryoneCook-dev,REGION=ap-southeast-1}\u0026#34; GiÃ¡m sÃ¡t Hiá»‡u suáº¥t 1. Lambda Metrics (CloudWatch) # Láº¥y sá»‘ láº§n gá»i (1 giá» qua) $startTime = (Get-Date).AddHours(-1).ToString(\u0026#34;yyyy-MM-ddTHH:mm:ss\u0026#34;) $endTime = (Get-Date).ToString(\u0026#34;yyyy-MM-ddTHH:mm:ss\u0026#34;) aws cloudwatch get-metric-statistics ` --namespace AWS/Lambda ` --metric-name Invocations ` --dimensions Name=FunctionName,Value=everyonecook-dev-api-router ` --start-time $startTime ` --end-time $endTime ` --period 300 ` --statistics Sum 2. Tá»· lá»‡ Lá»—i # Láº¥y sá»‘ lÆ°á»£ng lá»—i aws cloudwatch get-metric-statistics ` --namespace AWS/Lambda ` --metric-name Errors ` --dimensions Name=FunctionName,Value=everyonecook-dev-api-router ` --start-time $startTime ` --end-time $endTime ` --period 300 ` --statistics Sum 3. Thá»i gian Thá»±c thi (Trung bÃ¬nh \u0026amp; P99) # Láº¥y thá»i gian thá»±c thi trung bÃ¬nh aws cloudwatch get-metric-statistics ` --namespace AWS/Lambda ` --metric-name Duration ` --dimensions Name=FunctionName,Value=everyonecook-dev-api-router ` --start-time $startTime ` --end-time $endTime ` --period 300 ` --statistics Average,Maximum 4. Thá»±c thi Äá»“ng thá»i # Kiá»ƒm tra sá»‘ lÆ°á»£ng thá»±c thi Ä‘á»“ng thá»i aws cloudwatch get-metric-statistics ` --namespace AWS/Lambda ` --metric-name ConcurrentExecutions ` --dimensions Name=FunctionName,Value=everyonecook-dev-api-router ` --start-time $startTime ` --end-time $endTime ` --period 300 ` --statistics Maximum Thá»±c hÃ nh Tá»‘t nháº¥t 1. Chiáº¿n lÆ°á»£c Triá»ƒn khai Development:\n# Láº·p nhanh - Chá»‰ Lambda .\\deploy\\deploy-backend.ps1 -LambdaOnly Staging/Production:\n# Triá»ƒn khai Ä‘áº§y Ä‘á»§ vá»›i CDK .\\deploy\\deploy-backend.ps1 -Environment prod # XÃ¡c minh ká»¹ lÆ°á»¡ng trÆ°á»›c khi tiáº¿p tá»¥c 2. Chiáº¿n lÆ°á»£c Rollback # Láº¥y phiÃªn báº£n trÆ°á»›c Ä‘Ã³ aws lambda list-versions-by-function ` --function-name everyonecook-dev-auth-user # Rollback vá» phiÃªn báº£n X aws lambda update-alias ` --function-name everyonecook-dev-auth-user ` --name LIVE ` --function-version X 3. Triá»ƒn khai Blue-Green # Triá»ƒn khai lÃªn phiÃªn báº£n má»›i .\\deploy\\deploy-backend.ps1 -Environment dev # Kiá»ƒm thá»­ phiÃªn báº£n má»›i # Náº¿u OK, chuyá»ƒn traffic hoÃ n táº¥t # Náº¿u cÃ³ váº¥n Ä‘á», rollback alias 4. Cáº£nh bÃ¡o GiÃ¡m sÃ¡t # Táº¡o CloudWatch alarm cho lá»—i aws cloudwatch put-metric-alarm ` --alarm-name everyonecook-dev-api-router-errors ` --alarm-description \u0026#34;Alert on Lambda errors\u0026#34; ` --metric-name Errors ` --namespace AWS/Lambda ` --statistic Sum ` --period 300 ` --evaluation-periods 1 ` --threshold 10 ` --comparison-operator GreaterThanThreshold ` --dimensions Name=FunctionName,Value=everyonecook-dev-api-router Benchmarks Hiá»‡u suáº¥t Thá»i gian Triá»ƒn khai Dá»± kiáº¿n:\nThao tÃ¡c Thá»i gian Ghi chÃº Build Layer 30-60s npm install production deps Build Modules 20-40s BiÃªn dá»‹ch TypeScript (7 modules) Validate \u0026amp; Package 10-20s Táº¡o ZIP CDK Deploy 3-5 phÃºt Cáº­p nháº­t CloudFormation Lambda Only 1-2 phÃºt Cáº­p nháº­t function trá»±c tiáº¿p Hiá»‡u suáº¥t Lambda Dá»± kiáº¿n:\nFunction Cold Start Warm Memory Timeout api-router 800-1200ms 50-100ms 512 MB 30s auth-user 600-900ms 80-150ms 512 MB 30s social 700-1000ms 100-200ms 512 MB 30s recipe-ai 1500-2500ms 200-500ms 1024 MB 60s ai-worker 2000-3000ms 300-800ms 1024 MB 300s admin 600-800ms 100-150ms 512 MB 30s upload 400-600ms 50-80ms 256 MB 15s NÃ¢ng cao: TÃ­ch há»£p CI/CD Äá»ƒ tá»± Ä‘á»™ng hÃ³a deployment trong GitLab CI/CD:\n# .gitlab-ci.yml deploy-backend: stage: deploy script: - cd everyonecook - .\\deploy\\deploy-backend.ps1 -Environment $CI_ENVIRONMENT_NAME -LambdaOnly only: - main environment: name: production TÃ³m táº¯t Trong lab nÃ y, báº¡n Ä‘Ã£:\nâœ… Triá»ƒn khai Lambda Functions: 7 modules + 5 Cognito triggers\nâœ… Triá»ƒn khai Lambda Layer: Shared dependencies\nâœ… Cáº¥u hÃ¬nh API Gateway: TÃ­ch há»£p custom domain\nâœ… Thiáº¿t láº­p SQS Workers: Xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™\nâœ… XÃ¡c minh Triá»ƒn khai: Health checks, logs, metrics\nâœ… Tá»‘i Æ°u Hiá»‡u suáº¥t: LÃ m nÃ³ng functions, tá»‘i Æ°u cold start\nThÃ nh tá»±u ChÃ­nh:\nTriá»ƒn khai tá»± Ä‘á»™ng vá»›i PowerShell script Full CDK deployment hoáº·c cáº­p nháº­t Lambda-only nhanh XÃ¡c thá»±c toÃ n diá»‡n vÃ  xá»­ lÃ½ lá»—i GiÃ¡m sÃ¡t vÃ  cáº£nh bÃ¡o CloudWatch Cáº¥u hÃ¬nh Lambda production-ready CÃ¡c BÆ°á»›c Tiáº¿p theo Backend Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai thÃ nh cÃ´ng! Tiáº¿p theo:\nâœ… Kiá»ƒm thá»­ Endpoints: XÃ¡c minh táº¥t cáº£ API endpoints â†’ 5.08 - Test Endpoints ğŸ“ Quáº£n lÃ½ PhiÃªn báº£n: Push code lÃªn GitLab â†’ 5.09 - Push to GitLab ğŸš€ Triá»ƒn khai Frontend: á»¨ng dá»¥ng Next.js ğŸ” GiÃ¡m sÃ¡t: CloudWatch dashboards vÃ  alerts Tiáº¿p tá»¥c Ä‘áº¿n: 5.08 - Test Endpoints End-to-End\n# Kiá»ƒm thá»­ get posts aws lambda invoke \\ --function-name EveryoneCook-dev-SocialModule \\ --payload \u0026#39;{ \u0026#34;httpMethod\u0026#34;:\u0026#34;GET\u0026#34;, \u0026#34;path\u0026#34;:\u0026#34;/social/posts\u0026#34;, \u0026#34;headers\u0026#34;:{\u0026#34;Authorization\u0026#34;:\u0026#34;Bearer test-token\u0026#34;}, \u0026#34;requestContext\u0026#34;:{\u0026#34;authorizer\u0026#34;:{\u0026#34;claims\u0026#34;:{\u0026#34;sub\u0026#34;:\u0026#34;test-user-id\u0026#34;,\u0026#34;username\u0026#34;:\u0026#34;testuser\u0026#34;}}} }\u0026#39; \\ response.json cat response.json BÆ°á»›c 5: Kiá»ƒm tra CloudWatch Logs 1. Xem Logs Gáº§n Ä‘Ã¢y\n# Theo dÃµi Auth Module logs aws logs tail /aws/lambda/EveryoneCook-dev-AuthModule --follow # Hoáº·c xem 10 phÃºt gáº§n nháº¥t aws logs tail /aws/lambda/EveryoneCook-dev-AuthModule --since 10m 2. TÃ¬m kiáº¿m Lá»—i\n# TÃ¬m kiáº¿m lá»—i trong giá» qua aws logs filter-log-events \\ --log-group-name /aws/lambda/EveryoneCook-dev-AuthModule \\ --start-time $(date -d \u0026#39;1 hour ago\u0026#39; +%s)000 \\ --filter-pattern \u0026#34;ERROR\u0026#34; 3. Kiá»ƒm tra Lambda Insights\n# Láº¥y Lambda metrics aws cloudwatch get-metric-statistics \\ --namespace AWS/Lambda \\ --metric-name Invocations \\ --dimensions Name=FunctionName,Value=EveryoneCook-dev-AuthModule \\ --start-time $(date -u -d \u0026#39;1 hour ago\u0026#39; +%Y-%m-%dT%H:%M:%S) \\ --end-time $(date -u +%Y-%m-%dT%H:%M:%S) \\ --period 300 \\ --statistics Sum Screenshot: CloudWatch Logs hiá»ƒn thá»‹ Lambda execution\nBÆ°á»›c 6: Triá»ƒn khai Lambda Triggers Lambda triggers Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai vá»›i Auth Stack, xÃ¡c minh:\n# Kiá»ƒm tra Post-Confirmation trigger aws lambda get-function \\ --function-name EveryoneCook-dev-PostConfirmationTrigger # Kiá»ƒm thá»­ trigger (sáº½ Ä‘Æ°á»£c gá»i tá»± Ä‘á»™ng khi user confirmation) BÆ°á»›c 7: Triá»ƒn khai Search Sync Worker 1. Triá»ƒn khai Worker\n# Worker Ä‘Æ°á»£c triá»ƒn khai vá»›i Backend Stack # XÃ¡c minh deployment aws lambda get-function \\ --function-name EveryoneCook-dev-SearchSyncWorker 2. Kiá»ƒm thá»­ Worker vá»›i SQS\n# Láº¥y SearchIndex queue URL QUEUE_URL=$(aws sqs list-queues \\ --queue-name-prefix EveryoneCook-dev-SearchIndexQueue \\ | jq -r \u0026#39;.QueueUrls[0]\u0026#39;) # Gá»­i test message aws sqs send-message \\ --queue-url $QUEUE_URL \\ --message-body \u0026#39;{ \u0026#34;eventName\u0026#34;: \u0026#34;INSERT\u0026#34;, \u0026#34;tableName\u0026#34;: \u0026#34;recipes\u0026#34;, \u0026#34;keys\u0026#34;: {\u0026#34;PK\u0026#34;: \u0026#34;USER#testuser\u0026#34;, \u0026#34;SK\u0026#34;: \u0026#34;RECIPE#test-123\u0026#34;}, \u0026#34;newImage\u0026#34;: {\u0026#34;title\u0026#34;: \u0026#34;Test Recipe\u0026#34;, \u0026#34;cuisine\u0026#34;: \u0026#34;Vietnamese\u0026#34;} }\u0026#39; # Kiá»ƒm tra worker logs aws logs tail /aws/lambda/EveryoneCook-dev-SearchSyncWorker --follow BÆ°á»›c 8: Cáº­p nháº­t API Gateway API Gateway tá»± Ä‘á»™ng cáº­p nháº­t khi triá»ƒn khai Backend Stack, xÃ¡c minh:\n# Láº¥y API Gateway deployment API_ID=$(aws cloudformation describe-stacks \\ --stack-name EveryoneCook-dev-Backend \\ --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ApiId`].OutputValue\u0026#39; \\ --output text) # Liá»‡t kÃª deployments aws apigateway get-deployments --rest-api-id $API_ID # Láº¥y deployment má»›i nháº¥t aws apigateway get-deployment \\ --rest-api-id $API_ID \\ --deployment-id $(aws apigateway get-deployments \\ --rest-api-id $API_ID \\ --query \u0026#39;items[0].id\u0026#39; \\ --output text) BÆ°á»›c 9: LÃ m nÃ³ng Lambda Functions TrÃ¡nh cold start cho cÃ¡c requests Ä‘áº§u tiÃªn:\n# Gá»i táº¥t cáº£ functions má»™t láº§n for func in APIRouter AuthModule SocialModule RecipeAIModule AdminModule UploadModule SearchSyncWorker; do echo \u0026#34;Warming up $func...\u0026#34; aws lambda invoke \\ --function-name EveryoneCook-dev-$func \\ --payload \u0026#39;{\u0026#34;warmup\u0026#34;:true}\u0026#39; \\ /dev/null done BÆ°á»›c 10: XÃ¡c minh End-to-End 1. Kiá»ƒm thá»­ Health Endpoint\n# Kiá»ƒm thá»­ qua API Gateway curl https://api.everyonecook.cloud/health # NÃªn tráº£ vá»: {\u0026#34;status\u0026#34;:\u0026#34;healthy\u0026#34;,\u0026#34;timestamp\u0026#34;:\u0026#34;...\u0026#34;} 2. Kiá»ƒm thá»­ vá»›i Postman\nImport Postman collection:\n{ \u0026#34;info\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;EveryoneCook API\u0026#34;, \u0026#34;schema\u0026#34;: \u0026#34;https://schema.getpostman.com/json/collection/v2.1.0/collection.json\u0026#34; }, \u0026#34;item\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;Health Check\u0026#34;, \u0026#34;request\u0026#34;: { \u0026#34;method\u0026#34;: \u0026#34;GET\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://api.everyonecook.cloud/health\u0026#34; } } ] } Danh sÃ¡ch Kiá»ƒm tra Triá»ƒn khai Script chuáº©n bá»‹ hoÃ n táº¥t thÃ nh cÃ´ng Táº¥t cáº£ Lambda functions Ä‘Æ°á»£c cáº­p nháº­t Tráº¡ng thÃ¡i function: Active CÃ¡c láº§n gá»i kiá»ƒm thá»­ thÃ nh cÃ´ng CloudWatch logs hiá»ƒn thá»‹ executions KhÃ´ng cÃ³ lá»—i trong logs Lambda triggers hoáº¡t Ä‘á»™ng Search Sync Worker xá»­ lÃ½ messages API Gateway Ä‘Æ°á»£c cáº­p nháº­t Health endpoint pháº£n há»“i Functions Ä‘Ã£ Ä‘Æ°á»£c lÃ m nÃ³ng Xá»­ lÃ½ Sá»± cá»‘ Váº¥n Ä‘á»: Cáº­p nháº­t Lambda tháº¥t báº¡i\n# Kiá»ƒm tra tráº¡ng thÃ¡i function aws lambda get-function \\ --function-name EveryoneCook-dev-AuthModule \\ --query \u0026#39;Configuration.State\u0026#39; # Náº¿u state lÃ  \u0026#34;Failed\u0026#34;, kiá»ƒm tra StateReasonCode aws lambda get-function \\ --function-name EveryoneCook-dev-AuthModule \\ --query \u0026#39;Configuration.StateReasonCode\u0026#39; Váº¥n Ä‘á»: Function timeout\n# TÄƒng timeout aws lambda update-function-configuration \\ --function-name EveryoneCook-dev-AuthModule \\ --timeout 30 Váº¥n Ä‘á»: Háº¿t bá»™ nhá»›\n# TÄƒng memory aws lambda update-function-configuration \\ --function-name EveryoneCook-dev-AuthModule \\ --memory-size 512 Váº¥n Ä‘á»: Thiáº¿u biáº¿n mÃ´i trÆ°á»ng\n# Cáº­p nháº­t biáº¿n mÃ´i trÆ°á»ng aws lambda update-function-configuration \\ --function-name EveryoneCook-dev-AuthModule \\ --environment Variables={TABLE_NAME=EveryoneCook-dev,REGION=us-east-1} GiÃ¡m sÃ¡t Hiá»‡u suáº¥t Kiá»ƒm tra Lambda metrics:\n# Invocations aws cloudwatch get-metric-statistics \\ --namespace AWS/Lambda \\ --metric-name Invocations \\ --dimensions Name=FunctionName,Value=EveryoneCook-dev-AuthModule \\ --start-time $(date -u -d \u0026#39;1 hour ago\u0026#39; +%Y-%m-%dT%H:%M:%S) \\ --end-time $(date -u +%Y-%m-%dT%H:%M:%S) \\ --period 300 \\ --statistics Sum # Errors aws cloudwatch get-metric-statistics \\ --namespace AWS/Lambda \\ --metric-name Errors \\ --dimensions Name=FunctionName,Value=EveryoneCook-dev-AuthModule \\ --start-time $(date -u -d \u0026#39;1 hour ago\u0026#39; +%Y-%m-%dT%H:%M:%S) \\ --end-time $(date -u +%Y-%m-%dT%H:%M:%S) \\ --period 300 \\ --statistics Sum # Duration aws cloudwatch get-metric-statistics \\ --namespace AWS/Lambda \\ --metric-name Duration \\ --dimensions Name=FunctionName,Value=EveryoneCook-dev-AuthModule \\ --start-time $(date -u -d \u0026#39;1 hour ago\u0026#39; +%Y-%m-%dT%H:%M:%S) \\ --end-time $(date -u +%Y-%m-%dT%H:%M:%S) \\ --period 300 \\ --statistics Average,Maximum CÃ¡c BÆ°á»›c Tiáº¿p theo Sau khi backend Ä‘Æ°á»£c triá»ƒn khai vÃ  xÃ¡c minh, tiáº¿p tá»¥c Ä‘áº¿n Test Endpoints End-to-End Ä‘á»ƒ kiá»ƒm thá»­ luá»“ng á»©ng dá»¥ng hoÃ n chá»‰nh.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/7-feedback/",
	"title": "Chia sáº», Ä‘Ã³ng gÃ³p Ã½ kiáº¿n",
	"tags": [],
	"description": "",
	"content": " Táº¡i Ä‘Ã¢y báº¡n cÃ³ thá»ƒ tá»± do Ä‘Ã³ng gÃ³p Ã½ kiáº¿n cÃ¡ nhÃ¢n vá» nhá»¯ng tráº£i nghiá»‡m khi tham gia chÆ°Æ¡ng trÃ¬nh First Cloud Journey, giÃºp team FCJ cáº£i thiá»‡n nhá»¯ng váº¥n Ä‘á» cÃ²n thiáº¿u sÃ³t dá»±a trÃªn cÃ¡c háº¡ng má»¥c sau:\nÄÃ¡nh giÃ¡ chung 1. MÃ´i trÆ°á»ng lÃ m viá»‡c\nMÃ´i trÆ°á»ng lÃ m viá»‡c ráº¥t thÃ¢n thiá»‡n vÃ  cá»Ÿi má»Ÿ. CÃ¡c thÃ nh viÃªn trong FCJ luÃ´n sáºµn sÃ ng há»— trá»£ khi mÃ¬nh gáº·p khÃ³ khÄƒn, ká»ƒ cáº£ ngoÃ i giá» lÃ m viá»‡c. KhÃ´ng gian lÃ m viá»‡c gá»n gÃ ng, thoáº£i mÃ¡i, giÃºp mÃ¬nh táº­p trung tá»‘t hÆ¡n. Tuy nhiÃªn, mÃ¬nh nghÄ© cÃ³ thá»ƒ bá»• sung thÃªm má»™t sá»‘ buá»•i giao lÆ°u hoáº·c team bonding Ä‘á»ƒ má»i ngÆ°á»i hiá»ƒu nhau hÆ¡n.\n2. Sá»± há»— trá»£ cá»§a mentor / team admin\nMentor hÆ°á»›ng dáº«n ráº¥t chi tiáº¿t, giáº£i thÃ­ch rÃµ rÃ ng khi mÃ¬nh chÆ°a hiá»ƒu vÃ  luÃ´n khuyáº¿n khÃ­ch mÃ¬nh Ä‘áº·t cÃ¢u há»i. Team admin há»— trá»£ cÃ¡c thá»§ tá»¥c, tÃ i liá»‡u vÃ  táº¡o Ä‘iá»u kiá»‡n Ä‘á»ƒ mÃ¬nh lÃ m viá»‡c thuáº­n lá»£i. MÃ¬nh Ä‘Ã¡nh giÃ¡ cao viá»‡c mentor cho phÃ©p mÃ¬nh thá»­ vÃ  tá»± xá»­ lÃ½ váº¥n Ä‘á» thay vÃ¬ chá»‰ Ä‘Æ°a Ä‘Ã¡p Ã¡n.\n3. Sá»± phÃ¹ há»£p giá»¯a cÃ´ng viá»‡c vÃ  chuyÃªn ngÃ nh há»c\nCÃ´ng viá»‡c mÃ¬nh Ä‘Æ°á»£c giao phÃ¹ há»£p vá»›i kiáº¿n thá»©c mÃ¬nh Ä‘Ã£ há»c á»Ÿ trÆ°á»ng, Ä‘á»“ng thá»i má»Ÿ rá»™ng thÃªm nhá»¯ng máº£ng má»›i mÃ  mÃ¬nh chÆ°a tá»«ng Ä‘Æ°á»£c tiáº¿p cáº­n. Nhá» váº­y, mÃ¬nh vá»«a cá»§ng cá»‘ kiáº¿n thá»©c ná»n táº£ng, vá»«a há»c thÃªm ká»¹ nÄƒng thá»±c táº¿.\n4. CÆ¡ há»™i há»c há»i \u0026amp; phÃ¡t triá»ƒn ká»¹ nÄƒng\nTrong quÃ¡ trÃ¬nh thá»±c táº­p, mÃ¬nh há»c Ä‘Æ°á»£c nhiá»u ká»¹ nÄƒng má»›i nhÆ° sá»­ dá»¥ng cÃ´ng cá»¥ quáº£n lÃ½ dá»± Ã¡n, ká»¹ nÄƒng lÃ m viá»‡c nhÃ³m, vÃ  cáº£ cÃ¡ch giao tiáº¿p chuyÃªn nghiá»‡p trong mÃ´i trÆ°á»ng cÃ´ng ty. Mentor cÅ©ng chia sáº» nhiá»u kinh nghiá»‡m thá»±c táº¿ giÃºp mÃ¬nh Ä‘á»‹nh hÆ°á»›ng tá»‘t hÆ¡n cho sá»± nghiá»‡p.\n5. VÄƒn hÃ³a \u0026amp; tinh tháº§n Ä‘á»“ng Ä‘á»™i\nVÄƒn hÃ³a cÃ´ng ty ráº¥t tÃ­ch cá»±c: má»i ngÆ°á»i tÃ´n trá»ng láº«n nhau, lÃ m viá»‡c nghiÃªm tÃºc nhÆ°ng váº«n vui váº». Khi cÃ³ dá»± Ã¡n gáº¥p, má»i ngÆ°á»i cÃ¹ng nhau cá»‘ gáº¯ng, há»— trá»£ khÃ´ng phÃ¢n biá»‡t vá»‹ trÃ­. Äiá»u nÃ y giÃºp mÃ¬nh cáº£m tháº¥y mÃ¬nh lÃ  má»™t pháº§n cá»§a táº­p thá»ƒ, dÃ¹ chá»‰ lÃ  thá»±c táº­p sinh.\n6. ChÃ­nh sÃ¡ch / phÃºc lá»£i cho thá»±c táº­p sinh\nCÃ´ng ty cÃ³ há»— trá»£ phá»¥ cáº¥p thá»±c táº­p vÃ  táº¡o Ä‘iá»u kiá»‡n vá» thá»i gian linh hoáº¡t khi cáº§n thiáº¿t. NgoÃ i ra, viá»‡c Ä‘Æ°á»£c tham gia cÃ¡c buá»•i Ä‘Ã o táº¡o ná»™i bá»™ lÃ  má»™t Ä‘iá»ƒm cá»™ng lá»›n.\nMá»™t sá»‘ cÃ¢u há»i khÃ¡c Äiá»u báº¡n hÃ i lÃ²ng nháº¥t trong thá»i gian thá»±c táº­p? Äiá»u báº¡n nghÄ© cÃ´ng ty cáº§n cáº£i thiá»‡n cho cÃ¡c thá»±c táº­p sinh sau? Náº¿u giá»›i thiá»‡u cho báº¡n bÃ¨, báº¡n cÃ³ khuyÃªn há» thá»±c táº­p á»Ÿ Ä‘Ã¢y khÃ´ng? VÃ¬ sao? Äá» xuáº¥t \u0026amp; mong muá»‘n Báº¡n cÃ³ Ä‘á» xuáº¥t gÃ¬ Ä‘á»ƒ cáº£i thiá»‡n tráº£i nghiá»‡m trong ká»³ thá»±c táº­p? Báº¡n cÃ³ muá»‘n tiáº¿p tá»¥c chÆ°Æ¡ng trÃ¬nh nÃ y trong tÆ°Æ¡ng lai? GÃ³p Ã½ khÃ¡c (tá»± do chia sáº»): "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.7-week7/",
	"title": "Worklog Tuáº§n 7",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu Tuáº§n 7: Hiá»ƒu khÃ¡i niá»‡m vÃ  lá»£i Ã­ch cá»§a containerization trong phÃ¡t triá»ƒn á»©ng dá»¥ng. Há»c cÃ¡ch xÃ¢y dá»±ng, quáº£n lÃ½ vÃ  triá»ƒn khai Docker container. KhÃ¡m phÃ¡ Amazon ECS (Elastic Container Service) vÃ  ECR (Elastic Container Registry). Triá»ƒn khai á»©ng dá»¥ng web dÆ°á»›i dáº¡ng container báº±ng ECS Fargate. LÃ m quen vá»›i CI/CD tá»± Ä‘á»™ng hÃ³a cho quy trÃ¬nh triá»ƒn khai container. Nhiá»‡m vá»¥ thá»±c hiá»‡n trong tuáº§n: NgÃ y Nhiá»‡m vá»¥ NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh TÃ i liá»‡u tham kháº£o 2 - Ã”n láº¡i sá»± khÃ¡c biá»‡t giá»¯a Container vÃ  MÃ¡y áº£o (VM). - TÃ¬m hiá»ƒu vai trÃ² cá»§a Docker trong Ä‘Ã³ng gÃ³i vÃ  cÃ¡ch ly á»©ng dá»¥ng. - Thá»±c hÃ nh: + CÃ i Ä‘áº·t Docker Desktop. + Táº¡o Dockerfile cho á»©ng dá»¥ng web Ä‘Æ¡n giáº£n (Node.js hoáº·c Python Flask). + Build vÃ  cháº¡y container cá»¥c bá»™. 20/10/2025 20/10/2025 AWS Study Group 3 - TÃ¬m hiá»ƒu vá» Amazon Elastic Container Registry (ECR). - Thá»±c hÃ nh: + Táº¡o repository trÃªn ECR. + Gáº¯n tháº» vÃ  Ä‘áº©y image Docker lÃªn ECR. + Kiá»ƒm tra lÆ°u trá»¯ vÃ  quyá»n truy cáº­p image. 21/10/2025 21/10/2025 AWS Study Group 4 - KhÃ¡m phÃ¡ kiáº¿n thá»©c cÆ¡ báº£n vá» Amazon Elastic Container Service (ECS). - Thá»±c hÃ nh: + Táº¡o ECS Cluster sá»­ dá»¥ng loáº¡i khá»Ÿi cháº¡y Fargate. + Äá»‹nh nghÄ©a Task Definitions vÃ  Services. + Triá»ƒn khai á»©ng dá»¥ng containerized. 22/10/2025 22/10/2025 AWS Study Group 5 - TÃ­ch há»£p Load Balancer vá»›i ECS. - Thá»±c hÃ nh: + Cáº¥u hÃ¬nh Application Load Balancer (ALB). + Káº¿t ná»‘i dá»‹ch vá»¥ ECS vá»›i ALB Ä‘á»ƒ truy cáº­p cÃ´ng khai. + Kiá»ƒm tra kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tÃ­nh sáºµn sÃ ng cao. 23/10/2025 23/10/2025 AWS Study Group 6 - Tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh triá»ƒn khai báº±ng AWS CodePipeline vÃ  CodeBuild. - Thá»±c hÃ nh: + Thiáº¿t láº­p pipeline CI/CD Ä‘á»ƒ build image Docker. + Tá»± Ä‘á»™ng triá»ƒn khai báº£n cáº­p nháº­t lÃªn ECS. + Kiá»ƒm tra triá»ƒn khai khÃ´ng giÃ¡n Ä‘oáº¡n (zero downtime). 24/10/2025 24/10/2025 AWS Study Group Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c trong Tuáº§n 7: Kiáº¿n thá»©c ná»n táº£ng vá» Docker\nHiá»ƒu sá»± khÃ¡c biá»‡t giá»¯a container vÃ  mÃ¡y áº£o, lÃ½ do container nháº¹ vÃ  linh hoáº¡t hÆ¡n. Táº¡o vÃ  kiá»ƒm thá»­ container Docker cá»¥c bá»™ báº±ng Dockerfile tá»± viáº¿t. Quáº£n lÃ½ image vá»›i ECR\nTáº¡o vÃ  quáº£n lÃ½ repository riÃªng trÃªn Amazon ECR. Äáº©y (push) vÃ  táº£i (pull) image Docker thÃ nh cÃ´ng tá»« ECR. Triá»ƒn khai vá»›i ECS\nXÃ¢y dá»±ng vÃ  triá»ƒn khai á»©ng dá»¥ng containerized báº±ng ECS Fargate. Cáº¥u hÃ¬nh Task Definition, Service vÃ  thiáº¿t láº­p máº¡ng cho á»©ng dá»¥ng ECS. CÃ¢n báº±ng táº£i vÃ  má»Ÿ rá»™ng há»‡ thá»‘ng\nTÃ­ch há»£p Application Load Balancer (ALB) vá»›i dá»‹ch vá»¥ ECS Ä‘á»ƒ truy cáº­p cÃ´ng khai. Kiá»ƒm chá»©ng kháº£ nÄƒng má»Ÿ rá»™ng tá»± Ä‘á»™ng vÃ  phÃ¢n phá»‘i lÆ°u lÆ°á»£ng giá»¯a cÃ¡c container. Tá»± Ä‘á»™ng hÃ³a CI/CD\nThiáº¿t láº­p pipeline CI/CD sá»­ dá»¥ng CodePipeline vÃ  CodeBuild. Tá»± Ä‘á»™ng build vÃ  triá»ƒn khai image lÃªn ECS. Äáº¡t Ä‘Æ°á»£c triá»ƒn khai hiá»‡u quáº£, láº·p láº¡i Ä‘Æ°á»£c vÃ  khÃ´ng giÃ¡n Ä‘oáº¡n (zero downtime). "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.04-configure-stacks/5.4.7-observability-stack/",
	"title": "5.4.7 Observability Stack",
	"tags": [],
	"description": "",
	"content": " Observability Stack - Monitoring \u0026amp; Alerting Tá»•ng quan Observability Stack lÃ  lá»›p giÃ¡m sÃ¡t Phase 7 cá»§a háº¡ táº§ng EveryoneCook. NÃ³ cung cáº¥p giÃ¡m sÃ¡t toÃ n diá»‡n, cáº£nh bÃ¡o vÃ  trá»±c quan hÃ³a cho táº¥t cáº£ cÃ¡c stack Ä‘Ã£ triá»ƒn khai thÃ´ng qua CloudWatch dashboards, alarms vÃ  SNS notifications.\nThá»© tá»± triá»ƒn khai: Stack nÃ y PHáº¢I Ä‘Æ°á»£c triá»ƒn khai CUá»I CÃ™NG, sau khi táº¥t cáº£ cÃ¡c stack khÃ¡c (DNS, Certificate, Core, Auth, Backend, Frontend) Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai.\nâš ï¸ LÆ°u Ã½ mÃ´i trÆ°á»ng: HÆ°á»›ng dáº«n nÃ y táº­p trung vÃ o triá»ƒn khai mÃ´i trÆ°á»ng Development (dev). Äá»‘i vá»›i triá»ƒn khai staging/production, ngÆ°á»¡ng alarm vÃ  khoáº£ng thá»i gian giÃ¡m sÃ¡t cÃ³ thá»ƒ khÃ¡c.\nTrÃ¡ch nhiá»‡m chÃ­nh Táº¡o CloudWatch Dashboards cho táº¥t cáº£ cÃ¡c lá»›p stack Cáº¥u hÃ¬nh CloudWatch Alarms cho cÃ¡c metric quan trá»ng Thiáº¿t láº­p SNS Topic cho thÃ´ng bÃ¡o alarm Táº¡o Composite Alarm cho tráº¡ng thÃ¡i sá»©c khá»e tá»•ng thá»ƒ há»‡ thá»‘ng GiÃ¡m sÃ¡t API Gateway, Lambda, DynamoDB, S3, CloudFront vÃ  Cognito Theo dÃµi chi phÃ­ vÃ  billing metrics Stack nÃ y bao gá»“m CloudWatch Dashboards (4 dashboards):\nCore Dashboard: DynamoDB, S3, CloudFront metrics Auth Dashboard: Cognito authentication metrics Backend Dashboard: API Gateway, Lambda, SQS metrics Overview Dashboard: Aggregated system health view CloudWatch Alarms (15+ alarms):\nAPI Gateway: 5XX errors, 4XX errors, latency Lambda: Error rate, throttles, duration DynamoDB: Read/write throttles, latency S3: 4XX/5XX errors SQS: DLQ messages, queue age Cost: Daily spending warnings Há»‡ thá»‘ng thÃ´ng bÃ¡o:\nSNS Topic cho thÃ´ng bÃ¡o alarm Email subscriptions cho alerts Composite alarm cho tráº¡ng thÃ¡i sá»©c khá»e há»‡ thá»‘ng Kiáº¿n trÃºc â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ”‚ Observability Stack (Phase 7 - Dev Environment) â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ SNS Topic (Alarm Notifications) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Topic Name: EveryoneCook-dev-Alarms â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Email Subscription: team@everyonecook.cloud â”‚ â”‚\râ”‚ â”‚ â””â”€ Protocol: Email (yÃªu cáº§u xÃ¡c nháº­n) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ (Alarm Actions) â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ CloudWatch Alarms (15+ alarms) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ API Gateway Alarms: â”‚ â”‚\râ”‚ â”‚ â”œâ”€ 5XX Error Rate \u0026gt; 5% (Critical) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ 4XX Error Rate \u0026gt; 20% (Warning) â”‚ â”‚\râ”‚ â”‚ â””â”€ P99 Latency \u0026gt; 3s (Warning) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ Lambda Alarms: â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Error Rate \u0026gt; 5% (Critical) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Throttles \u0026gt; 10 (Critical) â”‚ â”‚\râ”‚ â”‚ â””â”€ P99 Duration \u0026gt; 10s (Warning) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ DynamoDB Alarms: â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Read Throttles \u0026gt; 10 (Critical) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Write Throttles \u0026gt; 10 (Critical) â”‚ â”‚\râ”‚ â”‚ â””â”€ P99 Latency \u0026gt; 100ms (Warning) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ S3 Alarms: â”‚ â”‚\râ”‚ â”‚ â”œâ”€ 4XX Error Rate \u0026gt; 5% (Warning) â”‚ â”‚\râ”‚ â”‚ â””â”€ 5XX Errors \u0026gt; 0 (Critical) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ SQS Alarms: â”‚ â”‚\râ”‚ â”‚ â”œâ”€ DLQ Messages \u0026gt; 0 (Critical) â”‚ â”‚\râ”‚ â”‚ â””â”€ Message Age \u0026gt; 5 minutes (Warning) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ Cost Alarms: â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Daily Cost \u0026gt; $50 (Warning) â”‚ â”‚\râ”‚ â”‚ â””â”€ Daily Cost \u0026gt; $100 (Critical) â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚ â”‚\râ”‚ â–¼ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ Composite Alarm (System Health) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Name: EveryoneCook-dev-SystemHealth â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Triggers: Báº¤T Ká»² critical alarm nÃ o kÃ­ch hoáº¡t â”‚ â”‚\râ”‚ â”‚ â””â”€ Action: Gá»­i SNS notification â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ”‚ â”‚\râ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\râ”‚ â”‚ CloudWatch Dashboards (4 dashboards) â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 1. Core Dashboard (EveryoneCook-dev-Core): â”‚ â”‚\râ”‚ â”‚ â”œâ”€ DynamoDB: Read/Write capacity, throttles, latency â”‚ â”‚\râ”‚ â”‚ â”œâ”€ S3: Requests, errors, bytes transferred â”‚ â”‚\râ”‚ â”‚ â””â”€ CloudFront: Requests, error rates, bytes downloaded â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 2. Auth Dashboard (EveryoneCook-dev-Auth): â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Cognito: Sign-ups, sign-ins â”‚ â”‚\râ”‚ â”‚ â””â”€ Cognito: Failed authentications â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 3. Backend Dashboard (EveryoneCook-dev-Backend): â”‚ â”‚\râ”‚ â”‚ â”œâ”€ API Gateway: Requests, latency (P50/P95/P99) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ API Gateway: 4XX/5XX errors â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Lambda: Invocations, duration, errors, throttles â”‚ â”‚\râ”‚ â”‚ â””â”€ SQS: Messages sent, visible, oldest age â”‚ â”‚\râ”‚ â”‚ â”‚ â”‚\râ”‚ â”‚ 4. Overview Dashboard (EveryoneCook-dev-Overview): â”‚ â”‚\râ”‚ â”‚ â”œâ”€ System Health: Environment info, region â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Key Metrics: API requests, latency, Lambda stats â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Error Trends: API 5XX, Lambda errors (giá» gáº§n nháº¥t) â”‚ â”‚\râ”‚ â”‚ â”œâ”€ Cost Tracking: Chi phÃ­ Æ°á»›c tÃ­nh hÃ ng ngÃ y, xu hÆ°á»›ng 7d â”‚ â”‚\râ”‚ â”‚ â””â”€ Alarm Status: Composite alarm widget â”‚ â”‚\râ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\râ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\râ”‚\râ”‚ GiÃ¡m sÃ¡t\râ–¼\râ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\râ–¼ â–¼ â–¼\rCore Stack Auth Stack Backend Stack\r(DynamoDB, (Cognito) (API Gateway,\rS3, CDN) Lambda, SQS) Cáº¥u hÃ¬nh Stack Cáº¥u trÃºc thÆ° má»¥c infrastructure/lib/stacks/\râ””â”€â”€ observability-stack.ts # Observability Stack implementation (1175 dÃ²ng) Code Implementation Highlights File: infrastructure/lib/stacks/observability-stack.ts\n1. SNS Topic cho Alarms /** * Táº¡o SNS Topic cho CloudWatch Alarms * Task 7.4.2 - Step 1 */ private createAlarmTopic(): sns.Topic { const topic = new sns.Topic(this, \u0026#39;AlarmTopic\u0026#39;, { topicName: `EveryoneCook-${this.config.environment}-Alarms`, displayName: \u0026#39;Everyone Cook CloudWatch Alarms\u0026#39;, }); // ThÃªm email subscription cho alarm notifications topic.addSubscription( new sns_subscriptions.EmailSubscription(this.config.contact.email) ); return topic; } Cáº¥u hÃ¬nh: Email subscription yÃªu cáº§u xÃ¡c nháº­n qua AWS SNS.\n2. API Gateway Alarms // API Gateway: High 5XX Error Rate (Critical) const api5xxAlarm = new cloudwatch.Alarm(this, \u0026#39;API-5XX-Critical\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-API-5XX-Critical`, alarmDescription: \u0026#39;API Gateway 5XX error rate \u0026gt; 5% trong 5 phÃºt\u0026#39;, metric: new cloudwatch.Metric({ namespace: \u0026#39;AWS/ApiGateway\u0026#39;, metricName: \u0026#39;5XXError\u0026#39;, dimensionsMap: { ApiName: apiName }, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), threshold: 5, evaluationPeriods: 2, comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_THRESHOLD, treatMissingData: cloudwatch.TreatMissingData.NOT_BREACHING, }); api5xxAlarm.addAlarmAction(alarmAction); // API Gateway: High Latency (Warning) const apiLatencyAlarm = new cloudwatch.Alarm(this, \u0026#39;API-Latency-High\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-API-Latency-High`, alarmDescription: \u0026#39;API Gateway P99 latency \u0026gt; 3s trong 5 phÃºt\u0026#39;, metric: new cloudwatch.Metric({ namespace: \u0026#39;AWS/ApiGateway\u0026#39;, metricName: \u0026#39;Latency\u0026#39;, dimensionsMap: { ApiName: apiName }, statistic: \u0026#39;p99\u0026#39;, period: cdk.Duration.minutes(5), }), threshold: 3000, // 3 giÃ¢y tÃ­nh báº±ng milliseconds evaluationPeriods: 2, comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_THRESHOLD, }); 3. Lambda Alarms // Lambda: High Error Rate (Critical) const lambdaErrorAlarm = new cloudwatch.Alarm(this, \u0026#39;Lambda-Error-Rate\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-Lambda-Error-Rate`, alarmDescription: \u0026#39;Lambda error rate \u0026gt; 5% trong 5 phÃºt\u0026#39;, metric: new cloudwatch.Metric({ namespace: \u0026#39;AWS/Lambda\u0026#39;, metricName: \u0026#39;Errors\u0026#39;, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), threshold: 5, evaluationPeriods: 2, comparisonOperator: cloudwatch.ComparisonOperator.GREATER_THAN_THRESHOLD, }); // Lambda: Throttles (Critical) const lambdaThrottleAlarm = new cloudwatch.Alarm(this, \u0026#39;Lambda-Throttle\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-Lambda-Throttle`, alarmDescription: \u0026#39;Lambda throttles \u0026gt; 10 trong 5 phÃºt\u0026#39;, metric: new cloudwatch.Metric({ namespace: \u0026#39;AWS/Lambda\u0026#39;, metricName: \u0026#39;Throttles\u0026#39;, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), threshold: 10, evaluationPeriods: 1, }); 4. DynamoDB Alarms // DynamoDB: Read Throttles (Critical) const dynamoReadThrottleAlarm = new cloudwatch.Alarm(this, \u0026#39;DynamoDB-Read-Throttle\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-DynamoDB-Read-Throttle`, alarmDescription: \u0026#39;DynamoDB read throttles \u0026gt; 10 trong 5 phÃºt\u0026#39;, metric: new cloudwatch.Metric({ namespace: \u0026#39;AWS/DynamoDB\u0026#39;, metricName: \u0026#39;ReadThrottleEvents\u0026#39;, dimensionsMap: { TableName: dynamoTableName }, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), threshold: 10, evaluationPeriods: 2, }); // DynamoDB: High Latency (Warning) const dynamoLatencyAlarm = new cloudwatch.Alarm(this, \u0026#39;DynamoDB-Latency-High\u0026#39;, { alarmName: `EveryoneCook-${this.config.environment}-DynamoDB-Latency-High`, alarmDescription: \u0026#39;DynamoDB P99 latency \u0026gt; 100ms trong 5 phÃºt\u0026#39;, metric: new cloudwatch.Metric({ namespace: \u0026#39;AWS/DynamoDB\u0026#39;, metricName: \u0026#39;SuccessfulRequestLatency\u0026#39;, dimensionsMap: { TableName: dynamoTableName, Operation: \u0026#39;Query\u0026#39;, }, statistic: \u0026#39;p99\u0026#39;, period: cdk.Duration.minutes(5), }), threshold: 100, // 100ms evaluationPeriods: 3, }); 5. Composite Alarm /** * Táº¡o Composite Alarm cho tráº¡ng thÃ¡i sá»©c khá»e tá»•ng thá»ƒ há»‡ thá»‘ng * Task 7.4.2 - Step 2 */ private createCompositeAlarm(alarms: cloudwatch.IAlarm[]): cloudwatch.CompositeAlarm { // Lá»c chá»‰ cÃ¡c critical alarms const criticalAlarms = alarms.filter( (alarm) =\u0026gt; alarm.alarmName.includes(\u0026#39;Critical\u0026#39;) || alarm.alarmName.includes(\u0026#39;Throttle\u0026#39;) ); const compositeAlarm = new cloudwatch.CompositeAlarm(this, \u0026#39;SystemHealth\u0026#39;, { compositeAlarmName: `EveryoneCook-${this.config.environment}-SystemHealth`, alarmDescription: \u0026#39;Tráº¡ng thÃ¡i sá»©c khá»e tá»•ng thá»ƒ há»‡ thá»‘ng - kÃ­ch hoáº¡t náº¿u báº¥t ká»³ critical alarm nÃ o fires\u0026#39;, alarmRule: cloudwatch.AlarmRule.anyOf( ...criticalAlarms.map((alarm) =\u0026gt; cloudwatch.AlarmRule.fromAlarm(alarm, cloudwatch.AlarmState.ALARM) ) ), }); compositeAlarm.addAlarmAction(new cloudwatch_actions.SnsAction(this.alarmTopic)); return compositeAlarm; } 6. Core Dashboard /** * Táº¡o Core Dashboard (DynamoDB, S3, CloudFront) */ private createCoreDashboard(props: ObservabilityStackProps): cloudwatch.Dashboard { const dashboard = new cloudwatch.Dashboard(this, \u0026#39;CoreDashboard\u0026#39;, { dashboardName: `EveryoneCook-${this.config.environment}-Core`, }); // DynamoDB Metrics dashboard.addWidgets( new cloudwatch.GraphWidget({ title: \u0026#39;DynamoDB - Read/Write Capacity\u0026#39;, left: [ new cloudwatch.Metric({ namespace: \u0026#39;AWS/DynamoDB\u0026#39;, metricName: \u0026#39;ConsumedReadCapacityUnits\u0026#39;, dimensionsMap: { TableName: dynamoTableName }, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), new cloudwatch.Metric({ namespace: \u0026#39;AWS/DynamoDB\u0026#39;, metricName: \u0026#39;ConsumedWriteCapacityUnits\u0026#39;, dimensionsMap: { TableName: dynamoTableName }, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), ], width: 12, }), new cloudwatch.GraphWidget({ title: \u0026#39;DynamoDB - Throttles\u0026#39;, left: [ new cloudwatch.Metric({ namespace: \u0026#39;AWS/DynamoDB\u0026#39;, metricName: \u0026#39;ReadThrottleEvents\u0026#39;, dimensionsMap: { TableName: dynamoTableName }, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), new cloudwatch.Metric({ namespace: \u0026#39;AWS/DynamoDB\u0026#39;, metricName: \u0026#39;WriteThrottleEvents\u0026#39;, dimensionsMap: { TableName: dynamoTableName }, statistic: \u0026#39;Sum\u0026#39;, period: cdk.Duration.minutes(5), }), ], width: 12, }) ); // S3 vÃ  CloudFront metrics... return dashboard; } 7. Overview Dashboard /** * Táº¡o Overview Dashboard (Aggregated view) */ private createOverviewDashboard(props: ObservabilityStackProps): cloudwatch.Dashboard { const dashboard = new cloudwatch.Dashboard(this, \u0026#39;OverviewDashboard\u0026#39;, { dashboardName: `EveryoneCook-${this.config.environment}-Overview`, }); // System Health Header dashboard.addWidgets( new cloudwatch.TextWidget({ markdown: `# Everyone Cook - System Overview\\n\\n**Environment:** ${this.config.environment}\\n\\n**Region:** ${this.region}`, width: 24, height: 2, }) ); // Key Metrics: API, Lambda, DynamoDB, S3 // Cost Tracking // Alarm Status Widget return dashboard; } HÆ°á»›ng dáº«n Triá»ƒn khai Äiá»u kiá»‡n tiÃªn quyáº¿t TrÆ°á»›c khi triá»ƒn khai Observability Stack, Ä‘áº£m báº£o:\nTáº¥t cáº£ cÃ¡c stack khÃ¡c Ä‘Ã£ triá»ƒn khai:\nDNS Stack (Phase 1) Certificate Stack (Phase 1.5) Core Stack (Phase 2) Auth Stack (Phase 3) Backend Stack (Phase 4) Frontend Stack (Phase 6 - Amplify) Stack exports cÃ³ sáºµn:\naws cloudformation list-exports --region ap-southeast-1 Expected exports:\nEveryoneCook-dev-Core-TableName EveryoneCook-dev-Core-ContentBucketName EveryoneCook-dev-Core-DistributionId EveryoneCook-dev-Auth-UserPoolId EveryoneCook-dev-Backend-ApiName Email Ä‘Ã£ cáº¥u hÃ¬nh:\nEmail há»£p lá»‡ trong infrastructure/config/dev.ts Email sáº½ nháº­n xÃ¡c nháº­n subscription SNS BÆ°á»›c 1: Xem láº¡i cáº¥u hÃ¬nh File: infrastructure/config/dev.ts\nexport const devConfig: EnvironmentConfig = { environment: \u0026#39;dev\u0026#39;, region: \u0026#39;ap-southeast-1\u0026#39;, // Email cho alarm notifications contact: { email: \u0026#39;your-email@example.com\u0026#39;, // âš ï¸ Cáº­p nháº­t cÃ¡i nÃ y phone: \u0026#39;+1234567890\u0026#39;, }, // Monitoring settings (Ä‘Ã£ cáº¥u hÃ¬nh) monitoring: { enableDetailedMonitoring: true, retainLogs: true, logRetentionDays: 7, enableXRay: false, // Táº¯t cho dev Ä‘á»ƒ tiáº¿t kiá»‡m chi phÃ­ }, }; âš ï¸ Quan trá»ng: Cáº­p nháº­t Ä‘á»‹a chá»‰ email Ä‘á»ƒ nháº­n thÃ´ng bÃ¡o alarm.\nBÆ°á»›c 2: Synthesize CloudFormation Template Di chuyá»ƒn Ä‘áº¿n thÆ° má»¥c infrastructure:\ncd D:\\Project_AWS\\everyonecook\\infrastructure Synthesize Observability Stack:\nnpm run synth Káº¿t quáº£ mong Ä‘á»£i (1175 dÃ²ng):\nâœ¨ Synthesis time: 3.5s\rResources:\r[+] AWS::SNS::Topic AlarmTopic\r[+] AWS::SNS::Subscription AlarmTopic/EmailSubscription\r[+] AWS::CloudWatch::Alarm API-5XX-Critical\r[+] AWS::CloudWatch::Alarm API-4XX-Warning\r[+] AWS::CloudWatch::Alarm API-Latency-High\r[+] AWS::CloudWatch::Alarm Lambda-Error-Rate\r[+] AWS::CloudWatch::Alarm Lambda-Throttle\r[+] AWS::CloudWatch::Alarm Lambda-Duration-High\r[+] AWS::CloudWatch::Alarm DynamoDB-Read-Throttle\r[+] AWS::CloudWatch::Alarm DynamoDB-Write-Throttle\r[+] AWS::CloudWatch::Alarm DynamoDB-Latency-High\r[+] AWS::CloudWatch::Alarm S3-4XX-Warning\r[+] AWS::CloudWatch::Alarm S3-5XX-Critical\r[+] AWS::CloudWatch::Alarm SQS-DLQ-Messages\r[+] AWS::CloudWatch::Alarm SQS-Queue-Age\r[+] AWS::CloudWatch::Alarm Cost-Warning\r[+] AWS::CloudWatch::Alarm Cost-Critical\r[+] AWS::CloudWatch::CompositeAlarm SystemHealth\r[+] AWS::CloudWatch::Dashboard CoreDashboard\r[+] AWS::CloudWatch::Dashboard AuthDashboard\r[+] AWS::CloudWatch::Dashboard BackendDashboard\r[+] AWS::CloudWatch::Dashboard OverviewDashboard\rOutputs:\r- AlarmTopicArn\r- CompositeAlarmName\r- CoreDashboardName\r- AuthDashboardName\r- BackendDashboardName\r- OverviewDashboardName Screenshot: CDK synth output hiá»ƒn thá»‹ táº¥t cáº£ tÃ i nguyÃªn Observability Stack\nBÆ°á»›c 3: Xem láº¡i Generated Template Má»Ÿ CloudFormation template Ä‘Ã£ táº¡o:\ncode infrastructure/cdk.out/EveryoneCook-dev-Observability.template.json Screenshot: Generated CloudFormation template hiá»ƒn thá»‹ SNS Topic, 15+ Alarms, Composite Alarm vÃ  4 Dashboards\nBÆ°á»›c 4: Deploy Observability Stack Deploy sá»­ dá»¥ng CDK:\nnpx cdk deploy EveryoneCook-dev-Observability --require-approval never Thá»i gian triá»ƒn khai dá»± kiáº¿n: 2-3 phÃºt\nKáº¿t quáº£ Deployment:\nEveryoneCook-dev-Observability: deploying...\rEveryoneCook-dev-Observability: creating CloudFormation changeset...\rEveryoneCook-dev-Observability\rOutputs:\rEveryoneCook-dev-Observability.AlarmTopicArn = arn:aws:sns:ap-southeast-1:123456789012:EveryoneCook-dev-Alarms\rEveryoneCook-dev-Observability.CompositeAlarmName = EveryoneCook-dev-SystemHealth\rEveryoneCook-dev-Observability.CoreDashboardName = EveryoneCook-dev-Core\rEveryoneCook-dev-Observability.AuthDashboardName = EveryoneCook-dev-Auth\rEveryoneCook-dev-Observability.BackendDashboardName = EveryoneCook-dev-Backend\rEveryoneCook-dev-Observability.OverviewDashboardName = EveryoneCook-dev-Overview\rStack ARN:\rarn:aws:cloudformation:ap-southeast-1:123456789012:stack/EveryoneCook-dev-Observability/...\râœ¨ Deployment time: 2m 15s XÃ¡c minh BÆ°á»›c 1: XÃ¡c minh CloudFormation Stack Äiá»u hÆ°á»›ng Ä‘áº¿n CloudFormation Console:\nAWS Console â†’ CloudFormation â†’ Stacks XÃ¡c minh Stack:\nStack Name: EveryoneCook-dev-Observability Status: CREATE_COMPLETE âœ… Resources: 24 resources Ä‘Ã£ táº¡o Screenshot: CloudFormation stack vá»›i tráº¡ng thÃ¡i CREATE_COMPLETE vÃ  24 resources\nScreenshot: CloudFormation Outputs tab hiá»ƒn thá»‹ táº¥t cáº£ 6 outputs\nBÆ°á»›c 2: XÃ¡c minh CloudWatch Alarms Äiá»u hÆ°á»›ng Ä‘áº¿n CloudWatch Console â†’ Alarms:\nAWS Console â†’ CloudWatch â†’ All alarms XÃ¡c minh Alarms Ä‘Ã£ táº¡o (15+ alarms):\nTÃªn Alarm Loáº¡i Metric NgÆ°á»¡ng Tráº¡ng thÃ¡i EveryoneCook-dev-API-5XX-Critical Critical API 5XX Errors \u0026gt; 5 OK EveryoneCook-dev-API-4XX-Warning Warning API 4XX Errors \u0026gt; 20 OK EveryoneCook-dev-API-Latency-High Warning API P99 Latency \u0026gt; 3000ms OK EveryoneCook-dev-Lambda-Error-Rate Critical Lambda Errors \u0026gt; 5 OK EveryoneCook-dev-Lambda-Throttle Critical Lambda Throttles \u0026gt; 10 OK EveryoneCook-dev-Lambda-Duration-High Warning Lambda P99 Duration \u0026gt; 10000ms OK EveryoneCook-dev-DynamoDB-Read-Throttle Critical DynamoDB Read Throttles \u0026gt; 10 OK EveryoneCook-dev-DynamoDB-Write-Throttle Critical DynamoDB Write Throttles \u0026gt; 10 OK EveryoneCook-dev-DynamoDB-Latency-High Warning DynamoDB P99 Latency \u0026gt; 100ms OK EveryoneCook-dev-S3-4XX-Warning Warning S3 4XX Errors \u0026gt; 5% OK EveryoneCook-dev-S3-5XX-Critical Critical S3 5XX Errors \u0026gt; 0 OK EveryoneCook-dev-SQS-DLQ-Messages Critical SQS DLQ Messages \u0026gt; 0 OK EveryoneCook-dev-SQS-Queue-Age Warning SQS Message Age \u0026gt; 300s OK EveryoneCook-dev-Cost-Warning Warning Daily Cost \u0026gt; $50 OK EveryoneCook-dev-Cost-Critical Critical Daily Cost \u0026gt; $100 OK XÃ¡c minh Composite Alarm:\nName: EveryoneCook-dev-SystemHealth Type: Composite Rule: Báº¤T Ká»² critical alarm nÃ o â†’ ALARM Status: OK âœ… Screenshot: CloudWatch Alarms console hiá»ƒn thá»‹ táº¥t cáº£ 15+ alarms vá»›i tráº¡ng thÃ¡i OK\nScreenshot: Chi tiáº¿t Composite alarm cho giÃ¡m sÃ¡t tráº¡ng thÃ¡i sá»©c khá»e há»‡ thá»‘ng\nBÆ°á»›c 3: XÃ¡c minh CloudWatch Dashboards Äiá»u hÆ°á»›ng Ä‘áº¿n CloudWatch Console â†’ Dashboards:\nAWS Console â†’ CloudWatch â†’ Dashboards XÃ¡c minh Dashboards Ä‘Ã£ táº¡o (5 dashboards):\n1. Core Dashboard (EveryoneCook-dev-Core) Má»Ÿ dashboard vÃ  xÃ¡c minh cÃ¡c widgets:\nDynamoDB Widgets:\nBiá»ƒu Ä‘á»“ Read/Write Capacity Biá»ƒu Ä‘á»“ Throttles Biá»ƒu Ä‘á»“ Latency (P99) Metric Table Size S3 Widgets:\nBiá»ƒu Ä‘á»“ Requests Biá»ƒu Ä‘á»“ Errors (4XX/5XX) CloudFront Widgets:\nBiá»ƒu Ä‘á»“ Requests Biá»ƒu Ä‘á»“ Error Rate (4XX/5XX) Biá»ƒu Ä‘á»“ Bytes Downloaded Screenshot: Core Dashboard hiá»ƒn thá»‹ DynamoDB, S3 vÃ  CloudFront metrics\n2. Auth Dashboard (EveryoneCook-dev-Auth) Cognito Widgets:\nBiá»ƒu Ä‘á»“ Sign-ups Biá»ƒu Ä‘á»“ Sign-ins Biá»ƒu Ä‘á»“ Failed Authentications Screenshot: Auth Dashboard hiá»ƒn thá»‹ Cognito authentication metrics\n3. Backend Dashboard (EveryoneCook-dev-Backend) API Gateway Widgets:\nBiá»ƒu Ä‘á»“ Requests Biá»ƒu Ä‘á»“ Latency (P50/P95/P99) Biá»ƒu Ä‘á»“ 4XX Errors Biá»ƒu Ä‘á»“ 5XX Errors Lambda Widgets:\nBiá»ƒu Ä‘á»“ Invocations Biá»ƒu Ä‘á»“ Duration (P99) Biá»ƒu Ä‘á»“ Errors Biá»ƒu Ä‘á»“ Throttles SQS Widgets:\nBiá»ƒu Ä‘á»“ Messages Sent Biá»ƒu Ä‘á»“ Messages Visible Biá»ƒu Ä‘á»“ Oldest Message Age Screenshot: Backend Dashboard hiá»ƒn thá»‹ API Gateway, Lambda vÃ  SQS metrics\n4. Overview Dashboard (EveryoneCook-dev-Overview) Pháº§n System Health:\nHeader vá»›i thÃ´ng tin environment ThÃ´ng tin Region Key Metrics:\nAPI Requests (5m) - Single value widget API P99 Latency - Single value widget Lambda Invocations (5m) - Single value widget Lambda Errors (5m) - Single value widget DynamoDB Read/Write Throttles - Single value widgets S3 Requests vÃ  Errors - Single value widgets Trends:\nBiá»ƒu Ä‘á»“ Error Rates (API 5XX, Lambda Errors) Cost Tracking:\nEstimated Daily Cost - Single value widget Cost Trend (7 ngÃ y) - Graph widget Alarm Status:\nComposite Alarm widget hiá»ƒn thá»‹ tráº¡ng thÃ¡i sá»©c khá»e há»‡ thá»‘ng Screenshot: Overview Dashboard vá»›i system health, key metrics, error trends vÃ  cost tracking\nPhÃ¢n tÃ­ch Chi phÃ­ Chi phÃ­ hÃ ng thÃ¡ng (Development) Dá»‹ch vá»¥ TÃ i nguyÃªn Sá»‘ lÆ°á»£ng ÄÆ¡n giÃ¡ Tá»•ng CloudWatch Alarms Standard alarms 15 $0.10/alarm $1.50 CloudWatch Alarms Composite alarm 1 $0.50/alarm $0.50 CloudWatch Dashboards Dashboards (\u0026gt;3) 1 $3.00/dashboard $3.00 CloudWatch Metrics Standard resolution Bao gá»“m Miá»…n phÃ­ $0.00 SNS Email notifications \u0026lt;1000 Free tier $0.00 CloudWatch Logs 7-day retention ~5 GB $0.50/GB $2.50 Tá»•ng cá»™ng $7.50/thÃ¡ng Lá»£i Ã­ch Free Tier:\n3 dashboard Ä‘áº§u tiÃªn: Miá»…n phÃ­ 10 alarm Ä‘áº§u tiÃªn: Miá»…n phÃ­ (Ä‘Ã£ bao gá»“m) 1 triá»‡u API request Ä‘áº§u tiÃªn tá»›i CloudWatch: Miá»…n phÃ­ SNS email (1000 Ä‘áº§u tiÃªn): Miá»…n phÃ­ CÃ¡c bÆ°á»›c tiáº¿p theo Sau khi triá»ƒn khai Observability Stack:\nXÃ¡c nháº­n Email Subscription: Kiá»ƒm tra inbox vÃ  xÃ¡c nháº­n SNS subscription\nXem láº¡i Dashboards: LÃ m quen vá»›i táº¥t cáº£ 4 dashboards\nKiá»ƒm tra Alarms: KÃ­ch hoáº¡t test alarm Ä‘á»ƒ xÃ¡c minh thÃ´ng bÃ¡o\nGiÃ¡m sÃ¡t Chi phÃ­: Kiá»ƒm tra theo dÃµi chi phÃ­ hÃ ng ngÃ y trong Overview Dashboard\nâ­ï¸ Deploy Frontend: Tiáº¿p tá»¥c Ä‘áº¿n 5.10 Deploy to Amplify\nâ­ï¸ Test End-to-End: Kiá»ƒm tra luá»“ng á»©ng dá»¥ng hoÃ n chá»‰nh vÃ  giÃ¡m sÃ¡t metrics\nğŸ“Š Xem láº¡i Metrics: Sau 24 giá», xem láº¡i táº¥t cáº£ dashboards Ä‘á»ƒ cÃ³ baseline metrics\nTÃ³m táº¯t Báº¡n Ä‘Ã£ triá»ƒn khai thÃ nh cÃ´ng Observability Stack vá»›i:\n1 SNS Topic cho thÃ´ng bÃ¡o alarm\n15+ CloudWatch Alarms cho cÃ¡c metric quan trá»ng\n1 Composite Alarm cho tráº¡ng thÃ¡i sá»©c khá»e tá»•ng thá»ƒ há»‡ thá»‘ng\n4 CloudWatch Dashboards cho giÃ¡m sÃ¡t\nEmail Notifications Ä‘Ã£ cáº¥u hÃ¬nh vÃ  xÃ¡c nháº­n\nThÃ nh tá»±u chÃ­nh:\nTáº§m nhÃ¬n hoÃ n chá»‰nh vá» tráº¡ng thÃ¡i sá»©c khá»e há»‡ thá»‘ng Cáº£nh bÃ¡o chá»§ Ä‘á»™ng cho cÃ¡c váº¥n Ä‘á» nghiÃªm trá»ng Theo dÃµi vÃ  tá»‘i Æ°u chi phÃ­ Dashboards giÃ¡m sÃ¡t táº­p trung Tá»•ng tÃ i nguyÃªn: 24 CloudFormation resources\nThá»i gian triá»ƒn khai: ~2-3 phÃºt\nChi phÃ­ hÃ ng thÃ¡ng: ~$7.50 (mÃ´i trÆ°á»ng dev)\nğŸ‰ ChÃºc má»«ng! Báº¡n Ä‘Ã£ hoÃ n thÃ nh táº¥t cáº£ cÃ¡c triá»ƒn khai infrastructure stack. Ná»n táº£ng EveryoneCook cá»§a báº¡n giá» Ä‘Ã¢y cÃ³ giÃ¡m sÃ¡t vÃ  observability toÃ n diá»‡n.\nTiáº¿p theo: 5.10 Deploy to Amplify Ä‘á»ƒ triá»ƒn khai á»©ng dá»¥ng Next.js frontend.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.08-test-endpoints/",
	"title": "Kiá»ƒm Tra Endpoints ToÃ n Diá»‡n",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Sau khi deploy backend thÃ nh cÃ´ng, báº¡n cáº§n test táº¥t cáº£ API endpoints Ä‘á»ƒ Ä‘áº£m báº£o há»‡ thá»‘ng hoáº¡t Ä‘á»™ng Ä‘Ãºng tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i. Workshop nÃ y hÆ°á»›ng dáº«n chi tiáº¿t cÃ¡ch test tá»«ng module cá»§a há»‡ thá»‘ng EveryoneCook.\nKiáº¿n trÃºc API Dá»± Ã¡n EveryoneCook sá»­ dá»¥ng API Router Pattern vá»›i cÃ¡c thÃ nh pháº§n:\nAPI Gateway: REST API vá»›i custom domain api-dev.everyonecook.cloud API Router Lambda: Routing requests tá»›i cÃ¡c module Lambda 5 Module Lambda: auth-user-lambda: Authentication \u0026amp; User Management social-lambda: Posts, Comments, Reactions, Friends, Notifications recipe-ai-lambda: Recipes \u0026amp; AI Features admin-lambda: Admin Dashboard \u0026amp; Content Moderation upload-lambda: File Upload vá»›i S3 Presigned URLs 4 SQS Queues: Async processing (AI, Image, Analytics, Notifications) WAF: Web Application Firewall báº£o vá»‡ API Luá»“ng Test 1. Láº¥y API Endpoint\r2. Test Health Check (Public)\r3. Test User Registration \u0026amp; Verification\r4. Test User Login \u0026amp; Get JWT Token\r5. Test Profile Management\r6. Test Social Features (Posts, Friends, Notifications)\r7. Test Recipe Management\r8. Test AI Features (Recipe Generation, Translation)\r9. Test File Upload (S3 + CloudFront)\r10. Test Admin Features (náº¿u cÃ³ quyá»n admin) BÆ°á»›c 1: Láº¥y API Endpoint 1. Láº¥y API URL tá»« CloudFormation Outputs\n# Get API endpoint tá»« Backend Stack $API_ENDPOINT = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Backend ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`ApiCustomDomain`].OutputValue\u0026#39; ` --output text Write-Host \u0026#34;API Endpoint: $API_ENDPOINT\u0026#34; # Output: https://api-dev.everyonecook.cloud 2. Hoáº·c láº¥y tá»« file outputs.json\n# Äá»c tá»« infrastructure/outputs.json cd D:\\Project_AWS\\everyonecook\\infrastructure $outputs = Get-Content outputs.json | ConvertFrom-Json $API_ENDPOINT = $outputs.\u0026#39;EveryoneCook-dev-Backend\u0026#39;.ApiCustomDomain Write-Host \u0026#34;API Endpoint: $API_ENDPOINT\u0026#34; 3. Setup biáº¿n mÃ´i trÆ°á»ng\n# Set API endpoint cho PowerShell session $API_ENDPOINT = \u0026#34;https://api-dev.everyonecook.cloud\u0026#34; $HEADERS_JSON = @{\u0026#34;Content-Type\u0026#34;=\u0026#34;application/json\u0026#34;} Write-Host \u0026#34;Environment configured:\u0026#34; Write-Host \u0026#34; API Endpoint: $API_ENDPOINT\u0026#34; BÆ°á»›c 2: Test Health Check (Public) Health check endpoint khÃ´ng cáº§n authentication.\n1. Test vá»›i PowerShell\n# Test health endpoint $response = Invoke-RestMethod -Uri \u0026#34;$API_ENDPOINT/health\u0026#34; -Method Get $response | ConvertTo-Json # Expected Output: # { # \u0026#34;status\u0026#34;: \u0026#34;healthy\u0026#34;, # \u0026#34;timestamp\u0026#34;: \u0026#34;2025-12-09T10:30:00.000Z\u0026#34;, # \u0026#34;service\u0026#34;: \u0026#34;EveryoneCook API\u0026#34;, # \u0026#34;environment\u0026#34;: \u0026#34;dev\u0026#34; # } 2. Test vá»›i curl (náº¿u cÃ³ WSL hoáº·c Git Bash)\ncurl -X GET \u0026#34;$API_ENDPOINT/health\u0026#34; | jq 3. Verify API Router hoáº¡t Ä‘á»™ng\n# Check API Router Lambda logs aws logs tail /aws/lambda/everyonecook-dev-api-router --follow âœ… Káº¿t quáº£ mong Ä‘á»£i: Status 200, response JSON cÃ³ \u0026quot;status\u0026quot;: \u0026quot;healthy\u0026quot;\nBÆ°á»›c 3: Test User Registration 1. Láº¥y User Pool Client ID\n# Get Cognito User Pool Client ID $CLIENT_ID = aws cloudformation describe-stacks ` --stack-name EveryoneCook-dev-Auth ` --query \u0026#39;Stacks[0].Outputs[?OutputKey==`UserPoolClientId`].OutputValue\u0026#39; ` --output text Write-Host \u0026#34;User Pool Client ID: $CLIENT_ID\u0026#34; 2. Register User má»›i\n# ÄÄƒng kÃ½ user vá»›i Cognito (khÃ´ng qua API - trá»±c tiáº¿p vá»›i Cognito) $username = \u0026#34;testuser_$(Get-Random -Maximum 9999)\u0026#34; $email = \u0026#34;test_$username@example.com\u0026#34; $password = \u0026#34;TestPassword123!\u0026#34; aws cognito-idp sign-up ` --client-id $CLIENT_ID ` --username $username ` --password $password ` --user-attributes ` Name=email,Value=$email ` Name=given_name,Value=\u0026#34;Test User\u0026#34; Write-Host \u0026#34;User registered: $username\u0026#34; Write-Host \u0026#34;Email: $email\u0026#34; Write-Host \u0026#34;Password: $password\u0026#34; 3. Verify Pre-Signup Trigger (Lambda Cognito Trigger)\n# Check logs cá»§a Pre-Signup trigger aws logs tail /aws/lambda/EveryoneCook-dev-PreSignup --since 5m âœ… Káº¿t quáº£ mong Ä‘á»£i:\nCognito tráº£ vá» success message Pre-Signup trigger logs khÃ´ng cÃ³ error BÆ°á»›c 4: Verify Email \u0026amp; Confirm User 1. Láº¥y Confirmation Code\n# Trong mÃ´i trÆ°á»ng dev, cÃ³ thá»ƒ láº¥y code tá»« email hoáº·c dÃ¹ng admin command # CÃ¡ch 1: Check email (náº¿u dÃ¹ng real email) # CÃ¡ch 2: Admin confirm (cho testing) aws cognito-idp admin-confirm-sign-up ` --user-pool-id ap-southeast-1_PKoL34PF0 ` --username $username Write-Host \u0026#34;User confirmed: $username\u0026#34; 2. Verify Post-Confirmation Trigger\nPost-Confirmation trigger sáº½ tá»± Ä‘á»™ng táº¡o user profile trong DynamoDB.\n# Check DynamoDB - User profile Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng aws dynamodb get-item ` --table-name EveryoneCook-dev ` --key \u0026#34;{\\\u0026#34;PK\\\u0026#34;:{\\\u0026#34;S\\\u0026#34;:\\\u0026#34;USER#$username\\\u0026#34;},\\\u0026#34;SK\\\u0026#34;:{\\\u0026#34;S\\\u0026#34;:\\\u0026#34;PROFILE\\\u0026#34;}}\u0026#34; # Expected: User profile vá»›i cÃ¡c fields: # - userId (Cognito sub ID) # - email # - fullName # - createdAt # - updatedAt 3. Check Post-Confirmation Lambda logs\naws logs tail /aws/lambda/EveryoneCook-dev-PostConfirmation --since 5m âœ… Káº¿t quáº£ mong Ä‘á»£i: User profile Ä‘Æ°á»£c táº¡o trong DynamoDB table\nBÆ°á»›c 5: Test User Login \u0026amp; Get JWT Token 1. Login Ä‘á»ƒ láº¥y JWT tokens\n# Sign in vá»›i Cognito $authResult = aws cognito-idp initiate-auth ` --client-id $CLIENT_ID ` --auth-flow USER_PASSWORD_AUTH ` --auth-parameters USERNAME=$username,PASSWORD=$password ` | ConvertFrom-Json # Extract tokens $ID_TOKEN = $authResult.AuthenticationResult.IdToken $ACCESS_TOKEN = $authResult.AuthenticationResult.AccessToken $REFRESH_TOKEN = $authResult.AuthenticationResult.RefreshToken Write-Host \u0026#34;Login successful!\u0026#34; Write-Host \u0026#34;ID Token length: $($ID_TOKEN.Length)\u0026#34; 2. Verify Post-Authentication Trigger\nPost-Authentication trigger update lastLoginAt trong DynamoDB.\n# Check lastLoginAt updated aws dynamodb get-item ` --table-name EveryoneCook-dev ` --key \u0026#34;{\\\u0026#34;PK\\\u0026#34;:{\\\u0026#34;S\\\u0026#34;:\\\u0026#34;USER#$username\\\u0026#34;},\\\u0026#34;SK\\\u0026#34;:{\\\u0026#34;S\\\u0026#34;:\\\u0026#34;PROFILE\\\u0026#34;}}\u0026#34; ` --projection-expression \u0026#34;lastLoginAt\u0026#34; 3. Setup Authorization Header\n# Create headers with JWT token $HEADERS_AUTH = @{ \u0026#34;Content-Type\u0026#34; = \u0026#34;application/json\u0026#34; \u0026#34;Authorization\u0026#34; = \u0026#34;Bearer $ID_TOKEN\u0026#34; } âœ… Káº¿t quáº£ mong Ä‘á»£i: Login thÃ nh cÃ´ng, nháº­n Ä‘Æ°á»£c JWT tokens\nBÆ°á»›c 6: Test Profile Management Endpoint: /users/me, /users/profile\n1. Get Current User Profile\n# GET /users/me $response = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/users/me\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $response | ConvertTo-Json -Depth 5 # Expected Response: # { # \u0026#34;userId\u0026#34;: \u0026#34;...\u0026#34;, # \u0026#34;username\u0026#34;: \u0026#34;testuser_1234\u0026#34;, # \u0026#34;email\u0026#34;: \u0026#34;test_testuser_1234@example.com\u0026#34;, # \u0026#34;fullName\u0026#34;: \u0026#34;Test User\u0026#34;, # \u0026#34;birthday\u0026#34;: null, # \u0026#34;gender\u0026#34;: null, # \u0026#34;country\u0026#34;: null, # \u0026#34;createdAt\u0026#34;: \u0026#34;2025-12-09T10:30:00.000Z\u0026#34;, # \u0026#34;lastLoginAt\u0026#34;: \u0026#34;2025-12-09T11:00:00.000Z\u0026#34; # } 2. Update Profile (Onboarding)\n# PUT /users/profile - Complete onboarding $profileUpdate = @{ birthday = \u0026#34;1990-01-01\u0026#34; gender = \u0026#34;male\u0026#34; country = \u0026#34;Vietnam\u0026#34; bio = \u0026#34;Test user for EveryoneCook platform\u0026#34; } | ConvertTo-Json $response = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/users/profile\u0026#34; ` -Method Put ` -Headers $HEADERS_AUTH ` -Body $profileUpdate $response | ConvertTo-Json 3. Get Privacy Settings\n# GET /users/profile/privacy $privacy = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/users/profile/privacy\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $privacy | ConvertTo-Json 4. Update Privacy Settings\n# PUT /users/profile/privacy $privacyUpdate = @{ profileVisibility = \u0026#34;public\u0026#34; showEmail = $false showBirthday = $false allowFriendRequests = $true } | ConvertTo-Json Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/users/profile/privacy\u0026#34; ` -Method Put ` -Headers $HEADERS_AUTH ` -Body $privacyUpdate âœ… Káº¿t quáº£ mong Ä‘á»£i: Profile Ä‘Æ°á»£c update thÃ nh cÃ´ng trong DynamoDB\nBÆ°á»›c 7: Test Social Features - Posts Endpoints: /posts, /posts/{postId}\n1. Create Post\n# POST /posts $newPost = @{ content = \u0026#34;My first post on EveryoneCook! Testing the platform ğŸ³\u0026#34; visibility = \u0026#34;public\u0026#34; type = \u0026#34;text\u0026#34; } | ConvertTo-Json $postResponse = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/posts\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $newPost $POST_ID = $postResponse.postId Write-Host \u0026#34;Created Post ID: $POST_ID\u0026#34; $postResponse | ConvertTo-Json 2. Get All Posts (Feed)\n# GET /posts - Get all posts $posts = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/posts?limit=10\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH Write-Host \u0026#34;Found $($posts.items.Count) posts\u0026#34; $posts.items | ConvertTo-Json -Depth 3 3. Get Specific Post\n# GET /posts/{postId} $post = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/posts/$POST_ID\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $post | ConvertTo-Json 4. Like Post\n# POST /posts/{postId}/like Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/posts/$POST_ID/like\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH Write-Host \u0026#34;Post liked successfully\u0026#34; 5. Add Comment\n# POST /posts/{postId}/comments $comment = @{ content = \u0026#34;Great post! ğŸ‘\u0026#34; } | ConvertTo-Json $commentResponse = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/posts/$POST_ID/comments\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $comment $COMMENT_ID = $commentResponse.commentId Write-Host \u0026#34;Comment ID: $COMMENT_ID\u0026#34; 6. Get Post Comments\n# GET /posts/{postId}/comments $comments = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/posts/$POST_ID/comments\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $comments | ConvertTo-Json -Depth 3 âœ… Káº¿t quáº£ mong Ä‘á»£i: Posts, likes, comments Ä‘Æ°á»£c lÆ°u trong DynamoDB\nBÆ°á»›c 8: Test Social Features - Friends Endpoints: /friends/*\n1. Search Users\n# GET /users/search?q=test $users = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/users/search?q=test\u0026amp;limit=10\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $users | ConvertTo-Json 2. Send Friend Request (cáº§n 2 users)\n# POST /friends/{userId}/request # Giáº£ sá»­ cÃ³ USER_ID cá»§a user khÃ¡c $TARGET_USER_ID = \u0026#34;another-user-id\u0026#34; Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/friends/$TARGET_USER_ID/request\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH Write-Host \u0026#34;Friend request sent\u0026#34; 3. Get Friend Requests\n# GET /friends/requests $requests = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/friends/requests\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $requests | ConvertTo-Json âœ… Káº¿t quáº£ mong Ä‘á»£i: Friend requests Ä‘Æ°á»£c táº¡o vá»›i status \u0026ldquo;pending\u0026rdquo;\nBÆ°á»›c 9: Test Recipe Management Endpoints: /recipes, /recipes/{recipeId}\n1. Create Recipe\n# POST /recipes $newRecipe = @{ title = \u0026#34;Phá»Ÿ BÃ² HÃ  Ná»™i\u0026#34; description = \u0026#34;Traditional Vietnamese beef noodle soup\u0026#34; ingredients = @( @{ name = \u0026#34;beef bones\u0026#34;; amount = \u0026#34;2\u0026#34;; unit = \u0026#34;kg\u0026#34; } @{ name = \u0026#34;rice noodles\u0026#34;; amount = \u0026#34;500\u0026#34;; unit = \u0026#34;g\u0026#34; } @{ name = \u0026#34;ginger\u0026#34;; amount = \u0026#34;1\u0026#34;; unit = \u0026#34;piece\u0026#34; } @{ name = \u0026#34;star anise\u0026#34;; amount = \u0026#34;3\u0026#34;; unit = \u0026#34;pieces\u0026#34; } ) instructions = @( \u0026#34;Boil beef bones for 2-3 hours to make broth\u0026#34; \u0026#34;Add spices (ginger, star anise, cinnamon) and simmer\u0026#34; \u0026#34;Prepare rice noodles separately\u0026#34; \u0026#34;Serve noodles with broth and garnish with herbs\u0026#34; ) cuisine = \u0026#34;Vietnamese\u0026#34; difficulty = \u0026#34;medium\u0026#34; prepTime = 30 cookTime = 180 servings = 4 } | ConvertTo-Json -Depth 5 $recipeResponse = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/recipes\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $newRecipe $RECIPE_ID = $recipeResponse.recipeId Write-Host \u0026#34;Created Recipe ID: $RECIPE_ID\u0026#34; $recipeResponse | ConvertTo-Json -Depth 5 2. Get User\u0026rsquo;s Recipes\n# GET /users/{userId}/recipes $userId = $authResult.AuthenticationResult.AccessToken | ForEach-Object { [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String(($_.Split(\u0026#39;.\u0026#39;)[1]))) } | ConvertFrom-Json | Select-Object -ExpandProperty sub $recipes = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/users/$userId/recipes\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $recipes | ConvertTo-Json -Depth 3 3. Search Recipes\n# POST /recipes/search $searchQuery = @{ query = \u0026#34;phá»Ÿ\u0026#34; filters = @{ cuisine = \u0026#34;Vietnamese\u0026#34; difficulty = \u0026#34;medium\u0026#34; } limit = 10 } | ConvertTo-Json $searchResults = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/recipes/search\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $searchQuery $searchResults | ConvertTo-Json -Depth 3 âœ… Káº¿t quáº£ mong Ä‘á»£i: Recipes Ä‘Æ°á»£c lÆ°u trong DynamoDB vá»›i proper structure\nBÆ°á»›c 10: Test AI Features (Bedrock) Endpoints: /recipes/generate-ai, /ai/nutrition, /dictionary/{ingredient}\n1. Generate Recipe with AI\n# POST /recipes/generate-ai $aiRequest = @{ ingredients = @(\u0026#34;chicken\u0026#34;, \u0026#34;rice\u0026#34;, \u0026#34;vegetables\u0026#34;, \u0026#34;fish sauce\u0026#34;) cuisine = \u0026#34;Vietnamese\u0026#34; dietaryRestrictions = @(\u0026#34;gluten-free\u0026#34;) servings = 4 difficulty = \u0026#34;medium\u0026#34; } | ConvertTo-Json Write-Host \u0026#34;Generating recipe with AI... (this takes 5-10 seconds)\u0026#34; $aiRecipe = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/recipes/generate-ai\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $aiRequest $aiRecipe | ConvertTo-Json -Depth 5 # Expected: AI-generated recipe with Vietnamese ingredient names # Uses Amazon Bedrock Claude model 2. Get Nutrition Analysis\n# POST /ai/nutrition $nutritionRequest = @{ ingredients = @( @{ name = \u0026#34;chicken breast\u0026#34;; amount = \u0026#34;200\u0026#34;; unit = \u0026#34;g\u0026#34; } @{ name = \u0026#34;rice\u0026#34;; amount = \u0026#34;100\u0026#34;; unit = \u0026#34;g\u0026#34; } ) } | ConvertTo-Json $nutrition = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/ai/nutrition\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $nutritionRequest $nutrition | ConvertTo-Json 3. Translate Ingredient (Vietnamese Dictionary)\n# GET /dictionary/{ingredient} $translation = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/dictionary/tomato\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH Write-Host \u0026#34;Translation: $($translation.vietnamese)\u0026#34; # Expected: { \u0026#34;ingredient\u0026#34;: \u0026#34;tomato\u0026#34;, \u0026#34;vietnamese\u0026#34;: \u0026#34;cÃ  chua\u0026#34; } âœ… Káº¿t quáº£ mong Ä‘á»£i:\nAI recipe generation máº¥t 5-10 giÃ¢y Response cÃ³ Vietnamese ingredient names Bedrock Lambda Ä‘Æ°á»£c invoke BÆ°á»›c 11: Test File Upload (S3 + CloudFront) Endpoint: /upload/presigned-url\n1. Request Presigned URL\n# POST /upload/presigned-url $uploadRequest = @{ fileType = \u0026#34;avatar\u0026#34; fileName = \u0026#34;test-avatar.jpg\u0026#34; contentType = \u0026#34;image/jpeg\u0026#34; fileSize = 1024000 # 1MB } | ConvertTo-Json $uploadResponse = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/upload/presigned-url\u0026#34; ` -Method Post ` -Headers $HEADERS_AUTH ` -Body $uploadRequest $PRESIGNED_URL = $uploadResponse.url $UPLOAD_KEY = $uploadResponse.key Write-Host \u0026#34;Presigned URL: $PRESIGNED_URL\u0026#34; Write-Host \u0026#34;Upload Key: $UPLOAD_KEY\u0026#34; 2. Upload File to S3\n# Create test image file $testImage = \u0026#34;D:\\test-avatar.jpg\u0026#34; # (Táº¡o file test image hoáº·c dÃ¹ng file cÃ³ sáºµn) # Upload file using presigned URL Invoke-RestMethod ` -Uri $PRESIGNED_URL ` -Method Put ` -InFile $testImage ` -ContentType \u0026#34;image/jpeg\u0026#34; Write-Host \u0026#34;File uploaded to S3 successfully\u0026#34; 3. Access via CloudFront CDN\n# Get CloudFront distribution domain $CDN_DOMAIN = \u0026#34;d2shrpzup69rju.cloudfront.net\u0026#34; # Tá»« outputs.json # Access file via CloudFront $fileUrl = \u0026#34;https://$CDN_DOMAIN/$UPLOAD_KEY\u0026#34; Invoke-WebRequest -Uri $fileUrl -Method Head # Check caching headers # First request: X-Cache: Miss from cloudfront # Second request: X-Cache: Hit from cloudfront âœ… Káº¿t quáº£ mong Ä‘á»£i: File Ä‘Æ°á»£c upload lÃªn S3 vÃ  serve qua CloudFront\nBÆ°á»›c 12: Test Admin Features (Requires Admin Role) Endpoints: /admin/*\n1. Get System Stats\n# GET /admin/stats $stats = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/admin/stats\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $stats | ConvertTo-Json # Expected (náº¿u cÃ³ admin role): # { # \u0026#34;totalUsers\u0026#34;: 123, # \u0026#34;totalPosts\u0026#34;: 456, # \u0026#34;totalRecipes\u0026#34;: 789, # \u0026#34;activeUsers\u0026#34;: 45 # } 2. Get All Users\n# GET /admin/users $allUsers = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/admin/users?limit=20\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $allUsers | ConvertTo-Json 3. Get Reported Posts\n# GET /admin/posts/reported $reportedPosts = Invoke-RestMethod ` -Uri \u0026#34;$API_ENDPOINT/admin/posts/reported\u0026#34; ` -Method Get ` -Headers $HEADERS_AUTH $reportedPosts | ConvertTo-Json âš ï¸ LÆ°u Ã½: Admin endpoints require user cÃ³ group \u0026ldquo;Admins\u0026rdquo; trong Cognito User Pool\nBÆ°á»›c 13: Verify Async Processing (SQS Queues) 1. Check SQS Queues\n# List all queues aws sqs list-queues --queue-name-prefix everyonecook-dev # Get AI Queue attributes $AI_QUEUE_URL = \u0026#34;https://sqs.ap-southeast-1.amazonaws.com/616580903213/everyonecook-dev-ai-queue\u0026#34; aws sqs get-queue-attributes ` --queue-url $AI_QUEUE_URL ` --attribute-names ApproximateNumberOfMessages,ApproximateNumberOfMessagesNotVisible 2. Monitor Worker Lambdas\n# Check Image Processing Worker logs aws logs tail /aws/lambda/everyonecook-dev-image-worker --follow # Check AI Worker logs (for recipe generation) aws logs tail /aws/lambda/everyonecook-dev-ai-worker --follow âœ… Káº¿t quáº£ mong Ä‘á»£i: Messages Ä‘Æ°á»£c process bá»Ÿi worker Lambdas\nTesting Checklist Sá»­ dá»¥ng checklist nÃ y Ä‘á»ƒ track progress:\nPublic Endpoints GET /health - Health check responds GET /status - Status check responds Authentication \u0026amp; User Management User registration vá»›i Cognito works Email verification/confirmation works User login successful, nháº­n JWT tokens GET /users/me - Get current user profile PUT /users/profile - Update profile GET /users/profile/privacy - Get privacy settings PUT /users/profile/privacy - Update privacy settings Social Features POST /posts - Create post GET /posts - Get posts feed GET /posts/{postId} - Get specific post POST /posts/{postId}/like - Like post POST /posts/{postId}/comments - Add comment GET /posts/{postId}/comments - Get comments POST /friends/{userId}/request - Send friend request GET /friends/requests - Get friend requests GET /notifications - Get notifications Recipe Management POST /recipes - Create recipe GET /recipes - Get all recipes GET /recipes/{recipeId} - Get specific recipe POST /recipes/search - Search recipes AI Features POST /recipes/generate-ai - AI recipe generation (Bedrock) POST /ai/nutrition - Nutrition analysis GET /dictionary/{ingredient} - Ingredient translation File Upload POST /upload/presigned-url - Get presigned URL Upload file to S3 using presigned URL Access file via CloudFront CDN Verify CloudFront caching (Miss â†’ Hit) Admin Features (if admin) GET /admin/stats - Get system stats GET /admin/users - List all users GET /admin/posts/reported - Get reported content Infrastructure All Lambda functions execute without errors SQS queues process messages correctly CloudWatch logs show proper execution DynamoDB items created correctly WAF rules protecting API Gateway Performance Benchmarks Thá»i gian pháº£n há»“i mong Ä‘á»£i:\nEndpoint Thá»i gian mong Ä‘á»£i Ghi chÃº GET /health \u0026lt; 50ms Direct response POST /auth/login \u0026lt; 200ms Cognito validation GET /users/me \u0026lt; 100ms DynamoDB single query POST /posts \u0026lt; 300ms DynamoDB write + notifications GET /posts \u0026lt; 500ms DynamoDB query with pagination POST /recipes/generate-ai 5-10 seconds Bedrock AI generation POST /upload/presigned-url \u0026lt; 100ms S3 presigned URL generation POST /recipes/search \u0026lt; 200ms DynamoDB GSI query Xá»­ LÃ½ Sá»± Cá»‘ ThÆ°á»ng Gáº·p 1. 401 Unauthorized # Verify JWT token not expired $ID_TOKEN = \u0026#34;your-token-here\u0026#34; $parts = $ID_TOKEN.Split(\u0026#39;.\u0026#39;) $payload = [System.Text.Encoding]::UTF8.GetString( [System.Convert]::FromBase64String($parts[1]) ) | ConvertFrom-Json $exp = [DateTimeOffset]::FromUnixTimeSeconds($payload.exp).DateTime Write-Host \u0026#34;Token expires at: $exp\u0026#34; # If expired, login again 2. 403 Forbidden (WAF Block) # Check WAF logs aws wafv2 get-web-acl ` --name EveryoneCook-API-WAF-dev ` --scope REGIONAL ` --region ap-southeast-1 # Check if IP blocked 3. 500 Internal Server Error # Check Lambda function logs aws logs tail /aws/lambda/everyonecook-dev-api-router --follow aws logs tail /aws/lambda/everyonecook-dev-social --follow # Check DynamoDB table aws dynamodb describe-table --table-name EveryoneCook-dev 4. Slow AI Recipe Generation # Check Bedrock model availability aws bedrock list-foundation-models --region us-east-1 # Check AI Queue aws sqs get-queue-attributes ` --queue-url $AI_QUEUE_URL ` --attribute-names All CÃ¡c BÆ°á»›c Tiáº¿p Theo Sau khi test thÃ nh cÃ´ng táº¥t cáº£ endpoints:\nâœ… Verify Infrastructure: Táº¥t cáº£ AWS resources hoáº¡t Ä‘á»™ng Ä‘Ãºng ğŸ“Š Monitor CloudWatch: Check metrics vÃ  logs ğŸ”’ Security Review: Verify WAF rules vÃ  Cognito auth ğŸ“ Document API: Update API documentation náº¿u cáº§n ğŸš€ Deploy Frontend: Proceed to frontend deployment ğŸ“¦ Version Control: Commit code vÃ  push to GitLab (next step) Tiáº¿p tá»¥c: 5.09 - Push to GitLab\n2. XÃ¡c nháº­n User\n# Confirm user with code aws cognito-idp confirm-sign-up \\ --client-id $CLIENT_ID \\ --username testuser \\ --confirmation-code 123456 3. Verify Post-Confirmation Trigger\n# Check if user profile was created in DynamoDB aws dynamodb get-item \\ --table-name EveryoneCook-dev \\ --key \u0026#39;{\u0026#34;PK\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;USER#testuser\u0026#34;},\u0026#34;SK\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;PROFILE\u0026#34;}}\u0026#39; # Should return user profile with: # - PK: USER#testuser # - SK: PROFILE # - userId: cognito-sub-id # - email: test@example.com # - fullName: Test User # - birthday: null # - gender: null # - country: null BÆ°á»›c 5: Test User Login 1. ÄÄƒng nháº­p\n# Sign in to get tokens TOKENS=$(aws cognito-idp initiate-auth \\ --client-id $CLIENT_ID \\ --auth-flow USER_PASSWORD_AUTH \\ --auth-parameters USERNAME=testuser,PASSWORD=TestPassword123!) # Extract tokens ACCESS_TOKEN=$(echo $TOKENS | jq -r \u0026#39;.AuthenticationResult.AccessToken\u0026#39;) ID_TOKEN=$(echo $TOKENS | jq -r \u0026#39;.AuthenticationResult.IdToken\u0026#39;) REFRESH_TOKEN=$(echo $TOKENS | jq -r \u0026#39;.AuthenticationResult.RefreshToken\u0026#39;) echo \u0026#34;ID Token: $ID_TOKEN\u0026#34; 2. Verify Post-Authentication Trigger\n# Check if lastLoginAt was updated aws dynamodb get-item \\ --table-name EveryoneCook-dev \\ --key \u0026#39;{\u0026#34;PK\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;USER#testuser\u0026#34;},\u0026#34;SK\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;PROFILE\u0026#34;}}\u0026#39; \\ --projection-expression \u0026#34;lastLoginAt\u0026#34; BÆ°á»›c 6: Test Profile Management 1. Láº¥y Profile\n# Get user profile curl -X GET \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ $API_ENDPOINT/auth/profile # Expected: User profile data 2. Cáº­p nháº­t Profile\n# Update profile (onboarding) curl -X PUT \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;birthday\u0026#34;: \u0026#34;1990-01-01\u0026#34;, \u0026#34;gender\u0026#34;: \u0026#34;male\u0026#34;, \u0026#34;country\u0026#34;: \u0026#34;US\u0026#34; }\u0026#39; \\ $API_ENDPOINT/auth/profile # Expected: Updated profile 3. XÃ¡c minh Update trong DynamoDB\n# Check updated profile aws dynamodb get-item \\ --table-name EveryoneCook-dev \\ --key \u0026#39;{\u0026#34;PK\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;USER#testuser\u0026#34;},\u0026#34;SK\u0026#34;:{\u0026#34;S\u0026#34;:\u0026#34;PROFILE\u0026#34;}}\u0026#39; # Should show birthday, gender, country updated BÆ°á»›c 7: Test Social Features 1. Táº¡o Post\n# Create a post POST_RESPONSE=$(curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;content\u0026#34;: \u0026#34;My first post on EveryoneCook!\u0026#34;, \u0026#34;visibility\u0026#34;: \u0026#34;public\u0026#34; }\u0026#39; \\ $API_ENDPOINT/social/posts) POST_ID=$(echo $POST_RESPONSE | jq -r \u0026#39;.postId\u0026#39;) echo \u0026#34;Created post: $POST_ID\u0026#34; 2. Láº¥y Posts Feed\n# Get posts curl -X GET \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ $API_ENDPOINT/social/posts # Expected: Array of posts including the one just created 3. Like Post\n# Like the post curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ $API_ENDPOINT/social/posts/$POST_ID/like # Expected: Success message 4. Comment trÃªn Post\n# Add comment curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{\u0026#34;content\u0026#34;:\u0026#34;Great post!\u0026#34;}\u0026#39; \\ $API_ENDPOINT/social/posts/$POST_ID/comment # Expected: Comment created BÆ°á»›c 8: Test Recipe Features 1. Táº¡o Recipe\n# Create a recipe RECIPE_RESPONSE=$(curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;title\u0026#34;: \u0026#34;Pho Bo (Vietnamese Beef Noodle Soup)\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Traditional Vietnamese beef noodle soup\u0026#34;, \u0026#34;ingredients\u0026#34;: [ {\u0026#34;name\u0026#34;: \u0026#34;beef bones\u0026#34;, \u0026#34;amount\u0026#34;: \u0026#34;2\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;kg\u0026#34;}, {\u0026#34;name\u0026#34;: \u0026#34;rice noodles\u0026#34;, \u0026#34;amount\u0026#34;: \u0026#34;500\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;g\u0026#34;}, {\u0026#34;name\u0026#34;: \u0026#34;ginger\u0026#34;, \u0026#34;amount\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;piece\u0026#34;} ], \u0026#34;instructions\u0026#34;: [ \u0026#34;Boil beef bones for 2 hours\u0026#34;, \u0026#34;Add spices and simmer\u0026#34;, \u0026#34;Prepare noodles and serve\u0026#34; ], \u0026#34;cuisine\u0026#34;: \u0026#34;Vietnamese\u0026#34;, \u0026#34;difficulty\u0026#34;: \u0026#34;medium\u0026#34;, \u0026#34;prepTime\u0026#34;: 30, \u0026#34;cookTime\u0026#34;: 120 }\u0026#39; \\ $API_ENDPOINT/recipes) RECIPE_ID=$(echo $RECIPE_RESPONSE | jq -r \u0026#39;.recipeId\u0026#39;) echo \u0026#34;Created recipe: $RECIPE_ID\u0026#34; 2. Láº¥y Recipes\n# Get all recipes curl -X GET \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ $API_ENDPOINT/recipes # Expected: Array of recipes 3. Láº¥y Recipe theo ID\n# Get specific recipe curl -X GET \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ $API_ENDPOINT/recipes/$RECIPE_ID # Expected: Recipe details BÆ°á»›c 9: Test AI Features 1. Táº¡o Recipe vá»›i AI\n# Generate recipe using Bedrock curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;ingredients\u0026#34;: [\u0026#34;chicken\u0026#34;, \u0026#34;rice\u0026#34;, \u0026#34;vegetables\u0026#34;], \u0026#34;cuisine\u0026#34;: \u0026#34;Vietnamese\u0026#34;, \u0026#34;dietaryRestrictions\u0026#34;: [\u0026#34;gluten-free\u0026#34;], \u0026#34;servings\u0026#34;: 4 }\u0026#39; \\ $API_ENDPOINT/ai/generate-recipe # Expected: AI-generated recipe (takes 5-10 seconds) # Response includes Vietnamese ingredient names 2. Dá»‹ch Ingredient\n# Translate ingredient to Vietnamese curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;ingredient\u0026#34;: \u0026#34;tomato\u0026#34;, \u0026#34;targetLanguage\u0026#34;: \u0026#34;vi\u0026#34; }\u0026#39; \\ $API_ENDPOINT/ai/translate # Expected: {\u0026#34;translation\u0026#34;: \u0026#34;cÃ  chua\u0026#34;, \u0026#34;confidence\u0026#34;: 0.99} BÆ°á»›c 10: Test File Upload 1. YÃªu cáº§u Pre-signed URL\n# Get pre-signed URL for avatar upload UPLOAD_RESPONSE=$(curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;fileType\u0026#34;: \u0026#34;avatar\u0026#34;, \u0026#34;fileName\u0026#34;: \u0026#34;avatar.jpg\u0026#34;, \u0026#34;contentType\u0026#34;: \u0026#34;image/jpeg\u0026#34;, \u0026#34;fileSize\u0026#34;: 1024000 }\u0026#39; \\ $API_ENDPOINT/upload/presigned-url) PRESIGNED_URL=$(echo $UPLOAD_RESPONSE | jq -r \u0026#39;.url\u0026#39;) UPLOAD_KEY=$(echo $UPLOAD_RESPONSE | jq -r \u0026#39;.key\u0026#39;) echo \u0026#34;Pre-signed URL: $PRESIGNED_URL\u0026#34; echo \u0026#34;Upload Key: $UPLOAD_KEY\u0026#34; 2. Upload File lÃªn S3\n# Create test image echo \u0026#34;Test image content\u0026#34; \u0026gt; test-avatar.jpg # Upload using pre-signed URL curl -X PUT \\ -H \u0026#34;Content-Type: image/jpeg\u0026#34; \\ --upload-file test-avatar.jpg \\ \u0026#34;$PRESIGNED_URL\u0026#34; # Expected: 200 OK 3. ÄÃ¡nh dáº¥u Upload Complete\n# Notify backend that upload is complete curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#34;{\\\u0026#34;key\\\u0026#34;:\\\u0026#34;$UPLOAD_KEY\\\u0026#34;}\u0026#34; \\ $API_ENDPOINT/upload/complete # Expected: Success message 4. Truy cáº­p qua CloudFront\n# Access file via CloudFront CDN curl -I https://cdn.everyonecook.cloud/$UPLOAD_KEY # First request: X-Cache: Miss from cloudfront # Second request: X-Cache: Hit from cloudfront BÆ°á»›c 11: Test Search (OpenSearch) Náº¿u OpenSearch Ä‘Æ°á»£c báº­t:\n# Search recipes with Vietnamese query curl -X POST \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{ \u0026#34;query\u0026#34;: \u0026#34;phá»Ÿ bÃ²\u0026#34;, \u0026#34;filters\u0026#34;: { \u0026#34;cuisine\u0026#34;: \u0026#34;Vietnamese\u0026#34;, \u0026#34;difficulty\u0026#34;: \u0026#34;medium\u0026#34; }, \u0026#34;limit\u0026#34;: 10 }\u0026#39; \\ $API_ENDPOINT/ai/search # Expected: Array of matching recipes # Vietnamese analyzer handles: \u0026#34;phá»Ÿ bÃ²\u0026#34; = \u0026#34;pho bo\u0026#34; = \u0026#34;beef noodle soup\u0026#34; BÆ°á»›c 12: Test Admin Features 1. Liá»‡t kÃª Users (Admin Only)\n# Get all users (requires admin role) curl -X GET \\ -H \u0026#34;Authorization: Bearer $ID_TOKEN\u0026#34; \\ $API_ENDPOINT/admin/users # Expected: Array of users or 403 Forbidden if not admin BÆ°á»›c 13: XÃ¡c minh Async Processing 1. Kiá»ƒm tra SQS Queue Processing\n# Send message to SearchIndex queue QUEUE_URL=$(aws sqs list-queues \\ --queue-name-prefix EveryoneCook-dev-SearchIndexQueue \\ | jq -r \u0026#39;.QueueUrls[0]\u0026#39;) aws sqs send-message \\ --queue-url $QUEUE_URL \\ --message-body \u0026#34;{ \\\u0026#34;eventName\\\u0026#34;: \\\u0026#34;INSERT\\\u0026#34;, \\\u0026#34;tableName\\\u0026#34;: \\\u0026#34;recipes\\\u0026#34;, \\\u0026#34;keys\\\u0026#34;: {\\\u0026#34;PK\\\u0026#34;: \\\u0026#34;USER#testuser\\\u0026#34;, \\\u0026#34;SK\\\u0026#34;: \\\u0026#34;RECIPE#$RECIPE_ID\\\u0026#34;}, \\\u0026#34;newImage\\\u0026#34;: { \\\u0026#34;title\\\u0026#34;: \\\u0026#34;Pho Bo\\\u0026#34;, \\\u0026#34;ingredients\\\u0026#34;: [\\\u0026#34;beef\\\u0026#34;, \\\u0026#34;noodles\\\u0026#34;], \\\u0026#34;cuisine\\\u0026#34;: \\\u0026#34;Vietnamese\\\u0026#34; } }\u0026#34; # Check worker logs aws logs tail /aws/lambda/EveryoneCook-dev-SearchSyncWorker --follow Testing Checklist Health check pháº£n há»“i User registration hoáº¡t Ä‘á»™ng Email verification hoáº¡t Ä‘á»™ng User login thÃ nh cÃ´ng Profile CRUD operations hoáº¡t Ä‘á»™ng Posts cÃ³ thá»ƒ Ä‘Æ°á»£c táº¡o Posts cÃ³ thá»ƒ Ä‘Æ°á»£c liked Comments cÃ³ thá»ƒ Ä‘Æ°á»£c thÃªm Recipes cÃ³ thá»ƒ Ä‘Æ°á»£c táº¡o AI recipe generation hoáº¡t Ä‘á»™ng Ingredient translation hoáº¡t Ä‘á»™ng File upload lÃªn S3 hoáº¡t Ä‘á»™ng CloudFront phá»¥c vá»¥ files Search hoáº¡t Ä‘á»™ng (náº¿u OpenSearch enabled) SQS queues xá»­ lÃ½ messages Táº¥t cáº£ Lambda functions thá»±c thi khÃ´ng lá»—i Performance Benchmarks Thá»i gian pháº£n há»“i mong Ä‘á»£i:\nHealth check: \u0026lt; 50ms User login: \u0026lt; 200ms Get profile: \u0026lt; 100ms Create post: \u0026lt; 300ms Get posts feed: \u0026lt; 500ms AI recipe generation: 5-10 seconds File upload (pre-signed URL): \u0026lt; 100ms Search query: \u0026lt; 200ms CÃ¡c BÆ°á»›c Tiáº¿p Theo Sau khi táº¥t cáº£ tests pass, tiáº¿n hÃ nh Push to GitLab Ä‘á»ƒ version control code cá»§a báº¡n vÃ  thiáº¿t láº­p CI/CD.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.8-week8/",
	"title": "Worklog Tuáº§n 8",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu Tuáº§n 8: Há»c cÃ¡c khÃ¡i niá»‡m nÃ¢ng cao vá» AWS Networking gá»“m VPC Peering, Transit Gateway vÃ  PrivateLink. Triá»ƒn khai káº¿t ná»‘i hybrid cloud giá»¯a há»‡ thá»‘ng on-premises vÃ  AWS. Hiá»ƒu vÃ  cáº¥u hÃ¬nh AWS Direct Connect cho káº¿t ná»‘i máº¡ng chuyÃªn dá»¥ng. Thá»±c hÃ nh báº£o máº­t máº¡ng vÃ  quáº£n lÃ½ luá»“ng truy cáº­p hiá»‡u quáº£. GiÃ¡m sÃ¡t vÃ  xá»­ lÃ½ sá»± cá»‘ máº¡ng báº±ng VPC Flow Logs vÃ  Amazon CloudWatch. Nhiá»‡m vá»¥ thá»±c hiá»‡n trong tuáº§n: NgÃ y Nhiá»‡m vá»¥ NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh TÃ i liá»‡u tham kháº£o 2 - NghiÃªn cá»©u khÃ¡i niá»‡m VPC Peering vÃ  Transit Gateway. - Thá»±c hÃ nh: + Táº¡o káº¿t ná»‘i VPC Peering giá»¯a hai VPC. + Cáº¥u hÃ¬nh báº£ng Ä‘á»‹nh tuyáº¿n (Routing Table) Ä‘á»ƒ Ä‘iá»u hÆ°á»›ng lÆ°u lÆ°á»£ng. + Kiá»ƒm tra kháº£ nÄƒng káº¿t ná»‘i giá»¯a cÃ¡c EC2 instance. 27/10/2025 27/10/2025 AWS Study Group 3 - TÃ¬m hiá»ƒu vá» AWS PrivateLink vÃ  dá»‹ch vá»¥ endpoint. - Thá»±c hÃ nh: + Táº¡o endpoint PrivateLink Ä‘á»ƒ truy cáº­p dá»‹ch vá»¥ ná»™i bá»™. + Kiá»ƒm tra kháº£ nÄƒng truy cáº­p dá»‹ch vá»¥ mÃ  khÃ´ng sá»­ dá»¥ng Internet cÃ´ng cá»™ng. 28/10/2025 28/10/2025 AWS Study Group 4 - KhÃ¡m phÃ¡ AWS Direct Connect cho káº¿t ná»‘i máº¡ng chuyÃªn dá»¥ng. - Thá»±c hÃ nh: + Táº¡o káº¿t ná»‘i Direct Connect. + Thiáº¿t láº­p Virtual Interface (VIF) vÃ  xÃ¡c minh Ä‘á»‹nh tuyáº¿n. 29/10/2025 29/10/2025 AWS Study Group 5 - TÃ¬m hiá»ƒu vá» thiáº¿t káº¿ hybrid cloud vÃ  tÃ­ch há»£p vá»›i há»‡ thá»‘ng on-premises. - Thá»±c hÃ nh: + Káº¿t ná»‘i máº¡ng ná»™i bá»™ (on-premises) vá»›i AWS qua VPN vÃ  Direct Connect. + Kiá»ƒm tra failover vÃ  Ä‘á»‹nh tuyáº¿n giá»¯a tÃ i nguyÃªn cá»¥c bá»™ vÃ  cloud. 30/10/2025 30/10/2025 AWS Study Group 6 - Thá»±c hiá»‡n giÃ¡m sÃ¡t vÃ  báº£o máº­t máº¡ng. - Thá»±c hÃ nh: + KÃ­ch hoáº¡t VPC Flow Logs vÃ  phÃ¢n tÃ­ch lÆ°u lÆ°á»£ng. + Cáº¥u hÃ¬nh CloudWatch Alarms cho cÃ¡c báº¥t thÆ°á»ng máº¡ng. + Ãp dá»¥ng Security Group vÃ  Network ACL theo best practices. 31/10/2025 31/10/2025 AWS Study Group Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c trong Tuáº§n 8: VPC Peering \u0026amp; Transit Gateway\nThiáº¿t láº­p thÃ nh cÃ´ng cÃ¡c káº¿t ná»‘i VPC Peering vÃ  kiá»ƒm tra luá»“ng giao tiáº¿p giá»¯a cÃ¡c VPC. Cáº¥u hÃ¬nh Transit Gateway Ä‘á»ƒ táº­p trung Ä‘á»‹nh tuyáº¿n giá»¯a nhiá»u VPC. AWS PrivateLink\nTáº¡o endpoint PrivateLink cho phÃ©p truy cáº­p dá»‹ch vá»¥ AWS má»™t cÃ¡ch riÃªng tÆ° vÃ  báº£o máº­t. XÃ¡c minh lÆ°u lÆ°á»£ng khÃ´ng Ä‘i qua Internet cÃ´ng cá»™ng, Ä‘áº£m báº£o tÃ­nh an toÃ n cao. AWS Direct Connect\nCáº¥u hÃ¬nh káº¿t ná»‘i máº¡ng chuyÃªn dá»¥ng thÃ´ng qua Direct Connect. Kiá»ƒm tra Ä‘á»‹nh tuyáº¿n vÃ  cáº£i thiá»‡n hiá»‡u suáº¥t káº¿t ná»‘i giá»¯a on-premises vÃ  AWS. TÃ­ch há»£p Hybrid Cloud\nKáº¿t ná»‘i máº¡ng ná»™i bá»™ vá»›i AWS báº±ng VPN vÃ  Direct Connect. Kiá»ƒm tra tÃ­nh sáºµn sÃ ng, Ä‘á»‹nh tuyáº¿n vÃ  kháº£ nÄƒng chuyá»ƒn Ä‘á»•i (failover) giá»¯a hai mÃ´i trÆ°á»ng. GiÃ¡m sÃ¡t \u0026amp; Báº£o máº­t Máº¡ng\nKÃ­ch hoáº¡t VPC Flow Logs Ä‘á»ƒ theo dÃµi luá»“ng lÆ°u lÆ°á»£ng máº¡ng. Thiáº¿t láº­p CloudWatch Alarms Ä‘á»ƒ phÃ¡t hiá»‡n báº¥t thÆ°á»ng. Ãp dá»¥ng cÃ¡c cáº¥u hÃ¬nh báº£o máº­t tá»‘t nháº¥t vá»›i Security Group vÃ  NACL. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.09-push-gitlab/",
	"title": "Push lÃªn GitLab",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Sau khi test thÃ nh cÃ´ng, báº¡n sáº½ push code lÃªn GitLab Ä‘á»ƒ version control vÃ  chuáº©n bá»‹ cho CI/CD.\nBÆ°á»›c 1: Khá»Ÿi táº¡o Git Repository 1. Kiá»ƒm tra Git Status\n# Di chuyá»ƒn Ä‘áº¿n project root cd /path/to/everyonecook-dev # Kiá»ƒm tra Git Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi táº¡o chÆ°a git status # Náº¿u chÆ°a khá»Ÿi táº¡o: git init 2. Cáº¥u hÃ¬nh Git\n# Äáº·t tÃªn vÃ  email cá»§a báº¡n git config user.name \u0026#34;Your Name\u0026#34; git config user.email \u0026#34;your.email@example.com\u0026#34; # XÃ¡c minh cáº¥u hÃ¬nh git config --list BÆ°á»›c 2: Táº¡o .gitignore 1. Táº¡o file .gitignore\n# Táº¡o .gitignore cat \u0026gt; .gitignore \u0026lt;\u0026lt; \u0026#39;EOF\u0026#39; # Dependencies node_modules/ package-lock.json yarn.lock # Build outputs dist/ build/ *.js.map *.d.ts.map cdk.out/ .next/ # Environment variables .env .env.local .env.*.local # AWS *.pem *.key cloudfront-private-key.pem # Deployment packages *.zip deployment/ # Logs logs/ *.log npm-debug.log* yarn-debug.log* yarn-error.log* # IDE .vscode/ .idea/ *.swp *.swo *~ # OS .DS_Store Thumbs.db # Test coverage coverage/ .nyc_output/ # Temporary files tmp/ temp/ *.tmp # CDK cdk.context.json outputs.json # TypeScript *.tsbuildinfo EOF BÆ°á»›c 3: Stage vÃ  Commit Files 1. ThÃªm Files vÃ o Staging\n# ThÃªm táº¥t cáº£ files git add . # Kiá»ƒm tra nhá»¯ng gÃ¬ sáº½ Ä‘Æ°á»£c commit git status 2. Táº¡o Initial Commit\n# Commit vá»›i message git commit -m \u0026#34;Initial commit: EveryoneCook infrastructure and backend\u0026#34; # XÃ¡c minh commit git log --oneline Screenshot: Terminal hiá»ƒn thá»‹ initial commit\nBÆ°á»›c 4: Táº¡o GitLab Repository 1. ÄÄƒng nháº­p vÃ o GitLab\nTruy cáº­p https://gitlab.com/ vÃ  Ä‘Äƒng nháº­p\n2. Táº¡o New Project\nClick \u0026ldquo;New project\u0026rdquo; Chá»n \u0026ldquo;Create blank project\u0026rdquo; TÃªn project: everyonecook Visibility: Private (khuyáº¿n nghá»‹) Initialize with README: No (chÃºng ta Ä‘Ã£ cÃ³ code) Click \u0026ldquo;Create project\u0026rdquo; Screenshot: GitLab hiá»ƒn thá»‹ project má»›i Ä‘Æ°á»£c táº¡o\nTÃ³m táº¯t Git Workflow 1. Táº¡o feature branch tá»« dev\rgit checkout -b feature/new-feature\r2. Thá»±c hiá»‡n thay Ä‘á»•i vÃ  commit\rgit add .\rgit commit -m \u0026#34;Description\u0026#34;\r3. Push lÃªn GitLab\rgit push -u origin feature/new-feature\r4. Táº¡o merge request trÃªn GitLab\rfeature/new-feature â†’ dev\r5. Review, test, vÃ  merge\r6. Deploy lÃªn dev environment\r(manual trigger trong GitLab CI/CD)\r7. Test trong dev environment\r8. Merge dev â†’ main cho production\r9. Deploy lÃªn production\r(manual trigger trong GitLab CI/CD)\r10. Tag release\rgit tag -a v1.0.0 -m \u0026#34;Release\u0026#34; Best Practices Commit Messages:\nfeat: ThÃªm user authentication\rfix: Sá»­a lá»—i login\rdocs: Cáº­p nháº­t README\rstyle: Format code\rrefactor: Refactor user service\rtest: ThÃªm unit tests\rchore: Cáº­p nháº­t dependencies Äáº·t tÃªn Branch:\nfeature/add-notifications\rbugfix/fix-login-error\rhotfix/critical-security-patch\rrelease/v1.0.0 Kháº¯c phá»¥c sá»± cá»‘ Váº¥n Ä‘á»: Authentication failed\n# Sá»­ dá»¥ng personal access token thay vÃ¬ password # Táº¡o token: GitLab â†’ Settings â†’ Access Tokens # Sá»­ dá»¥ng token lÃ m password khi push Váº¥n Ä‘á»: Large files rejected\n# Kiá»ƒm tra kÃ­ch thÆ°á»›c file git ls-files -z | xargs -0 du -h | sort -h # XÃ³a large files khá»i history git filter-branch --tree-filter \u0026#39;rm -f large-file.zip\u0026#39; HEAD Váº¥n Ä‘á»: Merge conflicts\n# Cáº­p nháº­t branch cá»§a báº¡n git checkout feature/your-feature git fetch origin git merge origin/dev # Giáº£i quyáº¿t conflicts trong files # Sau Ä‘Ã³ commit git add . git commit -m \u0026#34;Resolve merge conflicts\u0026#34; git push BÆ°á»›c tiáº¿p theo Sau khi push code lÃªn GitLab, tiáº¿p tá»¥c vá»›i Deploy lÃªn Amplify Ä‘á»ƒ triá»ƒn khai á»©ng dá»¥ng frontend.\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.9-week9/",
	"title": "Worklog Tuáº§n 9",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu Tuáº§n 9: Há»c cÃ¡ch thiáº¿t káº¿ CI/CD pipeline an toÃ n vÃ  cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng. XÃ¢y dá»±ng quy trÃ¬nh triá»ƒn khai á»©ng dá»¥ng báº±ng AWS CodePipeline, CodeBuild vÃ  CodeDeploy. TÃ­ch há»£p GitHub hoáº·c CodeCommit lÃ m nguá»“n mÃ£. Tá»± Ä‘á»™ng hÃ³a viá»‡c triá»ƒn khai á»©ng dá»¥ng lÃªn EC2 vÃ  Lambda. TÄƒng cÆ°á»ng báº£o máº­t pipeline vÃ  thÃªm cÃ¡c bÆ°á»›c kiá»ƒm thá»­ tá»± Ä‘á»™ng. CÃ¡c nhiá»‡m vá»¥ thá»±c hiá»‡n trong tuáº§n: Day Task Start Date Completion Date Reference Material 2 - TÃ¬m hiá»ƒu khÃ¡i niá»‡m CI/CD trÃªn AWS.\n- Hiá»ƒu cÃ¡ch CodePipeline Ä‘iá»u phá»‘i cÃ¡c bÆ°á»›c build â†’ test â†’ deploy.\n- Thá»±c hÃ nh: + Táº¡o má»™t CodePipeline Ä‘Æ¡n giáº£n vá»›i GitHub lÃ m nguá»“n mÃ£.\n03/11/2025 03/11/2025 AWS Study Group 3 - Há»c AWS CodeBuild Ä‘á»ƒ build vÃ  kiá»ƒm thá»­ á»©ng dá»¥ng.\n- Thá»±c hÃ nh: + Viáº¿t file buildspec.yml.\n+ Cháº¡y build tá»± Ä‘á»™ng vÃ  unit test.\n04/11/2025 04/11/2025 AWS Study Group 4 - LÃ m viá»‡c vá»›i AWS CodeDeploy Ä‘á»ƒ tá»± Ä‘á»™ng triá»ƒn khai á»©ng dá»¥ng.\n- Thá»±c hÃ nh: + Táº¡o deployment group cho EC2.\n+ Triá»ƒn khai á»©ng dá»¥ng báº±ng AppSpec.\n+ Thá»­ triá»ƒn khai in-place vÃ  blue/green.\n05/11/2025 05/11/2025 AWS Study Group 5 - TÃ­ch há»£p triá»ƒn khai Lambda vÃ o CodePipeline.\n- Thá»±c hÃ nh: + Deploy hÃ m Lambda báº±ng CodeDeploy.\n+ Kiá»ƒm thá»­ chiáº¿n lÆ°á»£c triá»ƒn khai Linear vÃ  Canary.\n06/11/2025 06/11/2025 AWS Study Group 6 - ThÃªm báº£o máº­t vÃ  giÃ¡m sÃ¡t cho pipeline.\n- Thá»±c hÃ nh: + Báº­t CloudWatch vÃ  SNS notifications.\n+ Cáº¥u hÃ¬nh IAM cho tá»«ng stage trong pipeline.\n+ ThÃªm bÆ°á»›c test/approval Ä‘á»ƒ triá»ƒn khai an toÃ n hÆ¡n.\n07/11/2025 07/11/2025 AWS Study Group ThÃ nh tá»±u Tuáº§n 9: Kiáº¿n thá»©c ná»n táº£ng vá» CI/CD Pipeline\nHiá»ƒu quy trÃ¬nh CI/CD: source â†’ build â†’ test â†’ deploy. XÃ¢y dá»±ng thÃ nh cÃ´ng CodePipeline Ä‘áº§u tiÃªn tÃ­ch há»£p GitHub. Tá»± Ä‘á»™ng hÃ³a Build (CodeBuild)\nViáº¿t Ä‘áº§y Ä‘á»§ file buildspec.yml phá»¥c vá»¥ build \u0026amp; test tá»± Ä‘á»™ng. Cháº¡y build thÃ nh cÃ´ng trong mÃ´i trÆ°á»ng cÃ¡ch ly cá»§a CodeBuild. Tá»± Ä‘á»™ng triá»ƒn khai (CodeDeploy)\nCáº¥u hÃ¬nh deployment group cho EC2 vÃ  triá»ƒn khai theo kiá»ƒu In-place \u0026amp; Blue/Green. Hiá»ƒu rÃµ vai trÃ² cá»§a AppSpec vÃ  cÃ¡c lifecycle hook. Triá»ƒn khai Serverless\nTá»± Ä‘á»™ng triá»ƒn khai Lambda báº±ng CodeDeploy. Kiá»ƒm thá»­ cÃ¡c chiáº¿n lÆ°á»£c rollout an toÃ n nhÆ° Linear \u0026amp; Canary. Báº£o máº­t \u0026amp; Quáº£n trá»‹ Pipeline\nThÃªm bÆ°á»›c phÃª duyá»‡t, phÃ¢n quyá»n IAM chi tiáº¿t cho tá»«ng stage. Theo dÃµi pipeline báº±ng CloudWatch \u0026amp; SNS. Cáº£i thiá»‡n Ä‘á»™ á»•n Ä‘á»‹nh vÃ  an toÃ n cá»§a toÃ n bá»™ CI/CD workflow. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.10-deploy-amplify/",
	"title": "Deploy lÃªn Amplify",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan BÆ°á»›c cuá»‘i cÃ¹ng lÃ  deploy frontend Next.js 15 lÃªn AWS Amplify vá»›i tÃ­ch há»£p GitLab Ä‘á»ƒ tá»± Ä‘á»™ng deploy khi cÃ³ code má»›i.\nBÆ°á»›c 1: Chuáº©n bá»‹ Frontend Code 1. Kiá»ƒm tra Frontend Structure\ncd frontend # Kiá»ƒm tra package.json cat package.json # Pháº£i hiá»ƒn thá»‹ Next.js 15 2. Test Frontend Locally\n# CÃ i Ä‘áº·t dependencies npm install # Cháº¡y development server npm run dev # Má»Ÿ http://localhost:3000 3. Build Frontend\n# Build cho production npm run build # Test production build npm start BÆ°á»›c 2: Táº¡o Amplify App 1. VÃ o AWS Amplify Console\nMá»Ÿ AWS Console TÃ¬m kiáº¿m \u0026ldquo;Amplify\u0026rdquo; Click \u0026ldquo;Get started\u0026rdquo; hoáº·c \u0026ldquo;New app\u0026rdquo; 2. Káº¿t ná»‘i vá»›i GitLab\nChá»n \u0026ldquo;Host web app\u0026rdquo; Chá»n \u0026ldquo;GitLab\u0026rdquo; Click \u0026ldquo;Connect branch\u0026rdquo; á»¦y quyá»n AWS Amplify truy cáº­p GitLab Screenshot: Amplify hiá»ƒn thá»‹ káº¿t ná»‘i GitLab\n3. Chá»n Repository\nChá»n repository: everyonecook Chá»n branch: main (hoáº·c dev cho development) Click \u0026ldquo;Next\u0026rdquo; BÆ°á»›c 3: Cáº¥u hÃ¬nh Build Settings 1. TÃªn App\nApp name: everyonecook-frontend 2. Build Settings\nAmplify tá»± Ä‘á»™ng phÃ¡t hiá»‡n Next.js, nhÆ°ng hÃ£y xÃ¡c minh:\nversion: 1 applications: - frontend: phases: preBuild: commands: - export HUSKY=0 - npm install --legacy-peer-deps --ignore-scripts build: commands: - echo \u0026#34;=== Creating .env.production from Amplify env vars ===\u0026#34; - rm -f .env.production - env | grep -e NEXT_PUBLIC_ \u0026gt; .env.production || true - echo \u0026#34;=== .env.production content ===\u0026#34; - cat .env.production - echo \u0026#34;=== Building frontend ===\u0026#34; - npm run build artifacts: baseDirectory: .next files: - \u0026#39;**/*\u0026#39; cache: paths: - node_modules/**/* - .next/cache/**/* appRoot: frontend 3. Advanced Settings\nThÃªm environment variables:\nNEXT_PUBLIC_API_URL=https://api.everyonecook.cloud\rNEXT_PUBLIC_CDN_URL=https://cdn.everyonecook.cloud\rNEXT_PUBLIC_USER_POOL_ID=us-east-1_ABC123\rNEXT_PUBLIC_USER_POOL_CLIENT_ID=abc123def456\rNEXT_PUBLIC_REGION=us-east-1 Screenshot: Cáº¥u hÃ¬nh environment variables cá»§a Amplify\nBÆ°á»›c 4: Deploy Frontend 1. Báº¯t Ä‘áº§u Deployment\nClick \u0026ldquo;Save and deploy\u0026rdquo;\nAmplify sáº½:\nClone repository tá»« GitLab CÃ i Ä‘áº·t dependencies Build Next.js app Deploy lÃªn CDN Cung cáº¥p domain 2. Theo dÃµi Deployment\nXem tiáº¿n trÃ¬nh deployment:\nProvision Build Deploy Verify 3. Äá»£i HoÃ n thÃ nh\nDeployment máº¥t 5-10 phÃºt.\nScreenshot: Amplify hiá»ƒn thá»‹ deployment thÃ nh cÃ´ng\nBÆ°á»›c 5: Cáº¥u hÃ¬nh Custom Domain 1. ThÃªm Custom Domain\nVÃ o Amplify app â†’ Domain management Click \u0026ldquo;Add domain\u0026rdquo; Nháº­p domain: everyonecook.cloud Amplify sáº½ tá»± Ä‘á»™ng cáº¥u hÃ¬nh: Root domain: everyonecook.cloud WWW subdomain: www.everyonecook.cloud 2. Cáº¥u hÃ¬nh DNS\nAmplify tá»± Ä‘á»™ng táº¡o DNS records trong Route 53:\neveryonecook.cloud â†’ A record â†’ Amplify\rwww.everyonecook.cloud â†’ CNAME â†’ Amplify 3. SSL Certificate\nAmplify tá»± Ä‘á»™ng cung cáº¥p SSL certificate qua ACM.\n4. Äá»£i DNS Propagation\nMáº¥t 5-15 phÃºt.\nScreenshot: Amplify hiá»ƒn thá»‹ custom domain Ä‘Ã£ cáº¥u hÃ¬nh\nBÆ°á»›c 6: XÃ¡c minh Deployment 1. Truy cáº­p Frontend\n# Qua Amplify domain curl -I https://main.d1234567890.amplifyapp.com # Qua custom domain curl -I https://everyonecook.cloud # Pháº£i tráº£ vá» 200 OK 2. Test Chá»©c nÄƒng Frontend\nMá»Ÿ https://everyonecook.cloud trong trÃ¬nh duyá»‡t Test Ä‘Äƒng kÃ½ user Test Ä‘Äƒng nháº­p Test táº¡o posts Test táº¡o recipes Test tÃ­nh nÄƒng AI Screenshot: TrÃ¬nh duyá»‡t hiá»ƒn thá»‹ EveryoneCook frontend Ä‘ang cháº¡y\nBest Practices Sá»­ dá»¥ng Environment Variables: KhÃ´ng bao giá» hardcode API URLs Báº­t Auto-Deploy: Tá»± Ä‘á»™ng deployments khi push Nhiá»u Environments: TÃ¡ch biá»‡t dev vÃ  prod Monitor Performance: Sá»­ dá»¥ng Amplify metrics Thiáº¿t láº­p Notifications: Nháº­n cáº£nh bÃ¡o khi build fails Sá»­ dá»¥ng Custom Domain: Giao diá»‡n chuyÃªn nghiá»‡p Báº­t HTTPS: LuÃ´n sá»­ dá»¥ng SSL Cáº¥u hÃ¬nh Headers: Security headers Ä‘á»ƒ báº£o vá»‡ BÆ°á»›c tiáº¿p theo ChÃºc má»«ng! á»¨ng dá»¥ng cá»§a báº¡n giá» Ä‘Ã£ Ä‘Æ°á»£c deploy Ä‘áº§y Ä‘á»§:\nâœ… Infrastructure trÃªn AWS âœ… Backend APIs Ä‘ang cháº¡y âœ… Frontend trÃªn Amplify âœ… Code trÃªn GitLab âœ… CI/CD Ä‘Ã£ cáº¥u hÃ¬nh Tiáº¿p tá»¥c Ä‘áº¿n Cleanup khi báº¡n hoÃ n thÃ nh testing, hoáº·c báº¯t Ä‘áº§u sá»­ dá»¥ng á»©ng dá»¥ng!\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.10-week10/",
	"title": "Worklog Tuáº§n 10",
	"tags": [],
	"description": "",
	"content": "Week 10 Objectives: Há»c cÃ¡ch lÃ m viá»‡c vá»›i mÃ¡y áº£o báº±ng VMWare vÃ  chuyá»ƒn chÃºng lÃªn AWS. Thá»±c hÃ nh quáº£n lÃ½ S3 bucket, phÃ¢n quyá»n, static website hosting vÃ  CloudFront. Thiáº¿t láº­p vÃ  sá»­ dá»¥ng AWS Storage Gateway, file shares vÃ  há»‡ thá»‘ng file Multi-AZ. NÃ¢ng cao ká»¹ nÄƒng giÃ¡m sÃ¡t, kiá»ƒm tra hiá»‡u nÄƒng, má»Ÿ rá»™ng lÆ°u trá»¯ vÃ  dá»n dáº¹p tÃ i nguyÃªn trÃªn AWS. Tasks to be carried out this week: Day Task Start Date Completion Date Reference Material 2 - VMWare Workstation + Xuáº¥t mÃ¡y áº£o tá»« On-premises + Upload mÃ¡y áº£o lÃªn AWS + Import mÃ¡y áº£o vÃ o AWS + Triá»ƒn khai EC2 Instance tá»« AMI 17/09/2025 17/09/2025 AWS Study Group 3 - Thiáº¿t láº­p S3 bucket ACL - Xuáº¥t mÃ¡y áº£o tá»« instance + Dá»n dáº¹p tÃ i nguyÃªn trÃªn AWS Cloud + Táº¡o Storage Gateway + Táº¡o File Shares + Mount File Shares lÃªn On-premises 18/09/2025 18/09/2025 AWS Study Group 4 - Thá»±c hÃ nh: + Táº¡o HDD Multi-AZ file system + Táº¡o file share má»›i + Kiá»ƒm tra hiá»‡u nÄƒng + Theo dÃµi hiá»‡u nÄƒng + Báº­t tÃ­nh nÄƒng deduplication + Quáº£n lÃ½ user sessions vÃ  open files + Má»Ÿ rá»™ng throughput capacity vÃ  storage capacity + XÃ³a mÃ´i trÆ°á»ng 19/09/2025 19/09/2025 AWS Study Group 5 - Táº¡o S3 bucket + Táº£i dá»¯ liá»‡u lÃªn + Báº­t tÃ­nh nÄƒng static website hosting + Cáº¥u hÃ¬nh Public Access Block vÃ  cáº¥p quyá»n public cho object 20/09/2025 20/09/2025 AWS Study Group 6 - Kiá»ƒm tra website + Cháº·n toÃ n bá»™ public access + Cáº¥u hÃ¬nh Amazon CloudFront + Kiá»ƒm tra hoáº¡t Ä‘á»™ng cá»§a CloudFront 21/09/2025 21/09/2025 AWS Study Group Week 10 Achievements: Náº¯m vá»¯ng kiáº¿n thá»©c ná»n táº£ng vá» AWS vÃ  cÃ¡c nhÃ³m dá»‹ch vá»¥ chÃ­nh bao gá»“m Compute, Storage, Networking vÃ  Database. Táº¡o vÃ  cáº¥u hÃ¬nh thÃ nh cÃ´ng tÃ i khoáº£n AWS Free Tier phá»¥c vá»¥ má»¥c Ä‘Ã­ch há»c táº­p vÃ  thá»±c hÃ nh. LÃ m quen vá»›i AWS Management Console vÃ  biáº¿t cÃ¡ch Ä‘iá»u hÆ°á»›ng giao diá»‡n, tÃ¬m kiáº¿m dá»‹ch vá»¥ vÃ  quáº£n lÃ½ tÃ i nguyÃªn. CÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh AWS CLI, bao gá»“m thiáº¿t láº­p Access Key, Secret Key vÃ  Default Region Ä‘á»ƒ thao tÃ¡c qua dÃ²ng lá»‡nh. Thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ quan trá»ng vá»›i AWS CLI nhÆ° kiá»ƒm tra thÃ´ng tin cáº¥u hÃ¬nh, liá»‡t kÃª cÃ¡c vÃ¹ng (region), tÆ°Æ¡ng tÃ¡c vá»›i dá»‹ch vá»¥ EC2 vÃ  táº¡o hoáº·c quáº£n lÃ½ key pairs. PhÃ¡t triá»ƒn kháº£ nÄƒng quáº£n lÃ½ tÃ i nguyÃªn AWS song song báº±ng cáº£ Console vÃ  CL "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/5-workshop/5.11-cleanup/",
	"title": "Dá»n dáº¹p tÃ i nguyÃªn",
	"tags": [],
	"description": "",
	"content": "Tá»•ng quan Khi báº¡n hoÃ n thÃ nh workshop vÃ  khÃ´ng muá»‘n tiáº¿p tá»¥c sá»­ dá»¥ng, hÃ£y xÃ³a táº¥t cáº£ tÃ i nguyÃªn Ä‘á»ƒ trÃ¡nh phÃ¡t sinh chi phÃ­.\nâš ï¸ Cáº£nh bÃ¡o: QuÃ¡ trÃ¬nh nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c. Táº¥t cáº£ dá»¯ liá»‡u sáº½ bá»‹ xÃ³a vÄ©nh viá»…n.\nThá»© tá»± Dá»n dáº¹p Pháº£i xÃ³a theo thá»© tá»± ngÆ°á»£c láº¡i vá»›i deployment:\n1. Amplify App (Frontend)\r2. Observability Stack\r3. Backend Stack\r4. Auth Stack\r5. Core Stack\r6. Certificate Stack\r7. DNS Stack\r8. CDK Bootstrap (tÃ¹y chá»n) BÆ°á»›c 1: XÃ³a Amplify App 1. XÃ³a qua Console\nVÃ o AWS Amplify Console Chá»n app cá»§a báº¡n Click \u0026ldquo;Actions\u0026rdquo; â†’ \u0026ldquo;Delete app\u0026rdquo; Nháº­p tÃªn app Ä‘á»ƒ xÃ¡c nháº­n Click \u0026ldquo;Delete\u0026rdquo; 2. XÃ³a qua CLI\n# Láº¥y app ID APP_ID=$(aws amplify list-apps \\ --query \u0026#39;apps[?name==`everyonecook-frontend`].appId\u0026#39; \\ --output text) # XÃ³a app aws amplify delete-app --app-id $APP_ID BÆ°á»›c 2: LÃ m trá»‘ng S3 Buckets S3 buckets pháº£i Ä‘Æ°á»£c lÃ m trá»‘ng trÆ°á»›c khi xÃ³a:\n# Liá»‡t kÃª táº¥t cáº£ EveryoneCook buckets aws s3 ls | grep everyonecook # LÃ m trá»‘ng tá»«ng bucket (4 buckets) aws s3 rm s3://everyonecook-content-dev-xxxxx --recursive aws s3 rm s3://everyonecook-logs-dev-xxxxx --recursive aws s3 rm s3://everyonecook-emails-dev-xxxxx --recursive aws s3 rm s3://everyonecook-cdn-logs-dev-xxxxx --recursive # Hoáº·c sá»­ dá»¥ng PowerShell script $buckets = aws s3 ls | Select-String \u0026#34;everyonecook\u0026#34; | ForEach-Object { $_.ToString().Split()[-1] } foreach ($bucket in $buckets) { Write-Host \u0026#34;Emptying bucket: $bucket\u0026#34; aws s3 rm \u0026#34;s3://$bucket\u0026#34; --recursive } BÆ°á»›c 3: XÃ³a CDK Stacks 1. XÃ³a Observability Stack\ncd infrastructure # XÃ³a Observability stack npx cdk destroy EveryoneCook-dev-Observability --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n 2. XÃ³a Backend Stack\n# XÃ³a Backend stack npx cdk destroy EveryoneCook-dev-Backend --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n 3. XÃ³a Auth Stack\n# XÃ³a Auth stack npx cdk destroy EveryoneCook-dev-Auth --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n 4. XÃ³a Core Stack\n# XÃ³a Core stack (máº¥t 15-20 phÃºt do CloudFront) npx cdk destroy EveryoneCook-dev-Core --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n 5. XÃ³a Certificate Stack\n# XÃ³a Certificate stack npx cdk destroy EveryoneCook-dev-Certificate --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n 6. XÃ³a DNS Stack (TÃ¹y chá»n)\n# XÃ³a DNS stack (chá»‰ náº¿u báº¡n khÃ´ng cáº§n domain) npx cdk destroy EveryoneCook-dev-DNS --context environment=dev # Nháº­p \u0026#39;y\u0026#39; Ä‘á»ƒ xÃ¡c nháº­n BÆ°á»›c 4: XÃ¡c minh Táº¥t cáº£ Stacks Ä‘Ã£ XÃ³a # Liá»‡t kÃª cÃ¡c stacks cÃ²n láº¡i aws cloudformation list-stacks \\ --stack-status-filter CREATE_COMPLETE UPDATE_COMPLETE \\ --query \u0026#39;StackSummaries[?contains(StackName, `EveryoneCook-dev`)].StackName\u0026#39; # Pháº£i tráº£ vá» máº£ng rá»—ng BÆ°á»›c 5: XÃ³a CDK Bootstrap (TÃ¹y chá»n) âš ï¸ Chá»‰ lÃ m Ä‘iá»u nÃ y náº¿u báº¡n Ä‘Ã£ xong hoÃ n toÃ n vá»›i CDK:\n# XÃ³a CDK bootstrap stack aws cloudformation delete-stack --stack-name CDKToolkit # LÃ m trá»‘ng vÃ  xÃ³a CDK assets bucket BUCKET_NAME=$(aws s3 ls | grep cdk | awk \u0026#39;{print $3}\u0026#39;) aws s3 rm s3://$BUCKET_NAME --recursive aws s3 rb s3://$BUCKET_NAME BÆ°á»›c 6: XÃ³a GitLab Repository (TÃ¹y chá»n) 1. Archive Repository\nVÃ o GitLab â†’ Settings â†’ General KÃ©o xuá»‘ng \u0026ldquo;Advanced\u0026rdquo; Click \u0026ldquo;Archive project\u0026rdquo; 2. XÃ³a Repository\nVÃ o GitLab â†’ Settings â†’ General KÃ©o xuá»‘ng \u0026ldquo;Advanced\u0026rdquo; Click \u0026ldquo;Delete project\u0026rdquo; Nháº­p tÃªn project Ä‘á»ƒ xÃ¡c nháº­n Click \u0026ldquo;Yes, delete project\u0026rdquo; BÆ°á»›c 7: XÃ¡c minh Dá»n dáº¹p HoÃ n táº¥t 1. Kiá»ƒm tra CloudFormation\naws cloudformation list-stacks \\ --stack-status-filter CREATE_COMPLETE UPDATE_COMPLETE \\ | grep EveryoneCook # KhÃ´ng tráº£ vá» gÃ¬ 2. Kiá»ƒm tra S3\naws s3 ls | grep everyonecook # KhÃ´ng tráº£ vá» gÃ¬ 3. Kiá»ƒm tra Lambda\naws lambda list-functions | grep EveryoneCook # KhÃ´ng tráº£ vá» gÃ¬ 4. Kiá»ƒm tra DynamoDB\naws dynamodb list-tables | grep EveryoneCook # KhÃ´ng tráº£ vá» gÃ¬ 5. Kiá»ƒm tra API Gateway\naws apigateway get-rest-apis | grep EveryoneCook # KhÃ´ng tráº£ vá» gÃ¬ 6. Kiá»ƒm tra Cognito\naws cognito-idp list-user-pools --max-results 10 | grep EveryoneCook # KhÃ´ng tráº£ vá» gÃ¬ 7. Kiá»ƒm tra CloudFront\naws cloudfront list-distributions | grep EveryoneCook # KhÃ´ng tráº£ vá» gÃ¬ 8. Kiá»ƒm tra OpenSearch\naws opensearch list-domain-names | grep everyonecook # KhÃ´ng tráº£ vá» gÃ¬ 9. Kiá»ƒm tra Amplify\naws amplify list-apps | grep everyonecook # KhÃ´ng tráº£ vá» gÃ¬ Chi phÃ­ Sau Dá»n dáº¹p Ngay láº­p tá»©c:\nHáº§u háº¿t tÃ i nguyÃªn: $0/thÃ¡ng Route 53 Hosted Zone: $0.50/thÃ¡ng (náº¿u giá»¯ láº¡i) KMS keys: ÄÃ£ lÃªn lá»‹ch xÃ³a (7-30 ngÃ y), khÃ´ng tÃ­nh phÃ­ trong thá»i gian chá» Sau 30 ngÃ y:\nMá»i thá»©: $0/thÃ¡ng (náº¿u DNS stack cÅ©ng Ä‘Ã£ xÃ³a) Kháº¯c phá»¥c sá»± cá»‘ Dá»n dáº¹p Váº¥n Ä‘á»: S3 bucket xÃ³a tháº¥t báº¡i\n# Buá»™c lÃ m trá»‘ng vÃ  xÃ³a aws s3 rb s3://bucket-name --force Váº¥n Ä‘á»: CloudFormation stack bá»‹ stuck\n# Kiá»ƒm tra stack events aws cloudformation describe-stack-events \\ --stack-name EveryoneCook-dev-Core \\ --max-items 20 # Náº¿u stuck, bá» qua tÃ i nguyÃªn failed aws cloudformation delete-stack \\ --stack-name EveryoneCook-dev-Core \\ --retain-resources ResourceLogicalId Váº¥n Ä‘á»: CloudFront distribution khÃ´ng thá»ƒ xÃ³a\n# VÃ´ hiá»‡u hÃ³a distribution trÆ°á»›c DIST_ID=$(aws cloudfront list-distributions \\ --query \u0026#34;DistributionList.Items[?Comment==\u0026#39;EveryoneCook-dev\u0026#39;].Id\u0026#34; \\ --output text) # Láº¥y ETag ETAG=$(aws cloudfront get-distribution --id $DIST_ID \\ --query \u0026#34;ETag\u0026#34; --output text) # VÃ´ hiá»‡u hÃ³a distribution aws cloudfront update-distribution \\ --id $DIST_ID \\ --if-match $ETAG \\ --distribution-config file://disabled-config.json # Äá»£i 15-20 phÃºt, sau Ä‘Ã³ xÃ³a aws cloudfront delete-distribution --id $DIST_ID --if-match $ETAG Váº¥n Ä‘á»: DynamoDB table cÃ³ deletion protection\n# Táº¯t deletion protection aws dynamodb update-table \\ --table-name EveryoneCook-dev \\ --no-deletion-protection-enabled # Sau Ä‘Ã³ xÃ³a stack XÃ¡c minh Cuá»‘i cÃ¹ng # Kiá»ƒm tra AWS billing aws ce get-cost-and-usage \\ --time-period Start=2024-01-01,End=2024-01-31 \\ --granularity MONTHLY \\ --metrics BlendedCost # Pháº£i hiá»ƒn thá»‹ chi phÃ­ giáº£m dáº§n Checklist Dá»n dáº¹p Amplify app Ä‘Ã£ xÃ³a Táº¥t cáº£ S3 buckets Ä‘Ã£ lÃ m trá»‘ng vÃ  xÃ³a Observability stack Ä‘Ã£ xÃ³a Backend stack Ä‘Ã£ xÃ³a Auth stack Ä‘Ã£ xÃ³a Core stack Ä‘Ã£ xÃ³a Certificate stack Ä‘Ã£ xÃ³a DNS stack Ä‘Ã£ xÃ³a (tÃ¹y chá»n) CDK bootstrap Ä‘Ã£ xÃ³a (tÃ¹y chá»n) GitLab repository Ä‘Ã£ archive/xÃ³a (tÃ¹y chá»n) KhÃ´ng cÃ²n CloudFormation stacks KhÃ´ng cÃ²n Lambda functions KhÃ´ng cÃ²n DynamoDB tables KhÃ´ng cÃ²n S3 buckets KhÃ´ng cÃ²n CloudFront distributions KhÃ´ng cÃ²n Cognito user pools Billing hiá»ƒn thá»‹ $0 hoáº·c chi phÃ­ tá»‘i thiá»ƒu Káº¿t luáº­n Báº¡n Ä‘Ã£ hoÃ n thÃ nh workshop EveryoneCook! Báº¡n Ä‘Ã£ há»c Ä‘Æ°á»£c:\nInfrastructure as Code vá»›i AWS CDK\nServerless Architecture vá»›i Lambda vÃ  API Gateway\nDynamoDB Single Table Design vá»›i username-based PK\nOpenSearch vá»›i Vietnamese analyzer\nCloudFront CDN vá»›i Origin Access Control\nCognito Authentication vá»›i Lambda triggers\nBedrock AI integration\nGitLab version control vÃ  CI/CD\nAWS Amplify frontend deployment\nCloudWatch monitoring vÃ  X-Ray tracing\nTá»•ng cá»™ng Ä‘Ã£ deploy:\n7 CDK stacks 100+ AWS resources 6 Lambda modules + 1 worker Full-stack application CI/CD pipeline Production-ready infrastructure Cáº£m Æ¡n báº¡n Ä‘Ã£ hoÃ n thÃ nh workshop! ğŸ‰\n"
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.11-week11/",
	"title": "Worklog Tuáº§n 11",
	"tags": [],
	"description": "",
	"content": "Week 11 Objectives: Há»c vÃ  hiá»ƒu cÃ¡c dá»‹ch vá»¥ báº£o máº­t cá»§a AWS vÃ  mÃ´ hÃ¬nh Shared Responsibility. Thá»±c hÃ nh quáº£n lÃ½ IAM, Cognito, Security Hub, Key Management Service vÃ  AWS Organizations. Tráº£i nghiá»‡m thá»±c hÃ nh táº¡o vÃ  quáº£n lÃ½ VPC, Security Group, EC2 instance, Lambda role vÃ  tag cho tÃ i nguyÃªn. Tasks to be carried out this week: Day Task Start Date Completion Date Reference Material 2 - MÃ´ hÃ¬nh Shared Responsibility - Quáº£n lÃ½ danh tÃ­nh vÃ  quyá»n truy cáº­p AWS (IAM) - Amazon Cognito - AWS Organizations, Identity Center, Security Hub - Amazon Key Management Service 17/11/2025 17/11/2025 AWS Study Group 3 - Thá»±c hÃ nh: + Báº­t Security Hub + ÄÃ¡nh giÃ¡ Ä‘iá»ƒm sá»‘ theo tá»«ng tiÃªu chÃ­ + Dá»n dáº¹p tÃ i nguyÃªn 18/11/2025 18/11/2025 AWS Study Group 4 - Táº¡o VPC + Táº¡o Security Group + Táº¡o EC2 instance + Cáº¥u hÃ¬nh Incoming Web-hooks clack + Táº¡o Tag cho instance + Táº¡o Role cho Lambda 19/11/2025 19/11/2025 AWS Study Group 5 - Kiá»ƒm tra káº¿t quáº£ + TÃ­nh nÄƒng dá»«ng instance + TÃ­nh nÄƒng khá»Ÿi Ä‘á»™ng instance + Dá»n dáº¹p tÃ i nguyÃªn 20/11/2025 20/11/2025 AWS Study Group 6 - Thá»±c hÃ nh: + Táº¡o EC2 instance cÃ³ tag + Quáº£n lÃ½ tag trÃªn tÃ i nguyÃªn AWS, lá»c tÃ i nguyÃªn theo tag + Sá»­ dá»¥ng tag vá»›i CLI + Dá»n dáº¹p tÃ i nguyÃªn 21/11/2025 21/11/2025 AWS Study Group Week 11 Achievements 1. Báº£o máº­t \u0026amp; Quáº£n lÃ½ danh tÃ­nh AWS\nNáº¯m vá»¯ng cÃ¡c dá»‹ch vá»¥ báº£o máº­t cá»§a AWS, bao gá»“m IAM, Cognito, Key Management Service, Security Hub vÃ  Organizations. Há»c vÃ  Ã¡p dá»¥ng mÃ´ hÃ¬nh Shared Responsibility cho cÃ¡c tÃ i nguyÃªn AWS. Thá»±c hÃ nh báº­t Security Hub, Ä‘Ã¡nh giÃ¡ Ä‘iá»ƒm sá»‘ báº£o máº­t vÃ  dá»n dáº¹p tÃ i nguyÃªn trÃªn AWS. 2. Thiáº¿t láº­p máº¡ng \u0026amp; Compute\nTáº¡o vÃ  cáº¥u hÃ¬nh VPC, Security Group, EC2 instance vÃ  Lambda role. Ãp dá»¥ng tag cho tÃ i nguyÃªn AWS vÃ  há»c cÃ¡ch quáº£n lÃ½ hiá»‡u quáº£ dá»±a trÃªn tag. 3. Quáº£n lÃ½ tÃ i nguyÃªn \u0026amp; Tá»± Ä‘á»™ng hÃ³a\nThá»±c hÃ nh tá»± Ä‘á»™ng báº­t/táº¯t EC2 instance. Äáº£m báº£o dá»n dáº¹p tÃ i nguyÃªn Ä‘Ãºng cÃ¡ch. NÃ¢ng cao kháº£ nÄƒng quáº£n lÃ½ tÃ i nguyÃªn AWS hiá»‡u quáº£ báº±ng cÃ¡ch káº¿t há»£p Console vÃ  CLI. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/1-worklog/1.12-week12/",
	"title": "Worklog Tuáº§n 12",
	"tags": [],
	"description": "",
	"content": "Má»¥c tiÃªu tuáº§n 12: Há»c vÃ  thá»±c hÃ nh cÃ¡c dá»‹ch vá»¥ dá»¯ liá»‡u AWS bao gá»“m S3, Glue, Athena, DynamoDB, QuickSight, EMR, DataBrew, Kinesis vÃ  Lambda. Hiá»ƒu cÃ¡ch xÃ¢y dá»±ng kiáº¿n trÃºc serverless, event-driven vÃ  thá»±c hiá»‡n biáº¿n Ä‘á»•i, phÃ¢n tÃ­ch, trá»±c quan hÃ³a dá»¯ liá»‡u trÃªn AWS. Thá»±c hÃ nh quáº£n lÃ½ dataset, táº¡o dashboard vÃ  quáº£n lÃ½ chi phÃ­ \u0026amp; tÃ i nguyÃªn. Nhiá»‡m vá»¥ tuáº§n 12: NgÃ y Nhiá»‡m vá»¥ NgÃ y báº¯t Ä‘áº§u NgÃ y hoÃ n thÃ nh TÃ i liá»‡u tham kháº£o 2 - Táº¡o S3 Bucket - Táº¡o dá»¯ liá»‡u máº«u - Táº¡o Glue Crawler - Kiá»ƒm tra dá»¯ liá»‡u 24/11/2025 24/11/2025 AWS Study Group 3 - LÆ°u output vÃ o S3, thiáº¿t láº­p session káº¿t ná»‘i - PhÃ¢n tÃ­ch vá»›i Athena, trá»±c quan hÃ³a vá»›i QuickSight + Thá»±c hÃ nh Labs cá»§a Amazon + KhÃ¡m phÃ¡ DynamoDB, DynamoDB console + Backup \u0026amp; Dá»n dáº¹p 25/11/2025 25/11/2025 AWS Study Group 4 - NÃ¢ng cao Design Patterns cho DynamoDB - XÃ¢y dá»±ng kiáº¿n trÃºc Serverless Event Driven vá»›i DynamoDB + Chuáº©n bá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u + XÃ¢y dá»±ng cÆ¡ sá»Ÿ dá»¯ liá»‡u + Nháº­p dá»¯ liá»‡u vÃ o báº£ng + Chi phÃ­ + Tagging vÃ  phÃ¢n bá»• chi phÃ­ + Sá»­ dá»¥ng + Truy váº¥n káº¿t quáº£ + Dá»n dáº¹p tÃ i nguyÃªn 26/11/2025 26/11/2025 AWS Study Group 5 - CloudShell 2.2 + Console + SDK + Táº¡o Cloud9 Instance + Táº£i xuá»‘ng dataset + Upload dataset lÃªn S3 + Thiáº¿t láº­p DataBrew + Dá»n dáº¹p \u0026amp; Biáº¿n Ä‘á»•i dá»¯ liá»‡u 27/11/2025 27/11/2025 AWS Study Group 6 - Thá»±c hÃ nh: + Biáº¿n Ä‘á»•i dá»¯ liá»‡u vá»›i AWS Glue, DataBrew + Biáº¿n Ä‘á»•i dá»¯ liá»‡u vá»›i EMR + PhÃ¢n tÃ­ch vá»›i Athena + PhÃ¢n tÃ­ch vá»›i Kinesis Data Analytics + Trá»±c quan hÃ³a vá»›i QuickSight + Phá»¥c vá»¥ dá»¯ liá»‡u vá»›i Lambda + XÃ¢y dá»±ng Dashboard + Cáº£i tiáº¿n Dashboard + Táº¡o Dashboard tÆ°Æ¡ng tÃ¡c 28/11/2025 28/11/2025 AWS Study Group ThÃ nh tá»±u tuáº§n 12: 1. Quáº£n lÃ½ \u0026amp; LÆ°u trá»¯ Dá»¯ liá»‡u AWS\nTáº¡o vÃ  quáº£n lÃ½ S3 bucket vá»›i dá»¯ liá»‡u máº«u. XÃ¢y dá»±ng Glue Crawlers vÃ  chuáº©n bá»‹ dataset Ä‘á»ƒ phÃ¢n tÃ­ch. KhÃ¡m phÃ¡ DynamoDB, thiáº¿t káº¿ máº«u cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  triá»ƒn khai kiáº¿n trÃºc serverless theo sá»± kiá»‡n. 2. Biáº¿n Ä‘á»•i \u0026amp; PhÃ¢n tÃ­ch Dá»¯ liá»‡u\nSá»­ dá»¥ng AWS Glue, DataBrew vÃ  EMR Ä‘á»ƒ biáº¿n Ä‘á»•i dataset. PhÃ¢n tÃ­ch dá»¯ liá»‡u vá»›i Athena vÃ  Kinesis Data Analytics. Thá»±c hÃ nh upload, backup vÃ  dá»n dáº¹p dataset. 3. Trá»±c quan hÃ³a \u0026amp; TÃ­ch há»£p Serverless\nXÃ¢y dá»±ng dashboard vÃ  trá»±c quan hÃ³a dá»¯ liá»‡u báº±ng QuickSight. TÃ­ch há»£p Lambda Ä‘á»ƒ phá»¥c vá»¥ dá»¯ liá»‡u vÃ  táº¡o tÃ­nh tÆ°Æ¡ng tÃ¡c. Há»c cÃ¡ch quáº£n lÃ½ chi phÃ­, gÃ¡n tag vÃ  phÃ¢n bá»• tÃ i nguyÃªn hiá»‡u quáº£. Cáº£i thiá»‡n kháº£ nÄƒng quáº£n lÃ½ tÃ i nguyÃªn AWS káº¿t há»£p giá»¯a Console vÃ  CLI. "
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://Danh01092004.github.io/AWS-workshop/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]